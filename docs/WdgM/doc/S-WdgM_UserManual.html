---
layout: default
title: S-WdgM_UserManual
nav_order: 4
parent: Watchdog Manager
---
{% raw %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title></title>
  <meta name="generator" content="LibreOffice 24.2.7.2 (Linux)"/>
  <meta name="created" content="00:00:00"/>
  <meta name="changed" content="00:00:00"/>
</head>
<body>
<h1></h1>
<p>Schoenbrunner Str. 7, A-1040 Vienna, Austria, Tel. + 43 1 585 34 34-0, Fax +43 1 585 34 34-90, support@tttech-automotiv e.com</p>
<p>The data in this document may  not be altered or amended without special notif ication f rom TTTech Automotiv e GmbH. TTTech Automotiv e GmbH</p>
<p>undertakes no f urther obligation in relation to this document. The sof tware described in it can only  be used if  the customer is in possession of  a general</p>
<p>license agreement or single license.</p>
<p>Using and copy ing is only  allowed in concurrence with the specif ications stipulated in the contract. Under no circumstances may  any  part of  this</p>
<p>document be copied, reproduced, transmitted, stored in a retriev al sy stem, or translated into another language without written permission of  TTTech</p>
<p>Automotiv e GmbH.</p>
<p>The names and designations used in this document are trademarks or brands belonging to the respectiv e owners.</p>
<p>© 2011 - 2014 TTTech Automotiv e GmbH. All rights reserv ed.                                                                                 Subject to changes and</p>
<p>corrections.</p>
<p>TTTech Automotiv e GmbH Conf idential and Proprietary  Inf ormation</p>
<p><b>TTTech Automotive GmbH</b></p>
<p>3.3.1</p>
<p>22.05.2014</p>
<p>D-MSP-M-70-001</p>
<p>Version:</p>
<p>Date:</p>
<p>Document number:</p>
<p><b>Safe Watchdog Manager</b></p>
<p>User Manual</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager</b></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Page</p>
<p>2</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>Safe Watchdog Manager  3.3.1</i></p>
<p><b>Table of Contents</b></p>
<p><b>1 Introduction</b></p>
<p><b>4</b></p>
<p><b>................................................................................................................................... 5</b></p>
<p><b>1.1 Architecture Overview</b></p>
<p><b>................................................................................................................................... 7</b></p>
<p><b>1.2 Use Cases</b></p>
<p><b>................................................................................................................................... 8</b></p>
<p><b>1.3 Safe Watchdog Manager Stack Content</b></p>
<p><b>2 Safe Watchdog Manager (S-WdgM)</b></p>
<p><b>9</b></p>
<p><b>................................................................................................................................... 10</b></p>
<p><b>2.1 File Structure</b></p>
<p><b>................................................................................................................................... 13</b></p>
<p><b>2.2 Basic Functionality of the S-WdgM</b></p>
<p><b>.......................................................................................................................................................... 13</b></p>
<p><b>2.2.1    Supervised Entity and Program Flow Supervision </b></p>
<p><b>.......................................................................................................................................................... 15</b></p>
<p><b>2.2.2    Deadline Monitoring </b></p>
<p><b>.......................................................................................................................................................... 18</b></p>
<p><b>2.2.3    Alive Supervision </b></p>
<p><b>.......................................................................................................................................................... 21</b></p>
<p><b>2.2.4    More Details on Checkpoints and Transitions </b></p>
<p><b>.......................................................................................................................................................... 22</b></p>
<p><b>2.2.5    Global Transitions </b></p>
<p><b>.......................................................................................................................................................... 24</b></p>
<p><b>2.2.6    Global Transitions and Program Flow </b></p>
<p>......................................................................................................................................................... 24</p>
<p>Example of an Incorrect Global Transition Split</p>
<p>......................................................................................................................................................... 25</p>
<p>Example of an Incorrect Program Split in the Middle of an Entity</p>
<p><b>.......................................................................................................................................................... 25</b></p>
<p><b>2.2.7    S-WdgM Supervision Cycle </b></p>
<p><b>.......................................................................................................................................................... 27</b></p>
<p><b>2.2.8    S-WdgM Stack Fault Reaction Time </b></p>
<p><b>.......................................................................................................................................................... 30</b></p>
<p><b>2.2.9    Reset Path and Safe State </b></p>
<p><b>.......................................................................................................................................................... 31</b></p>
<p><b>2.2.10    S-WdgM Local Entity State </b></p>
<p><b>.......................................................................................................................................................... 33</b></p>
<p><b>2.2.11    S-WdgM Global State </b></p>
<p><b>................................................................................................................................... 33</b></p>
<p><b>2.3 Integration in AUTOSAR 3.1 and 4.0 Environments</b></p>
<p><b>................................................................................................................................... 34</b></p>
<p><b>2.4 Deviations from the AUTOSAR 4.0 r1 Watchdog Manager</b></p>
<p><b>.......................................................................................................................................................... 34</b></p>
<p><b>2.4.1    Entities, Checkpoints and Transitions </b></p>
<p><b>.......................................................................................................................................................... 36</b></p>
<p><b>2.4.2    Tolerances </b></p>
<p><b>.......................................................................................................................................................... 36</b></p>
<p><b>2.4.3    Watchdog and Reset </b></p>
<p><b>.......................................................................................................................................................... 36</b></p>
<p><b>2.4.4    API </b></p>
<p><b>................................................................................................................................... 38</b></p>
<p><b>2.5 Configuration Parameters for the S-WdgM</b></p>
<p><b>.......................................................................................................................................................... 38</b></p>
<p><b>2.5.1    S-WdgM Global Preprocessor Settings </b></p>
<p><b>.......................................................................................................................................................... 49</b></p>
<p><b>2.5.2    S-WdgM General Settings </b></p>
<p><b>.......................................................................................................................................................... 57</b></p>
<p><b>2.5.3    S-WdgM Supervised Entity Options </b></p>
<p><b>.......................................................................................................................................................... 65</b></p>
<p><b>2.5.4    S-WdgM Checkpoint Options </b></p>
<p><b>.......................................................................................................................................................... 65</b></p>
<p><b>2.5.5    Alive Counter Options </b></p>
<p><b>.......................................................................................................................................................... 67</b></p>
<p><b>2.5.6    S-WdgM Local Transition Options </b></p>
<p><b>.......................................................................................................................................................... 68</b></p>
<p><b>2.5.7    S-WdgM Global Transition Options </b></p>
<p><b>.......................................................................................................................................................... 69</b></p>
<p><b>2.5.8    S-WdgM Local and Global Deadline Options </b></p>
<p><b>................................................................................................................................... 72</b></p>
<p><b>2.6 ECU Description Configuration</b></p>
<p><b>.......................................................................................................................................................... 72</b></p>
<p><b>2.6.1    Assumptions/Constraints </b></p>
<p><b>................................................................................................................................... 73</b></p>
<p><b>2.7 API Description</b></p>
<p><b>.......................................................................................................................................................... 73</b></p>
<p><b>2.7.1    S-WdgM Type Definitions </b></p>
<p><b>.......................................................................................................................................................... 76</b></p>
<p><b>2.7.2    S-WdgM Application Level API Functions </b></p>
<p><b>.......................................................................................................................................................... 84</b></p>
<p><b>2.7.3    Callback Functions </b></p>
<p><b>.......................................................................................................................................................... 84</b></p>
<p><b>2.7.4    S-WdgM System Level API Functions </b></p>
<p><b>.......................................................................................................................................................... 88</b></p>
<p><b>2.7.5    Expected Interfaces </b></p>
<p><b>.......................................................................................................................................................... 90</b></p>
<p><b>2.7.6    AUTOSAR 3.1 Compatibility Mode </b></p>
<p>......................................................................................................................................................... 90</p>
<p>User API</p>
<p>......................................................................................................................................................... 92</p>
<p>System API</p>
<h1 style="page-break-before:always; "></h1>
<p>3</p>
<p><b>Safe Watchdog Manager</b></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p>Page</p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>Safe Watchdog Manager  3.3.1</i></p>
<p><b>3 Integration</b></p>
<p><b>94</b></p>
<p><b>................................................................................................................................... 94</b></p>
<p><b>3.1 Initialization of the S-WdgM</b></p>
<p><b>................................................................................................................................... 95</b></p>
<p><b>3.2 Memory Sections</b></p>
<p><b>................................................................................................................................... 97</b></p>
<p><b>3.3 Timing Setup</b></p>
<p><b>.......................................................................................................................................................... 100</b></p>
<p><b>3.3.1    Deadline Measurement and Tick Counter </b></p>
<p><b>4 Configuration Generation</b></p>
<p><b>102</b></p>
<p><b>................................................................................................................................... 102</b></p>
<p><b>4.1 S-WdgM Configuration Generator</b></p>
<p><b>.......................................................................................................................................................... 103</b></p>
<p><b>4.1.1    S-WdgM Configuration Verification </b></p>
<p>......................................................................................................................................................... 104</p>
<p>Installing the S-WdgM Verifier</p>
<p><b>................................................................................................................................... 105</b></p>
<p><b>4.2 Workflow</b></p>
<p><b>................................................................................................................................... 107</b></p>
<p><b>4.3 Output Files</b></p>
<p><b>................................................................................................................................... 108</b></p>
<p><b>4.4 Error Messages</b></p>
<p><b>.......................................................................................................................................................... 108</b></p>
<p><b>4.4.1    Basic Errors </b></p>
<p><b>.......................................................................................................................................................... 108</b></p>
<p><b>4.4.2    Semantic Errors </b></p>
<p><b>5 Appendix</b></p>
<p><b>114</b></p>
<p><b>................................................................................................................................... 114</b></p>
<p><b>5.1 Watchdog Manager Configuration Verifier Requirements</b></p>
<p><b>.......................................................................................................................................................... 114</b></p>
<p><b>5.1.1    General Remarks </b></p>
<p><b>.......................................................................................................................................................... 114</b></p>
<p><b>5.1.2    General Requirements </b></p>
<p><b>.......................................................................................................................................................... 114</b></p>
<p><b>5.1.3    Deltas the S-WdgM Verifier Must Detect between the EDF and the Generated Configuration </b></p>
<p><b>.......................................................................................................................................................... 118</b></p>
<p><b>5.1.4    Integrity Checks </b></p>
<p><b>.......................................................................................................................................................... 120</b></p>
<p><b>5.1.5    Errors To Be Detected by the Verifier to Protect the Embedded Code </b></p>
<p><b>6 Abbreviations</b></p>
<p><b>122</b></p>
<p><b>7 Glossary</b></p>
<p><b>124</b></p>
<p><b>8 References</b></p>
<p><b>128</b></p>
<p><b>9 License Information</b></p>
<p><b>129</b></p>
<h1 style="page-break-before:always; "></h1>
<p><b>Introduction</b></p>
<p>Page</p>
<p>4</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>1</b></p>
<p><b>Introduction</b></p>
<p>The  <b>Safe  Watchdog  Manager  (S-WdgM)  Stack  </b>provides  software  modules  to</p>
<p><b>monitor </b>the <b>correct functioning </b>of safety-relevant activities in systems with software</p>
<p><b>modules of mixed criticality</b>, such as</p>
<p>newly developed safety-related functions,</p>
<p>legacy functions, and</p>
<p>basic software.</p>
<p>The <b>S-WdgM Stack </b>is designed to be used in automotive ECUs.</p>
<p>The <b>S-WdgM Stack </b>has three software modules</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><b>Safe Watchdog Interface (S-WdgIf)</b></p>
<p><b>Safe Watchdog Driver (S-Wdg)</b></p>
<p>The S-WdgM can run on <b>single-core </b>and <b>multi-core </b>systems.</p>
<p>This  user  manual  describes  the  <b>S-WdgM</b>,  which  is  an  AUTOSAR  basic  software</p>
<p>module that is part of the  AUTOSAR  service  layer.  The  <b>S-WdgM  </b>checks  the  logical</p>
<p>program flow and temporal behavior of  the  program  flow  of  safety-relevant  functions.</p>
<p>Safety-relevant  functions  use  <b>checkpoint  calls  </b>to  send  <b>life  signs  </b>to  the  <b>S-WdgM</b>.</p>
<p>Internal or external watchdog hardware is used independently from the system CPU <b>to</b></p>
<p><b>monitor</b></p>
<p>if the system is still <b>alive</b>,</p>
<p>if the system <b>functions </b>properly, and </p>
<p>if the system shows the <b>correct temporal behavior </b>and <b>logical program flow</b>.</p>
<p>The S-WdgM was developed according to <b>AUTOSAR version 4.0 r1 </b>[1]</p>
<p>. However,</p>
<p>its functionality can be restricted to the functionality described by <b>AUTOSAR 3.1 r4 </b>in</p>
<p>the AUTOSAR 3.1 compatibility mode.</p>
<p>The S-WdgM is designed to be integrated into <b>AUTOSAR 3.1.4 </b>or <b>4.0.1 </b>compatible</p>
<p>environments. However, it is not restricted to these AUTOSAR versions only. The</p>
<p>software module can also be integrated into other versions of AUTOSAR and other</p>
<p>system software architectures if the integration-related requirements listed in the <i>Safe</i></p>
<p><i>Watchdog Manager Safety Manual </i>[5]</p>
<p> are met.</p>
<p>The S-WdgM is compatible with the <b>AUTOSAR  4.0 r1 Watchdog Manager</b>, but not</p>
<p>fully compliant.  For  deviations  from  the  AUTOSAR  4.0  r1  specification,  see  Section</p>
<p>Deviations from the AUTOSAR 4.0 r1 Watchdog Manager</p>
<p>.</p>
<p>128</p>
<p>128</p>
<p>34</p>
<h1 style="page-break-before:always; "></h1>
<p>5</p>
<p>Page</p>
<p><b>Introduction</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>This user manual does <b>not </b>cover safety-related topics. For safety-related requirements</p>
<p>for integration and application of the S-WdgM, refer to the  <i>Safe  Watchdog  Manager</i></p>
<p><i>Safety Manual </i>[5]</p>
<p>.</p>
<p><b>1.1</b></p>
<p><b>Architecture Overview</b></p>
<p>The  <b>S-WdgM  Stack  </b>consists  of</p>
<p> the  <b>hardware-independent</b></p>
<p> modules</p>
<p> <b>Safe</b></p>
<p><b>Watchdog  Manager  </b>and  <b>Safe  Watchdog  Interface  </b>and  a  <b>hardware-dependent</b></p>
<p>module, the <b>Safe Watchdog Driver</b>.</p>
<p>Figure 1 shows the S-WdgM Stack with its modules in an AUTOSAR environment.</p>
<p><b>Non-safety related</b></p>
<p><b>Function</b></p>
<p><b>RTE</b></p>
<p><b>Safe Complex Drivers</b></p>
<p>Microc ontroller</p>
<p><b>OS (SC3/4)</b></p>
<p><b>IO</b></p>
<p><b>SYS</b></p>
<p><b>DIAG</b></p>
<p><b>COM</b></p>
<p><b>MEM</b></p>
<p><b>CAN</b></p>
<p><b>LIN</b></p>
<p>J1939TP</p>
<p><b>XCP</b></p>
<p>1</p>
<p><b>IP</b></p>
<p><b>FR</b></p>
<p><b>CA L</b></p>
<p><b>EXT</b></p>
<p><b>MOST</b></p>
<p><b>Autosar</b></p>
<p><b>Basic SW Component</b></p>
<p><b>Ch eck ing /P r ot ect ion</b></p>
<p><b>Fu nct ion</b></p>
<p><b>Safety Related</b></p>
<p><b>Function</b></p>
<p><b>External</b></p>
<p><b>Watc hdog</b></p>
<p><b>Ch eck poi nt</b></p>
<p><b>“S af e</b></p>
<p><b>Co mp on ent  1 ”</b></p>
<p><b>Safe Watchdog</b></p>
<p><b>Manager</b></p>
<p><b>SafeContext</b></p>
<p><b>C heck po int</b></p>
<p><b>“Saf e</b></p>
<p><b>Co m pon en t 2 ”</b></p>
<p><b>Ch eck poi nt</b></p>
<p><b>“S afe  CDR ”</b></p>
<p><b>Internal </b></p>
<p><b>Watc hdog</b></p>
<p><b>Safe Watchdog</b></p>
<p><b>I nterfac e</b></p>
<p><b>Safe</b></p>
<p><b>Watchdog</b></p>
<p><b>Dri ver</b></p>
<p><b>“Safe”</b></p>
<p><b>SWC</b></p>
<p><b>“Safe”</b></p>
<p><b>SWC</b></p>
<p><b>“QM”</b></p>
<p><b>SWC</b></p>
<p><b>“Q M”</b></p>
<p><b>SWC</b></p>
<p><i><b>Fig 1: Safe Watchdog M anager Stack in an AUTOSAR environment</b></i></p>
<p>The <b>S-WdgM </b>controls, through the <b>S-WdgIf </b>and the <b>S-Wdg</b>, the hardware-implemented</p>
<p>watchdog controller, which can be one or more internal watchdog controllers or external</p>
<p>watchdog devices.</p>
<p><b>Note: </b>A watchdog device requires a hardware-dependent S-Wdg driver.</p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Introduction</b></p>
<p>Page</p>
<p>6</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Figure 2 shows the  layered  structure  of  the  S-WdgM  Stack.  The  attached  watchdog</p>
<p>device can be internal or external.</p>
<p> </p>
<p>Internal </p>
<p>Watchdog </p>
<p>device</p>
<p><b> </b></p>
<p> </p>
<p>Safe Watchdog </p>
<p>Manager</p>
<p><b> </b></p>
<p>Safe Watchdog </p>
<p>Interface</p>
<p><b> </b></p>
<p>External </p>
<p>Watchdog device</p>
<p><b> </b></p>
<p>Hardware</p>
<p><b> </b></p>
<p>Software </p>
<p><b> </b></p>
<p>Safe Watchdog  </p>
<p>Manager user API</p>
<p><b> </b></p>
<p>Safe </p>
<p>Watchdog </p>
<p>Driver 2</p>
<p><b> </b></p>
<p>Safe </p>
<p>Watchdog </p>
<p>Driver 1</p>
<p><b> </b></p>
<p>Safe </p>
<p>Watchdog </p>
<p>Manager </p>
<p>Stack</p>
<p><b> </b></p>
<p>Hardware </p>
<p>dependent </p>
<p>part</p>
<p><b> </b></p>
<p>BSW’s</p>
<p><b> </b></p>
<p>System </p>
<p>API</p>
<p><b> </b></p>
<p>Applications</p>
<p><b> </b></p>
<p><i><b>Fig. 2: Layered structure of the Safe Watchdog M anager </b></i></p>
<p>The  <b>S-WdgM  monitors  </b>the  <b>program  flow  </b>and  <b>timing  constraints  </b>of  so-called  </p>
<p><b>supervised entities (SE)</b>. The SEs are software entities (like application software) that</p>
<p>are  supervised  by  the  S-WdgM.  When  the  S-WdgM  detects  a  violation  of</p>
<p> the</p>
<p>preconfigured  program  flow  or  the  timing  values,  it  takes  a  number  of  configurable</p>
<p>actions to  log  that  violation and/or  go  to  a  safe  state  (for  details,  see  Section Safe</p>
<p>Watchdog  Manager  (S-WdgM)</p>
<p>).  The  S-WdgM  communicates  with the  system  via</p>
<p>the <b>Safe Watchdog Application Interface (API) </b>(see Section API Description)</p>
<p>.</p>
<p>9</p>
<p>73</p>
<h1 style="page-break-before:always; "></h1>
<p>7</p>
<p>Page</p>
<p><b>Introduction</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>1.2</b></p>
<p><b>Use Cases</b></p>
<p>The S-WdgM monitors the user software at runtime and compares  the  preconfigured</p>
<p>logical and temporal constraints with the actual logical and temporal behavior. The S-</p>
<p>WdgM can monitor the following violations:</p>
<p>timing violation (checked by <b>deadline monitoring </b>and <b>alive monitoring</b>)</p>
<p>program flow violation (checked by <b>program flow monitoring</b>)</p>
<p>The S-WdgM periodically triggers the watchdog device through its <b>interface </b>(<b>S-WdgIf</b>)</p>
<p>and <b>driver </b>layer (<b>S-Wdg</b>). When the S-WdgM detects  a  fault  in the  program  flow  or</p>
<p>timing, then it stops the watchdog triggering, or it initiates a reset of the microcontroller</p>
<p>immediately or after a delay, depending on the S-WdgM configuration.</p>
<p>The S-WdgM monitors the following <b>software </b>and <b>hardware faults</b>:</p>
<p>The supervised entity is executed but the execution was not requested.</p>
<p>The supervised entity was not executed but the execution was requested.</p>
<p>The execution of the supervised entity started too early or too late.</p>
<p>The execution time of a a supervised  entity or  part  of  a  supervised  entity or  many</p>
<p>supervised entities is longer or shorter than expected.</p>
<p>The  program  flow  of  a  a  supervised  entity or  part  of  a  supervised  entity  or  many</p>
<p>supervised entities differs from expected program flow.</p>
<p>The reaction of the S-WdgM to detected faults can be configured as follows:</p>
<p> S-WdgM sends information about the detected fault.</p>
<p>S-WdgM initiates a reset of the microcontroller after a watchdog timeout.</p>
<p>S-WdgM initiates an immediate reset of the microcontroller.</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Introduction</b></p>
<p>Page</p>
<p>8</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>1.3</b></p>
<p><b>Safe Watchdog Manager Stack Content</b></p>
<p>The <b>Safe Watchdog Manager Stack </b>consists of:</p>
<p><b>Embedded code:</b></p>
<p><b>Safe Watchdog Manager (S-WdgM) </b>software module</p>
<p><b>Safe Watchdog Interface (S-WdgIf) </b>software module</p>
<p><b>Safe Watchdog Driver (S-Wdg) </b>software modules</p>
<p>A part of the embedded code is generated out of a given ECU configuration.</p>
<p><b>S-WdgM Configuration Generators </b>(which generate a part of the  embedded  code</p>
<p>out of a given ECU configuration):</p>
<p>Safe Watchdog Manager Generator</p>
<p>Safe Watchdog Interface Generator</p>
<p>Safe Watchdog Driver Generator</p>
<p>Safe Watchdog Manager Configuration Verifier</p>
<p><b>Configuration example:</b></p>
<p>An example of an ECU configuration and the generated code.</p>
<p><b>Documentation:</b></p>
<p><b>User Manuals </b>covering the</p>
<p>o</p>
<p> Safe Watchdog Manager,</p>
<p>o</p>
<p>Safe Watchdog Interface, and </p>
<p>o</p>
<p>Safe Watchdog Drivers</p>
<p><b>Safety Manuals </b>covering the </p>
<p>o</p>
<p>Safe Watchdog Manager</p>
<p>o</p>
<p>Safe Watchdog Interface</p>
<p>o</p>
<p>Safe Watchdog Drivers</p>
<h1 style="page-break-before:always; "></h1>
<p>9</p>
<p>Page</p>
<p><b>Introduction</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2</b></p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>The  <b>S-WdgM  </b>monitors  safety-relevant  applications  on  the  ECU.  The  S-WdgM  is  a</p>
<p><b>basic  software  module  </b>at  the  service  layer  of  the  standardized  basic  software</p>
<p>architecture of <b>AUTOSAR</b>. The S-WdgM monitors the program flow of a configurable</p>
<p>number of so-called <b>supervised entities (SE)</b>. When the S-WdgM detects a violation</p>
<p>of  the  preconfigured  temporal  or  logical  constraints  in  the  program  flow,  it  takes  a</p>
<p>number  of  configurable  actions  to  log  the  fault  and  to  go  to  a  safe  state  after  a</p>
<p>configurable  time  delay.  The  safe  state  is  reached  by resetting  the  watchdog  or  by</p>
<p>omitting watchdog triggering.</p>
<p>Every supervised entity has a defined control flow. Significant points in this control flow</p>
<p>are represented by <b>checkpoints (CP)</b>. This means the <b>control flow </b>can be modeled</p>
<p>as a <b>graph</b>, with the <b>checkpoints </b>being the <b>nodes </b>and the pieces of <b>code </b>in between</p>
<p>being the <b>transitions </b>(see Figure  4 for an example).</p>
<p>The  S-WdgM  configuration defines  the  allowed  transitions  between the  checkpoints,</p>
<p>and the timing constraints for these transitions</p>
<p>within every supervised entity and</p>
<p>between checkpoints of different supervised entities.</p>
<p>The  supervised  entities  have  to  report  to  the  S-WdgM  when  they  have  reached  a</p>
<p>checkpoint. Thus,  the  developer  has  to  insert  calls  at  the  checkpoints  that  pass  this</p>
<p>information to the S-WdgM.</p>
<p>The  S-WdgM  functionality  partially  deviates  from  the  AUTOSAR  requirements.  For</p>
<p>details, refer to Section Deviations from the AUTOSAR 4.0 r1 Watchdog Manager</p>
<p>.</p>
<p>34</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 10</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.1</b></p>
<p><b>File Structure</b></p>
<p>Figure 3 gives an overview of the <b>S-WdgM module</b>.</p>
<p> </p>
<p><i><b>Fig. 3: File structure of the S-WdgM  module</b></i></p>
<p><b>Note: </b>The file structure shown in Figure 3 corresponds to the integration of the S-WdgM</p>
<p>in an <b>AUTOSAR 3.1 </b>environment. The differences between an <b>AUTOSAR 3.1 </b>and an</p>
<p><b>AUTOSAR 4.0 </b>environment are described below in the following two tables.</p>
<h1 style="page-break-before:always; "></h1>
<p>11</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>The following files are part of the S-WdgM:</p>
<p><b>File</b></p>
<p><b>Description</b></p>
<p><b>WdgM.c</b></p>
<p>Implementation of the S-WdgM,  defines  the  API for  the</p>
<p>Service Layer of the BSW-Layer.</p>
<p><b>WdgM_Checkpoint.c</b></p>
<p>Implementation of the S-WdgM,  defines  the  API for  the</p>
<p>Application Layer.</p>
<p><b>WdgM.h</b></p>
<p>Header</p>
<p> file  of</p>
<p> the  S-WdgM,</p>
<p> provides  API</p>
<p> function</p>
<p>declarations.</p>
<p><b>WdgM_Cfg.h</b></p>
<p>Provides  defines  and  declarations  for</p>
<p> the  S-WdgM</p>
<p>configuration identifiers</p>
<p><b>WdgM_MemMap.h</b></p>
<p> or </p>
<p><b>WdgM_OSMemMap.h</b></p>
<p>The  file  is  generated  and  contains  defines  for</p>
<p> the</p>
<p>memory management of the S-WdgM code and data.</p>
<p>The  integrator  can  place  the  status  variables  of  every</p>
<p>supervised  entity in a  separate  RAM  sector  (see  also</p>
<p>Section Memory Sections</p>
<p>). The file is included in the</p>
<p>AUTOSAR </p>
<p><b>MemMap.h</b></p>
<p> file.</p>
<p><b>Note: </b>The name of this generated file is</p>
<p> </p>
<p><b>WdgM_MemMap.h</b></p>
<p> in an <b>AUTOSAR 3.1 </b>environment</p>
<p>and</p>
<p><b>WdgM_OSMemMap.h</b></p>
<p> in an <b>AUTOSAR 4.0</b></p>
<p>environment.</p>
<p><b>WdgM_Cfg_Features.h</b></p>
<p>The file is generated and contains S-WdgM precompile</p>
<p>directives.</p>
<p><b>WdgM_PBcfg.h</b></p>
<p>The file is generated and contains the declaration of the</p>
<p>S-WdgM configuration.</p>
<p><b>WdgM_PBcfg.c</b></p>
<p>The  file  is  generated  and  contains  the  S-WdgM</p>
<p>configuration.</p>
<p>The following files are included by the S-WdgM, but are not part of the S-WdgM:</p>
<p><b>File</b></p>
<p><b>Description</b></p>
<p><b>WdgIf_Types.h</b></p>
<p>Provides the declaration of the S-WdgIf API.</p>
<p><b>Std_Types.h</b></p>
<p>AUTOSAR file</p>
<p><b>Compiler.h</b></p>
<p>AUTOSAR file</p>
<p>95</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 12</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Compiler_Cfg</b></p>
<p>Contains compiler abstraction macros</p>
<p><b>PlatformTypes.h</b></p>
<p>AUTOSAR file</p>
<p><b>MemMap.h</b></p>
<p>AUTOSAR file. Includes </p>
<p><b>WdgM_MemMap.h</b></p>
<p>.</p>
<p><b>Appl_Det.h</b></p>
<p>Provides</p>
<p> API</p>
<p> to</p>
<p> a</p>
<p> wrapper</p>
<p> function</p>
<p> for</p>
<p>Det_ReportError()</p>
<p>.<b>*</b></p>
<p><b>Appl_Dem.h</b></p>
<p>Provides</p>
<p> API</p>
<p> to</p>
<p> a</p>
<p> wrapper</p>
<p> function</p>
<p> for</p>
<p>Dem_ReportErrorStatus()</p>
<p>.<b>*</b></p>
<p><b>Note:  </b>In  an  <b>AUTOSAR  4.0  </b>environment,  this  file  is</p>
<p>indirectly included by </p>
<p><b>WdgM.c</b></p>
<p>. It is included through the</p>
<p>generated file </p>
<p><b>WdgM_Cfg_Features.h</b></p>
<p>.</p>
<p><b>Appl_Mcu.h</b></p>
<p>Provides</p>
<p> API</p>
<p> to</p>
<p> a</p>
<p> wrapper</p>
<p> function</p>
<p> for</p>
<p>Mcu_PerformReset()</p>
<p>.<b>*</b></p>
<p><b>Rte_Type.h</b></p>
<p> or </p>
<p><b>Rte_WdgM_Type.h</b></p>
<p>Provides generated RTE type definitions for the WdgM.</p>
<p><b>Note: </b>The name of this generated file is</p>
<p><b>Rte_Type.h</b></p>
<p> in an <b>AUTOSAR 3.1 </b>environment and</p>
<p><b>Rte_WdgM_Type.h</b></p>
<p> in an <b>AUTOSAR 4.0</b></p>
<p>environment.</p>
<p><b>SchM_WdgM.h</b></p>
<p>Provides the API of the Schedule Manager for  entering</p>
<p>and exiting an exclusive area.</p>
<p><b>*) </b>The services</p>
<p>Det_ReportError()</p>
<p>,</p>
<p>Dem_ReportErrorStatus()</p>
<p> and</p>
<p>Mcu_PerformReset()</p>
<p>may  not  meet  the  quality  level  required  for  the  S-WdgM.  These  services  must  be</p>
<p>wrapped  by  a  wrapper  service  that  has  the  same  name  as  the  corresponding</p>
<p>AUTOSAR service with the prefix </p>
<p>Appl_</p>
<p>, which guarantees freedom from interference.</p>
<p>The  implementation  of  the  wrapper  service  is  not  part  of  the  S-WdgM.  The  <i>Safe</i></p>
<p><i>Watchdog Manager Safety Manual </i>[5]</p>
<p> provides a guideline on how to implement the</p>
<p>wrapper.</p>
<p><b>NOTE:  </b>A  wrapper  could  be  just  a  direct  call  to  the  corresponding  module,  but  that</p>
<p>wrapper could also perform more complex operations such as switching the OS context</p>
<p>before calling the service.</p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p>13</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.2</b></p>
<p><b>Basic Functionality of the S-WdgM</b></p>
<p>As described in <i>AUTOSAR </i>[1], the S-WdgM is a basic software module that monitors</p>
<p>the program flow of <b>supervised entities (SE)</b>.</p>
<p><b>2.2.1</b></p>
<p><b>Supervised Entity and Program Flow Supervision</b></p>
<p>A <b>supervised entity </b>is a software part that is monitored by the S-WdgM. There is no</p>
<p>fixed relationship between supervised entities and the architectural  building  blocks  in</p>
<p>AUTOSAR. </p>
<p>The <b>checkpoints </b>mark important  steps  during  the  execution of  an algorithm.  At  the</p>
<p>checkpoint, a supervised entity calls the function </p>
<p>WdgM_CheckpointReached()</p>
<p>directly (if no runtime environment is present) or with a wrapper function (if  a  runtime</p>
<p>environment  is  present),  with  that  wrapper  function  being  provided  by  the  runtime</p>
<p>environment.  The  checkpoints  are  connected  by   <b>transitions</b>.  Local  transitions  bind</p>
<p>Checkpoints to a <b>closed graph</b>. These graphs represent the program flow.</p>
<p>The S-WdgM knows which program flow is correct and decides if a supervised entity</p>
<p>behaves as expected or violates the predefined rules.</p>
<p>The question of how to identify the checkpoints for an algorithm is a trade-off between</p>
<p>performance and code block size per checkpoint:</p>
<p>The more checkpoints an algorithm has, the better is the representation of the code</p>
<p>structure. But this has an adverse effect on performance.</p>
<p>However, if an algorithm has only a few checkpoints, then there are code segments</p>
<p>and program flow branches that are not represented. In this case, performance will be</p>
<p>better, but not everything will be monitored.</p>
<p>A  supervised entity can represent an <b>algorithm</b>,  a  <b>function</b>,  or  –  in the  case  of  an</p>
<p>operating system – an <b>entire task</b>. In the AUTOSAR definition, a supervised entity can</p>
<p>be distributed over more than one task or application. There can be several supervised</p>
<p>entities for the same task. However, the S-WdgM implementation does not support the</p>
<p>distribution of one supervised entity over more than one task or application when they</p>
<p>run in different contexts. The S-WdgM expects that at least one supervised entity and at</p>
<p>least one checkpoint are defined.</p>
<p>Figure</p>
<p> </p>
<p> 4</p>
<p> shows</p>
<p> the</p>
<p> example</p>
<p> of</p>
<p> a</p>
<p> simple</p>
<p> supervised</p>
<p> entity</p>
<p> called</p>
<p>temperature_control:</p>
<p>Supervised  entity  </p>
<p>temperature_control</p>
<p> has  six  checkpoints  (<i>illustrated  by</i></p>
<p><i>ovalboxes</i>), which are connected by directed transitions (<i>illustrated by arrows</i>). </p>
<p>As  can  be  seen  in  Figure  </p>
<p> 4,</p>
<p> it</p>
<p> is  possible  to  reach  the  checkpoint</p>
<p>temperature_needs_correction</p>
<p> after the checkpoint </p>
<p>read_temperature</p>
<p>.</p>
<p> </p>
<p>However, reaching the checkpoint </p>
<p>heater_adjusted_successfully</p>
<p> after  the</p>
<p>checkpoint </p>
<p>read_temperature</p>
<p> would be a violation of the program flow.</p>
<p>78</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 14</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><i><b>Fig. 4: Example of a simple supervised entity with a control flow</b></i></p>
<p><b>Use program flow monitoring</b></p>
<p>Control  (program)  flow  monitoring  is  highly recommended  by  ISO  26262-6  (7.4.14).</p>
<p>Apart from its main feature, which is to detect logical errors in the monitored algorithms,</p>
<p>program flow monitoring increases the probability of detecting illegal program counter</p>
<p>jumps within the whole system.</p>
<p>It  is  possible  to  tolerate  <b>program  flow  violations  </b>within  a  supervised  entity  for  a</p>
<p><b>certain  </b>amount  of  <b>monitoring  cycles</b>.  it  is  possible  to  define  a  <b>program  flow</b></p>
<p><b>reference cycle </b>(a multiple of the S-WdgM monitoring cycle) and a tolerance, which is</p>
<p>a number of program flow reference cycles, during which program flow violations should</p>
<p>be tolerated for the supervised entity. If a program flow violation is detected for more</p>
<p>program flow  reference  cycles  than the  defined  tolerance,  then the  supervised  entity</p>
<p>changes its status from </p>
<p>FAILED</p>
<p> to </p>
<p>EXPIRED</p>
<p>.</p>
<p>The  necessary  configuration  parameters  to  tolerate  program  flow  violations  of  a</p>
<p>supervised entity are:</p>
<p>WdgMFailedProgramFlowRefCycleTol</p>
<p>:This</p>
<p> parameter</p>
<p> contains</p>
<p> the</p>
<p>acceptable amount of program flow violations for this supervised entity.</p>
<p>WdgMProgramFlowReferenceCycle</p>
<p>:This parameter contains the  amount  of</p>
<p>supervision cycles to be used as reference by the program flow supervisions of this</p>
<p>supervised entity.</p>
<p><b>Note:  </b>The  program  flow  reference  cycle  for  a  supervised  entity  starts  with  the  first</p>
<p>detected  program  flow  violation  and  not  with  the  S-WdgM  startup.  Hence,  the  first</p>
<p>program  flow  reference  cycle  starts  with the  transition  of  the  supervised  entity  from</p>
<p>status </p>
<p>OK</p>
<p> to </p>
<p>FAILED</p>
<p>. If no program flow violation is detected for a whole program flow</p>
<p>reference cycle within the tolerance then the supervised entity recovers and changes its</p>
<p>59</p>
<p>60</p>
<h1 style="page-break-before:always; "></h1>
<p>15</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>status from </p>
<p>FAILED</p>
<p> to </p>
<p>OK</p>
<p>. Otherwise, if the tolerance is exhausted and the program</p>
<p>flow violations continue, then the supervised entity changes its status to </p>
<p>EXPIRED</p>
<p>. It can</p>
<p>be  said  that  the  program  flow  reference  cycle  is  processed  only  during  the  status</p>
<p>FAILED</p>
<p> –  it  starts  with the  first  detected  program  flow  violation.  The  program  flow</p>
<p>reference cycle is restarted with each following transition from </p>
<p>OK</p>
<p> to </p>
<p>FAILED</p>
<p>, and it is</p>
<p>not processed during the status </p>
<p>OK</p>
<p>, </p>
<p>EXPIRED</p>
<p> or </p>
<p>DEACTIVATED</p>
<p>.</p>
<p><b>2.2.2</b></p>
<p><b>Deadline Monitoring</b></p>
<p>The main purpose of deadline monitoring is to check the <b>temporal</b>, <b>dynamic behavior</b></p>
<p>of  the  supervised  entity.  However,  it  would  also  strongly  increase  the  probability  of</p>
<p>detecting random jumps or irregular updates of the timebase tick counter, which might</p>
<p>otherwise degrade system integrity without being discovered.</p>
<p>The  <b>temporal  behavior  </b>of  the  supervised  entities  can  be  monitored  by  assigning</p>
<p><b>deadlines </b>to <b>transitions</b>.</p>
<p>A</p>
<p> <b>deadline</b></p>
<p> is</p>
<p> defined</p>
<p> through</p>
<p> a</p>
<p> <b>maximum  deadline</b></p>
<p> (parameter</p>
<p> </p>
<p>WdgMDeadlineMax</p>
<p>)</p>
<p> and</p>
<p> a</p>
<p> <b>minimum</b></p>
<p><b> deadline</b></p>
<p> (parameter</p>
<p> </p>
<p>WdgMDeadlineMin</p>
<p>).  The  destination checkpoint  of  a  transition should  not  be</p>
<p>reached before the minimum time or after the maximum time after which the source</p>
<p>checkpoint  of  that  transition  was  reached.  Otherwise  the  S-WdgM  will  detect  a</p>
<p>deadline violation. Apart from a maximum deadline time it is strongly recommended</p>
<p>to use a minimum deadline time as well, where applicable. This allows  discovering</p>
<p>timebase tick counter errors implicitly. <b>Deadlines </b>are good for <b>discovering </b>crashed</p>
<p>tasks or infinite loops. If the <b>destination checkpoint </b>is never reached because the</p>
<p>task ended with an error or is stuck in a loop, this would cause a deadline violation.</p>
<p>A <b>transition </b>is considered to violate its deadline if the destination checkpoint is not</p>
<p>hit  within  the  configured  deadline  interval.  A  deadline  is  assigned  to  an  already</p>
<p>defined transition by specifying the same source and destination checkpoints as for</p>
<p>the</p>
<p> transition.</p>
<p> The</p>
<p> corresponding</p>
<p> deadline</p>
<p> parameters</p>
<p> are</p>
<p> </p>
<p>WdgMDeadlineStartRef</p>
<p> and </p>
<p>WdgMDeadlineStopRef</p>
<p>.</p>
<p><b>Note: </b>A <b>transition </b>should be defined either as a <b>local </b>or a <b>global </b>transition.</p>
<p>As for <b>local transitions</b>, the source and destination checkpoints belong to the same</p>
<p>supervised entity.</p>
<p>As for <b>global transitions</b>, the source and destination checkpoints belong to different</p>
<p>supervised entities.</p>
<p>An example of a supervised entity with deadlines defined for its transitions is given</p>
<p>below.</p>
<p><b>Note: </b>The first deadline is defined to have a <b>minimum </b>of <b>0 </b>and a <b>maximum </b>of <b>2</b></p>
<p>(<b>seconds</b>). Hence, <b>CP1 </b>must be reached no later  than 2  seconds  after  <b>CP0</b>.  The</p>
<p>second deadline implies that <b>CP2 </b>must be  reached  no  earlier  than <b>1  </b>and  no  later</p>
<p>than <b>3 </b>seconds after <b>CP1</b>. Otherwise a deadline violation will be detected.</p>
<p>69</p>
<p>69</p>
<p>70</p>
<p>70</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 16</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p> </p>
<p><i><b>Fig. 5: Example of a simple supervised entity with deadlines</b></i></p>
<p><b>Note: </b>Deadline violation is detected</p>
<p>when the next checkpoint is reached outside the defined deadline or </p>
<p>within the </p>
<p>WdgM_MainFunction()</p>
<p> if the next checkpoint is not reached at all</p>
<p>(or has not been reached yet) and the maximum deadline has already expired.</p>
<p>A  slightly more  complex situation is  when  several  transitions  go  out  of  the  same</p>
<p>checkpoint. In this case, deadline violations are detected in the same manner when</p>
<p>the next checkpoint is reached outside the defined deadlines. However, if none of the</p>
<p>next checkpoints is reached,  the  </p>
<p>WdgM_MainFunction()</p>
<p> detects  a  deadline</p>
<p>violation only after the maximum of maximum deadlines of all outgoing transitions has</p>
<p>elapsed, which is shown in Figure 6. If the program gets stuck after <b>CP0</b>, the deadline</p>
<p>violation is detected within the next main function that is executed not earlier than <b>5</b></p>
<p><b>seconds </b>after reaching <b>CP0</b>.</p>
<p>85</p>
<p>85</p>
<h1 style="page-break-before:always; "></h1>
<p>17</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><i><b>Fig. 6: Example of multiple outgoing transitions with deadlines</b></i></p>
<p>A special case is a hybrid situation when some of the outgoing transitions have</p>
<p>deadlines and others do not. In this case, the main function detects a deadline</p>
<p>violation if none of the next checkpoints is reached within the maximum of maximum</p>
<p>deadlines in order to detect blocked supervised entities. No deadline violation will be</p>
<p>detected after the maximum has expired, however, if the checkpoint without deadline</p>
<p>is reached before the main function. If none of the <b>CP1</b>, <b>CP2 </b>is reached after <b>CP0</b></p>
<p>( 7), then the next </p>
<p>WdgM_MainFunction()</p>
<p> (executed at least <b>2 seconds </b>after</p>
<p><b>CP0 </b>is reached) detects a deadline violation. If, however, <b>CP1 </b>is reached after <b>2</b></p>
<p><b>seconds</b>, but before the next </p>
<p>WdgM_MainFunction()</p>
<p>, no deadline violation</p>
<p>would be detected.</p>
<p><b>Note: </b>To avoid this ambiguous situation it is a good practice to define deadlines for</p>
<p>all outgoing transitions of a checkpoint (or for none of them).</p>
<p><i><b>Fig. 7: Example of a the case where only one of several outgoing transitions has a deadline</b></i></p>
<p>The rules for deadline violation detection also apply to global transitions or to the case</p>
<p>of local transitions mixed with global transitions at a checkpoint.</p>
<p>It is possible to tolerate <b>deadline violations </b>within a supervised entity for a certain</p>
<p>amount  of  monitoring  cycles.  It  is  possible  define  a  <b>deadline  reference  cycle  </b>(a</p>
<p>multiple  of  the  S-WdgM  monitoring  cycle)  and  a  tolerance,  which  is  a  number  of</p>
<p>85</p>
<p>85</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 18</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>deadline reference cycles, during which deadline violations should be tolerated for the</p>
<p>supervised  entity.  If  a  deadline  violation  is  detected  for  more  deadline  reference</p>
<p>cycles than the defined tolerance, then the supervised entity changes its status from</p>
<p>FAILED</p>
<p> to </p>
<p>EXPIRED</p>
<p>.</p>
<p>The  necessary  configuration  parameters  to  tolerate  deadline  violations  of</p>
<p> a</p>
<p>supervised entity are:</p>
<p>WdgMFailedDeadlineRefCycleTol</p>
<p>:</p>
<p> This</p>
<p> parameter</p>
<p> contains</p>
<p> the</p>
<p>acceptable amount of violated deadlines for this supervised entity.</p>
<p>WdgMDeadlineReferenceCycle</p>
<p>:  This  parameter  contains  the  amount</p>
<p> of</p>
<p>supervision  cycles  to  be  used  as  reference  by  the  deadline  supervisions  of  this</p>
<p>supervised entity.</p>
<p><b>Note:  </b>The  deadline  reference  cycle  for  a  supervised  entity  starts  with  the  first</p>
<p>detected  deadline  violation  and  not  with  the  S-WdgM  start  up.  Hence,  the  first</p>
<p>deadline reference cycle starts  with the  transition of  the  supervised  entity from  the</p>
<p>status  </p>
<p>OK</p>
<p> to  </p>
<p>FAILED</p>
<p>.  If  no  deadline  violation  is  detected  for  a  whole  deadline</p>
<p>reference cycle within the tolerance, then the supervised entity recovers and changes</p>
<p>its  status  from  </p>
<p>FAILED</p>
<p> to  </p>
<p>OK</p>
<p>.  Otherwise,  if  the  tolerance  is  exhausted  and  the</p>
<p>deadline  violations  continue,</p>
<p> then  the  supervised  entity  changes  its  status  to</p>
<p>EXPIRED</p>
<p>. It can be said that the deadline reference cycle is processed only during</p>
<p>the status </p>
<p>FAILED</p>
<p> – it starts with the first detected deadline violation. The deadline</p>
<p>reference cycle is restarted with each following transition from </p>
<p>OK</p>
<p> to </p>
<p>FAILED</p>
<p>, and it is</p>
<p>not processed during the status </p>
<p>OK</p>
<p>, </p>
<p>EXPIRED</p>
<p> or </p>
<p>DEACTIVATED</p>
<p>.</p>
<p><b>2.2.3</b></p>
<p><b>Alive Supervision</b></p>
<p><b>Aliveness </b>monitors the <b>frequency of hits </b>of checkpoints. For example, the algorithm</p>
<p>could expect a sensor to report its measurements on a regular basis, and a certain task</p>
<p>needs to process this data periodically. If a task stops reporting (alive sign is lost or too</p>
<p>infrequent) or starts reporting too often, then the aliveness of that task is violated.</p>
<p><b>Alive supervision  </b>is  associated  with a  <b>checkpoint  </b>in a  <b>supervised  entity</b>.  If  you</p>
<p>need to monitor <b>only </b>the <b>frequency </b>with which a  task  is  called,  you can make  it  a</p>
<p>supervised entity that contains <b>only one checkpoint </b>with the corresponding aliveness</p>
<p>parameters.</p>
<p><b>Note:  Irregular  calls  </b>of  the  S-WdgM  main  function  or  the  omission  of  calls  of  </p>
<p>WdgM_CheckPointReached()</p>
<p> would most likely result  in <b>aliveness  violation</b>.</p>
<p>When  alive  monitoring  for  a  checkpoint  is  activated,  then  that  checkpoint  must  be</p>
<p><b>regularly  called  </b>for  the  entire  period  during  which  the  supervised  entity  is  active,</p>
<p>otherwise aliveness violation will be detected.  In the first supervision cycle,  the  Alive</p>
<p>counter</p>
<p> evaluation</p>
<p> can</p>
<p> be</p>
<p> suppressed</p>
<p> by</p>
<p> the</p>
<p> parameter</p>
<p> </p>
<p>WdgMFirstCycleAliveCounterReset</p>
<p>.</p>
<p>It is important to consider which aliveness parameters are better for a specific situation.</p>
<p>The  example  below  shows  how  to  choose  the  <b>appropriate  </b>alive  supervision</p>
<p><b>parameters</b>.</p>
<p>58</p>
<p>59</p>
<p>78</p>
<p>48</p>
<h1 style="page-break-before:always; "></h1>
<p>19</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Let a supervised entity with one checkpoint monitor the <b>aliveness </b>of a <b>task</b>.</p>
<p>The S-WdgM has a period of <b>20ms</b>, one S-WdgM tick is <b>1ms</b>.</p>
<p>The task is periodic with a fixed period of <b>30ms</b>.</p>
<p>The <b>aliveness parameters </b>that must be set are: </p>
<p>o</p>
<p>WdgMExpectedAliveIndications</p>
<p>:</p>
<p>Defines  how  many  alive  indications  (checkpoint  reached  calls)  are  expected</p>
<p>within one supervision reference cycle.</p>
<p>o</p>
<p>WdgMSupervisionReferenceCycle</p>
<p>:</p>
<p>Defines the supervision reference cycle length as a number of supervision cycles</p>
<p>(</p>
<p>WdgMSupervisionCycle</p>
<p>).</p>
<p>o</p>
<p>WdgMMinMargin</p>
<p>:</p>
<p>Defines the lower tolerance of expected alive indications.</p>
<p>o</p>
<p>WdgMMaxMargin</p>
<p>:</p>
<p>Defines the upper tolerance of expected alive indications.</p>
<p>o</p>
<p>Hence, the allowed number of indications is in the range</p>
<p>WdgMSupervisionReferenceCycle</p>
<p> is in the range</p>
<p>[WdgMExpectedAliveIndications - WdgMMinMargin,</p>
<p>WdgMExpectedAliveIndications + WdgMMaxMargin]</p>
<p><b>Note: </b>In contrast to the deadline and program flow reference cycle the alive supervision</p>
<p>cycle begins with the S-WdgM startup. The alive supervision in the very first cycle can</p>
<p>be influenced by the parameter </p>
<p>WdgMFirstCycleAliveCounterReset</p>
<p>. This is</p>
<p>because  each alive  counter  is  evaluated  once  per  supervision reference  cycle.  This</p>
<p>means that the supervision reference cycle is processed from the system startup on and</p>
<p>during  the  status  </p>
<p>OK</p>
<p> and  </p>
<p>FAILED</p>
<p> of  the  corresponding  supervised  entity.  If  the</p>
<p>supervised entity is in the status </p>
<p>EXPIRED</p>
<p>, then the supervision reference cycle is not</p>
<p>needed  anymore.  If  the  supervised  entity  is  in  the  status  </p>
<p>DEACTIVATED</p>
<p>,  then  the</p>
<p>supervision reference cycle is frozen. It is restarted if the supervised entity is activated</p>
<p>again.</p>
<p>There are several ways for monitoring the task given in the example above. Below, <b>one</b></p>
<p><b>variant </b>is given: </p>
<p>Set</p>
<p>WdgMExpectedAliveIndications=1</p>
<p>WdgMSupervisionReferenceCycle=1</p>
<p>WdgMMinMargin=1</p>
<p>WdgMMaxMargin=0</p>
<p>This means the S-WdgM should expect <b>1 </b>or <b>0 </b>(</p>
<p>WdgMExpectedAliveIndications</p>
<p>65</p>
<p>66</p>
<p>99</p>
<p>66</p>
<p>66</p>
<p>48</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 20</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>- WdgMMinMargin)</p>
<p> occurrences  within one  supervised  reference  cycle,  which  is</p>
<p>fixed to <b>20ms </b>(which is <b>one S-WdgM supervision cycle</b>). </p>
<p>Figure  8 illustrates this example.</p>
<p>  time</p>
<p><b> CP</b></p>
<p><b>CP</b>:</p>
<p>EAI = 1</p>
<p>SRC=1</p>
<p>min=1</p>
<p>max=0</p>
<p>WdgM_MainFunction</p>
<p>WdgM_MainFunction</p>
<p>WdgM_MainFunction</p>
<p>WdgM_MainFunction</p>
<p>WdgM_MainFunction</p>
<p>20ms</p>
<p><b> CP</b></p>
<p><b> CP</b></p>
<p>S-WdgM period</p>
<p>      30ms</p>
<p>Task period</p>
<p>20ms</p>
<p>Supervision</p>
<p>reference</p>
<p>cycle</p>
<p>Number of alive </p>
<p>indications per </p>
<p>supervision cycle</p>
<p>1</p>
<p>1</p>
<p>1</p>
<p>0</p>
<p> </p>
<p><i><b>Fig. 8: A task being monitored during one S-WdgM  supervision cycle (20ms)</b></i></p>
<p>However, if the task stops being executed it will not be detected, because <b>zero  alive</b></p>
<p><b>indications  </b>per  supervised  reference  cycle  are  <b>tolerated</b>.  Therefore,  this  choice  of</p>
<p>setting aliveness parameters is not very good.</p>
<p>Below, a <b>second variant </b>is given:</p>
<p>Set</p>
<p>WdgMExpectedAliveIndications=2</p>
<p>WdgMSupervisionReferenceCycle=2</p>
<p>WdgMMinMargin=1</p>
<p>WdgMMaxMargin=0</p>
<p>This means the S-WdgM should expect <b>1 </b>or <b>2 </b>alive indications within one supervised</p>
<p>reference  cycle,  which  is  fixed  to  <b>40ms  </b>(and  which  is  <b>two  S-WdgM  supervision</b></p>
<p><b>cycles</b>). </p>
<p>Figure  9 illustrates this example.</p>
<h1 style="page-break-before:always; "></h1>
<p>21</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>  time</p>
<p><b> CP</b></p>
<p><b>CP</b>:</p>
<p>EAI = 2</p>
<p>SRC=2</p>
<p>min=1</p>
<p>max=0</p>
<p>WdgM_MainFunction</p>
<p>WdgM_MainFunction</p>
<p>WdgM_MainFunction</p>
<p>WdgM_MainFunction</p>
<p>WdgM_MainFunction</p>
<p>20ms</p>
<p><b> CP</b></p>
<p><b> CP</b></p>
<p>S-WdgM period</p>
<p>      30ms</p>
<p>Task period</p>
<p>40ms</p>
<p>supervision</p>
<p>reference</p>
<p>cycle</p>
<p>Number of alive </p>
<p>indications per </p>
<p>supervision cycle</p>
<p>2</p>
<p>1</p>
<p> </p>
<p><i><b>Fig. 9: A task being monitored during two S-WdgM  supervision cycles (40ms)</b></i></p>
<p>This  configuration  solves  the  problem  of  detecting  the  disappearance  of  the  task.</p>
<p>However, the reaction time for error detection doubles from <b>20 </b>to <b>40ms</b>.</p>
<p>A <b>third variant </b>would be to set the supervision reference cycle to the <b>least common</b></p>
<p><b>multiple </b>of the <b>S-WdgM supervision cycle </b>and the <b>task period</b>. In the example given</p>
<p>above  this  would  be  <b>60ms  </b>(<b>three  S-WdgM  supervision  cycles</b>).  In  this  case,  we</p>
<p>expect exactly <b>2 alive indications</b>.  Hence,  the  minimum  and  maximum  margins  are</p>
<p>both </p>
<p>0</p>
<p>.</p>
<p><b>Note: </b>The <b>task period </b>and the <b>S-WdgM supervision cycle </b>must be <b>synchronized</b></p>
<p>and started with an offset to each other (e.g., scheduled in an operating system).</p>
<p><b>2.2.4</b></p>
<p><b>More Details on Checkpoints and Transitions</b></p>
<p>Every supervised entity has one <b>initial checkpoint</b>. The number of <b>end checkpoints</b></p>
<p>can be zero, one or more than one.  If  the  supervised  entity contains  only one  single</p>
<p>checkpoint, then it should be both an initial and an end checkpoint. <b>Local transitions</b></p>
<p>are defined by their <b>source </b>and <b>destination  checkpoints</b>, which must belong to the</p>
<p>same  supervised  entity.  Those  local  transitions  are  specified  in  the  parameters</p>
<p> </p>
<p>WdgMLocalTransitionSourceRef</p>
<p> and  </p>
<p>WdgMLocalTransitionDestRef</p>
<p>. </p>
<p>After initialization of the S-WdgM, all supervised entites are passive.</p>
<p><b>Note:</b></p>
<p> This</p>
<p> has</p>
<p> nothing</p>
<p> to</p>
<p> do</p>
<p> with</p>
<p> the</p>
<p> supervised</p>
<p> entity</p>
<p> state</p>
<p> </p>
<p>WDGM_LOCAL_STATUS_DEACTIVATED</p>
<p>. </p>
<p>A supervised entity becomes active when its local initial checkpoint has been called. In</p>
<p>the  example  of</p>
<p> the  supervised  entity  </p>
<p>temperature_control</p>
<p> (see  Section</p>
<p>Supervised  Entity  and  Program  Flow  Supervision</p>
<p> and  Figure  </p>
<p> 4),</p>
<p> the  initial</p>
<p>68</p>
<p>67</p>
<p>82</p>
<p>13</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 22</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>checkpoint  is  </p>
<p>read_temperature</p>
<p>.</p>
<p> Only  if</p>
<p> the  supervised  entity  is  active,</p>
<p> its</p>
<p>checkpoints (other than the initial checkpoint) may be  reached,  otherwise  a  program</p>
<p>flow  violation  occurs.  Reaching  an  end  checkpoint,  the  supervised  entity  is  set  to</p>
<p>passive state, and it can be activated again only through the initial checkpoint.</p>
<p>Reaching the initial checkpoint again after the supervised entity has been activated is a</p>
<p>program flow violation.</p>
<p><b>Local  reflexive  transitions  </b>(from  a  checkpoint  to  itself)  are  allowed  </p>
<p>only  when</p>
<p>configured. The reflexive transitions cannot be defined for local initial or local  end</p>
<p>checkpoints.</p>
<p><b>Local initial checkpoints </b>are not allowed to have local incoming transitions.</p>
<p><b>Local end checkpoints </b>are not allowed to have local outgoing transitions.</p>
<p><b>2.2.5</b></p>
<p><b>Global Transitions</b></p>
<p>It is possible to represent program flow dependencies between supervised entities by</p>
<p>using  so-called  <b>global  transitions</b>.  Global  transitions  are  defined  for  the  S-WdgM</p>
<p>configuration  by  their  source  and  destination  checkpoints,  which  must  belong  to</p>
<p>different</p>
<p> supervised  entities  and  which  are  specified  by  the  parameters</p>
<p> </p>
<p>WdgMGlobalTransitionSourceRef</p>
<p> and</p>
<p> </p>
<p>WdgMGlobalTransitionDestRef</p>
<p>. The end checkpoint of an supervised entity</p>
<p>is usually connected to the initial checkpoint of another supervised entity, expressing a</p>
<p>logical  dependency between them.  However,  global  transitions  are  allowed  between</p>
<p>any two checkpoints of any two supervised entities.</p>
<p>One must keep in mind several things when defining a global  transition between two</p>
<p>arbitrary checkpoints:</p>
<p>If the source of the global transition is not a local end checkpoint, then the source entity</p>
<p>will  remain active.  Program  flow  violation would  occur  if  its  initial  checkpoint  were</p>
<p>reached again.</p>
<p>If the destination checkpoint of the global transition is not a local initial checkpoint., the</p>
<p>destination entity may not be active. Program flow violation would occur if a non-initial</p>
<p>checkpoint of an inactive supervised entity were reached.</p>
<p>Exactly  one  global  initial  checkpoint  must  be  defined.  The  first  global  transition</p>
<p>passed must have that checkpoint as a source.</p>
<p>It is possible to define one or several global end checkpoints or none. Once the global</p>
<p>end checkpoint served as  a  destination checkpoint  of  a  global  transition,  no  more</p>
<p>global</p>
<p> transitions  are  allowed  (unless  they  are  started  with  the  global</p>
<p> initial</p>
<p>checkpoint).</p>
<p>Figure 10 shows a global transition between two supervised entities:</p>
<p>The </p>
<p>pressure_sensor_task</p>
<p> gets the pressure value.</p>
<p>69</p>
<p>68</p>
<h1 style="page-break-before:always; "></h1>
<p>23</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>The </p>
<p>control_pressure_task</p>
<p> calculates a reaction and reacts to the measured</p>
<p>pressure. However, it can start only after the first task (</p>
<p>pressure_sensor_task</p>
<p>)</p>
<p>has finished and after the pressure value has been obtained. This relation is shown by</p>
<p>a global transition (see <i>dotted arrow</i>).</p>
<p>Some transitions in Figure 10 have comments that show deadlines in milliseconds.</p>
<p>Deadlines can also be defined for global transitions (see <i>dotted arrow</i>), where <b>1..5ms</b></p>
<p>means  that  the  second  task  (</p>
<p>control_pressure_task</p>
<p>)  should  start  not  later</p>
<p>than <b>5ms</b>, but not earlier than <b>1ms </b>after the first task has finished.</p>
<p><i><b>Fig. 10: Global transition between two supervised entities</b></i></p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 24</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.2.6</b></p>
<p><b>Global Transitions and Program Flow</b></p>
<p>In general the, program flow does not differ between local and  global  transitions.  But</p>
<p>what seems intuitive for local transitions might not be so obvious for global transitions..</p>
<p>This section gives examples that show the usage of local and global transitions with a</p>
<p>focus on program flow split.</p>
<p>From the perspective of the S-WdgM, the program flow is the consecutive reaching of</p>
<p>checkpoints.  The  start  of  each program  flow  must  be  a  local  initial  checkpoint.  The</p>
<p>program flow propagates through local transitions within the boundaries of a supervised</p>
<p>entity and  through global  transitions  within the  boundaries  of  the  whole  system.  The</p>
<p>program flow might eventually come to an end at a local end checkpoint, or never come</p>
<p>to an end if a program flow loop occurs.</p>
<p>A very important feature is that it is not allowed to split the program flow. This means</p>
<p>that the program flow is  allowed  to  take  only one  transition at  each checkpoint  from</p>
<p>which more than one local or global transition comes out.</p>
<p><b>2.2.6.1</b></p>
<p><i>Example of an Incorrect Global Transition Split</i></p>
<p>Figure 11 shows that  after  checkpoint  <b>cp0_1  </b>the  program  flow  must  decide  to  take</p>
<p>either  the  global</p>
<p> transition  <b>cp1_0  </b>or  <b>cp2_0</b>.  Reaching  <b>cp2_0  </b>immediately  after</p>
<p>reaching <b>cp1_0 </b>would result in a program flow violation.</p>
<p> </p>
<p><i><b>Fig. 11: Incorrect global transition split</b></i></p>
<h1 style="page-break-before:always; "></h1>
<p>25</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.2.6.2</b></p>
<p><i>Example of an Incorrect Program Split in the Middle of an Entity</i></p>
<p>Figure 12 shows another example. Let us assume that the program flow reaches <b>cp0_0</b></p>
<p>and  then  <b>cp0_1</b>.  Afterward  the  program  flow  decides  to  take  the  global  transition</p>
<p>reaching <b>cp1_0 </b>instead of taking the local transition. Now, if  the  local  transition took</p>
<p>place afterward (by reaching <b>cp0_2</b>), a program flow violation would occur. However,</p>
<p><b>cp0_2 </b>can be reached via the global transition if the program flow comes from <b>cp1_1</b>.</p>
<p> </p>
<p><i><b>Fig. 12: Incorrect program split in the middle of an entity</b></i></p>
<p><b>Note:  </b>It  is  easy to  create  configurations  with complex global  transitions  that  do  not</p>
<p>make much sense in a real system. For example, if &quot;jumping out&quot; of a supervised entity</p>
<p>from a checkpoint that is not a local end checkpoint, one must keep in mind that this</p>
<p>supervised entity is still active (local activity flag is still </p>
<p>true</p>
<p>), and it cannot be restarted</p>
<p>by reaching its local initial  checkpoint  again.  Thus,  it  is  recommended  to  use  global</p>
<p>transitions  carefully and  let  them  start  only at  local  end  checkpoints  of  a  supervised</p>
<p>entity and end at a local initial checkpoint of some other entity. Exceptions to this must</p>
<p>be analyzed thoroughly, with respect to the program flow and the local activity of both</p>
<p>supervised entities.</p>
<p><b>2.2.7</b></p>
<p><b>S-WdgM Supervision Cycle</b></p>
<p>The <b>supervision cycle </b>is the time period in which the cyclic supervision algorithm is</p>
<p>executed.</p>
<p> At</p>
<p> the</p>
<p> end</p>
<p> of</p>
<p> each</p>
<p> supervision</p>
<p> cycle,</p>
<p> the</p>
<p> <b>main</b></p>
<p><b> function</b>,</p>
<p> </p>
<p>WdgM_MainFunction()</p>
<p>,  is  called.  This  function evaluates  the  checkpoint  data</p>
<p>gathered  in the  previous  period  and  triggers  the  Watchdog  if  no  violation has  been</p>
<p>detected. Function </p>
<p>WdgM_MainFunction()</p>
<p> also checks for violations depending on</p>
<p>the reference cycle defined for the respective monitoring feature.</p>
<p>85</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 26</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Example:</b></p>
<p> If</p>
<p> </p>
<p>WdgMProgramFlowReferenceCycle</p>
<p>=3</p>
<p>,</p>
<p> then  the  check  for</p>
<p>program flow violation is done in every third call of </p>
<p>WdgM_MainFunction()</p>
<p>.</p>
<p>The shorter this period and the reference cycles, the shorter the reaction time of the S-</p>
<p>WdgM, but the more processor time is consumed.</p>
<p><b>Note: </b>Aliveness supervision is strongly connected to this period. The expected number</p>
<p>of  <b>alive  indications  </b>for  a  certain  checkpoint  refers  to  the  last  supervision  cycle</p>
<p>(configurable  for  the  checkpoint),  which  is  expressed  in  the  number  of  supervision</p>
<p>cycles. </p>
<p>Figure 13 shows a time span with 3 supervision cycles. In each cycle, CP1 and CP2 are</p>
<p>hit once. Once the S-WdgM main function is called, the window for the next watchdog</p>
<p>trigger</p>
<p> is</p>
<p> defined</p>
<p> by</p>
<p> </p>
<p>WdgMTriggerWindowStart</p>
<p> and</p>
<p> </p>
<p>WdgMTriggerConditionValue</p>
<p>.</p>
<p> </p>
<p>WdgMMainFunction </p>
<p>WdgMSupervisionCycle </p>
<p>WdgMTriggerConditionValue </p>
<p>WdgMTriggerWindowStart </p>
<p>WD </p>
<p>trigger </p>
<p>WdgMMainFunction </p>
<p>WdgMMainFunction </p>
<p>CP1 </p>
<p>CP2 </p>
<p>CP1 </p>
<p> </p>
<p>CP2 </p>
<p> </p>
<p>WdgM_Init </p>
<p>WD </p>
<p>trigger </p>
<p>WD </p>
<p>trigger </p>
<p>Trigger window </p>
<p>CP1 </p>
<p>CP2 </p>
<p>Explanations: </p>
<p>CP1, CP2:     Checkpoint 1 and 2 </p>
<p>WD trigger:    Point where the watchdog trigger occurs </p>
<p>Entity1:          Entity with two checkpoints </p>
<p>Green bar:    Time window where re-triggering is allowed </p>
<p>time </p>
<p>Entity 1 </p>
<p>Entity 1 </p>
<p>Entity 1 </p>
<p><i><b>Fig. 13: S-WdgM  supervision cycle</b></i></p>
<p>60</p>
<p>77</p>
<p>77</p>
<h1 style="page-break-before:always; "></h1>
<p>27</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.2.8</b></p>
<p><b>S-WdgM Stack Fault Reaction Time</b></p>
<p>The S-WdgM distinguishes between the <b>fault detection  time </b>and the <b>fault reaction</b></p>
<p>time.</p>
<p>The <b>fault detection time </b>spans from the <b>occurrence </b>of an <b>error </b>to the point in time</p>
<p>when that error is detected and communicated to  the  system  (via  DET  or  callback</p>
<p>functions).</p>
<p>The <b>fault reaction time </b>spans from the <b>detection  </b>of an <b>error </b>to the actual system</p>
<p>reset.</p>
<p>If a <b>program flow violation </b>or a <b>deadline violation </b>occur, the source checkpoint <b>and</b></p>
<p>the destination checkpoint report to the S-WdgM when hit. At the end  of  the  <b>current</b></p>
<p><b>supervision  cycle</b>,  the  S-WdgM  main  function,  </p>
<p>WdgM_MainFunction()</p>
<p>,  is</p>
<p>called and the violation is detected (ie. the configured destination checkpoint was hit too</p>
<p>late or not at all) and communicated to the system.</p>
<p>If an <b>alive counter violation </b>occurs, it is also the S-WdgM main function that detects</p>
<p>and communicates the violation at the <b>end </b>of the <b>supervision reference cycle </b>of the</p>
<p>alive supervision.</p>
<p>Once a <b>violation </b>has been detected, the S-WdgM can (depending on the configuration)</p>
<p>immediately go to a <b>safe state </b>(ie. reset the WS or discontinue triggering the WD) or</p>
<p><b>allow </b>a configurable number of <b>violations </b>in a row and, hence, <b>delay </b>the <b>safe state</b></p>
<p>for this amount of supervision reference cycles.</p>
<p>The decision whether to trigger or reset the WD or not is made within the S-WdgM main</p>
<p>function. This function also performs the trigger and reset.</p>
<p>The  shortest  fault  detection  and  reaction  time  can  be  achieved  by  configuring  an</p>
<p>immediate reset. However, the time still depends on what occurs first in a supervision</p>
<p>cycle, the fault or the hit of the checkpoint.</p>
<p>Figure 14 shows a scenario  with a  fault  occurring  first.  The  checkpoint  registers  the</p>
<p>fault,</p>
<p> and  at</p>
<p> the  end  of</p>
<p> the  current</p>
<p> supervision  cycle,</p>
<p> the  fault</p>
<p> is  detected,</p>
<p>communicated, with the system being reset.</p>
<p><b>Note:  </b>For  alive  supervision,  the  detection  is  at  the  end  of  the  current  supervision</p>
<p>reference cycle.</p>
<p>85</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 28</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p> </p>
<p>WdgMMainFunction </p>
<p>WdgMSupervisionCycle </p>
<p>WdgMTriggerConditionValue </p>
<p>WdgMTriggerWindowStart </p>
<p>WdgMMainFunction </p>
<p>WdgMMainFunction </p>
<p>CP </p>
<p>CP </p>
<p>WD </p>
<p>trigger </p>
<p>CP … Checkpoint with Alive monitoring  </p>
<p>- The </p>
<p>WdgMSupervisionReferenceCycle = WdgMSupervisionCycle</p>
<p> </p>
<p>- The Watchdog is triggered inside the </p>
<p>WdgM_MainFunction()</p>
<p>. </p>
<p>- The green line represents the time window  when the Watchdog can be triggered. </p>
<p>- </p>
<p>WdgMImmediateReset = TRUE</p>
<p> </p>
<p>RESET </p>
<p>time </p>
<p><b>Fault  </b></p>
<p><b>S-WdgM Stack </b></p>
<p><b>minimum reaction time </b></p>
<p><b>S-WdgM fault detection time </b></p>
<p><b>S-WdgM fault reaction time </b></p>
<p><i><b>Fig. 14: The S-WdgM  Stack minimum reaction time</b></i></p>
<h1 style="page-break-before:always; "></h1>
<p>29</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Figure  15.  shows  a  scenario  with  a  checkpoint  being  hit  first.  The  fault  cannot  be</p>
<p>detected before the next checkpoint is hit, which is due to the subsequent supervision</p>
<p>cycle.  As  a  consequence,  violation,  detection,  communication and  system  reset  are</p>
<p>done in the second following call of the S-WdgM main function.</p>
<p><b>Note: </b>For alive supervision, the detection is at the end of the next supervision reference</p>
<p>cycle for alive supervision.</p>
<p> </p>
<p>WdgMMainFunction </p>
<p>WdgMSupervisionCycle </p>
<p>WdgMTriggerConditionValue </p>
<p>WdgMTriggerWindowStart </p>
<p>WdgMMainFunction </p>
<p>WdgMMainFunction </p>
<p>CP </p>
<p>CP </p>
<p><b>S-WdgM Stack maximum reaction time </b></p>
<p>CP … Checkpoint with Alive monitoring  </p>
<p>- In the picture, </p>
<p>WdgMSupervisionReferenceCycle = WdgMSupervisionCycle </p>
<p>- The Watchdog is triggered inside the </p>
<p>WdgM_MainFunction()</p>
<p>. </p>
<p>- The green line represents the time window  when the Watchdog can be triggered. </p>
<p>- The ‘S-WdgM Fault detection time’ is equal to ISO26262 ‘Diagnostic test interval’ </p>
<p>- The ‘<b>ault reaction time </b>is the <b>S-WdgM Fault reaction time + the S-Wdg Fault reaction </b></p>
<p><b>time.  </b></p>
<p>RESET </p>
<p>time </p>
<p><b>Fault  </b></p>
<p><b>S-WdgM fault detection time </b></p>
<p>CP not called </p>
<p>within expected </p>
<p>time interval </p>
<p><b>S-WdgM fault reaction time </b></p>
<p><i><b>Fig. 15: The S-WdgM  Stack maximum reaction time</b></i></p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 30</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.2.9</b></p>
<p><b>Reset Path and Safe State</b></p>
<p>The  <b>safe  state  </b>is  entered  as  a  result  of  an  <b>MCU  reset</b>.  The  S-WdgM  builds  its</p>
<p>functionality on a <b>reliable </b>and <b>robust reset  path</b>.  The  S-WdgM  <b>default  reset  path</b></p>
<p>uses the <b>Watchdog Device </b>itself through the S-WdgIF. The Watchdog Device can be</p>
<p>either  an  external</p>
<p> chip  or  an  MCU-internal</p>
<p> controller.  The  system  integrator  can</p>
<p>additionally</p>
<p> set</p>
<p> a</p>
<p> secondary</p>
<p> path</p>
<p> by</p>
<p> adding</p>
<p> the</p>
<p> parameter</p>
<p> </p>
<p>WDGM_SECOND_RESET_PATH = STD_ON</p>
<p>. The <b>secondary reset path </b>is used when</p>
<p>the <b>Safe Watchdog Interface </b>returns an <b>error response</b>. This error response can be</p>
<p>caused by communication errors to the external Watchdog device.</p>
<p>Figure 16 shows the <b>primary </b>and <b>secondary </b>reset path.</p>
<p> </p>
<p><b>                                               MCU </b></p>
<p>External </p>
<p>Watchdog </p>
<p>device </p>
<p> </p>
<p>Safe Watchdog </p>
<p>Manager </p>
<p>Safe Watchdog </p>
<p>Interface </p>
<p>Hardware </p>
<p>Software  </p>
<p>Safe Watchdog </p>
<p>Driver </p>
<p>BSW’s </p>
<p>Internal </p>
<p>Reset </p>
<p> </p>
<p><b>Mcu </b></p>
<p><b>driver </b></p>
<p><b>Primary </b></p>
<p><b>reset path </b></p>
<p><b>Secondary </b></p>
<p><b>reset path </b></p>
<p>Internal </p>
<p>Watchdog </p>
<p>device </p>
<p>S-WdgM    API </p>
<p><i><b>Fig. 16: Primary and secondary reset path of the S-WdgM</b></i></p>
<p>The S-WdgM uses the <b>primary reset path  </b>for a  <b>regular  Watchdog-initiated  reset</b></p>
<p>and also for an <b>immediate MCU reset</b>. The primary reset path is the <b>preferred  </b>path,</p>
<p>because it  is  part  of  the  S-WdgM  software  and  thus  safe.  The  MCU  driver  with the</p>
<p>AUTOSAR function </p>
<p>Appl_Mcu_PerformReset()</p>
<p> must guarantee freedom from</p>
<p>interference.</p>
<p>The <b>secondary reset path </b>is optional. It is used when the <b>primary </b>reset path signals</p>
<p>a <b>fault</b>.</p>
<p>The S-WdgM <b>safe state </b>is the <b>MCU reset state</b>.</p>
<p><b>Note: </b>The S-WdgM safe state is not necessarily the system safe state.</p>
<p>89</p>
<h1 style="page-break-before:always; "></h1>
<p>31</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>The S-WdgM can invoke the safe state in two ways:</p>
<p>MCU reset after watchdog timeout by discontinuing watchdog triggering.</p>
<p>Immediate MCU reset by an immediate watchdog reset. The immediate reset can be</p>
<p>configured.  See  parameter  </p>
<p>WDGM_IMMEDIATE_RESET</p>
<p> </p>
<p>in  Section  S-WdgM</p>
<p>Global Preprocessor Settings</p>
<p>.</p>
<p><b>2.2.10</b></p>
<p><b>S-WdgM Local Entity State</b></p>
<p>Every supervised entity has a <b>local state </b>that expresses  the  occurrence  of  detected</p>
<p>violations:</p>
<p>State </p>
<p>OK</p>
<p>No violation has been detected</p>
<p>State </p>
<p>FAILED</p>
<p>A  violation has  been detected,  the  reset  is  pending  within a  delay</p>
<p>time (maybe 0 ticks) and the violation repeats.</p>
<p>State </p>
<p>EXPIRED</p>
<p>A  violation  has  repeated  throughout  the  delay  time.  A  reset  is</p>
<p>inevitable.</p>
<p>AUTOSAR allows configuring a tolerance delay after an alive counter violation has been</p>
<p>detected. See [1] for detailed information. AUTOSAR does not allow configuring such</p>
<p>tolerances for program flow and deadline  violations.  The  S-WdgM  allows  configuring</p>
<p>such tolerances for all three monitoring features described below:</p>
<p>Once  a  violation  has  been  detected,  the  S-WdgM  changes  its  state  from  </p>
<p>OK</p>
<p> to</p>
<p>FAILED</p>
<p> and starts a so-called <b>tolerance time</b>, which is configured as follows:</p>
<p>The tolerance time is the <b>supervision reference cycle </b>(according to the  monitoring</p>
<p>feature) <b>multiplied </b>by a supervision reference cycle <b>tolerance value</b>.</p>
<p>As long as the violation repeats within the tolerance time at least every supervision</p>
<p>reference cycle, the S-WdgM stays in the state </p>
<p>FAILED</p>
<p>.</p>
<p>If the violation does not occur  in a  supervision reference  cycle  within the  tolerance</p>
<p>delay, the S-WdgM returns to the state </p>
<p>OK</p>
<p> as if no violation had happened. Only the</p>
<p>status change is logged.</p>
<p>If the violation has repeated to the end of the tolerance time, the S-WdgM enters the</p>
<p>state </p>
<p>EXPIRED</p>
<p>.</p>
<p>Figure 17 shows the state changes in dependence of the configured reference cycles</p>
<p>and reference cycle tolerances.</p>
<p>39</p>
<p>38</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 32</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p> </p>
<p><i><b>Fig. 17: M odified state machine</b></i></p>
<p><b>Note: </b>The AUTOSAR implementation can be simulated for deadline and program flow</p>
<p>violations with </p>
<p>          </p>
<p>reference cycle = reference cycle tolerance = 0</p>
<p>.</p>
<h1 style="page-break-before:always; "></h1>
<p>33</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>The exact names of the configuration fields for the tolerance delay are:</p>
<p><b>Monitoring</b></p>
<p><b>Reference Cycle</b></p>
<p><b>Reference Cycle Tolerance</b></p>
<p>Alive Supervision</p>
<p>WdgMSupervisionReferenceCycle</p>
<p>WdgMFailedSupervisionRefCycleTol</p>
<p>Program Flow Monitoring</p>
<p>WdgMProgramFlowReferenceCycle</p>
<p>WdgMFailedProgramFlowRefCycleTol</p>
<p>Deadline Monitoring</p>
<p>WdgMDeadlineReferenceCycle</p>
<p>WdgMFailedDeadlineRefCycleTol</p>
<p><b>Note:</b></p>
<p>WdgMProgramFlowReferenceCycle</p>
<p> and</p>
<p>WdgMFailedProgramFlowRefCycleTol</p>
<p> </p>
<p>must both be <b>0 </b>or <b>unequal to 0</b>.</p>
<p>WdgMDeadlineReferenceCycle</p>
<p> and</p>
<p>WdgMFailedDeadlineRefCycleTol</p>
<p> must both be <b>0 </b>or <b>unequal to 0</b>.</p>
<p><b>2.2.11</b></p>
<p><b>S-WdgM Global State</b></p>
<p>The  local  states  are  periodically  summarized  in  an    <b>S-WdgM  global  state</b>.  If  all</p>
<p>supervised entities have the state </p>
<p>OK</p>
<p>, then the global state is </p>
<p>OK</p>
<p>. When at least  one</p>
<p>supervised  entity  changes  to  the  state  </p>
<p>FAILED</p>
<p>,  then  the  global</p>
<p> state  becomes</p>
<p>FAILED</p>
<p>.  When at  least  one  supervised  entity  changes  to  the  state  </p>
<p>EXPIRED</p>
<p>,  the</p>
<p>global  state  becomes  </p>
<p>EXPIRED</p>
<p>.  Once  the  global  state  is  </p>
<p>EXPIRED</p>
<p>,  the  S-WdgM</p>
<p>continues the delay until it enters the state </p>
<p>STOPPED</p>
<p>. This is when the S-WdgM stops</p>
<p>triggering the Watchdog (or resets it). The <b>delay </b>is the <b>supervision cycle multiplied</b></p>
<p>by</p>
<p> the</p>
<p> configurable</p>
<p> <b>expired</b></p>
<p><b> supervision</b></p>
<p><b> cycle</b></p>
<p><b> tolerance</b></p>
<p> (parameter</p>
<p> </p>
<p>WdgMExpiredSupervisionCycleTol</p>
<p>).</p>
<p>Once  in  the  state  </p>
<p>STOPPED</p>
<p>,  the  S-WdgM  brings  the  system  to  the  safe  state  by</p>
<p>performing  a  system  reset  through  the  <b>S-WdgIf  module  </b>and,  thus,</p>
<p> through  the</p>
<p>watchdog(s) in the system. If the preprocessor option </p>
<p>WDGM_SECOND_RESET_PATH</p>
<p> is set to </p>
<p>STD_ON</p>
<p> and the S-WdgIf reports a failure, then the system goes into a safe</p>
<p>state through the MCU module (see Section S-WdgM Global Preprocessor Settings</p>
<p>)</p>
<p>.</p>
<p><b>2.3</b></p>
<p><b>Integration in AUTOSAR 3.1 and 4.0 Environments</b></p>
<p>The S-WdgM implements functionality described in <b>AUTOSAR 4.0r1</b>. However, the S-</p>
<p>WdgM can be integrated in <b>AUTOSAR 3.1 </b>and <b>AUTOSAR 4.0 </b>environments. To this</p>
<p>end, a special <b>preprocessor switch </b>is automatically generated by the <b>configuration</b></p>
<p><b>generator</b>. That preprocessor switch cannot be altered manually. This is</p>
<p>WDGM_AUTOSAR_4_x (STD_ON / STD_OFF)</p>
<p>, which is placed in the generated</p>
<p>file </p>
<p>WdgM_Cfg_Features.h</p>
<p>. The value of the preprocessor switch is determined by</p>
<p>the configuration generator according to the provided <b>ECUC file</b>, more specifically</p>
<p>66</p>
<p>57</p>
<p>60</p>
<p>59</p>
<p>59</p>
<p>58</p>
<p>60</p>
<p>59</p>
<p>59</p>
<p>58</p>
<p>53</p>
<p>45</p>
<p>38</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 34</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>according to the <b>XML default name space </b>of the ECUC file (attribute </p>
<p><b>xmlns</b></p>
<p>).</p>
<p>For <b>AUTOSAR 3.1</b>: </p>
<p>WDGM_AUTOSAR_4_x</p>
<p> is generated to </p>
<p>STD_OFF</p>
<p>, which</p>
<p>prepares the embedded code for a compilation in an AUTOSAR 3.1 environment. If</p>
<p>the AUTOSAR version is not 3.1, but any other 3.x, the configuration generator</p>
<p>additionally outputs a warning during this process.</p>
<p>For <b>AUTOSAR 4.0</b>: </p>
<p>WDGM_AUTOSAR_4_x</p>
<p> is generated to </p>
<p>STD_ON</p>
<p>, which prepares</p>
<p>the embedded code for a compilation in an AUTOSAR 4.0 environment. If the</p>
<p>AUTOSAR version is not 4.0, but any other 4.x, the configuration generator</p>
<p>additionally outputs a warning during this process.</p>
<p>For any <b>other AUTOSAR version </b>(smaller than 3 or greater than 4), the configuration</p>
<p>generator generates no code and exits with an error message.</p>
<p><b>Note: </b>The integration of the S-WdgM in an <b>AUTOSAR 3.1 environment </b>must be</p>
<p>differentiated from the <b>AUTOSAR 3.1 compatibility mode </b>described in this document.</p>
<p>The integration into an AUTOSAR environment refers only to the software environment</p>
<p>in which the S-WdgM interacts, whereas the AUTOSAR 3.1 <b>compatibility mode </b>is a</p>
<p><b>special operation mode </b>of the module itself selected at pre-compile time. In this</p>
<p>special mode, the functionality is reduced to the functionality described by the</p>
<p>AUTOSAR 3.1. For more information refer to <b>AUTOSAR version 3.1 r1 </b>[7]</p>
<p>.</p>
<p><b>2.4</b></p>
<p><b>Deviations from the AUTOSAR 4.0 r1 Watchdog Manager</b></p>
<p>The S-WdgM is compatible with the <b>AUTOSAR  4.0 r1 Watchdog Manager</b>, but not</p>
<p>fully compliant. This has the following reasons:</p>
<p>The  AUTOSAR  specification  does  not  define  functionality  comprehensively  and</p>
<p>precisely enough for implementation (e.g., global transitions).</p>
<p>The AUTOSAR specification does not contain certain functionality (e.g., program flow,</p>
<p>deadline monitoring recovering).</p>
<p>The AUTOSAR specification defines an approach that is very complex to be handled</p>
<p>by the user or consumes too much run time (S-WdgM mode switching).</p>
<p>The  AUTOSAR  specification  does  not  fully  consider  safety  requirements  (e.g.,</p>
<p>windowed Watchdog Trigger).</p>
<p>Below you can find the <b>deviations </b>from the AUTOSAR 4.0 r1 Watchdog Manager <b>in</b></p>
<p><b>detail</b>:</p>
<p><b>2.4.1</b></p>
<p><b>Entities, Checkpoints and Transitions</b></p>
<p>For periodical watchdog triggering at least one supervised entity and one checkpoint</p>
<p>should be defined.</p>
<p>In contrast to AUTOSAR, local activity flags of the supervised entities are set back to</p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p>35</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>FALSE</p>
<p> every  time  an  end  checkpoint</p>
<p> of</p>
<p> this  supervised  entity  is  reached.</p>
<p>Analogously, the global activity flag is set back to </p>
<p>FALSE</p>
<p> as soon as a  global  end</p>
<p>checkpoint is reached.</p>
<p>Local  initial  checkpoints  cannot  have  incoming  local  transitions,  but  they can have</p>
<p>incoming global transitions.</p>
<p>Local  end  checkpoints  cannot  have  outgoing  local  transitions,  but  they  can  have</p>
<p>outgoing global transitions.</p>
<p>If global transitions are used, then there must be exactly one global initial checkpoint.</p>
<p>The global initial checkpoint should be called before any other global  checkpoint  is</p>
<p>invoked.</p>
<p>If a non-initial checkpoint of an supervised entity is reached and this supervised entity</p>
<p>is not active, then this is considered to be a program flow violation in this supervised</p>
<p>entity.</p>
<p>If a checkpoint is the source for a local and a global transition, then only one of the two</p>
<p>transitions can occur. The other one is considered a program flow violation. This is</p>
<p>because the program  flow  cannot  split  into  2  paths.  If,  for  example,  a  new  task  is</p>
<p>started from a <b>CP1 </b>(global transition to <b>CPnew</b>) and the original task continues (local</p>
<p>transition to <b>CP2</b>), then the sequence following the sequences of checkpoint hits is not</p>
<p>allowed:</p>
<p>o</p>
<p>    <b>CP-&gt;CPnew-&gt;CP2 </b>and</p>
<p>o</p>
<p>    <b>CP-&gt;CP2-&gt;CPnew</b>.</p>
<p>If a local initial checkpoint is the destination checkpoint for a global transition, then the</p>
<p>checkpoint must be hit by following the global transition. There is a dilemma, though: If</p>
<p>several  supervised  entities  form  a  cycle  of  transitions,  with each supervised  entity</p>
<p>entered via a global transition from the previous supervised entity, then there is no way</p>
<p>to start the cycle, because no local initial checkpoint is allowed to be hit in a way other</p>
<p>than via the global transition.  The  solution is  an exception in the  S-WdgM:  A  local</p>
<p>initial checkpoint can be hit, not coming through the global transition, if it is also the</p>
<p>global initial checkpoint.</p>
<p>As in AUTOSAR, the S-WdgM needs a time source in order  to  measure  transition</p>
<p>deadlines. Whereas AUTOSAR  does  not  define  the  source  for  ticks,  the  S-WdgM</p>
<p>allows the user to choose between three Tick sources:</p>
<p>o</p>
<p>Internal software source,</p>
<p>o</p>
<p>Internal hardware source,</p>
<p>o</p>
<p>External tick source</p>
<p>For  details  see  Section  Deadline  Measurement</p>
<p> and  Tick  Counter</p>
<p> and  the</p>
<p>description of  parameter  </p>
<p>WdgMTimebaseSource</p>
<p> in  Section  S-WdgM  Global</p>
<p>Preprocessor Settings</p>
<p>.</p>
<p>The checkpoint and entity identifiers are zero-based and increase the list of integer</p>
<p>numbers without gaps.</p>
<p>100</p>
<p>44</p>
<p>38</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 36</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Deadline monitoring is bound to program flow. Only if program flow transitions are</p>
<p>configured, it is possible to configure transition deadlines.</p>
<p>The local/global end checkpoint does not need to be defined.</p>
<p>Currently only one checkpoint with an alive counter is supported per supervised entity.</p>
<p>This is recommended in the AUTOSAR 4.0 r1 Watchdog Manager specification,</p>
<p>since the functionality is not consistently described.</p>
<p><b>2.4.2</b></p>
<p><b>Tolerances</b></p>
<p>The S-WdgM allows <b>tolerance delay </b>for all three monitoring features. In AUTOSAR,</p>
<p>this is restricted to alive supervision. Tolerance delay allows recovering from program</p>
<p>flow and deadline violations as well as from alive counter violations.</p>
<p>The</p>
<p> interpretation</p>
<p> of</p>
<p> the</p>
<p> <b>AUTOSAR</b></p>
<p> parameter</p>
<p> </p>
<p>WdgMExpiredSupervisionCycleTol</p>
<p> implements</p>
<p> a</p>
<p> delay</p>
<p> of</p>
<p><b>(WdgMExpiredSupervisionCycleTol +  2)</b></p>
<p><b> supervision  cycles</b>.  The  <b>S-</b></p>
<p><b>WdgM  </b>implements</p>
<p> a</p>
<p> delay</p>
<p> of</p>
<p> </p>
<p><b>WdgMExpiredSupervisionCycleTol</b></p>
<p><b>supervision cycles</b>. This allows configuring no delay, with the tolerance value set to</p>
<p><b>0</b>.</p>
<p><b>2.4.3</b></p>
<p><b>Watchdog and Reset</b></p>
<p>The AUTOSAR Watchdog Manager supports several watchdog drivers and  several</p>
<p>watchdog  devices  per  watchdog  driver.</p>
<p> However,</p>
<p> the  TTTech  S-WdgM  Stack</p>
<p>supports  only  one  watchdog  driver  and  only  one  watchdog  device  per  watchdog</p>
<p>driver.</p>
<p>For safety reasons, the S-WdgM uses the primary watchdog reset as an immediate</p>
<p>reset  (</p>
<p>WDGM_IMMEDIATE_RESET  =  STD_ON</p>
<p>)  .  In  contrast,  the  AUTOSAR  Watchdog</p>
<p>Manager uses the external function </p>
<p>Appl_Mcu_PerformReset()</p>
<p>.</p>
<p>The</p>
<p> S-WdgM</p>
<p> does</p>
<p> not</p>
<p> support</p>
<p> a</p>
<p> <b>partition</b></p>
<p><b> reset</b></p>
<p> with</p>
<p> </p>
<p>BswM_WdgM_RequestPartitionReset()</p>
<p>.</p>
<p><b>2.4.4</b></p>
<p><b>API</b></p>
<p>The  S-WdgM  function  </p>
<p>WdgM_SetMode()</p>
<p> switches  the  <b>trigger  mode  </b>only.  This</p>
<p>relates to the fields</p>
<p>o</p>
<p>WdgMTriggerConditionValue</p>
<p>o</p>
<p>WdgMTriggerWindowStart</p>
<p>o</p>
<p>WdgMWatchdogMode</p>
<p>.</p>
<p>It does not change the set of supervised entities. This can be simulated by activating</p>
<p>and deactivating different sets of supervised entities for different modes. <b>Note:  </b>Full</p>
<p>support of the function is too time expensive at runtime and too complex (not safe) to</p>
<p>implement and to configure.</p>
<p>53</p>
<p>56</p>
<p>56</p>
<p>55</p>
<h1 style="page-break-before:always; "></h1>
<p>37</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>For</p>
<p> safety  and  complexity  reasons,</p>
<p> the  function  </p>
<p>WdgM_DeInit()</p>
<p> is</p>
<p> not</p>
<p>implemented.</p>
<p>The S-WdgM provides the functions </p>
<p>WdgM_DeactivateSupervisionEntity()</p>
<p> and  </p>
<p>WdgM_ActivateSupervisionEntity()</p>
<p> for</p>
<p> deactivating</p>
<p> and</p>
<p>activating of the SE.  These functions are not AUTOSAR 4.0 r1 compatible.</p>
<p>The S-WdgM uses only direct callback notification for a local and global state change.</p>
<p>The RTE notification is not implemented.</p>
<p>Due  to  implementation complexity and  verification difficulty,  the  S-WdgM  does  not</p>
<p>support RTE Mode Ports.</p>
<p>The S-WdgM checks the configuration independently of the </p>
<p>WdgMDevErrorDetect</p>
<p> </p>
<p>parameter. This parameter enables/disables the DET calls only.</p>
<p>The ECU Description Configuration constraints are described in Section Assumptions/</p>
<p>Constraints</p>
<p>.</p>
<p>81</p>
<p>82</p>
<p>38</p>
<p>72</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 38</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.5</b></p>
<p><b>Configuration Parameters for the S-WdgM</b></p>
<p>This  Section contains  a  brief  description of  the  configuration  parameters  for  the  S-</p>
<p>WdgM, sorted according to their functionality. The path to each parameter or option is</p>
<p>the  exact  ECU  description  file  path.  The  parameters  are  placed  inside  the  ECU</p>
<p>description  file.  The  S-WdgM  Configuration  Generator</p>
<p> uses  the  parameters  to</p>
<p>generate <b>configuration structures</b>.</p>
<p>The list includes functions defined in AUTOSAR 4.0 r1 and functions added by TTTech.</p>
<p>For AUTOSAR 3.1 functions and a comparison of AUTOSAR 4.0 r1 and AUTOSAR 3.1</p>
<p>functions, see Section AUTOSAR 3.1 Compatibility</p>
<p>.</p>
<p><b>2.5.1</b></p>
<p><b>S-WdgM Global Preprocessor Settings</b></p>
<p><b>Parameter Name</b></p>
<p>WdgMDevErrorDetect</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_DEV_ERROR_DETECT</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  preprocessor  switch  enables/disables  development</p>
<p>error detection and reporting. This parameter must be used</p>
<p>to  remove  unneeded  code  segments  regarding  DET</p>
<p>features.</p>
<p>true:</p>
<p> Development error detection is enabled.</p>
<p>false:</p>
<p> Development error detection is disabled.</p>
<p><b>Parameter Name</b></p>
<p>WdgMDemReport</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_DEM_REPORT</p>
<p>102</p>
<p>90</p>
<h1 style="page-break-before:always; "></h1>
<p>39</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This preprocessor switch enables/disables calls to DEM in</p>
<p>case of production error detection.</p>
<p>true:</p>
<p> DEM calls enabled in case of production errors.</p>
<p>false:</p>
<p> DEM calls disabled in case of production errors.</p>
<p><b>Parameter Name</b></p>
<p>WdgMImmediateReset</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_IMMEDIATE_RESET</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This preprocessor  switch enables/disables  the  <b>immediate</b></p>
<p><b>watchdog  reset  </b>feature  in  case  of  <i>alive</i>,  <i>deadline  </i>or</p>
<p><i>program  flow </i>fault.  When  it  is  enabled  and  the  S-WdgM</p>
<p>recognizes a fault (i.e., the S-WdgM global state changes to </p>
<p>WDGM_GLOBAL_STATUS_STOPPED</p>
<p>), then the S-WdgM does  not</p>
<p>wait for the watchdog device timeout, but invokes the reset</p>
<p>immediately. </p>
<p>The parameter can be configured to perform an MCU reset</p>
<p>if the immediate reset fails.</p>
<p><b>Note: </b>Not all hardware platforms can invoke an immediate</p>
<p>reset. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 40</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>true:</p>
<p> Perform an immediate watchdog reset.</p>
<p>false:</p>
<p> Discontinue  watchdog  trigger</p>
<p> and  wait</p>
<p> for</p>
<p>watchdog timeout.</p>
<p><b>Parameter Name</b></p>
<p>WdgMOffModeEnabled</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_OFF_MODE_ENABLED</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This preprocessor switch enables/disables the selection of </p>
<p>WDGIF_MODE_OFF</p>
<p> for the watchdog mode. When enabled,</p>
<p>the watchdog device can be deactivated.</p>
<p><b>Note: </b>On the same hardware platform, the watchdog cannot</p>
<p>be deactivated once it has been activated. </p>
<p>true:</p>
<p> </p>
<p>WDGIF_MODE_OFF</p>
<p> is allowed. </p>
<p>false:</p>
<p> </p>
<p>WDGIF_MODE_OFF</p>
<p> is disallowed.</p>
<p><b>Parameter Name</b></p>
<p>WdgMVersionInfoApi</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_VERSION_INFO_API</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<h1 style="page-break-before:always; "></h1>
<p>41</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This preprocessor switch enables/disables the API function</p>
<p>WdgM_GetVersionInfo()</p>
<p>. </p>
<p><b>Note: </b></p>
<p>WdgM_GetVersionInfo()</p>
<p> is a macro.</p>
<p>true:</p>
<p> Version API is enabled.</p>
<p>false:</p>
<p> Version API is disabled.</p>
<p><b>Parameter Name</b></p>
<p>WdgMDefensiveBehavior</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_DEFENSIVE_BEHAVIOR</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  preprocessor  switch  enables/disables  the  defensive</p>
<p>behavior of the Watchdog Manager module.</p>
<p>WdgM_SetMode()</p>
<p> checks  whether</p>
<p> the  caller</p>
<p> is</p>
<p>authorized.</p>
<p>WdgM_MainFunction()</p>
<p> checks if the S-WdgM has</p>
<p>been initialized.</p>
<p>92</p>
<p>76</p>
<p>85</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 42</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Parameter Name</b></p>
<p>WdgMUseRte</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_USE_RTE</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This preprocessor switch instructs the  S-WdgM  to  use  the</p>
<p>defines  and  typedefs  generated  by  the  RTE.  The  RTE-</p>
<p>generated defines and typedefs save S-WdgM configuration</p>
<p>RAM.</p>
<p><b>Note:  </b>Section  S-WdgM  Type  Definitions</p>
<p> covers  the</p>
<p>types and defines that can be imported from the RTE.</p>
<p>true:</p>
<p> The S-WdgM uses the RTE-generated defines and</p>
<p>typedefs. </p>
<p>false:</p>
<p> The S-WdgM uses its own defines and typedefs.</p>
<p><b>Parameter Name</b></p>
<p>WdgMDemSupervisionReport</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_DEM_SUPERVISION_REPORT</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p>73</p>
<h1 style="page-break-before:always; "></h1>
<p>43</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p>(renamed from </p>
<p>WdgMDemAliveSupervisionReport</p>
<p>)</p>
<p><b>Description</b></p>
<p>This preprocessor switch enables/disables the call to DEM if</p>
<p>the</p>
<p> S-WdgM</p>
<p> has</p>
<p> reached</p>
<p> the</p>
<p> state</p>
<p> </p>
<p>WDGM_GLOBAL_STATE_STOPPED</p>
<p>.</p>
<p>true:</p>
<p> The DEM call is performed.</p>
<p>false:</p>
<p> The DEM call is not performed.</p>
<p><b>Parameter Name</b></p>
<p>WdgMUseOsSuspendInterrupt</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_USE_OS_SUSPEND_INTERRUPT</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  preprocessor</p>
<p> switch  controls  how  interrupts  are</p>
<p>suspended and resumed within the S-WdgM.</p>
<p>true</p>
<p>:</p>
<p>For <b>AUTOSAR 3.1 </b>(</p>
<p>WDGM_AUTOSAR_4_x is</p>
<p>STD_OFF</p>
<p>), the S-WdgM uses</p>
<p>-</p>
<p>function </p>
<p>SchM_Enter_WdgM()</p>
<p> to suspend</p>
<p>interrupts,</p>
<p>-</p>
<p>function </p>
<p>SchM_Exit_WdgM()</p>
<p> to resume</p>
<p>interrupts.</p>
<p>For <b>AUTOSAR 4.0 </b>(</p>
<p>WDGM_AUTOSAR_4_x is</p>
<p>STD_ON</p>
<p>), the S-WdgM uses</p>
<p>-</p>
<p>function </p>
<p>SchM_Enter_WdgM_WDGM_EXCLUSIVE_AREA</p>
<p>_0()</p>
<p> to suspend interrupts,</p>
<p>-</p>
<p>function </p>
<p>SchM_Exit_WdgM_WDGM_EXCLUSIVE_AREA_</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 44</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>0()</p>
<p> to resume interrupts.</p>
<p>false:</p>
<p>The user must define </p>
<p>-</p>
<p>function </p>
<p>GlobalSuspendInterrupts()</p>
<p> to</p>
<p>suspend interrupts,</p>
<p>-</p>
<p>function </p>
<p>GlobalRestoreInterrupts()</p>
<p> to</p>
<p>resume interrupts.</p>
<p><b>Parameter Name</b></p>
<p>WdgMTimebaseSource</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_TIMEBASE_SOURCE</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>integer</p>
<p><b>Range</b></p>
<p>WDGM_EXTERNAL_TICK</p>
<p>WDGM_INTERNAL_SOFTWARE_TICK</p>
<p>WDGM_INTERNAL_HARDWARE_TICK</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This  preprocessor  switch  defines  the  source  for  the  S-</p>
<p>WdgM <i>Tick</i>.</p>
<p><b>Note:</b></p>
<p>The  precision of  the  transition deadline  measurement  is</p>
<p>based on this <i>Tick</i>.</p>
<p>When  the  deadline  measurement  is  not  used,  the  S-</p>
<p>WdgM <i>Tick </i>counter is internally not used, and it need not</p>
<p>be incremented. In this case, to save run-time resources,</p>
<p>the  parameter</p>
<p> WdgMTimebaseSource</p>
<p> should  be  set</p>
<p>to </p>
<p>WdgMInternalSoftwareTick</p>
<p>, which is the default</p>
<p>value. See also parameter </p>
<p>WdgMTicksPerSecond</p>
<p> .</p>
<p>The parameters:</p>
<p>WDGM_EXTERNAL_TICK:</p>
<h1 style="page-break-before:always; "></h1>
<p>45</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>An  external</p>
<p> clock  source  (through  the  API</p>
<p> function</p>
<p>WdgM_UpdateTickCount()</p>
<p>)</p>
<p>.</p>
<p> The  S-WdgM  tick</p>
<p>counter is incremented every time this function is called by</p>
<p>the system.</p>
<p>WDGM_INTERNAL_SOFTWARE_TICK:</p>
<p>The  S-WdgM  <i>Tick  </i>Counter  is  incremented  every  time</p>
<p>WdgM_MainFunction()</p>
<p> is called.</p>
<p>WDGM_INTERNAL_HARDWARE_TICK:</p>
<p>The  Tick  source  is  the  MCU  hardware  counter.</p>
<p> The</p>
<p>frequency of  the  MCU  hardware  counter  is  given  by  the</p>
<p>parameter </p>
<p>WdgMTicksPerSecond</p>
<p>.  The  tick  is  queried</p>
<p>by the S-WdgM through the S-WdgIf API.</p>
<p><b>Note: </b>Not all hardware platforms support this feature. For</p>
<p>details, refer to the S-Wdg Driver documentation.</p>
<p><b>Parameter Name</b></p>
<p>WdgMSecondResetPath</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_SECOND_RESET_PATH</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This preprocessor switch allows an MCU reset if a WD</p>
<p>command (trigger or reset) fails. This second reset path is</p>
<p>performed by calling </p>
<p>Appl_Mcu_PerformReset()</p>
<p>.</p>
<p><b>Note:</b></p>
<p> </p>
<p>Appl_Mcu_PerformReset()</p>
<p> </p>
<p>itself</p>
<p> calls</p>
<p>Mcu_PerformReset()</p>
<p>, which triggers the reset.</p>
<p>true</p>
<p>: The MCU is reset with </p>
<p>Appl_Mcu_PerformReset</p>
<p>()</p>
<p> when the primary reset path signals an error.</p>
<p>87</p>
<p>85</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 46</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>false</p>
<p>: The MCU is not reset.</p>
<p><b>Parameter Name</b></p>
<p>WdgMTickOverrunCorrection</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_TICK_OVERRUN_CORRECTION</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This  preprocessor  switch  enables/disables  the  32-bit  S-</p>
<p>WdgM <i>Tick </i>Counter overflow detection and correction.</p>
<p>true</p>
<p>:</p>
<p> The <i>Tick </i>counter overflow is corrected.</p>
<p>false</p>
<p>:</p>
<p> The <i>Tick </i>counter overflow is not corrected. </p>
<p><b>Note:  </b>Depending  on  the  frequency  with  which  the  <i>Tick</i></p>
<p>Counter is incremented, the counter can overflow or not. See</p>
<p>parameter</p>
<p> </p>
<p>WdgMTimebaseSource</p>
<p> for</p>
<p> additional</p>
<p>information.</p>
<p>The Tick Counter overflow detection and  correction is  only</p>
<p>used</p>
<p> when</p>
<p> </p>
<p>WDGM_TIMEBASE_SOURCE</p>
<p> =</p>
<p>WDGM_EXTERNAL_TICK</p>
<p>.</p>
<p>If not set to </p>
<p>true</p>
<p>, the check of the tick counter for jumps and</p>
<p>jitter may be incorrect.</p>
<p>The parameter must be set to </p>
<p>true</p>
<p> when the external Tick</p>
<p>source is used and the Tick counter (32bit) can overflow. </p>
<p><b>Example</b>: The tick counter is incremented every millisecond.</p>
<p>Then the overflow happens after 49 days.</p>
<p>44</p>
<h1 style="page-break-before:always; "></h1>
<p>47</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Parameter Name</b></p>
<p>WdgMEntityDeactivationEnabled</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_ENTITY_DEACTIVATION_ENABLED</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This  preprocessor  switch enables  entity deactivation.  This</p>
<p>functionality is  not  specified  in AUTOSAR  4.0  r1  and  can</p>
<p>violate  system  safety  (see  the  </p>
<p>S afe  W atchdog  M anager</p>
<p><i>Safety</i></p>
<p><i> Manual</i></p>
<p> [5]</p>
<p>,</p>
<p> parts</p>
<p> </p>
<p>WdgM_DeactivateSupervisionEntity()</p>
<p> and  </p>
<p>WdgM_ActivateSupervisionEntity()</p>
<p>).</p>
<p>See</p>
<p> also</p>
<p> parameter</p>
<p> </p>
<p>WdgMEnableEntityDeactivation</p>
<p>.</p>
<p>true:</p>
<p> An entity can be deactivated.</p>
<p>false:</p>
<p> An entity cannot be deactivated.</p>
<p>The default value is </p>
<p>false</p>
<p>.</p>
<p><b>Parameter Name</b></p>
<p>WdgMStateChangeNotification</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_STATE_CHANGE_NOTIFICATION</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>Preprocessor</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p>128</p>
<p>81</p>
<p>82</p>
<p>61</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 48</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This  preprocessor  switch  enables  <i>local  </i>and  <i>global</i></p>
<p><i> state</i></p>
<p>change callback notifications. There are different  callbacks</p>
<p>for <i>local </i>and <i>global state </i>notifications. </p>
<p>true:</p>
<p> Any <i>local </i>or <i>global state </i>change invokes a callback.</p>
<p>false:</p>
<p> No  callbacks  are  performed.</p>
<p> </p>
<p>See  also  the</p>
<p>parameters</p>
<p> </p>
<p>WdgMGlobalStateChangeCbk</p>
<p> and</p>
<p>WdgMLocalStateChangeCbk</p>
<p>.</p>
<p><b>Parameter Name</b></p>
<p>WdgMCallerId</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMCallerIds/</p>
<p><b>Group</b></p>
<p>General</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65535</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This parameter defines one valid CallerId for the callers that</p>
<p>have permission to call the function </p>
<p>WdgM_SetMode()</p>
<p>.</p>
<p><b>Parameter Name</b></p>
<p>WdgMFirstCycleAliveCounterReset</p>
<p><b>Parameter Name</b></p>
<p><b>(Embedded Code)</b></p>
<p>WDGM_FIRSTCYCLE_ALIVECOUNTER_RESET</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>General</p>
<p><b>Type</b></p>
<p>Boolean</p>
<p>49</p>
<p>63</p>
<h1 style="page-break-before:always; "></h1>
<p>49</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This parameter decides if the Alive counters are evaluated</p>
<p>in the first supervision cycle.</p>
<p>true</p>
<p>:  The  Alive  counters  are  not  evaluated  in  the  first</p>
<p>supervision cycle</p>
<p>false</p>
<p>:  The  Alive  counters  are  evaluated  in  the  first</p>
<p>supervision cycle</p>
<p><b>2.5.2</b></p>
<p><b>S-WdgM General Settings</b></p>
<p><b>Parameter Name</b></p>
<p>WdgMGlobalStateChangeCbk</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/</p>
<p><b>Group</b></p>
<p>General</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This is the parameter for a callback function for notifying the</p>
<p>system of the S-WdgM global  state  change.  The  S-WdgM</p>
<p>has  only  one  callback  function  for  the  global  state.  In  a</p>
<p>safety-relevant environment, the callback function can cause</p>
<p>safety degradation. For details, refer to the <i>Safe Watchdog</i></p>
<p><i>Manager Safety Manual </i>[5]</p>
<p>. </p>
<p><b>Parameter Name</b></p>
<p>WdgMGlobalMemoryAppTaskRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/</p>
<p><b>Group</b></p>
<p>General</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>0, 1</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 50</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Description</b></p>
<p>This is the parameter for a reference to an OS application or</p>
<p>task where the S-WdgM is running. </p>
<p><b>Note: </b>When OS SC3 (OS with memory protection) is used,</p>
<p>the global variables of the S-WdgM should be placed in the</p>
<p>same  memory  segment</p>
<p> where  the  S-WdgM  context</p>
<p> is</p>
<p>running. </p>
<p><b>Example:  </b>The  application  name  is  incorporated  into  the</p>
<p>corresponding</p>
<p> </p>
<p>MemMap</p>
<p> defines</p>
<p> in</p>
<p> the</p>
<p> file</p>
<p> </p>
<p>WdgM_MemMap.h</p>
<p> in  an  AUTOSAR  3.1  environment  or  </p>
<p>WdgM_OSMemMap.h</p>
<p> in an AUTOSAR 4.0 environment.</p>
<p><b>Parameter Name</b></p>
<p>WdgMModeId</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/</p>
<p><b>Group</b></p>
<p>General</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...255</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1 / TTTech</p>
<p><b>Description</b></p>
<p>This is the parameter for the S-WdgM mode. The S-WdgM,</p>
<p>in contrast to the AUTOSAR  WdgM,  uses  only one  mode.</p>
<p>This parameter is kept for compatibility reasons only, and it</p>
<p>is not used by the S-WdgM. </p>
<p><b>Parameter Name</b></p>
<p>WdgMInitialTriggerModeId</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/</p>
<p><b>Group</b></p>
<p>General</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...255</p>
<h1 style="page-break-before:always; "></h1>
<p>51</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This is the parameter for the S-WdgM initial  trigger  mode.</p>
<p>The  S-WdgM  trigger  mode  is  a  restricted  version  of  the</p>
<p>AUTOSAR mode. It only sets the fields:</p>
<p>WdgMTriggerConditionValue</p>
<p>WdgMTriggerWindowStart</p>
<p>WdgMWatchdogMode</p>
<p>When more  than one  Watchdog  device  is  used,  then  this</p>
<p>parameter addresses the first Watchdog only.</p>
<p>For details, refer to the function </p>
<p>WdgM_SetMode()</p>
<p>.</p>
<p><b>Parameter</b></p>
<p><b> Name</b></p>
<p><b>(ECU)</b></p>
<p>WdgMTriggerModeId</p>
<p><b>Path (ECU)</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMTrigger/</p>
<p><b>Group</b></p>
<p>Watchdog trigger</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...254</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This  parameter  contains  a  unique  identifier  of  the  trigger</p>
<p>mode.</p>
<p><b>Parameter Name</b></p>
<p>WdgMTicksPerSecond</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/</p>
<p><b>Group</b></p>
<p>General</p>
<p><b>Type</b></p>
<p>Float</p>
<p><b>Unit</b></p>
<p>Hz</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 52</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This parameter  defines  the  number  of  S-WdgM  <i>Ticks  </i>per</p>
<p>second. It is the rate by which the S-WdgM <i>Tick </i>Counter is</p>
<p>incremented. This parameter is used in two ways:</p>
<p>1.</p>
<p>The  system  environment</p>
<p> that</p>
<p> periodically  calls  the</p>
<p>function  </p>
<p>WdgM_UpdateTickCount()</p>
<p> for</p>
<p> deadline</p>
<p>monitoring.</p>
<p> See</p>
<p> also</p>
<p> parameter</p>
<p>WdgMTimebaseSource</p>
<p>.</p>
<p>2.</p>
<p>The S-WdgM Configuration Generator that calculates min</p>
<p>and max parameters for the transition deadlines.</p>
<p><b>Note:</b></p>
<p>When</p>
<p> the</p>
<p> S-WdgM</p>
<p> <i>Tick</i></p>
<p> source</p>
<p> is</p>
<p>WDGM_INTERNAL_SOFTWARE_TICK</p>
<p>, then the  following</p>
<p>relation must be obeyed:</p>
<p>(1 / WdgMTicksPerSecond [Hz])</p>
<p> = WdgMSupervisionCycle [s]</p>
<p>For</p>
<p> the</p>
<p> <i>Tick</i></p>
<p> sources</p>
<p>WDGM_INTERNAL_HARDWARE_TICK</p>
<p> and</p>
<p>WDGM_EXTERNAL_TICK</p>
<p>,  the  following  relation must  be</p>
<p>obeyed:</p>
<p>(1 / WdgMTicksPerSecond [Hz])</p>
<p> &lt;= WdgMSupervisionCycle [s]</p>
<p>The  parameter  </p>
<p>WdgMTicksPerSecond</p>
<p> <b>must  not  </b>be</p>
<p><b>zero</b>.</p>
<p><b>Parameter Name</b></p>
<p>WdgMSupervisionCycle</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/</p>
<p><b>Group</b></p>
<p>General</p>
<p><b>Type</b></p>
<p>Float</p>
<p><b>Range</b></p>
<p>0 &lt; WdgMSupervisionCycle</p>
<p><b>Unit</b></p>
<p>second</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<h1 style="page-break-before:always; "></h1>
<p>53</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Description</b></p>
<p>This  parameter  defines  the  schedule  period  of  the  main</p>
<p>function,</p>
<p> WdgM_MainFunction()</p>
<p>. It is the time period in</p>
<p>which the S-WdgM performs cyclic supervision, and also the</p>
<p>watchdog trigger period. The parameter is important for the</p>
<p>system that calls the function</p>
<p> WdgM_MainFunction()</p>
<p>.</p>
<p><b>Parameter Name</b></p>
<p>WdgMExpiredSupervisionCycleTol</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/ </p>
<p><b>Group</b></p>
<p>General</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65535</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This parameter defines a further delay of the violation</p>
<p>escalation to the Watchdog after the S-WdgM reached the</p>
<p>status </p>
<p>WDGM_LOCAL_STATUS_EXPIRED</p>
<p> (in numbers of</p>
<p>supervision cycles).</p>
<p><b>Parameter Name</b></p>
<p>WdgMGlobalCheckpointFinalRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/</p>
<p>WdgMProgramFlowSupervision/</p>
<p><b>Group</b></p>
<p>General</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>0...65535</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  is  the  parameter  for  a  reference  to  the  final  global</p>
<p>checkpoint.</p>
<p><b>Note:</b></p>
<p> There  might</p>
<p> be  no,</p>
<p> one  or  several</p>
<p> global</p>
<p> end</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 54</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>checkpoints.</p>
<p><b>Parameter Name</b></p>
<p>WdgMGlobalCheckpointInitialRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/</p>
<p>WdgMProgramFlowSupervision/</p>
<p><b>Group</b></p>
<p>General</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>0, 1</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  is  the  parameter  for  a  reference  to  the  global  initial</p>
<p>checkpoint.</p>
<p><b>Note: </b>If global transitions are defined, then exactly one</p>
<p>global initial checkpoint must be defined.</p>
<p><b>Parameter Name</b></p>
<p>WdgMWatchdogName</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMWatchdog/</p>
<p><b>Group</b></p>
<p>Watchdog device</p>
<p><b>Type</b></p>
<p>String</p>
<p><b>Range</b></p>
<p>N/A</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This parameter is a symbolic  name  of  the  Watchdog.  It  is</p>
<p>used as a comment only.</p>
<h1 style="page-break-before:always; "></h1>
<p>55</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Parameter Name</b></p>
<p>WdgIfDeviceRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMWatchdog/</p>
<p><b>Group</b></p>
<p>Watchdog device</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>1</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This is the parameter for a reference to a device container</p>
<p>(</p>
<p>WdgIfDevice</p>
<p>)  of  the  S-WdgIf.  This  container  contains</p>
<p>data and a reference that represents the connection of  the</p>
<p>S-WdgM to the Watchdog device through the S-WdgIf.</p>
<p><b>Parameter Name</b></p>
<p>WdgMWatchdogMode</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMTrigger/</p>
<p><b>Group</b></p>
<p>Watchdog trigger</p>
<p><b>Type</b></p>
<p>Enumeration</p>
<p><b>Range</b></p>
<p>WDGIF_FAST_MODE </p>
<p>WDGIF_OFF_MODE</p>
<p>WDGIF_SLOW_MODE</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This parameter contains the watchdog mode for a</p>
<p>referenced watchdog in the S-WdgM.</p>
<p>Implementation type: </p>
<p>WdgIf_ModeType</p>
<p>.</p>
<p><b>Note:  </b>Not  all</p>
<p> hardware  platforms  support</p>
<p> all</p>
<p> watchdog</p>
<p>modes. For details, see the User Manual of the respective</p>
<p>S-Wdg Driver.</p>
<p><b>Note</b>: Do not confuse this parameter with the S-WdgM</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 56</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Trigger Mode (</p>
<p>WdgMModeID</p>
<p>).</p>
<p><b>Parameter Name</b></p>
<p>WdgMTriggerConditionValue</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMTrigger/</p>
<p><b>Group</b></p>
<p>Watchdog trigger</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>1...65535</p>
<p><b>Unit</b></p>
<p>ms</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This parameter defines  the  latest  possible  time  where  the</p>
<p>next watchdog trigger is accepted (window end).</p>
<p><b>Note:</b></p>
<p><b> </b>Not</p>
<p> all</p>
<p> hardware  platforms  allow  changing  this</p>
<p>parameter during runtime. For details, see the User Manual</p>
<p>of the respective S-Wdg Driver.</p>
<p><b>Parameter Name</b></p>
<p>WdgMTriggerWindowStart</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMTrigger/</p>
<p><b>Group</b></p>
<p>Watchdog trigger</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65535</p>
<p><b>Unit</b></p>
<p>ms</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This parameter defines the earliest time after which the next</p>
<p>watchdog trigger is accepted (window start).</p>
<p>50</p>
<h1 style="page-break-before:always; "></h1>
<p>57</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Note:</b></p>
<p><b> </b>Not</p>
<p> all</p>
<p> hardware  platforms  allow  changing  this</p>
<p>parameter</p>
<p> during</p>
<p> runtime.</p>
<p> On  some</p>
<p> platforms,</p>
<p> this</p>
<p>parameter is not avaliable or set to zero. For details, see the</p>
<p>User Manual of the respective S-Wdg Driver.</p>
<p><b>Parameter Name</b></p>
<p>WdgMTriggerWatchdogRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMTrigger/</p>
<p><b>Group</b></p>
<p>Watchdog trigger</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>0...255</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  is  the  parameter  for  a  reference  to  the  configured</p>
<p>watchdog.</p>
<p><b>2.5.3</b></p>
<p><b>S-WdgM Supervised Entity Options</b></p>
<p><b>Parameter Name</b></p>
<p>WdgMFailedSupervisionRefCycleTol</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMLocalStatusParams/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65534</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p>Description</p>
<p>This  parameter  contains  the  acceptable  number  of  failed</p>
<p>alive indications for this supervised  entity in a  row  (i.e.,  at</p>
<p>least one violation per supervision reference cycle in a row).</p>
<p><b>Note: </b>This parameter should be set to <b>0 </b>if no alive counter</p>
<p>is configured for this supervised entity, because nothing can</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 58</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>be tolerated. If there  is  an alive  counter  in this  supervised</p>
<p>entity,  then  the  parameter  can  be  <b>0  </b>(no  alive  counter</p>
<p>violations tolerated) or <b>positive</b>.</p>
<p><b>Parameter Name</b></p>
<p>WdgMSupervisedEntityInitialMode</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMLocalStatusParams/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Enumeration</p>
<p><b>Range</b></p>
<p>WDGM_LOCAL_STATUS_DEACTIVATED,</p>
<p>WDGM_LOCAL_STATUS_OK,</p>
<p>WDGM_LOCAL_STATUS_FAILED</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This is  the  initial  local  monitoring  status  of  the  supervised</p>
<p>entity.</p>
<p><b>Parameter Name</b></p>
<p>WdgMFailedDeadlineRefCycleTol</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMLocalStatusParams/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65534</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This parameter contains the acceptable number of violated</p>
<p>deadlines for this supervised entity in a row (i.e., at least one</p>
<p>violation per </p>
<p>WdgMDeadlineReferenceCycle</p>
<p> in a row).</p>
<p><b>Note:  </b>If  a  positive  tolerance  for  deadline  violations  is</p>
<p>entered, then the user must enter a positive reference cycle</p>
<h1 style="page-break-before:always; "></h1>
<p>59</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>for</p>
<p> the  violations  (</p>
<p>WdgMDeadlineReferenceCycle</p>
<p>),</p>
<p>because  the  tolerance  is  defined  in  terms  of  reference</p>
<p>cycles. The tolerance can also be <b>0</b>. In this case a positive</p>
<p>reference cycle would make no sense, because there is no</p>
<p>reference cycle if no violations are tolerated.</p>
<p><b>Parameter Name</b></p>
<p>WdgMDeadlineReferenceCycle</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMLocalStatusParams/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65535</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This  parameter  contains  the  number  of  supervision cycles</p>
<p>that  define  a  cycle  for  the  <i>deadline  monitoring  </i>of  this</p>
<p>supervised entity.</p>
<p><b>Note:</b></p>
<p> If</p>
<p> the</p>
<p> deadline</p>
<p> reference</p>
<p> cycle</p>
<p> tolerance</p>
<p>(</p>
<p>WdgMFailedDeadlineRefCycleTol</p>
<p>) is set to <b>0</b>, then</p>
<p>this parameter must be <b>0 </b>as well. This is because the first</p>
<p>detected  violation  would  cause  the  supervised  entity  to</p>
<p>change its status to </p>
<p>EXPIRED</p>
<p> and then no reference cycle</p>
<p>could  exist.  If  the  deadline  reference  cycle  tolerance  is</p>
<p>positive,  then  this  parameter  must  be  positive  as  well,</p>
<p>because the tolerance is defined as a number of reference</p>
<p>cycles which cannot be of zero duration.</p>
<p><b>Parameter Name</b></p>
<p>WdgMFailedProgramFlowRefCycleTol</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMLocalStatusParams/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65534</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 60</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This parameter contains the acceptable number of program</p>
<p>flow violations for this supervised entity in a row (i.e., at least</p>
<p>one violation per  </p>
<p>WdgMProgramFlowReferenceCycle</p>
<p>in a row).</p>
<p><b>Note:  </b>If a positive tolerance  for  program  flow  violations  is</p>
<p>entered, then the user must enter a positive reference cycle</p>
<p>for</p>
<p> the</p>
<p> violations</p>
<p>(</p>
<p>WdgMProgramFlowReferenceCycle</p>
<p>),</p>
<p> because</p>
<p> the</p>
<p>tolerance  is  defined  in  terms  of</p>
<p> reference  cycles.</p>
<p> The</p>
<p>tolerance can also  be  <b>0</b>.  In this  case  a  positive  reference</p>
<p>cycle would make no sense, because there is no reference</p>
<p>cycle if no violations are tolerated.</p>
<p><b>Parameter Name</b></p>
<p>WdgMProgramFlowReferenceCycle</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMLocalStatusParams/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65535</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This  parameter  contains  the  number  of  supervision cycles</p>
<p>that define a cycle for  the  <i>program  flow monitoring  </i>of  this</p>
<p>supervised entity.</p>
<p><b>Note:</b></p>
<p> If</p>
<p> the  program  flow  reference  cycle  tolerance</p>
<p>(</p>
<p>WdgMFailedProgramFlowRefCycleTol</p>
<p>) is  set  to  <b>0</b>,</p>
<p>then this parameter must be <b>0 </b>as well. This is because the</p>
<p>first detected violation would cause the supervised entity to</p>
<p>change its status to </p>
<p>EXPIRED</p>
<p> and then no reference cycle</p>
<p>could  exist.  If  the  deadline  reference  cycle  tolerance  is</p>
<p>positive,  then  this  parameter  must  be  positive  as  well,</p>
<p>because  tolerance  is  defined  as  a  number  of  reference</p>
<p>cycles which cannot be of zero duration.</p>
<h1 style="page-break-before:always; "></h1>
<p>61</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Parameter Name</b></p>
<p>WdgMLocalStatusSupervisedEntityRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMLocalStatusParams/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>1</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This is the parameter for a reference to the supervised entity</p>
<p>for which the parameters of this container are set.</p>
<p><b>Parameter Name</b></p>
<p>WdgMSupervisedEntityId</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMSupervisedEntity/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65534</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  parameter  contains  the  identifier  of  the  supervised</p>
<p>entity for which the parameters of this container are set.</p>
<p><b>Parameter Name</b></p>
<p>WdgMEnableEntityDeactivation</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMSupervisedEntity/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Boolean</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 62</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Range</b></p>
<p>false/true</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This  parameter  enables  the  deactivation and  activation  of</p>
<p>this  <i>supervised  entity</i>.  See  also  the  preprocessor  switch</p>
<p>WdgMEntityDeactivationEnabled</p>
<p>.</p>
<p>This functionality is not specified in AUTOSAR 4.0 r1 and</p>
<p>can violate system safety (see the <i>Safe Watchdog Manager</i></p>
<p><i>Safety Manual </i>[5]</p>
<p>, parts</p>
<p>WdgM_DeactivateSupervisionEntity()</p>
<p> and</p>
<p>WdgM_ActivateSupervisionEntity()</p>
<p>).</p>
<p>true:</p>
<p> <i>Supervised  entity  </i>deactivation  and  activation  is</p>
<p>enabled.</p>
<p>-</p>
<p>For</p>
<p> activation,</p>
<p> function</p>
<p>WdgM_ActivateSupervisionEntity()</p>
<p> must</p>
<p>be used.</p>
<p>-</p>
<p>For</p>
<p> deactivation,</p>
<p> function</p>
<p>WdgM_DeactivateSupervisionEntity()</p>
<p>must be used </p>
<p>false:</p>
<p> Entity  deactivation  and  activation  for</p>
<p> this</p>
<p>supervised entity is disabled.</p>
<p><b>Parameter Name</b></p>
<p>WdgMSupportedAutosarAPI</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMSupervisedEntity/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Enumeration</p>
<p><b>Range</b></p>
<p>API_4_0</p>
<p>API_3_1</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This parameter defines the S-WdgM API compatibility.</p>
<p>API_4_0</p>
<p>: The AUTOSAR 4.0 r1 API is selected.</p>
<p>47</p>
<p>128</p>
<p>82</p>
<p>81</p>
<h1 style="page-break-before:always; "></h1>
<p>63</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>API_3_1</p>
<p>: The AUTOSAR 3.1 API is selected.</p>
<p>The system can be either AUTOSAR4.0 r1 or AUTOSAR</p>
<p>3.1. Mixed variants are not allowed. When one supervised</p>
<p>entity in a system is AUTOSAR 3.1 then all the other</p>
<p>supervised entities must be AUTOSAR 3.1 as well.  For</p>
<p>details, refer to Section AUTOSAR 3.1 Compatibility</p>
<p>.</p>
<p><b>Parameter Name</b></p>
<p>WdgMLocalStateChangeCbk</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMSupervisedEntity/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Function name</p>
<p><b>Multiplicity</b></p>
<p>0, 1</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This is the parameter for a callback function used to inform</p>
<p>about a local state change of a supervised entity.</p>
<p>The S-WdgM has one callback function for every supervised</p>
<p>entity.</p>
<p><b>Note: </b>In a safety-relevant environment, the callback function</p>
<p>can  cause  safety  degradation.  For  details,  see  the  <i>Safe</i></p>
<p><i>Watchdog Manager Safety Manual </i>[5]</p>
<p>.</p>
<p><b>Parameter Name</b></p>
<p>WdgMLocalCheckpointFinalRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMSupervisedEntity/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>0...65535</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p>90</p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 64</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Description</b></p>
<p>This  is  the  reference  to  an  end  checkpoint</p>
<p> for</p>
<p> this</p>
<p>supervised entity.</p>
<p><b>Parameter Name</b></p>
<p>WdgMLocalCheckpointInitialRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMSupervisedEntity/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>1</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  is  the  reference  to  the  initial</p>
<p> checkpoint</p>
<p> for</p>
<p> this</p>
<p>supervised entity.</p>
<p><b>Parameter Name</b></p>
<p>WdgMAppTaskRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMSupervisedEntity/</p>
<p><b>Group</b></p>
<p>Supervised entity</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>0, 1</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This is the reference to an OS application (task) to which this</p>
<p>supervised entity belongs. In case of OS SC3, the local data</p>
<p>of the supervised entity must be placed in the same memory</p>
<p>segment as the application (task) of  which this  supervised</p>
<p>entity is a part.</p>
<p>The S-WdgM  Configuration Generator</p>
<p> enables  memory</p>
<p>mapping of the supervised entity local data so that it can be</p>
<p>put</p>
<p> into  the  memory  segment</p>
<p> of</p>
<p> the  referred  task  or</p>
<p>application (task) using memory mapping. </p>
<p>102</p>
<h1 style="page-break-before:always; "></h1>
<p>65</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.5.4</b></p>
<p><b>S-WdgM Checkpoint Options</b></p>
<p><b>Parameter Name</b></p>
<p>WdgMCheckpointId</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMSupervisedEntity/</p>
<p>WdgMCheckpoint/</p>
<p><b>Group</b></p>
<p>Checkpoint</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65534</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This parameter contains the identifier of the checkpoint that</p>
<p>is unique over the supervised entity.</p>
<p><b>2.5.5</b></p>
<p><b>Alive Counter Options</b></p>
<p><b>Parameter Name</b></p>
<p>WdgMExpectedAliveIndications</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMAliveSupervision/</p>
<p><b>Group</b></p>
<p>Alive counter</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65535</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  parameter  contains  the  number  of</p>
<p> expected  <i>alive</i></p>
<p>indications within a  supervision reference  cycle,  according</p>
<p>to the corresponding supervised entity.</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 66</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Parameter Name</b></p>
<p>WdgMMaxMargin</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMAliveSupervision/</p>
<p><b>Group</b></p>
<p>Alive counter</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65535</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This parameter contains the number of <i>alive </i>indications that</p>
<p>are  acceptable  in  addition  to  the  expected  indications</p>
<p>(</p>
<p>WdgMExpectedAliveIndications</p>
<p>)</p>
<p> within</p>
<p> the</p>
<p>corresponding supervision reference cycle.</p>
<p><b>Parameter Name</b></p>
<p>WdgMMinMargin</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMAliveSupervision/</p>
<p><b>Group</b></p>
<p>Alive counter</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>0...65535</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This parameter contains the number of <i>alive </i>indications that</p>
<p>are acceptable to be missing from the expected indications</p>
<p>(</p>
<p>WdgMExpectedAliveIndications</p>
<p>)</p>
<p> within</p>
<p> the</p>
<p>corresponding supervision reference cycle.</p>
<p><b>Parameter Name</b></p>
<p>WdgMSupervisionReferenceCycle</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMAliveSupervision/</p>
<h1 style="page-break-before:always; "></h1>
<p>67</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Group</b></p>
<p>Alive counter</p>
<p><b>Type</b></p>
<p>Integer</p>
<p><b>Range</b></p>
<p>1...65535</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  parameter  defines  the  supervision  reference  cycle</p>
<p>length</p>
<p> as</p>
<p> a</p>
<p> number</p>
<p> of</p>
<p> supervision</p>
<p> cycles</p>
<p>(</p>
<p>WdgMSupervisionCycle</p>
<p>).</p>
<p><b>Parameter Name</b></p>
<p>WdgMAliveSupervisionCheckpointRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMAliveSupervision/</p>
<p><b>Group</b></p>
<p>Alive counter</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>1</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This is the parameter for a reference to the  checkpoint  for</p>
<p>which this alive supervision  is configured.</p>
<p><b>2.5.6</b></p>
<p><b>S-WdgM Local Transition Options</b></p>
<p><b>Parameter Name</b></p>
<p>WdgMLocalTransitionDestRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMSupervisedEntity/</p>
<p>WdgMLocalTransition/</p>
<p><b>Group</b></p>
<p>Local transition</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>1</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 68</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  is  the  parameter  for  a  reference  to  the  destination</p>
<p>checkpoint of a local transition within this <i>supervised entity.</i></p>
<p><b>Parameter Name</b></p>
<p>WdgMLocalTransitionSourceRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMGeneral/WdgMSupervisedEntity/</p>
<p>WdgMLocalTransition/</p>
<p><b>Group</b></p>
<p>Local transition</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>1</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  is  the  parameter</p>
<p> for</p>
<p> a  reference  to  the  source</p>
<p>checkpoint of a local transition within this <i>supervised entity</i>.</p>
<p><b>2.5.7</b></p>
<p><b>S-WdgM Global Transition Options</b></p>
<p><b>Parameter Name</b></p>
<p>WdgMGlobalTransitionDestRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/</p>
<p>WdgMProgramFlowSupervision</p>
<p>/WdgMGlobalTransition/</p>
<p><b>Group</b></p>
<p>Global transition</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>1</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  is  the  parameter  for  a  reference  to  the  destination</p>
<p>checkpoint of a global transition.</p>
<h1 style="page-break-before:always; "></h1>
<p>69</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Parameter Name</b></p>
<p>WdgMGlobalTransitionSourceRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/</p>
<p>WdgMProgramFlowSupervision</p>
<p>/WdgMGlobalTransition/</p>
<p><b>Group</b></p>
<p>Global transition</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>1</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  is  the  parameter</p>
<p> for</p>
<p> a  reference  to  the  source</p>
<p>checkpoint of a global transition.</p>
<p><b>2.5.8</b></p>
<p><b>S-WdgM Local and Global Deadline Options</b></p>
<p><b>Parameter Name</b></p>
<p>WdgMDeadlineMax</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMDeadlineSupervision/</p>
<p><b>Group</b></p>
<p>Local or global deadline</p>
<p><b>Type</b></p>
<p>Float</p>
<p><b>Range</b></p>
<p>0.0...((1/WdgMTicksPerSecond)</p>
<p> *</p>
<p> 65535)</p>
<p>seconds</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This parameter contains the longest  time  span after  which</p>
<p>the deadline is still considered to be met.</p>
<p><b>Note: </b>The time span is counted from the point in time when</p>
<p>the source checkpoint of the transition is reached.</p>
<p><b>Parameter Name</b></p>
<p>WdgMDeadlineMin</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMDeadlineSupervision/</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 70</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Group</b></p>
<p>Local or global deadline</p>
<p><b>Type</b></p>
<p>Float</p>
<p><b>Range</b></p>
<p>0.0...((1/WdgMTicksPerSecond)</p>
<p> *</p>
<p> 65535)</p>
<p>seconds</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This parameter contains the shortest time span after which</p>
<p>the deadline is considered to be met.</p>
<p><b>Note: </b>The time span is counted from the point in time when</p>
<p>the source checkpoint of the transition is reached.</p>
<p><b>Parameter Name</b></p>
<p>WdgMDeadlineStartRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMDeadlineSupervision/</p>
<p><b>Group</b></p>
<p>Local or global deadline</p>
<p><b>Type</b></p>
<p>Reference</p>
<p><b>Multiplicity</b></p>
<p>1</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  is  the  parameter</p>
<p> for</p>
<p> a  reference  to  the  <i>source</i></p>
<p><i>checkpoint </i>for deadline monitoring.</p>
<p><b>Note:  </b>The  start  and  stop  references  of  a  deadline  must</p>
<p>match an existing local or global transition.</p>
<p><b>Parameter Name</b></p>
<p>WdgMDeadlineStopRef</p>
<p><b>Path</b></p>
<p>WdgM/WdgMConfigSet/WdgMMode/WdgMDeadlineSupervision/</p>
<p><b>Group</b></p>
<p>Local or global deadline</p>
<p><b>Type</b></p>
<p>Reference</p>
<h1 style="page-break-before:always; "></h1>
<p>71</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Multiplicity</b></p>
<p>1</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  is  the  parameter  for  a  reference  to  the  <i>destination</i></p>
<p><i>checkpoint </i>for deadline monitoring.</p>
<p><b>Note:  </b>The  start  and  stop  references  of  a  deadline  must</p>
<p>match an existing local or global transition.</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 72</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.6</b></p>
<p><b>ECU Description Configuration</b></p>
<p><b>2.6.1</b></p>
<p><b>Assumptions/Constraints</b></p>
<p>There  is  a  </p>
<p>WdgMTrigger</p>
<p> element  for  every  </p>
<p>WdgMWatchdog</p>
<p> element;  i.e.,  the</p>
<p>former</p>
<p> </p>
<p>WdgMTriggerWatchdogRef</p>
<p> always</p>
<p> &quot;points&quot;</p>
<p> to</p>
<p> an</p>
<p> existing</p>
<p>WdgMWatchdog</p>
<p> element.</p>
<p>For the purpose of navigating within the ECU description file, we assume that every</p>
<p>referenced element is identified by its </p>
<p>SHORT-NAME</p>
<p> element.</p>
<p><b>Example:  </b>A  </p>
<p>WdgMTrigger</p>
<p> element  </p>
<p>WdgMTriggerWatchdogRef</p>
<p> attribute  is  a</p>
<p>reference</p>
<p> to</p>
<p> a</p>
<p> </p>
<p>WdgMWatchdog</p>
<p> </p>
<p>SHORT-NAME  </p>
<p>element</p>
<p> and</p>
<p> not</p>
<p> to</p>
<p> its</p>
<p>WdgMWatchdogName</p>
<p> element.</p>
<p>We  expect  the  Checkpoint  IDs  to  create  a  zero-based,  monotonically  increasing</p>
<p>sequence of integers with no gaps.</p>
<p>We</p>
<p> expect</p>
<p> that</p>
<p> every</p>
<p> </p>
<p>WdgMMode</p>
<p> element</p>
<p> has</p>
<p> a</p>
<p> maximum  of</p>
<p> one</p>
<p>WdgMProgramFlowSupervision</p>
<p> subelement,  which  in  turn  has  exactly  one</p>
<p>WdgMGlobalCheckpointInitialRef</p>
<p> subelement.</p>
<p>We</p>
<p> expect</p>
<p> that</p>
<p> the</p>
<p> </p>
<p>WdgMSupervisedEntityId</p>
<p> attribute</p>
<p> of</p>
<p> all</p>
<p>SupervisedEntity</p>
<p> instances  in one  ECU  description file  builds  a  zero-based,</p>
<p>monotonically increasing sequence of integers with no  gaps.  This  is  a  requirement</p>
<p>because the embedded code uses the <b>Entity ID  </b>as an array index when accessing</p>
<p>WdgMSupervisedEntity</p>
<p>.</p>
<p>The ECU description files to be  used  for  configuring  the  Watchdog  Manager  must</p>
<p>belong to the <b>XML namespace </b></p>
<p><b>&quot;</b>http://autosar.org/3.1.4&quot;.</p>
<h1 style="page-break-before:always; "></h1>
<p>73</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.7</b></p>
<p><b>API Description</b></p>
<p>The <b>S-WdgM software module </b>is the top level layer of the <b>Safe Watchdog Manager</b></p>
<p><b>Stack</b>. The S-WdgM software module contains  the  core  functionality with supervised</p>
<p>entity  state  machines  and  calculation  of  the  S-WdgM  global</p>
<p> state.  The  S-WdgM</p>
<p>communicates on one side through its <b>user API </b>with the <b>Application Layer </b>(optionally</p>
<p>using RTE) and through its <b>system API </b>with the <b>Basic Software Components (BSW)</b></p>
<p>and, on the other side, with the S-WdgIf layer.</p>
<p><b>2.7.1</b></p>
<p><b>S-WdgM Type Definitions</b></p>
<p>This Section describes the <b>types of parameters </b>passed to the API functions of the <b>S-</b></p>
<p><b>WdgM</b>.</p>
<p><b>Name</b></p>
<p>WdgM_ConfigType</p>
<p><b>Type</b></p>
<p>Structure</p>
<p><b>Range</b></p>
<p>N/A</p>
<p><b>Description</b></p>
<p>This is the type for the S-WdgM configuration structure. This</p>
<p>structure  is  generated  by  the  S-WdgM  Configuration</p>
<p>Generator</p>
<p>.</p>
<p><b>Name</b></p>
<p>WdgM_SupervisedEntityIdType</p>
<p><b>Type</b></p>
<p>uint16</p>
<p><b>Range</b></p>
<p>0...65534</p>
<p><b>Description</b></p>
<p>This  is  the  type  for  an individual  supervised  entity  for  the</p>
<p>Safe Watchdog Manager.</p>
<p><b>Note: </b>If configuration parameter </p>
<p>WDGM_USE_RTE</p>
<p> is set to</p>
<p>STD_ON</p>
<p>,</p>
<p> then  this  type  is  imported,</p>
<p> otherwise  it</p>
<p> is</p>
<p>generated.</p>
<p>102</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 74</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Name</b></p>
<p>WdgM_CheckpointIdType</p>
<p><b>Type</b></p>
<p>uint16</p>
<p><b>Range</b></p>
<p>0...65534</p>
<p><b>Description</b></p>
<p>This  is  the  type  for  a  checkpoint</p>
<p> in  the  context</p>
<p> of</p>
<p> a</p>
<p>supervised entity for the S-WdgM.</p>
<p><b>Note: </b>If configuration parameter </p>
<p>WDGM_USE_RTE</p>
<p> is set to</p>
<p>STD_ON</p>
<p>,</p>
<p> then  this  type  is  imported,</p>
<p> otherwise  it</p>
<p> is</p>
<p>generated..</p>
<p><b>Name</b></p>
<p>WdgM_ModeType</p>
<p><b>Type</b></p>
<p>uint8</p>
<p><b>Range</b></p>
<p>0...255</p>
<p><b>Description</b></p>
<p>This  is  the  type  for  the  ID  of  a  trigger  mode  that  was</p>
<p>configured for the S-WgM. The current trigger mode can be</p>
<p>retrieved with </p>
<p>WdgM_GetMode()</p>
<p>.</p>
<p><b>Note: </b>If configuration parameter </p>
<p>WDGM_USE_RTE</p>
<p> is set to</p>
<p>STD_ON</p>
<p>,</p>
<p> then  this  type  is  imported,</p>
<p> otherwise  it</p>
<p> is</p>
<p>generated..</p>
<p><b>Name</b></p>
<p>WdgM_LocalStatusType</p>
<p><b>Type</b></p>
<p>uint8</p>
<p><b>Range</b></p>
<p>WDGM_LOCAL_STATUS_OK = 0</p>
<p>WDGM_LOCAL_STATUS_FAILED = 1</p>
<p>WDGM_LOCAL_STATUS_EXPIRED = 2</p>
<p>WDGM_LOCAL_STATUS_DEACTIVATED = 4</p>
<p><b>Description</b></p>
<p>This is the type for the local monitoring state of a supervised</p>
<p>entity.&quot;The current local state of a supervised entity can be</p>
<p>retrieved with </p>
<p>WdgM_GetLocalStatus()</p>
<p>.</p>
<h1 style="page-break-before:always; "></h1>
<p>75</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Note</b>: If configuration parameter </p>
<p>WDGM_USE_RTE</p>
<p> is set to</p>
<p>STD_ON</p>
<p>, then this type is imported, otherwise it is</p>
<p>generated..</p>
<p><b>Name</b></p>
<p>WdgM_GlobalStatusType</p>
<p><b>Type</b></p>
<p>uint8</p>
<p><b>Range</b></p>
<p>WDGM_GLOBAL_STATUS_OK = 0,</p>
<p>WDGM_GLOBAL_STATUS_FAILED = 1,</p>
<p>WDGM_GLOBAL_STATUS_EXPIRED = 2,</p>
<p>WDGM_GLOBAL_STATUS_STOPPED = 3,</p>
<p>WDGM_GLOBAL_STATUS_DEACTIVATED = 4</p>
<p><b>Description</b></p>
<p>This is the type for the global monitoring state. It summarizes</p>
<p>the local states of all supervised entities. The current global</p>
<p>state can be retrieved with </p>
<p>WdgM_GetGlobalStatus()</p>
<p>.</p>
<p><b>Note</b>: If configuration parameter </p>
<p>WDGM_USE_RTE</p>
<p> is set to</p>
<p>STD_ON</p>
<p>,</p>
<p> then  this  type  is  imported,</p>
<p> otherwise  it</p>
<p> is</p>
<p>generated..</p>
<p><b>Name</b></p>
<p>WdgM_TimeBaseTickType</p>
<p><b>Type</b></p>
<p>uint32</p>
<p><b>Range</b></p>
<p>0...2</p>
<p>32-1</p>
<p><b>Description</b></p>
<p>This is the type for the Timebase Tick.</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 76</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Name</b></p>
<p>Std_VersionInfoType</p>
<p><b>Type</b></p>
<p>Structure</p>
<p><b>Range</b></p>
<p>N/A</p>
<p><b>Description</b></p>
<p>This is the parameter type of function</p>
<p>WdgM_GetVersionInfo()</p>
<p>.</p>
<p><b>2.7.2</b></p>
<p><b>S-WdgM Application Level API Functions</b></p>
<p>This Section describes the <b>S-WdgM API functions </b>that are imported or provided by</p>
<p>the S-WdgM software module.</p>
<p><b>Syntax</b></p>
<p>Std_ReturnType WdgM_SetMode</p>
<p>(WdgM_ModeType Mode, uint16 CallerID)</p>
<p><b>Service ID[hex]</b></p>
<p>0x03</p>
<p><b>Sync/Async</b></p>
<p>Synchronous</p>
<p><b>Reentrant?</b></p>
<p>Yes</p>
<p><b>Parameters (in)</b></p>
<p>Mode</p>
<p>: The ID of the Trigger Mode to which the S-WdgM must be</p>
<p>set.</p>
<p>CallerID:</p>
<p> ID  of</p>
<p> the  caller</p>
<p> allowed  to  call</p>
<p> the  function</p>
<p>WdgM_SetMode()</p>
<p>.</p>
<p> The  allowed  caller</p>
<p> is  defined  in  the</p>
<p>configuration.</p>
<p> The</p>
<p> caller</p>
<p> ID</p>
<p> is</p>
<p> checked</p>
<p> if</p>
<p>WdgMDefensiveBehavior</p>
<p> is true.</p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>None</p>
<p><b>Return value </b></p>
<p>Std_ReturnType:</p>
<p> </p>
<p>E_OK:</p>
<p> The new Trigger Mode has been successfully set.</p>
<p>E_NOT_OK:</p>
<p> The setting of the new Trigger Mode failed.</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1 / TTTech</p>
<p><b>Description</b></p>
<p>This  functions  sets  the  <i>Trigger  Mode  </i>of  the  S-WdgM.  The  S-</p>
<p>92</p>
<h1 style="page-break-before:always; "></h1>
<p>77</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>WdgM  <i>Trigger  Mode  </i>is  a  set  of  Watchdog  trigger  times  and</p>
<p>Watchdog  mode.  The  S-WdgM  can have  one  or  more  <i>Trigger</i></p>
<p><i>Modes </i>for every watchdog. In contrast to AUTOSAR,  where  the</p>
<p>Mode</p>
<p> represents  a  set</p>
<p> of</p>
<p> entities  with  all</p>
<p> entity-specific</p>
<p>parameters,  the  S-WdgM  Trigger  Mode  only  sets  the  following</p>
<p>parameters:</p>
<p>WdgMTriggerConditionValue</p>
<p> </p>
<p>WdgMTriggerWindowStart</p>
<p>WdgMWatchdogMode</p>
<p><b>Note: </b>A change to trigger mode with </p>
<p>ID Mode</p>
<p> sets all</p>
<p>configured watchdogs to the trigger mode with </p>
<p>ID Mode</p>
<p>. As a</p>
<p>consequence, all watchdogs must have configured the same</p>
<p>number of Trigger Modes.</p>
<p>This function can be used  to  increase  the  S-WdgM  supervision</p>
<p>cycle in an MCU sleep mode.</p>
<p><b>Syntax</b></p>
<p>Std_ReturnType</p>
<p> WdgM_GetMode(WdgM_ModeType*</p>
<p>Mode)</p>
<p><b>Service ID[hex]</b></p>
<p>0x0b</p>
<p><b>Sync/Async</b></p>
<p>Synchronous</p>
<p><b>Reentrant?</b></p>
<p>Yes</p>
<p><b>Parameters (in)</b></p>
<p>None</p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>Mode:</p>
<p> Pointer to the current Trigger Mode ID  of  the  Watchdog</p>
<p>Manager</p>
<p><b>Return value </b></p>
<p>Std_ReturnType:</p>
<p>E_OK:</p>
<p> Current Trigger Mode successfully returned.</p>
<p>E_NOT_OK:</p>
<p> Returning current Trigger Mode failed.</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1/TTTech</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 78</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Description</b></p>
<p>Returns the current Trigger Mode of the S-WdgM. The  S-WdgM</p>
<p>Trigger Mode represents one Watchdog  trigger  time  and  mode</p>
<p>setting.</p>
<p><b>Syntax</b></p>
<p>Std_ReturnType WdgM_CheckpointReached</p>
<p>(WdgM_SupervisedEntityIdType SEID, </p>
<p>WdgM_CheckpointIdType CheckpointID)</p>
<p><b>Service ID[hex]</b></p>
<p>0x0e</p>
<p><b>Sync/Async</b></p>
<p>Synchronous</p>
<p><b>Reentrant?</b></p>
<p>Yes, reentrant in the context of a different supervised entity.</p>
<p><b>Parameters (in)</b></p>
<p>SEID:</p>
<p> Identifier</p>
<p> of</p>
<p> the  supervised  entity  that</p>
<p> reports  a</p>
<p>checkpoint.</p>
<p>CheckpointID:</p>
<p> Identifier</p>
<p> of</p>
<p> the</p>
<p> checkpoint</p>
<p> within  a</p>
<p>supervised entity that has been reached.</p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>None</p>
<p><b>Return value </b></p>
<p>Std_ReturnType:</p>
<p> </p>
<p>E_OK:</p>
<p> Checkpoint monitoring successful.</p>
<p>E_NOT_OK</p>
<p>:</p>
<p> Checkpoint</p>
<p> monitoring  fault.</p>
<p> Returned  in  the</p>
<p>following cases</p>
<p>o</p>
<p>WDGM_E_NO_INIT</p>
<p>:</p>
<p> Uninitialized  S-WdgM  (DET  code</p>
<p>0x10</p>
<p>)</p>
<p>o</p>
<p>WDGM_E_PARAM_SEID</p>
<p>:</p>
<p> Wrong</p>
<p> Id</p>
<p> number</p>
<p> of</p>
<p> the</p>
<p>supervised entity (DET code </p>
<p>0x13</p>
<p>)</p>
<p>o</p>
<p>WDGM_E_CPID</p>
<p>: Invalid checkpoint ID  number (DET  code</p>
<p>0x16</p>
<p>)</p>
<p>o</p>
<p>WDGM_E_PARAM_STATE</p>
<p>:  Invalid  S-WdgM  state.  Reset</p>
<p>will be invoked (DET code </p>
<p>0x29</p>
<p>).</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<h1 style="page-break-before:always; "></h1>
<p>79</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Description</b></p>
<p>Indicates  to  the  S-WdgM  that  a  checkpoint  within a  supervised</p>
<p>entity has been reached.</p>
<p><b>Syntax</b></p>
<p>Std_ReturnType WdgM_GetLocalStatus</p>
<p>(WdgM_SupervisedEntityIdType SEID,</p>
<p>WdgM_LocalStatusType* Status) </p>
<p><b>Service ID[hex]</b></p>
<p>0x0c</p>
<p><b>Sync/Async</b></p>
<p>Synchronous</p>
<p><b>Reentrant?</b></p>
<p>Yes</p>
<p><b>Parameters (in)</b></p>
<p>SEID:</p>
<p> Identifier of the supervised entity whose monitoring state</p>
<p>is returned.</p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>Status:</p>
<p> Pointer  to  the  local</p>
<p> monitoring  state  of  the  given</p>
<p>supervised entity.</p>
<p><b>Return value </b></p>
<p>Std_ReturnType:</p>
<p>E_OK:</p>
<p> Current monitoring state successfully returned.</p>
<p>E_NOT_OK:</p>
<p> Returning the current monitoring state failed.</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>Returns the monitoring state of the given supervised entity.</p>
<p><b>Note:</b></p>
<p> The</p>
<p> S-WdgM  updates</p>
<p> the</p>
<p> state</p>
<p> inside</p>
<p> the</p>
<p> </p>
<p>WdgM_MainFunction()</p>
<p> every supervision cycle.</p>
<p><b>Syntax</b></p>
<p>Std_ReturnType WdgM_GetGlobalStatus</p>
<p>(WdgM_GlobalStatusType* Status)</p>
<p><b>Service ID[hex]</b></p>
<p>0x0d</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 80</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Sync/Async</b></p>
<p>Synchronous</p>
<p><b>Reentrant?</b></p>
<p>Yes</p>
<p><b>Parameters (in)</b></p>
<p>None</p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>Status:</p>
<p> Pointer to global monitoring state of the S-WdgM.</p>
<p><b>Return value </b></p>
<p>Std_ReturnType:</p>
<p>E_OK:</p>
<p> Current global monitoring state successfully returned.</p>
<p>E_NOT_OK:</p>
<p> Watchdog reset failed.</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>Returns the global monitoring state of the S-WdgM.</p>
<p><b>Note:</b></p>
<p> The</p>
<p> S-WdgM  updates</p>
<p> the</p>
<p> state</p>
<p> inside</p>
<p> the</p>
<p>WdgM_MainFunction()</p>
<p> every supervision cycle.</p>
<p> </p>
<p><b>Syntax</b></p>
<p>Std_ReturnType WdgM_PerformReset(void)</p>
<p><b>Service ID[hex]</b></p>
<p>0x0f</p>
<p><b>Sync/Async</b></p>
<p>Synchronous</p>
<p><b>Reentrant?</b></p>
<p>No</p>
<p><b>Parameters (in)</b></p>
<p>None</p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>None</p>
<p><b>Return value </b></p>
<p>Std_ReturnType:</p>
<p>E_OK:</p>
<p> This  value  will  not  be  returned  because  the  reset  is</p>
<p>activated, and the routine does not return.</p>
<h1 style="page-break-before:always; "></h1>
<p>81</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>E_NOT_OK:</p>
<p> The function has failed.</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>Instructs the S-WdgM to cause an immediate watchdog reset.</p>
<p><b>Note:</b></p>
<p>This function is hardware-dependent. Some watchdogs do  not</p>
<p>support</p>
<p> an  immediate  reset.</p>
<p> Check</p>
<p> the  S-Wdg  Driver</p>
<p>documentation.</p>
<p>This  function  can  may  direct  access  to  hardware  registers.</p>
<p>Access to hardware registers can be  dependent  on hardware</p>
<p>platforms and software architectures. Hence, the application that</p>
<p>calls </p>
<p>WdgM_PerformReset()</p>
<p> must  have  the  corresponding</p>
<p>access rights.</p>
<p><b>Syntax</b></p>
<p>Std_ReturnType</p>
<p>WdgM_DeactivateSupervisionEntity</p>
<p>(WdgM_SupervisedEntityIdType SEID)</p>
<p><b>Re-entrant?</b></p>
<p>Yes</p>
<p><b>Parameters (in)</b></p>
<p>SEID:</p>
<p> ID  of  the  supervised  entity  to  be  deactivated.  Range</p>
<p>[0...N] </p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>None</p>
<p><b>Return value </b></p>
<p>Std_ReturnType:</p>
<p>E_OK:</p>
<p> Marking  the  supervised  entity  for  deactivation  was</p>
<p>successful.</p>
<p>E_NOT_OK:</p>
<p> Marking  the  supervised  entity  for  deactivation</p>
<p>failed. </p>
<p><b>Compatibility</b></p>
<p>TTTech, AUTOSAR 3.1</p>
<p><b>Note: </b>Defined in the AUTOSAR 3.1 specification. This function is</p>
<p>no longer available in the AUTOSAR 4.0 r1 specification. </p>
<p><b>Description</b></p>
<p>The function marks an entity for deactivation. An entity can only be</p>
<p>deactivated when its local state is </p>
<p>WDGM_LOCAL_STATUS_OK</p>
<p> or</p>
<p>WDGM_LOCAL_STATUS_FAILED</p>
<p>.</p>
<p> The</p>
<p> deactivation</p>
<p> itself</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 82</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>happens  at</p>
<p> the  end  of</p>
<p> the  supervision  cycle  inside  the</p>
<p>WdgM_MainFunction()</p>
<p>. When an entity is deactivated then its</p>
<p>checkpoints are not evaluated anymore and the entity local state</p>
<p>is </p>
<p>WDGM_LOCAL_STATUS_DEACTIVATED</p>
<p>. </p>
<p><b>Note:</b></p>
<p>When an entity is deactivated, the global transitions to this entity</p>
<p>are not evaluated.</p>
<p>Using this function can degrade system safety. The deactivation</p>
<p>of  entity supervision  in  safety-related  products  needs  special</p>
<p>attention to avoid unintended supervised entity deactivation.</p>
<p>The  function  </p>
<p>WdgM_DeactivateSupervisionEntity()</p>
<p>can  deactivate  a  supervised  entity  only  before  its  <b>initial</b></p>
<p><b>checkpoint  </b>was  passed  or  <b>after  </b>its  <b>end  checkpoint  </b>was</p>
<p>passed. The focus here is on entities that are spread over more</p>
<p>than one supervision cycles. <b>Note: </b>The local program flow of a</p>
<p>supervised  entity  may  span  over  more  than  one  supervision</p>
<p>cycle. Those active entities cannot be deactivated while running.</p>
<p>Deactivating active SEs leads to a DEM error report.</p>
<p>In  the  same  call</p>
<p> of</p>
<p> </p>
<p>WdgM_MainFunction()</p>
<p>,</p>
<p> first</p>
<p> the</p>
<p>supervised  entity  is  deactivated,  then  the  local  states  of  all</p>
<p>supervised entities and the global state are set.</p>
<p>After  SE  deactivation  the  function  </p>
<p>WdgM_GetLocalStatus</p>
<p>()</p>
<p> can be used to check the SE local state.</p>
<p>This  function  is  only  available  if  the  preprocessor  switch</p>
<p> </p>
<p>WdgMEntityDeactivationEnabled</p>
<p> is set to </p>
<p>true</p>
<p> and if</p>
<p>the entity option</p>
<p> WdgMEnableEntityDeactivation</p>
<p> is</p>
<p>set to </p>
<p>true</p>
<p>. </p>
<p><b>Syntax</b></p>
<p>Std_ReturnType WdgM_ActivateSupervisionEntity</p>
<p>(WdgM_SupervisedEntityIdType SEID)</p>
<p> </p>
<p><b>Parameters (in)</b></p>
<p>SEID:</p>
<p> Supervised entity identifier.</p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>None </p>
<p><b>Return value </b></p>
<p>Std_ReturnType</p>
<p>:</p>
<p>61</p>
<h1 style="page-break-before:always; "></h1>
<p>83</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>E_OK:</p>
<p> Marking  the  supervised  entity  for</p>
<p> activation  was</p>
<p>successful.</p>
<p>E_NOT_OK:</p>
<p> Marking the supervised entity for activation failed.</p>
<p><b>Compatibility</b></p>
<p>TTTech, AUTOSAR 3.1</p>
<p><b>Note: </b>Defined in the AUTOSAR 3.1 specification, this function is</p>
<p>no longer available in the AUTOSAR 4.0 r1 specification. </p>
<p><b>Description</b></p>
<p>The function marks an entity for activation. An entity can only be</p>
<p>activated when its local state is </p>
<p>WDGM_LOCAL_STATUS_DEACTIVATED</p>
<p>.</p>
<p>The activation itself happens at the end of the  supervision cycle</p>
<p>inside the </p>
<p>WdgM_MainFunction()</p>
<p>. </p>
<p><b>Note:</b></p>
<p>This function can degrade system safety. The activation of entity</p>
<p>supervision in safety-related products needs special attention to</p>
<p>avoid unintended supervised entity deactivation. </p>
<p>In the  same  call  of  </p>
<p>WdgM_MainFunction()</p>
<p>,  first  the  local</p>
<p>states of all supervised entities and the global state are set, then</p>
<p>the supervised entity is activated.</p>
<p>After  SE  activation the  function  </p>
<p>WdgM_GetLocalStatus()</p>
<p>can be used to check the SE local state.</p>
<p>This  function  is  only  available  if  the  preprocessor  switch</p>
<p> </p>
<p>WdgMEntityDeactivationEnabled</p>
<p> is set to </p>
<p>true</p>
<p> and if the entity</p>
<p>option</p>
<p> WdgMEnableEntityDeactivation</p>
<p> is set to </p>
<p>true</p>
<p>. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 84</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.7.3</b></p>
<p><b>Callback Functions</b></p>
<p><b>Global state callback</b></p>
<p>When  </p>
<p>WDGM_STATE_CHANGE_NOTIFICATION  ==  STD_ON</p>
<p> and  the  S-WdgM</p>
<p>global</p>
<p> state  changes,</p>
<p> then  the  callback  routine  defined  by  the  parameter</p>
<p> </p>
<p>WdgMGlobalStateChangeCbk</p>
<p> is called.</p>
<p><b>Local state callback</b></p>
<p>When </p>
<p>WDGM_STATE_CHANGE_NOTIFICATION == STD_ON</p>
<p> and the local state of a</p>
<p>supervised  entity  changes,  then  the  callback  routine  defined  by  the  parameter  </p>
<p>WdgMLocalStateChangeCbk</p>
<p> is called.</p>
<p><b>2.7.4</b></p>
<p><b>S-WdgM System Level API Functions</b></p>
<p>This section describes the <b>function definitions </b>of the S-WdgM system level interface.</p>
<p>The system level interface functions are not visible in the AUTOSAR application layer.</p>
<p>The  system  functions  are  directly invoked  by the  BSW  modules.  The  RTE  does  not</p>
<p>generate interfaces for these functions.</p>
<p><b>Syntax</b></p>
<p>void</p>
<p> WdgM_Init(const</p>
<p> WdgM_ConfigType*</p>
<p>ConfigPtr)</p>
<p><b>Service ID[hex]</b></p>
<p>0x00</p>
<p><b>Sync/Async</b></p>
<p>Synchronous</p>
<p><b>Reentrant?</b></p>
<p>No</p>
<p><b>Parameters (in)</b></p>
<p>ConfigPtr:</p>
<p> Pointer to post-build configuration data</p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>None</p>
<p><b>Return value </b></p>
<p>None</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>The  </p>
<p>WdgM_Init()</p>
<p> function  initializes  the  S-WdgM.  After  the</p>
<p>execution of this function, monitoring is activated according to the</p>
<p>configuration of  </p>
<p>ConfigPtr</p>
<p>.  This  function can be  used  during</p>
<p>monitoring, too, but note that all pending violations are lost.</p>
<p>49</p>
<p>63</p>
<h1 style="page-break-before:always; "></h1>
<p>85</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Syntax</b></p>
<p>void WdgM_GetVersionInfo</p>
<p>(Std_VersionInfoType* VersionInfo)</p>
<p><b>Service ID[hex]</b></p>
<p>0x02</p>
<p><b>Sync/Async</b></p>
<p>Synchronous</p>
<p><b>Reentrant?</b></p>
<p>Yes</p>
<p><b>Parameters (in)</b></p>
<p>None</p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>VersionInfo:</p>
<p> Pointer to where to store the version information</p>
<p>of the S-WdgM module.</p>
<p><b>Return value </b></p>
<p>None</p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>The  </p>
<p>WdgM_GetVersionInfo()</p>
<p> function  returns  information</p>
<p>about the version of this module. This includes the module ID, the</p>
<p>vendor ID, and the vendor-specific version number. </p>
<p><b>Syntax</b></p>
<p>void WdgM_MainFunction(void)</p>
<p><b>Service ID[hex]</b></p>
<p>0x08</p>
<p><b>Timing</b></p>
<p>FIXED_CYCLIC</p>
<p><b>Reentrant?</b></p>
<p>No</p>
<p><b>Parameters (in)</b></p>
<p>None</p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>None</p>
<p><b>Return value </b></p>
<p>None</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 86</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Compatibility</b></p>
<p>AUTOSAR 4.0 r1</p>
<p><b>Description</b></p>
<p>This  function  evaluates  <i>monitoring  data  </i>gathered  from  the  hit</p>
<p>checkpoints in all supervised entities during the supervision cycle.</p>
<p>Depending on the violation found (if there is any), the</p>
<p>local state of the supervised entities and</p>
<p>the S-WdgM global state</p>
<p>are evaluated again.</p>
<p>Depending on the resulting global state:</p>
<p>the WD is triggered, or</p>
<p>the WD trigger discontinues (safe state), or</p>
<p>the WD is reset (safe state).</p>
<p>The function must run at the end of every supervision cycle. It may</p>
<p>be called by the <i>Basic Software Scheduler </i>or a task with a fixed</p>
<p>period time.</p>
<p>The  </p>
<p>WdgM_MainFunction()</p>
<p> function  is  not</p>
<p> reentrant.</p>
<p> To</p>
<p>prevent data inconsistency when it is interrupted by itself (e.g., due</p>
<p>to  schedule  overload),  the  function  checks  if</p>
<p> it</p>
<p> is  executed</p>
<p>concurrently. If this function is started before its last instance has</p>
<p>finished, it raises a development error.</p>
<p><b>Note:</b></p>
<p>Alive counter violations are detected at  the  end  of  every alive</p>
<p>supervision reference cycle,</p>
<p>program  flow  violations  are  detected  at</p>
<p> the  end  of</p>
<p> every</p>
<p>supervision cycle,</p>
<p>continued  program  flow  violations  are  detected  at  the  end  of</p>
<p>every program flow supervision cycle.</p>
<p>deadline violations are detected at the end of every supervision</p>
<p>cycle,</p>
<p>continued of deadline violations are detected at the end of every</p>
<p>deadline supervision cycle.</p>
<p>See also the <i>Safe Watchdog Manager Safety Manual </i>[5]</p>
<p>.</p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p>87</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Syntax</b></p>
<p>void WdgM_UpdateTickCount(void)</p>
<p><b>Service ID[hex]</b></p>
<p>None</p>
<p><b>Timing</b></p>
<p>FIXED_CYCLIC</p>
<p><b>Reentrant?</b></p>
<p>No</p>
<p><b>Parameters (in)</b></p>
<p>None</p>
<p><b>Parameters</b></p>
<p><b> (in/</b></p>
<p><b>out)</b></p>
<p>None</p>
<p><b>Parameters (out)</b></p>
<p>None</p>
<p><b>Return value </b></p>
<p>None</p>
<p><b>Compatibility</b></p>
<p>TTTech</p>
<p><b>Description</b></p>
<p>This function increments the S-WdgM <i>Timebase Tick Counter </i>by</p>
<p>one.</p>
<p> When</p>
<p> the</p>
<p> precompile</p>
<p> configuration</p>
<p> parameter</p>
<p> </p>
<p>WdgMTimebaseSource</p>
<p> is set to </p>
<p>WDGM_EXTERNAL_TICK</p>
<p>,</p>
<p>then this function needs to be called periodically from outside the</p>
<p>S-WdgM. </p>
<p>The <i>Timebase Tick Counter </i>delivers the time base for deadline</p>
<p>monitoring.  In the  AUTOSAR  environment,  this  function  can  be</p>
<p>called, for example, from a task with fixed time  period  and  high</p>
<p>priority.</p>
<p>44</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 88</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>2.7.5</b></p>
<p><b>Expected Interfaces</b></p>
<p>This section describes the <b>expected interfaces </b>to external modules  used  by the  S-</p>
<p>WdgM at BSW level (see Figure 18) and describes how to use the external interfaces</p>
<p>with regard to safety (for detailed requirements on how to use external interfaces, see</p>
<p>the <i>Safe Watchdog Manager Safety Manual </i>[5]</p>
<p>).</p>
<p><b>Note: </b>The external modules are AUTOSAR-defined modules.</p>
<p> </p>
<p> </p>
<p><b>S-WdgM </b></p>
<p> </p>
<p><b>Mcu </b></p>
<p>Appl_Mcu_PerformReset() </p>
<p><b>*</b></p>
<p> </p>
<p> </p>
<p><b>SchM </b></p>
<p>SchM_Enter_WdgM()</p>
<p><b>*</b></p>
<p> </p>
<p>SchM_Exit_WdgM() </p>
<p><b>*</b></p>
<p> </p>
<p>WdgM_Init() </p>
<p>WdgM_GetVersionInfo() </p>
<p>WdgM_MainFunction() </p>
<p>WdgM_UpdateTickCount()</p>
<p><b>* </b></p>
<p>WdgM_GetTickCount() </p>
<p>Appl_Dem_ReportErrorStatus()</p>
<p><b>*</b></p>
<p> </p>
<p>Appl_Det_ReportError()</p>
<p><b>*</b></p>
<p> </p>
<p> </p>
<p><b>Det </b></p>
<p> </p>
<p><b>Dem </b></p>
<p>S-WdgM </p>
<p>Application Level </p>
<p>API </p>
<p><b>BSW </b></p>
<p><b>(EcuM) </b></p>
<p><b>(SchM) </b></p>
<p> </p>
<p><b>S-WdgIF </b></p>
<p><b>RTE </b></p>
<p>Safe Watchdog  Notification </p>
<p><b>*</b> </p>
<p>Optional interface </p>
<p>WdgIf_SetMode() </p>
<p>WdgIf_SetTriggerWindow() </p>
<p>WdgIf_GetTickCounter()</p>
<p><b>*</b></p>
<p> </p>
<p><i><b>Fig. 18: Expected interfaces to external modules</b></i></p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p>89</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Function</b></p>
<p><b>Description</b></p>
<p>Appl_Dem_ReportErrorStatus()</p>
<p>If  the  precompiler  switch  </p>
<p>WdgMDemReport</p>
<p> is  set</p>
<p> to</p>
<p>STD_ON</p>
<p>,</p>
<p> the</p>
<p> S-WdgM</p>
<p> calls</p>
<p> the</p>
<p> function</p>
<p>Dem_ReportErrorStatus()</p>
<p> through  the  wrapper</p>
<p>Appl_Dem_ReportErrorStatus()</p>
<p>.</p>
<p><b>Safety  aspect:  </b>The  DEM  module  may  not  meet  the</p>
<p>required  quality  level.  The  wrapper  is  implemented  to</p>
<p>guarantee  freedom  from  interference.</p>
<p> See  the  <i>Safe</i></p>
<p><i>Watchdog  Manager</i></p>
<p><i> Safety  Manual</i></p>
<p> [5]</p>
<p> for</p>
<p> more</p>
<p>information.</p>
<p>Appl_Det_ReportError()</p>
<p>If the precompiler switch </p>
<p>WdgMDevErrorDetect</p>
<p> is set</p>
<p>to</p>
<p> </p>
<p>STD_ON</p>
<p>,</p>
<p> the</p>
<p> S-WdgM</p>
<p> calls</p>
<p> the</p>
<p> function</p>
<p>Det_ReportError()</p>
<p> through</p>
<p> the</p>
<p> wrapper</p>
<p>Appl_Det_ReportError()</p>
<p>.</p>
<p><b>Safety  aspect:  </b>The  DET  module  may  not</p>
<p> meet</p>
<p> the</p>
<p>required  quality  level.  The  wrapper  is  implemented  to</p>
<p>guarantee  freedom  from  interference.</p>
<p> See  the  <i>Safe</i></p>
<p><i>Watchdog  Manager</i></p>
<p><i> Safety  Manual</i></p>
<p> [5]</p>
<p> for</p>
<p> more</p>
<p>information.</p>
<p>Appl_Mcu_PerformReset()</p>
<p>If the precompiler switch  </p>
<p>WDGM_SECOND_RESET_PATH</p>
<p>is</p>
<p> </p>
<p>STD_ON</p>
<p>,</p>
<p> the</p>
<p> S-WdgM</p>
<p> calls</p>
<p> the</p>
<p> function</p>
<p>Mcu_PerformReset()</p>
<p> through</p>
<p> the</p>
<p> wrapper</p>
<p>Appl_Mcu_PerformReset()</p>
<p>.</p>
<p><b>Safety  aspect:  </b>The  MCU  module  may  not  meet  the</p>
<p>required  quality  level.  The  wrapper  is  implemented  to</p>
<p>guarantee  freedom  from  interference.</p>
<p> See  the  <i>Safe</i></p>
<p><i>Watchdog  Manager</i></p>
<p><i> Safety  Manual</i></p>
<p> [5]</p>
<p> for</p>
<p> more</p>
<p>information.</p>
<p>SchM_Enter_WdgM()</p>
<p> </p>
<p>and</p>
<p>SchM_Exit_WdgM()</p>
<p>If</p>
<p> the</p>
<p> precompiler</p>
<p> switch</p>
<p>WdgMUseOsSuspendInterrupt</p>
<p> is set to </p>
<p>STD_ON</p>
<p>, the</p>
<p>S-WdgM calls the functions </p>
<p>SchM_Enter_WdgM()</p>
<p> and</p>
<p>SchM_Exit_WdgM()</p>
<p>.</p>
<p><b>Safety aspect: </b>The SCHM  module  may  not  meet  the</p>
<p>required quality level.  See the <i>Safe Watchdog Manager</i></p>
<p><i>Safety Manual </i>[5]</p>
<p> for more information.</p>
<p><b>Note: </b>If the precompiler switches</p>
<p>WdgMDevErrorDetect,</p>
<p>WdgMDemReport,</p>
<p>WdgMUseOsSuspendInterrupt,</p>
<p>WdgMImmediateReset</p>
<p> </p>
<p>and</p>
<p>WDGM_SECOND_RESET_PATH</p>
<p>are set to </p>
<p>false</p>
<p>, the S-WdgM module does not call the corresponding function(s).</p>
<p>128</p>
<p>128</p>
<p>128</p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 90</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Note:  </b>The functions listed in the table above may not meet  the  required  quality level</p>
<p>and, thus, must be wrapped in order to ensure freedom from interference with the  S-</p>
<p>WdgM. The integrator must implement the  </p>
<p>Appl_...() </p>
<p>functions  according  to  the</p>
<p>requirements specified in the <i>Safe Watchdog Manager Safety Manual </i>[5]</p>
<p>.</p>
<p><b>Note:  </b>The system integrator must revise the  necessity of  the  expected  interfaces.  A</p>
<p>called external function may degrade the quality level of the S-WdgM below the required</p>
<p>quality level.</p>
<p><b>2.7.6</b></p>
<p><b>AUTOSAR 3.1 Compatibility Mode</b></p>
<p>If the parameter </p>
<p>WdgMSupportedAutosarAPI</p>
<p> is set to </p>
<p>API_3_1</p>
<p> , the S-WdgM</p>
<p>is compiled in the AUTOSAR 3.1 compatibility mode. This means that its functionality is</p>
<p>reduced to the functionality described by AUTOSAR 3.1.</p>
<p>The AUTOSAR 3.1 compatibility mode has the following configuration restrictions:</p>
<p>Exactly one checkpoint must be defined for a supervised entity.</p>
<p>The checkpoint must have an <b>initial attribute </b>and an <b>end attribute</b>.</p>
<p>An Alive counter must be defined for the checkpoint.</p>
<p>Local and global transitions are not allowed.</p>
<p>The AUTOSAR 4.0 r1 supervised entities are not allowed.</p>
<p><b>Note: </b>the AUTOSAR 3.1 compatibility mode must be differentiated from the AUTOSAR</p>
<p>environment  version in which the  S-WdgM  is  integrated.  The  compatibility  mode  is</p>
<p>related only to the functionality of the module.</p>
<p><b>2.7.6.1</b></p>
<p><i>User API</i></p>
<p>If the parameter </p>
<p>WdgMSupportedAutosarAPI</p>
<p> is  set  to  </p>
<p>API_3_1</p>
<p> (embedded  macro</p>
<p>WDGM_AUTOSAR_3_1_X_COMPATIBILITY = STD_ON</p>
<p>), </p>
<p>then the S-WdgM provides the</p>
<p>AUTOSAR 3.1 functions described in the table below. The table also shows the internal</p>
<p>mapping of the AUTOSAR 3.1 to the AUTOSAR 4.0 r1 functions:</p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_SetMode(Mode)</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_SetMode(Mode, CallerID)</p>
<p><b>Note</b></p>
<p>The </p>
<p>CallerID = 0</p>
<p> is  added  in  the  S-WdgM embedded</p>
<p>code.</p>
<p>128</p>
<p>62</p>
<p>62</p>
<h1 style="page-break-before:always; "></h1>
<p>91</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_GetMode(*Mode)</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_GetMode(*Mode)</p>
<p><b>Note</b></p>
<p>The function signature is the same.</p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_UpdateAliveCounter(SEID)</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_CheckpointReached(SEID, CPID)</p>
<p><b>Note</b></p>
<p>The </p>
<p>CPID = 0</p>
<p> is added in the S-WdgM embedded code</p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_GetAliveSupervisionStatus(SEID, *status)</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_GetLocalStatus(SEID, *status)</p>
<p><b>Note</b></p>
<p>The function name is redefined in the file </p>
<p>WdgM_swc.arxml</p>
<p>.</p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_GetGlobalStatus(*status)</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_GetGlobalStatus(*status)</p>
<p><b>Note</b></p>
<p>The function signature is the same.</p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_ActivateAliveSupervision(SEID)</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_ActivateSupervisionEntity(SEID)</p>
<p><b>Note</b></p>
<p>The function name is redefined in the file </p>
<p>WdgM_swc.arxml</p>
<p>.</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 92</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_DeactivateAliveSupervision(SEID)</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_DeactivateSupervisionEntity(SEID)</p>
<p><b>Note</b></p>
<p>The function name is redefined in the file </p>
<p>WdgM_swc.arxml</p>
<p>.</p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_GssChangeCbk(status)</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_GlobalStateChangeCbk(status)</p>
<p><b>Note</b></p>
<p>The function name is redefined in the file </p>
<p>WdgM_swc.arxml</p>
<p>.</p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_IssChangeCbk(status)</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_LocalStateChangeCbk(status)</p>
<p><b>Note</b></p>
<p>The function name is redefined in the file </p>
<p>WdgM_swc.arxml</p>
<p>.</p>
<p><b>2.7.6.2</b></p>
<p><i>System API</i></p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_Init(&amp;Config)</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_Init(&amp;Config)</p>
<p><b>Note</b></p>
<p>The function signature is the same.</p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_GetVersionInfo(&amp;versioninfo)</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_GetVersionInfo(&amp;versioninfo)</p>
<p><b>Note</b></p>
<p>The function signature is the same.</p>
<h1 style="page-break-before:always; "></h1>
<p>93</p>
<p>Page</p>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_Cbk_GptNotification()</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_UpdateTickCount()</p>
<p><b>Note</b></p>
<p>In</p>
<p> the</p>
<p> AUTOSAR</p>
<p> 3.1</p>
<p> environment</p>
<p> the</p>
<p>WdgM_UpdateTickCount()</p>
<p> function</p>
<p> is</p>
<p> not</p>
<p> used,</p>
<p>because  it  is  used  in  the  AUTOSAR  4.0  r1  deadline</p>
<p>monitoring only.</p>
<p><b>S-WdgM in AUTOSAR 3.1</b></p>
<p><b>compatibility mode</b></p>
<p>WdgM_MainFunction_AliveSupervision()</p>
<p><b>Native S-WdgM function</b></p>
<p>WdgM_MainFunction()</p>
<p><b>Note</b></p>
<p>In the AUTOSAR 3.1 and AUTOSAR 4.0 r1 environment,</p>
<p>the native S-WdgM function (</p>
<p>WdgM_MainFunction()</p>
<p>) must be called.</p>
<p>85</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Safe Watchdog Manager (S-WdgM)</b></p>
<p>Page 94</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>3</b></p>
<p><b>Integration</b></p>
<p><b>3.1</b></p>
<p><b>Initialization of the S-WdgM</b></p>
<p>In a safety-related system, the initialization of the Watchdog device should be done as</p>
<p>soon as possible after system start (at least before a QM task  may compromise  the</p>
<p>initialization process). The Watchdog device  starts  the  counter  for  the  next  expected</p>
<p>trigger.</p>
<p><b>Note: </b>The ways how the Watchdog device is initialized, configured, and how it reacts</p>
<p>are platform-dependent and can be different. See the corresponding </p>
<p>S afe  W atchdog</p>
<p>D river U ser M anual</p>
<p>.</p>
<p>The <b>time </b>between the <b>initialization </b>of the S-Wdg and the <b>first triggering  </b>in function</p>
<p>WdgM_MainFunction()</p>
<p> (<b>Supervision  cycle  0</b>)</p>
<p> must</p>
<p> match  the  Watchdog</p>
<p>requirements. This time can be adapted in the  S-Wdg  configuration by changing  the</p>
<p>initial S-Wdg trigger window to meet the operating system start time requirements (see</p>
<p>Figure  19).</p>
<p> </p>
<p>MCU Initialization </p>
<p>main() </p>
<p>Wdg_&lt;…&gt;_Init() </p>
<p>WdgM_Init() </p>
<p>Start_OS() </p>
<p>WdgM_MainFunction() </p>
<p>WdgM_MainFunction() </p>
<p>WdgM_MainFunctio</p>
<p>n() </p>
<p>WD reset level </p>
<p>time </p>
<p>0 </p>
<p>Task_x </p>
<p>Task_y </p>
<p>Task_x </p>
<p>Task_z </p>
<p>Task_x </p>
<p>Task_y </p>
<p>Task_z </p>
<p>OS is running </p>
<p>WD counter value </p>
<p>Trigger </p>
<p> window </p>
<p>  Supervision cycle 0 </p>
<p>  Supervision cycle 1 </p>
<p>  Supervision cycle 2 </p>
<p>WD initial trigger window </p>
<p>Init. WD level </p>
<p>Program flow </p>
<p>Trigger </p>
<p> window </p>
<p>WD not initialized </p>
<p>Reset </p>
<p>window </p>
<p>Reset </p>
<p>window </p>
<p>Reset </p>
<p>window </p>
<p>time </p>
<p>WD reload level </p>
<p><i><b>Fig. 19: Start phase of the S-WdgM</b></i></p>
<h1 style="page-break-before:always; "></h1>
<p>95</p>
<p>Page</p>
<p><b>Integration</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>The y-axis in Figure  21 shows the <b>WD counter value</b>, which is reset after each trigger.</p>
<p>Then the  countdown  runs  until  the  S-Wdg  is  triggered  again  (within  the  <b>WD  initial</b></p>
<p><b>trigger  window  </b>or  <b>Trigger  window</b>)  or  <b>0  </b>(<b>WD  Reset  level</b>)  is  reached  (i.e.,  the</p>
<p>window has been missed) so that a reset is performed.</p>
<p><b>Notes:</b></p>
<p>Not  all</p>
<p> hardware  platforms  can  configure  a  different</p>
<p> trigger  time  for  the  first</p>
<p>supervision cycle (cycle 0).</p>
<p>In the first supervision cycle, the Alive counter evaluation can be suppressed by the</p>
<p>parameter </p>
<p>WDGM_FIRSTCYCLE_ALIVECOUNTER_RESET</p>
<p>.</p>
<p>The functions </p>
<p>WdgM_Init()</p>
<p> and </p>
<p>WdgM_MainFunction()</p>
<p> functions can be</p>
<p>placed inside a task, too.</p>
<p>The function </p>
<p>Wdg_&lt;...&gt;_Init()</p>
<p> can be placed before </p>
<p>main()</p>
<p>.</p>
<p>For safety reasons the S-WdgM uses <b>windowed  triggering  mode</b>. This means that</p>
<p>watchdog triggering outside the defined window time causes a reset.</p>
<p>After the execution of function </p>
<p>WdgM_Init()</p>
<p>the supervision of configured entities is</p>
<p>activated and the checkpoints can be executed (called).</p>
<p><b>3.2</b></p>
<p><b>Memory Sections</b></p>
<p>Memory segmentation into sections is especially important when memory protection is</p>
<p>used in the system.</p>
<p>The S-WdgM uses three basic RAM data sections:</p>
<p>1.</p>
<p><b>Memory  sections  for  local  data  of  every  SE:</b></p>
<p><b> </b>This  section  contains  local</p>
<p>information about  every supervised  entity and,  if  defined,  also  the  Alive  counters.</p>
<p>These variables are used by the </p>
<p>WdgM_CheckpointReached()</p>
<p> function and are</p>
<p>part of the private SWC (task, application) memory and written only in the context of</p>
<p>this SWC.</p>
<p><b>Note: </b>The S-WdgM does not protect this memory section.</p>
<p>2.</p>
<p><b>Memory sections for global data: </b>This section contains the S-WdgM global data</p>
<p>such as S-WdgM global status and Timebase Tick counter. It is a S-WdgM private</p>
<p>memory. </p>
<p><b>Note:  </b>In the  AUTOSAR  environment,  where  QM  and  Safety-related  modules  are</p>
<p>used  together,  the  S-WdgM  global  data  should  be  placed  in a  so-called  <b>trusted</b></p>
<p><b>memory section </b>to guarantee its safety and integrity.</p>
<p>3.</p>
<p><b>Memory sections for global shared data: </b>This section contains data such as the</p>
<p>last</p>
<p> active  entity.</p>
<p> This  memory  must</p>
<p> be  writable  for</p>
<p> all</p>
<p> SWCs  using  the</p>
<p>WdgM_CheckpointReached()</p>
<p> function and for the </p>
<p>WdgM_Init()</p>
<p> function. As</p>
<p>this is a memory where all the  QM  SWCs  could  write,  the  S-WdgM  variables  are</p>
<p>48</p>
<p>84</p>
<p>85</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Integration</b></p>
<p>Page 96</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>protected (stored double-inverted) by the S-WdgM  itself.  The  S-WdgM  checks  the</p>
<p>correctness  of  these  variables  with read  operations.  If  a  fault  is  detected,  the  S-</p>
<p>WdgM initiates a reset. </p>
<p>Figure 20 shows the memory usage of the S-WdgM.</p>
<p> </p>
<p><b>SWC’s  private memory </b></p>
<p><b>SWC’s  private memory </b></p>
<p><b>SWC’s  private memory </b></p>
<p><b>S-WdgM Global shared memory </b></p>
<p> </p>
<p> </p>
<p> </p>
<p>Read: all </p>
<p>Write: all </p>
<p><b>S-WdgM  Global memory </b></p>
<p> </p>
<p> </p>
<p>Read: all </p>
<p>Write: S-WdgM </p>
<p><b>S-WdgM RAM  memory map </b></p>
<p><b>section </b></p>
<p><b>1  </b></p>
<p><b>section </b></p>
<p><b>2  </b></p>
<p><b>S-WdgM local entity memory </b></p>
<p>Write: CheckpointReached, </p>
<p>WdgM_Init </p>
<p><b> </b></p>
<p><b>section </b></p>
<p><b>3  </b></p>
<p><i><b>Fig. 20: M emory usage of the S-WdgM</b></i></p>
<p>Local entity memory: <b>Local entity data </b>is supervised  entity private  data.  This  is  the</p>
<p>data where the function </p>
<p>WdgM_CheckpointReached()</p>
<p> writes.</p>
<p>The S-WdgM Configuration Generator</p>
<p> provides defines so that the status variables</p>
<p>of every supervised entity can be placed in a separate RAM section. The declaration of</p>
<p>every entity starts  with the  defines  </p>
<p>WDGM_SE<i>i</i>_START_SEC_VAR_*</p>
<p> and  ends  with</p>
<p>WDGM_SE<i>i</i>_STOP_SEC_VAR_*</p>
<p>, where <i>i </i>is the ID of the supervised entity.</p>
<p>Theses  defines  are  in  the  generated  file  </p>
<p>WdgM_MemMap.h</p>
<p> in  an  AUTOSAR  3.1</p>
<p>environment or </p>
<p>WdgM_OSMemMap.h</p>
<p> in an AUTOSAR 4.0 environment. Hence, it must</p>
<p>be included in the file </p>
<p>MemMap.h</p>
<p>.</p>
<p>If</p>
<p> the  entity  is  linked  to  an  OS  task  (through  its  ECU  description  parameter</p>
<p>WdgMAppTaskRef</p>
<p>),</p>
<p> then  the  supervised  entity  data  is  placed  in  a  section</p>
<p>embedded</p>
<p> in</p>
<p> </p>
<p><i>appl_name_</i>START_SEC_VAR_*</p>
<p> and</p>
<p><i>appl_name_</i>STOP_SEC_VAR_*</p>
<p>, where </p>
<p><i>appl_name</i></p>
<p> is the name of the application.</p>
<p>In this case, the integrator must make sure to include the file </p>
<p>Os_MemMap.h</p>
<p> after the</p>
<p>file </p>
<p>WdgM_MemMap.h</p>
<p> in file </p>
<p>MemMap.h</p>
<p>.</p>
<p>78</p>
<p>102</p>
<p>64</p>
<h1 style="page-break-before:always; "></h1>
<p>97</p>
<p>Page</p>
<p><b>Integration</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Global memory:  <b>Global  data  </b>are  <b>private  </b>S-WdgM  variables.  The  memory mapping</p>
<p>defines</p>
<p> are</p>
<p> </p>
<p>WDGM_GLOBAL_START_SEC_VAR_*</p>
<p> and</p>
<p>WDGM_GLOBAL_STOP_SEC_VAR_*</p>
<p>. </p>
<p>This section can be mapped to an OS application (through its ECU description</p>
<p>parameter </p>
<p>WdgMGlobalMemoryAppTaskRef</p>
<p>). For this mapping, the defines</p>
<p>appl_name_START_SEC_VAR_*</p>
<p> and </p>
<p>appl_name_STOP_SEC_VAR_*</p>
<p> are used,</p>
<p>where </p>
<p>appl_name</p>
<p> is the name of the application. In this case, the integrator must</p>
<p>make sure to include the file </p>
<p>Os_MemMap.h</p>
<p> after the file </p>
<p>WdgM_MemMap.h</p>
<p> in file</p>
<p>MemMap.h</p>
<p>.</p>
<p>As this section is internally  not protected by the S-WdgM, it should be in a memory area</p>
<p>where it cannot be corrupted.</p>
<p>Global  shared  memory:  <b>Global  shared  data  </b>should  be  placed  in  a  <b>RAM  section</b></p>
<p>where all tasks can read and write to that data. </p>
<p>The  memory  mapping  defines  are  </p>
<p>WDGM_GLOBAL_SHARED_START_SEC_VAR_*</p>
<p>and  </p>
<p>WDGM_GLOBAL_SHARED_STOP_SEC_VAR_*</p>
<p>.</p>
<p> These  variables  are  internally</p>
<p>protected by the S-WdgM.</p>
<p><b>3.3</b></p>
<p><b>Timing Setup</b></p>
<p>The <b>timing </b>of the S-WdgM is defined by</p>
<p>the <b>calling period </b>of function </p>
<p>WdgM_MainFunction()</p>
<p> and,</p>
<p>the <b>count period </b>of the S-WdgM <b>Tick Counter </b>(for <b>Deadline Monitoring</b>).</p>
<p>Every time when the function </p>
<p>WdgM_MainFunction()</p>
<p> is invoked, </p>
<p>the <b>Alive counters </b>are evaluated,</p>
<p>running deadlines are checked for violations,</p>
<p>checkpoint <b>fault indications </b>are <b>evaluated </b>and, finally,</p>
<p>the S-WdgM <b>global status </b>of all supervised entities is <b>calculated</b>.</p>
<p><b>Note:  </b>The  time  period  during  which  the  function  </p>
<p>WdgM_MainFunction()</p>
<p> is</p>
<p>called, is the <b>S-WdgM supervision cycle</b>. This cycle time is also used for the periodic</p>
<p>triggering of the Watchdog device. The period of this cycle determines the shortest S-</p>
<p>WdgM reaction time. For example: If the S-WdgM  reaction time  should  be  not  more</p>
<p>than 10 ms, the supervision cycle time should be set to 10 ms or shorter.</p>
<p>Figure 21 shows the S-WdgM timing configuration parameters. The parameters can be</p>
<p>set by a Configuration Tool.</p>
<p>49</p>
<p>85</p>
<p>85</p>
<p>85</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Integration</b></p>
<p>Page 98</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p> </p>
<p> </p>
<p>Scheduler </p>
<p> </p>
<p>Safe Watchdog </p>
<p>Manager </p>
<p> </p>
<p>Safe Watchdog </p>
<p>Driver </p>
<p>Watchdog </p>
<p>device </p>
<p>WdgMTicksPerSecond [Hz] </p>
<p>WdgMSupervisionCycle [s] </p>
<p>WdgMTriggerConditionValue [ms] </p>
<p>WdgMTriggerWindowStart [ms] </p>
<p> </p>
<p><b>S-WdgM Configuration – timing parameters </b></p>
<p>trigger </p>
<p>trigger </p>
<p>System environment (OS) </p>
<p>WdgM_UpdateTickCount</p>
<p> </p>
<p> </p>
<p><b>*1)</b> </p>
<p>WdgM_MainFunction </p>
<p>Oscillator </p>
<p>(f_osc) </p>
<p>WdgWindowStart [s] </p>
<p>WdgInitialTimeout [s] </p>
<p><b>S-Wdg Configuration – timing parameters </b></p>
<p>f_wdg </p>
<p> </p>
<p>MCU counter</p>
<p> </p>
<p>Tick (*2 </p>
<p>Tick parameter  <b>*2)</b> </p>
<p><b>*1)</b> Used for external Tick source </p>
<p><b>*2)</b> Used for internal hardware Tick source </p>
<p><i><b>Fig. 21: Time base of the S-WdgM</b></i></p>
<h1 style="page-break-before:always; "></h1>
<p>99</p>
<p>Page</p>
<p><b>Integration</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Two  </b>configuration  <b>parameters  </b>shown  in  Figure  21  are  used  by  the  <b>System</b></p>
<p><b>Environment </b>only. The Scheduler uses these parameters and periodically calls</p>
<p>function </p>
<p>WdgM_MainFunction()</p>
<p> and,</p>
<p>if defined, also function </p>
<p>WdgM_UpdateTickCounter()</p>
<p>.</p>
<p>All the other parameters are used by the S-WdgM and S-Wdg.</p>
<p><b>Configuration Parameter</b></p>
<p><b>Description</b></p>
<p>WdgMSupervisionCycle</p>
<p>This parameter defines the <b>time period </b>in which the S-</p>
<p>WdgM performs <b>cyclic  supervision</b>.  This  is  the  time</p>
<p>period in which function </p>
<p>WdgM_MainFunction()</p>
<p>is  called.  The  user  of  this  parameter  is  the  system</p>
<p>environment</p>
<p> that</p>
<p> periodically</p>
<p> calls</p>
<p> function</p>
<p>WdgM_MainFunction()</p>
<p>.  The  Watchdog  device  is</p>
<p>triggered with every call of </p>
<p>WdgM_MainFunction()</p>
<p>.</p>
<p>WdgMTicksPerSecond</p>
<p>This parameter defines the <b>frequency </b>by which the S-</p>
<p>WdgM Tick counter is incremented.</p>
<p>If the <b>external  Tick  </b>counter  is  selected,  the  user  of</p>
<p>this  parameter</p>
<p> is  the  system  environment</p>
<p> that</p>
<p>periodically</p>
<p> calls</p>
<p> function</p>
<p>WdgM_UpdateTickCount()</p>
<p>.</p>
<p>If the <b>internal hardware Tick </b>counter is selected, this</p>
<p>parameter  configures  the  frequency  of</p>
<p> the  MCU</p>
<p>counter.</p>
<p>The parameter </p>
<p>WdgMTicksPerSecond</p>
<p> must not</p>
<p>be zero.</p>
<p>WdgMTriggerWindowStart</p>
<p>This  parameter</p>
<p> defines,</p>
<p> for</p>
<p> <b>all</b></p>
<p> supervision  cycles</p>
<p>(except  for  the  first),  the  lower  limit  of  the  Watchdog</p>
<p>trigger  window.  If  the  Watchdog  triggered  before,  a</p>
<p>reset is caused. This parameter is in <b>milliseconds</b>. The</p>
<p>user is the S-WdgM.</p>
<p>WdgMTriggerConditionValue</p>
<p>This  parameter</p>
<p> defines,</p>
<p> for</p>
<p> <b>all</b></p>
<p> supervision  cycles</p>
<p>(except for the first), the  <b>upper  limit  </b>of  the  Watchdog</p>
<p>trigger window. If the Watchdog is not triggered in time,</p>
<p>a reset is caused. This parameter is in <b>milliseconds</b>.</p>
<p>The user is the S-WdgM.</p>
<p>WdgWindowStart</p>
<p>This parameter defines, for the <b>first </b>supervision cycle,</p>
<p>the  <b>minimum  window  time  </b>after  which  watchdog</p>
<p>triggering  is  allowed.  This  parameter  is  used  by  the</p>
<p>Safe Watchdog Driver only.</p>
<p>WdgInitialTimeout</p>
<p>This parameter defines, for the <b>first </b>supervision cycle,</p>
<p>the <b>upper limit </b>of the Watchdog trigger window. If the</p>
<p>Watchdog is not  triggered  in time,  a  reset  is  caused.</p>
<p>This parameter  is  used  by the  Safe  Watchdog  Driver</p>
<p>only  (see  the  corresponding  <i>Safe  Watchdog  Driver</i></p>
<p>85</p>
<p>85</p>
<p>87</p>
<p>51</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Integration</b></p>
<p>Page 100</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><i>User Manual</i>).</p>
<p><b>3.3.1</b></p>
<p><b>Deadline Measurement and Tick Counter</b></p>
<p>The <b>transition time </b>between two checkpoints is measured in <b>Ticks</b>. The Tick Counter</p>
<p>delivers  a  <b>time  base  </b>for  <b>Deadline  Monitoring</b>.  The  Tick  counter  is  the  smallest</p>
<p>deadline time unit for the S-WdgM. There are three possible <b>Tick sources </b>(see Figure</p>
<p>22):</p>
<p><b>Internal  hardware  Tick  source:  </b>The  tick  source  is  an  S-WdgM  internal  source</p>
<p>derived  from  the  MCU  hardware  counter.  If  the  <i>internal  hardware  Tick  source  </i>is</p>
<p>selected, the frequency is set by the parameter </p>
<p>WdgMTicksPerSecond</p>
<p>.</p>
<p><b>Internal  software  Tick  source:  </b>The  Tick  source  is  software-based  where  the</p>
<p>internal</p>
<p> counter</p>
<p> is</p>
<p> incremented  every  time</p>
<p> the</p>
<p> <b>S-WdgM  main  function</b></p>
<p>(WdgM_MainFunction())  </p>
<p>is  called.  If  the  <i>internal</i></p>
<p><i> software  Tick  source  </i>is</p>
<p>selected, the frequency is the same as </p>
<p>WdgM_MainFunction()</p>
<p> is called.</p>
<p><b>External Tick source: </b>The Tick must be counted externally by calling the S-WdgM</p>
<p>function </p>
<p>WdgM_UpdateTickCount()</p>
<p>. If the <i>external  Tick source </i>is selected, the</p>
<p>system integrator is responsible  for  calling  the  function on a  regular  basis.  The  S-</p>
<p>WdgM  internally  checks  if  the  number  of  Ticks  corresponds  with  the  Supervision</p>
<p>Cycle. </p>
<p><b>Note:</b></p>
<p> The</p>
<p> Tick</p>
<p> source</p>
<p> can</p>
<p> be</p>
<p> selected</p>
<p> by</p>
<p> setting</p>
<p> the</p>
<p> parameter</p>
<p>WdgMTimebaseSource</p>
<p>.</p>
<p> The</p>
<p> default</p>
<p> parameter</p>
<p> value</p>
<p> is</p>
<p>WDGM_INTERNAL_SOFTWARE_TICK</p>
<p>.</p>
<p> </p>
<p> </p>
<p>Safe Watchdog </p>
<p>Manager </p>
<p> </p>
<p>Tick Counter </p>
<p> </p>
<p>Safe Watchdog </p>
<p>Driver </p>
<p>Internal software </p>
<p>external </p>
<p> </p>
<p> MCU</p>
<p> </p>
<p>counter</p>
<p> </p>
<p>clock </p>
<p>Internal hardware </p>
<p>Once per SupervisionCycle </p>
<p>Tick source switch parameter: </p>
<p><b>WdgMTmebaseSource</b></p>
<p><b> </b></p>
<p> </p>
<p>System API: </p>
<p>WdgM_UpdateTickCount() </p>
<p> </p>
<p><i><b>Fig. 22: S-WdgM  Tick source selection for deadline monitoring</b></i></p>
<p>The <b>Ticks per second </b>must be configured for the S-WdgM to translate the monitored</p>
<p>deadlines  from  <b>seconds  </b>(as  stored  in the  AUTOSAR  ECU  description  files)  to  <b>S-</b></p>
<h1 style="page-break-before:always; "></h1>
<p>101</p>
<p>Page</p>
<p><b>Integration</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>WdgM ticks</b>. This conversion is done during configuration generation for the S-WdgM,</p>
<p>with the deadlines being stored in the generated configuration as S-WdgM ticks.</p>
<p><b>Note:</b></p>
<p>Non-integer ticks are not allowed. If a deadline cannot be converted into an integer</p>
<p>number of S-WdgM ticks, the S-WdgM Configuration Generator will report an error.</p>
<p>For an <b>internal software Tick source </b>and an <b>external Tick source </b>the internal Tick</p>
<p>counter is initialized to </p>
<p><b>1</b></p>
<p>.</p>
<p>Examples</p>
<p>Let a S-WdgM Tick be <b>2 ms</b>. If there is a deadline of <b>3 ms</b>, it cannot be converted to</p>
<p>S-WdgM ticks without loss of accuracy. It will be between 1 and 2 S-WdgM ticks.</p>
<p>Let a S-WdgM Tick be <b>1 ms </b>(i.e., the parameter </p>
<p>WdgMTicksPerSecond</p>
<p> is set to</p>
<p>1000</p>
<p>). A  <b>deadline of </b></p>
<p><b>0.002s=2ms</b></p>
<p> is then translated to  <b>2  S-WdgM  ticks</b>.  But  a</p>
<p>deadline of </p>
<p>0.0005s=0.5ms</p>
<p> cannot be translated to an integer number of S-WdgM</p>
<p>ticks.</p>
<p><b>Note: </b>There is a trade-off between the S-WdgM Tick resolution and performance. The</p>
<p>shorter  the  Tick  length,  the  finer  the  deadlines  that  can be  monitored.  However,  the</p>
<p>performance gets worse due to more frequent calls to the </p>
<p>WdgM_UpdateTickCount</p>
<p>()</p>
<p> function.</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Integration</b></p>
<p>Page 102</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>4</b></p>
<p><b>Configuration Generation</b></p>
<p><b>4.1</b></p>
<p><b>S-WdgM Configuration Generator</b></p>
<p>The <b>S-WdgM Configuration Generator </b>is a Microsoft Windows console application</p>
<p>that  can be  launched  from  a  <b>command  prompt  </b>window  by  entering  the  command</p>
<p>Wdg_Mgr_Cfg_Gen.exe</p>
<p>. The S-WdgM Configuration Generator <b>reads </b>the S-WdgM</p>
<p><b>module  information  </b>from  the  AUTOSAR  <b>ECU  description  file  </b>(</p>
<p>*.arxml</p>
<p>)  and</p>
<p>generates configuration structures for the S-WdgM. </p>
<p><b>Note:  </b>Safety  requirements  must  be  considered  for  the  generation  process.  These</p>
<p>requirements are listed in the <i>Safe Watchdog  Manager  Safety  Manual  </i>[5]</p>
<p>,  which</p>
<p>also gives a detailed description of a verification process for the generated files using a</p>
<p>separate tool. This verification process is mandatory for safety-related systems</p>
<p>.</p>
<p>To  use  the  S-WdgM  Configuration  Generator,  enter  the  following  command  in  a</p>
<p>command prompt window:</p>
<p>Wdg_Mgr_Cfg_Gen.exe [options] &lt;ECU-DESC-FILE&gt; &lt;OUTPUT-DIR&gt;</p>
<p>[options]</p>
<p><b>Description</b></p>
<p>--version</p>
<p>Shows  the  application  version  number  and  license</p>
<p>information, and then exits.</p>
<p>-h/--help</p>
<p>Shows this help message and exits.</p>
<p><b>Parameter</b></p>
<p><b>Description</b></p>
<p>&lt;ECU-DESC-FILE&gt;</p>
<p>The ECU description file (</p>
<p>*.arxml</p>
<p>). It is generated by</p>
<p>a tool like the DaVinci Configurator, for example.</p>
<p>&lt;OUTPUT-DIR&gt;</p>
<p>The  destination  folder  for  the  generated  output.  You</p>
<p>must specify this parameter.</p>
<p>The S-WdgM Configuration Generator was developed and tested for <b>MS  Windows 7</b></p>
<p>and can be integrated into a graphical configuration environment. The following <b>DLL</b>s</p>
<p>must be present in the system:</p>
<p>OLEAUT32.dll</p>
<p>USER32.dll</p>
<p>POWRPROF.dll</p>
<p>SHELL32.dll</p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p>103</p>
<p>Page</p>
<p><b>Configuration Generation</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>ole32.dll</p>
<p>WSOCK32.dll</p>
<p>ADVAPI32.dll</p>
<p>WS2_32.dll</p>
<p>VERSION.dll</p>
<p>KERNEL32.dll</p>
<p>The installer for this <b>DLL </b>is available at the Microsoft Download Center.</p>
<p><b>4.1.1</b></p>
<p><b>S-WdgM Configuration Verification</b></p>
<p>The <b>S-WdgM Verifier </b>is a TTTech tool for the <b>verification  </b>of the generated <b>S-WdgM</b></p>
<p><b>configuration</b>. The S-WdgM Verifier is delivered as a <b>DLL </b>(</p>
<p>wdgm_verifier.dll</p>
<p>)</p>
<p>that must be compiled with the <b>configuration files </b>produced by the <b>generator </b>and the</p>
<p>files  produced  by  the  <b>XSLT  Processor</b>.</p>
<p> The  compilation  result</p>
<p> is  a  Windows</p>
<p>Verifier.exe</p>
<p> program.</p>
<p> Running</p>
<p> the</p>
<p> Verifier</p>
<p> generates</p>
<p> a</p>
<p> report</p>
<p> file</p>
<p>(</p>
<p>verifier_report.txt</p>
<p>) that contains the result of the verification. </p>
<p>Figure 23 shows the workflow of the S-WdgM Verifier build. For details, refer to the</p>
<p><i>Safe Watchdog Manager Safety Manual </i>[5]</p>
<p>.</p>
<p> </p>
<p>ECU Descr. File </p>
<p>Wdg* Config Generator </p>
<p>Wdg* Config </p>
<p>Lcfg*.c, *.h </p>
<p><b>XSLT</b></p>
<p> </p>
<p><b>Processor </b></p>
<p><b>Info File </b></p>
<p><b>Verifier </b></p>
<p><b>Report </b></p>
<p><b>XSL File </b></p>
<p>System  </p>
<p>Specs </p>
<p>Config </p>
<p>Tool <b>*</b></p>
<p><b>1</b> </p>
<p>Manual </p>
<p>User Verification </p>
<p>Generation Path </p>
<p>Validation </p>
<p>Path </p>
<p><b>*</b></p>
<p><b>1</b></p>
<p> DaVinci Configurator</p>
<p> </p>
<p><i><b>Fig. 23: Workflow of the S-WdgM  Configuration Verifier build</b></i></p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Configuration Generation</b></p>
<p>Page 104</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>4.1.1.1</b></p>
<p><i>Installing the S-WdgM Verifier</i></p>
<p>To run the <b>S-WdgM Verifier </b>an <b>XSLT Processor </b>and a working <b>gcc </b>environment are</p>
<p>required.</p>
<p>The <b>XSLT Processor </b>can be installed by installing the <b>Configuration Tool </b>(DaVinci</p>
<p>Configurator), and it consists of following files:</p>
<p>iconv.dll,</p>
<p>libexslt.dll,</p>
<p>libxml2.dll,</p>
<p>libxslt.dll,</p>
<p>zlib1.dll,</p>
<p>xsltproc.exe.</p>
<p>The  recommended  way to  install  <b>gcc  </b>is  to  install  the  <b>MinGW  </b>environment  with  the</p>
<p>provided  installer  program  (</p>
<p>MinGW-5.1.6.exe</p>
<p>)  for  Windows  7.</p>
<p> To  install</p>
<p> gcc</p>
<p>proceed as follows:</p>
<p>1.</p>
<p>Start  the  installer  program,  accept  the  license  terms  and  click  <b>Next  </b>until  you  are</p>
<p>prompted to select a configuration.</p>
<p>2.</p>
<p>When prompted,  select  <b>Minimal  configuration</b>.  There  is  no  need  to  select  any</p>
<p>check boxes.</p>
<p>3.</p>
<p>Complete the installation process after accepting the <b>default settings</b>.</p>
<p>4.</p>
<p>Having  installed  <b>gcc</b>,  add  the  </p>
<p>c:\MinGW\bin</p>
<p> directory  to  your  search  path  by</p>
<p>entering  the  command  </p>
<p>set  PATH=%PATH%;c:\MinGW\bin</p>
<p> in  a  command</p>
<p>prompt window. Alternatively you can edit <b>Environment Variables  </b>in the  <b>System</b></p>
<p><b>Properties </b>dialog (<b>Start </b>&gt; <b>Control Panel </b>&gt; <b>System</b>).</p>
<p>To verify that <b>gcc </b>is working, open a new command prompt window and enter </p>
<p>gcc --</p>
<p>version</p>
<p> to let gcc show its version number.</p>
<h1 style="page-break-before:always; "></h1>
<p>105</p>
<p>Page</p>
<p><b>Configuration Generation</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>4.2</b></p>
<p><b>Workflow</b></p>
<p>Figure 24 shows the workflow of how to generate and apply a configuration for the S-</p>
<p>WdgM.</p>
<p> </p>
<p><i><b>Fig. 24: Workflow of configuration generation and application for the S-WdgM</b></i></p>
<p>The  <b>S-WdgM  Configuration  Generator  </b>is  the  application  that</p>
<p> generates  the</p>
<p>configuration for the <b>S-WdgM</b>. The input used to generate a configuration is an <b>ECU</b></p>
<p><b>description  file  (</b></p>
<p>*.arxml</p>
<p><b>)</b>.</p>
<p> The  ECU  description  file  contains  the  configured</p>
<p><b>AUTOSAR  WdgM</b>,  <b>WdgIf  </b>and  <b>Wdg  </b>modules.  The  S-WdgM  configuration  can  be</p>
<p>created and configured in several ways.</p>
<p>If you use the Vector tools  <b>DaVinci Configurator Pro (DVC) </b>and <b>DaVinci Developer</b>,</p>
<p>the workflow to generate the configuration is as follows:</p>
<p>DVC  is configured  such that  it  uses  the  external  generator  S-WdgM  Configuration</p>
<p>Generator to generate the configuration for  the  modules  S-WdgM,  S-WdgIf  and  S-</p>
<p>Wdg.</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Configuration Generation</b></p>
<p>Page 106</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>During</p>
<p> configuration</p>
<p> generation,</p>
<p> the</p>
<p> S-WdgM  Configuration</p>
<p> Generator</p>
<p> is</p>
<p>automatically invoked and produces the configuration </p>
<p>*.c</p>
<p> and </p>
<p>*.h</p>
<p> files. </p>
<p>If</p>
<p> necessary,</p>
<p> <b>DaVinci</b></p>
<p><b> Developer</b></p>
<p> can  be  used  to  configure  the  <b>runtime</b></p>
<p><b>environment (RTE) </b>for the <b>S-WdgM</b>. You can configure  the  software  components</p>
<p>that need  to  call  <b>S-WdgM  functions</b>,  with the  tool  generating  the  respective  RTE</p>
<p>configuration files.</p>
<p>If  you  do  not  use  the  Vector  tools  mentioned  above  the  workflow  to  create  a</p>
<p>configuration is as follows:</p>
<p>Start a <b>command prompt </b>window and enter the following command:</p>
<p>Wdg_Mgr_Cfg_Gen.exe &lt;ecu_descr_file&gt; &lt;output_directory&gt;</p>
<p>where  </p>
<p>&lt;ecu_descr_file&gt;</p>
<p> is  the  name  of  the  respective  ECU  description  file</p>
<p>(</p>
<p>*.arxml</p>
<p>) and</p>
<p>&lt;output_directory&gt;</p>
<p> is the directory where  to  create  the  respective  </p>
<p>*.c</p>
<p> and</p>
<p>*.h</p>
<p> files. </p>
<p>The  S-WdgM  code  generator  generates  a  configuration  file,  </p>
<p>WdgM_PBcfg.c</p>
<p> (see</p>
<p>Section Configuration Generation</p>
<p>),  where  all  S-WdgM  variables  are  defined  and</p>
<p>assigned to various memory sections (see Section Memory Sections</p>
<p>).</p>
<p>The  S-WdgM  code  generator  also  generates  the  file  </p>
<p>WdgM_MemMap.h</p>
<p> in  an</p>
<p>AUTOSAR 3.1 environment or </p>
<p>WdgM_OSMemMap.h</p>
<p> in an AUTOSAR 4.0 environment,</p>
<p>where the S-WdgM memory sections defined in the </p>
<p>WdgM_PBcfg.c</p>
<p> file are assigned</p>
<p>to  user-defined  application sections  or  other  system  sections.  The  relation  between</p>
<p>memory  sections  and  applications  can  be  defined  with  a  tool</p>
<p> such  as  DaVinci</p>
<p>Configurator</p>
<p> using</p>
<p> the</p>
<p> parameters</p>
<p> </p>
<p>WdgMAppTaskRef</p>
<p> and</p>
<p>WdgMGlobalMemoryAppTaskRef</p>
<p>.</p>
<p>The  following  example  of  a  </p>
<p><b>WdgM_MemMap.h</b></p>
<p> file  places  the  status  variables  for  a</p>
<p>supervised</p>
<p> entity</p>
<p> with  index</p>
<p> <b>1</b></p>
<p> to</p>
<p> the</p>
<p> application  memory</p>
<p> section</p>
<p> called</p>
<p>Application_1_START_SEC_VAR_NOINIT_UNSPECIFIED</p>
<p> </p>
<p>and</p>
<p>Application_1_STOP_SEC_VAR_NOINIT_UNSPECIFIED</p>
<p>:</p>
<p>/* Supervised Entity SE1 */</p>
<p>#ifdef WDGM_SE1_START_SEC_VAR_NOINIT_UNSPECIFIED</p>
<p>#undef WDGM_SE1_START_SEC_VAR_NOINIT_UNSPECIFIED</p>
<p>#define Application_1_START_SEC_VAR_NOINIT_UNSPECIFIED</p>
<p>#endif</p>
<p>#ifdef WDGM_SE1_STOP_SEC_VAR_NOINIT_UNSPECIFIED</p>
<p>#undef WDGM_SE1_STOP_SEC_VAR_NOINIT_UNSPECIFIED</p>
<p>#define Application_1_STOP_SEC_VAR_NOINIT_UNSPECIFIED</p>
<p>#endif</p>
<p>If</p>
<p> no</p>
<p> application  is</p>
<p> assigned</p>
<p> with  the</p>
<p> parameters</p>
<p> </p>
<p>WdgMAppTaskRef</p>
<p> or</p>
<p>102</p>
<p>95</p>
<h1 style="page-break-before:always; "></h1>
<p>107</p>
<p>Page</p>
<p><b>Configuration Generation</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>WdgMGlobalMemoryAppTaskRef</p>
<p>,</p>
<p> then  the  prefix  is  </p>
<p>WDGM_</p>
<p> instead  of</p>
<p> the</p>
<p>application name.</p>
<p>All  <b>global  shared  data  </b>used  by  the  S-WdgM  are  protected  by  S-WdgM  against</p>
<p>corruption.</p>
<p><b>4.3</b></p>
<p><b>Output Files</b></p>
<p>The  following  output</p>
<p> files  are  generated  for</p>
<p> the  respective  <b>platform  type</b></p>
<p>(</p>
<p>&lt;platform&gt;</p>
<p>),  where  </p>
<p>&lt;platform&gt;</p>
<p> is  the  respective  <b>hardware  platform  </b>used,</p>
<p>e.g., </p>
<p>MPC5604</p>
<p> or </p>
<p>TMS570LS3xx</p>
<p>:</p>
<p>WdgM_PBCfg.c</p>
<p>WdgM_PBCfg.h</p>
<p>WdgM_MemMap.h </p>
<p>(in an AUTOSAR 3.1  environment)  or  </p>
<p>WdgM_OSMemMap.h</p>
<p> (in</p>
<p>an AUTOSAR 4.0 environment)</p>
<p>WdgM_Cfg_Features.h</p>
<p>The  file  </p>
<p>WdgM_PBCfg.c</p>
<p> contains  the  main  configuration  structure  with  the  default</p>
<p>name  </p>
<p>WdgMConfig_Mode0</p>
<p>.</p>
<p> This  configuration  name  should  be  used  by  the</p>
<p>initialization function, i.e., by call </p>
<p>WdgM_Init(&amp;WdgMConfig_Mode0)</p>
<p>. If necessary,</p>
<p>the  non-standard  AUTOSAR  name  </p>
<p>WdgMConfig_Mode0</p>
<p> can  be  renamed  to</p>
<p>WdgMConfigSet</p>
<p> in the Configuration Tool (e.g, DaVinci). </p>
<p>Since the S-WdgM Configuration Generator is not trusted, the generated code must be</p>
<p>verified.  For  details  on  the  configuration  verification  process,</p>
<p> refer  to  the  <i>Safe</i></p>
<p><i>Watchdog Manager Safety Manual </i>[5]</p>
<p>.</p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Configuration Generation</b></p>
<p>Page 108</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>4.4</b></p>
<p><b>Error Messages</b></p>
<p>The generator will show an <b>error message </b>in the command prompt window and quit if</p>
<p>something goes wrong during configuration generation. </p>
<p><b>4.4.1</b></p>
<p><b>Basic Errors</b></p>
<p><b>Error</b></p>
<p><b>No.</b></p>
<p><b>Error Message</b></p>
<p>1</p>
<p>Bad call syntax.</p>
<p>2</p>
<p>Cannot open ECU description file `%s`.</p>
<p>3</p>
<p>Cannot convert float parameter `%s/%s` to an Watchdog ticks.</p>
<p>4</p>
<p>Cannot convert `%s` to a numerical value.</p>
<p>5</p>
<p>Fatal error.</p>
<p>6</p>
<p>Method `%s` must be implementd by subclass of `%s`.</p>
<p>7</p>
<p>Missing WdgM data.</p>
<p><b>4.4.2</b></p>
<p><b>Semantic Errors</b></p>
<p><b>Error</b></p>
<p><b>No.</b></p>
<p><b>Error Message</b></p>
<p>1001</p>
<p>Checkpoint IDs belonging to Supervised Entity `%s` are not a </p>
<p>zero-based list of increasing integers without gaps.</p>
<p>1002</p>
<p>No WdgMMode elements found.</p>
<p>1003</p>
<p>Supervised Entity `%s`: local transition starts at Checkpoint</p>
<p>with an ID %d.</p>
<p>1004</p>
<p>No WdgMMode element with WdgMModeId %d found.</p>
<p>1005</p>
<p>ECU Description File has no `WdgM` element.</p>
<p>1006</p>
<p>Referencing non-existing checkpoint `%s`.</p>
<p>1015</p>
<p>No value found for parameter defined by `%s` in `Element `%s`.</p>
<p>1016</p>
<p>Supervised Entity `%s` has no checkpoints.</p>
<p>1017</p>
<p>Supervised Entity `%s` defines local transitions</p>
<p>for alien checkpoint(s) `%s`.</p>
<p>1018</p>
<p>Local Transition `%s` references alien checkpoint `%s`.</p>
<p>1019</p>
<p>Local Transition `%s` references wrong destination entity `%s`.</p>
<p>1020</p>
<p>Local Transition `%s` references wrong source entity `%s`.</p>
<p>1021</p>
<p>Cannot convert float parameter `%s/%s` (%.6f [s]) to an integral </p>
<p>number of Watchdog ticks. (Using %.2f ticks per second).</p>
<h1 style="page-break-before:always; "></h1>
<p>109</p>
<p>Page</p>
<p><b>Configuration Generation</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>1025</p>
<p>Ignoring `WdgMGeneral/WdgMNumberOfSupervisedEntities`.</p>
<p>1026</p>
<p>Found more than one `WdgMMode` elements; </p>
<p>generating code for mode with ID %d.</p>
<p>1027</p>
<p>Cannot find top level element %s.</p>
<p>1028</p>
<p>No value found for `#define %s`. Verify element defined by `.../%</p>
<p>s`.</p>
<p>1029</p>
<p>No `.../WdgM/WdgMGeneral/WdgMWatchdog` elements found.</p>
<p>1031</p>
<p>No transition found for WdgMDeadlineSupervision `%s` </p>
<p>between Supervised Entity `%s`, Checkpoint `%s` and </p>
<p>Supervised Entity `%s`, Checkpoint `%s`.</p>
<p>1034</p>
<p>Found a `REFERENCE-VALUE` element defined by `%s` </p>
<p>without a `VALUE-REF` child element.</p>
<p>1035</p>
<p>Cannot find `REFERENCE-VALUE` element defined by `%s`.</p>
<p>1036</p>
<p>Checkpoint `%s` has no ID.</p>
<p>1037</p>
<p>Checkpoint `%s` has no `VALUE` element for its ID.</p>
<p>1038</p>
<p>Missing `SHORT-NAME` element.</p>
<p>1039</p>
<p>No global initial Supervised Entity found.</p>
<p>1040</p>
<p>Program Flow Supervision has no checkpoint defined by %s.</p>
<p>1043</p>
<p>Watchdog `%s` has no `WdgMTrigger` element assigned to it.</p>
<p>1044</p>
<p>Cannot identify driver.</p>
<p>1045</p>
<p>No `WdgMLocalStatusParams` element found.</p>
<p>1048</p>
<p>Cannot find checkpoint ID for `%s/%s`.</p>
<p>1049</p>
<p>Cannot find checkpoint ID for `%s/%s`.</p>
<p>1050</p>
<p>Cannot find checkpoint ID for `%s`.</p>
<p>1051</p>
<p>`%s` is an AUTOSAR 3.1 Supervised Entity and therefore shall</p>
<p>have exactly one checkpoint and this checkpoint shall have</p>
<p>its ID set to 0.</p>
<p>1052</p>
<p>Supervised Entity `%s`: `WdgMFailedProgramFlowRefCycleTol` is </p>
<p>positive (%d) but `WdgMProgramFlowRefCycle` is not (%d).</p>
<p>1053</p>
<p>Supervised Entity `%s`: Zero tolerance for program flow</p>
<p>violations - </p>
<p>`WdgMProgramFlowRefCycle` set to %d and </p>
<p>`WdgMFailedProgramFlowRefCycleTol` set to zero.</p>
<p>1054</p>
<p>Supervised Entity `%s`: `WdgMFailedDeadlineRefCycleTol` is </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Configuration Generation</b></p>
<p>Page 110</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>positive (%d) but `WdgMDeadlineReferenceCycle` is not (%d).</p>
<p>1055</p>
<p>Supervised Entity `%s`: Zero tolerance for dealine violations - </p>
<p>`WdgMDeadlineReferenceCycle` set to %d and </p>
<p>`WdgMFailedDeadlineRefCycleTol` set to zero.</p>
<p>1056</p>
<p>WdgMAliveSupervision `%s` (checkpoint `%s`): </p>
<p>`WdgMSupervisionReferenceCycle` (%d) must be a positive value.</p>
<p>1057</p>
<p>Supervised Entity `%s`: `WdgMFailedSupervisionRefCycleTol` set </p>
<p>to a positive value (%d) but there is no alive counter attached</p>
<p>to any of its checkpoints.</p>
<p>1058</p>
<p>Mandatory `LocalStatusParams` data is missing.</p>
<p>1059</p>
<p>Shortest maximum deadline (%s: %f seconds) is shorter than </p>
<p>`WdgMSupervisionCycle` (%f seconds).</p>
<p>1060</p>
<p>Mode with ID `%d` </p>
<p>(`WdgMTicksPerSecond`: %d; `WdgMSupervisionCycle`: %f) </p>
<p>fails to meet timing requirement </p>
<p>`(1 / WdgMTicksPerSecond) &lt;= WdgMSupervisionCycle`. </p>
<p>1061</p>
<p>Watchdog `%s`, trigger mode ID %s: the requirement </p>
<p>`WdgMTriggerWindowStart &lt;= WdgMSupervisionCycle &lt;= </p>
<p>WdgMTriggerConditionValue` is not fulfilled</p>
<p>1062</p>
<p>Verify that every Supervised Entity has a unique ID.</p>
<p>1063</p>
<p>No local incoming transitions defined for checkpoint `%s` in </p>
<p>Supervised Entity `%s`. Reaching `%s` will trigger a Program </p>
<p>Flow violation.</p>
<p>1064</p>
<p>Supervised Entity `%s` has no initial checkpoint.</p>
<p>1065</p>
<p>Callback function(s) `%s` will never be executed because </p>
<p>`WDGM_STATE_CHANGE_NOTIFICATION` is turned off.</p>
<p>1066</p>
<p>`WDGM_STATE_CHANGE_NOTIFICATION` is turned on but there is </p>
<p>no callback function defined. Verify the</p>
<p>`WdgMGlobalStateChangeCbk`</p>
<p>and `WdgMLocalStateChangeCbk` values</p>
<p>1068</p>
<p>Ensure that Supervised Entities have callback functions with </p>
<p>a unique name.</p>
<p>1069</p>
<p>Local end checkpoint %s/%s must not be the source </p>
<p>of a local transition.</p>
<p>1070</p>
<p>Local init checkpoint %s/%s must not be the destination </p>
<p>of a local transition.</p>
<h1 style="page-break-before:always; "></h1>
<p>111</p>
<p>Page</p>
<p><b>Configuration Generation</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>1071</p>
<p>The Supervised Entity IDs are not a zero-based list of integers </p>
<p>without gaps.</p>
<p>1072</p>
<p>The watchdog driver is called in the context of the watchdog</p>
<p>manager and its global variables must be placed in the</p>
<p>same section as the watchdog manager's global variables</p>
<p>in the presence of memory protection!</p>
<p>(The watchdog driver global variables are placed in `%s` </p>
<p>and the watchdog manager global variables are placed in `%s`).</p>
<p>1073</p>
<p>This driver configuration generator supports %s -- %s is not</p>
<p>supported.</p>
<p>1075</p>
<p>The targeted precision (%d ticks per second) is too high; please </p>
<p>lower the resolution (`.../WdgMMode/WdgMTicksPerSecond`).</p>
<p>1076</p>
<p>There is no WdgMTrigger element associated to Watchdog `%s`.</p>
<p>1081</p>
<p>No drivers found</p>
<p>1082</p>
<p>No Watchdog Interface devices found</p>
<p>1083</p>
<p>Watchdog IF device `%s` references non-existing Watchdog `%s`</p>
<p>1084</p>
<p>Watchdog `%s` references non-existing Watchdog IF device `%s`</p>
<p>1085</p>
<p>`WdgMTicksPerSecond` must not be zero if the Watchdog Manager </p>
<p>uses an external tick counter source for deadline monitoring.</p>
<p>1086</p>
<p>Supervised Entity `%s` contains more than one checkpoint </p>
<p>having an alive counter</p>
<p>1090</p>
<p>No Supervised Entities found!</p>
<p>1091</p>
<p>Transition `%s` references non existing checkpoint `%s` in entity</p>
<p>`%s`.</p>
<p>1092</p>
<p>ECU Description File references non-existing checkpoint `%s` in </p>
<p>Supervised Entity `%s`.</p>
<p>1093</p>
<p>Supervised Entity `%s` contains references to non-existing </p>
<p>checkpoint(s) `%s`.</p>
<p>1094</p>
<p>Global Transition `%s` has non-existing Entity `%s` as source.</p>
<p>1095</p>
<p>Global Transition `%s` has non-existing Entity `%s` as</p>
<p>destination.</p>
<p>1096</p>
<p>WdgMDeadlineSupervision `%s`: `WdgMDeadlineMin` (%s)</p>
<p>is greater than `WdgMDeadlineMax` (%s).</p>
<p>1097</p>
<p>The `%s` value (%s [s]) of `%s` must not be greater than %s [s].</p>
<p>1098</p>
<p>For the INTERNAL_SOFTWARE_TICK the `(1 / WdgMTicksPerSecond[Hz])</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Configuration Generation</b></p>
<p>Page 112</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>= WdgMSupervisionCycle[s]` relation must be kept;</p>
<p>the configured values for `WdgMTicksPerSecond` (%s) and</p>
<p>`WdgMSupervisionCycle` (%s) do not fulfill this requirement.</p>
<p>1099</p>
<p>This ECU Description File's AUTOSAR version (%s) is</p>
<p>not compatible with the version supported by</p>
<p>this configuration generator (%s)</p>
<p>1100</p>
<p>This ECU Description File's AUTOSAR version (%s) has a different </p>
<p>minor number than the version supported by this configuration </p>
<p>generator (%s)</p>
<p>1101</p>
<p>Watchdog Driver `%s` is configured to have an active</p>
<p>tick counter but the Watchdog Manager is not configured</p>
<p>to have an internal HW timebase.</p>
<p>1102</p>
<p>The Watchdog Manager is configured to use an internal</p>
<p>HW counter but the Watchdog Interface is not.</p>
<p>1103</p>
<p>The Watchdog Interface is configured to use an internal</p>
<p>HW counter but the Watchdog Manager is not</p>
<p>1104</p>
<p>The Watchdog Manager is configured to use an internal HW</p>
<p>tick counter but the Watchdog driver `%s` has no active</p>
<p>tick counter.</p>
<p>1105</p>
<p>Error while reading list of `WdgMCallerIds`</p>
<p>1106</p>
<p>The Watchdog Manager is configured to use an internal HW</p>
<p>tick counter but the Watchdog Interface does not reference</p>
<p>any Watchdog Driver at all.</p>
<p>1107</p>
<p>The Watchdog Manager is not configured to use an internal HW</p>
<p>tick counter but the Watchdog Interface has a reference to</p>
<p>a Watchdog Driver with an internal tick counter.</p>
<p>1108</p>
<p>Every `WdgWatchdog` has to have the same number (either %d</p>
<p>or %d) of associated `WdgMTrigger` elements.</p>
<p>1109</p>
<p>Verify that the Trigger Modes belonging to each trigger have IDs </p>
<p>building a zero-based integer sequence without any gaps</p>
<p>1110</p>
<p>Invalid `WdgMInitialTriggerModeId` value (%d).</p>
<p>1111</p>
<p>The `SafeTcore` platform requires `WdgWindowStart` = 0 [ms]. </p>
<p>(Current value: %s)</p>
<p>1112</p>
<p>`WdgMWatchdogMode` is set to `WDGIF_OFF_MODE`: </p>
<p>`WdgMTriggerConditionValue` and `WdgMTriggerWindowStart`</p>
<p>will be ignored</p>
<h1 style="page-break-before:always; "></h1>
<p>113</p>
<p>Page</p>
<p><b>Configuration Generation</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>1113</p>
<p>Ticks per second must be greater than zero</p>
<p>1114</p>
<p>Multiple `WdgMDeadlineSupervision` elements defined for </p>
<p>the transition from %s/%s to %s/%s</p>
<p>1115</p>
<p>OS partition reset is currently not supported.</p>
<p>1116</p>
<p>The current version supports only configurations having only one</p>
<p>Watchdog, one IF device and one driver.</p>
<p>1119</p>
<p>The value 65535; e.g., 2^16 -1, must not be assigned to any</p>
<p>of these elements: `WdgMFailedDeadlineRefCycleTol`,</p>
<p>`WdgMFailedProgramFlowRefCycleTol` and</p>
<p>`WdgMFailedSupervisionRefCycleTol`.</p>
<p>1120</p>
<p>Cannot find a VALUE element for</p>
<p>`...WdgMConfigSet/WdgMMode/WdgMInitialTriggerModeId’</p>
<p>1121</p>
<p>Cannot find a VALUE element for</p>
<p>...WdgMConfigSet/WdgMMode/WdgMTrigger/WdgMTriggerModeId`</p>
<p>1122</p>
<p>Global transition connecting checkpoints `%s` and `%s`</p>
<p>in the same entity `%s` is not allowed.</p>
<p>1123</p>
<p>`WdgMSupervisionCycle` (%s) is not greater than zero</p>
<p>1124</p>
<p>Watchdog `%s`, trigger mode ID %s: `WdgMTriggerConditionValue`</p>
<p>is not greater than zero.</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Configuration Generation</b></p>
<p>Page 114</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>5</b></p>
<p><b>Appendix</b></p>
<p>List of Generator and Verifier checks.</p>
<p><b>5.1</b></p>
<p><b>Watchdog Manager Configuration Verifier Requirements</b></p>
<p><b>5.1.1</b></p>
<p><b>General Remarks</b></p>
<p>The verifier detects <b>three </b>kinds of errors:</p>
<p>1.</p>
<p>deltas between the <b>ECU Description File (EDF) </b>and the generated configuration,</p>
<p>2.</p>
<p><b>errors </b>in the <b>configuration </b>which might have a negative impact on the  embedded</p>
<p>code (worst case could be to make it crash),</p>
<p>3.</p>
<p><b>integrity checks </b>already required to be implemented by the generator.</p>
<p><b>5.1.2</b></p>
<p><b>General Requirements</b></p>
<p>The  S-WdgM  Verifier  must  handle  a  (broken)  configuration  with  <b>no  supervised</b></p>
<p><b>entities </b>at all (even though the S-WdgM Configuration Generator would not generate a</p>
<p>configuration out of an EDF with no supervised entities at all).</p>
<p>The S-WdgM Verifier must handle a (broken) configuration with <b>no checkpoints </b>at all</p>
<p>(even though the S-WdgM Configuration Generator would not generate a configuration</p>
<p>out of an EDF with no checkpoints at all).</p>
<p><b>5.1.3</b></p>
<p><b>Deltas the S-WdgM Verifier Must Detect between the EDF and the Generated</b></p>
<p><b>Configuration</b></p>
<p><b>Test No.</b></p>
<p><b>Requirement</b></p>
<p>Test 1</p>
<p>The number of CPs  according to the EDF  and the number of CPs  referenced by  SEs</p>
<p>entities must match.</p>
<p>Test 2</p>
<p>The  number  of  CPs  according  to  the  EDF  and  the  number  of  CPs  stored  in  the</p>
<p>NrOfAllCheckpoints</p>
<p> member of the main structure must match.</p>
<p>Test 3</p>
<p>The number of local  transitions  according to the EDF  must  match the number of local</p>
<p>transitions referenced by CPs according to the corresponding </p>
<p>NrOfLocalTransitions</p>
<p>members.</p>
<p>Test 4</p>
<p>The number of global transitions according to the EDF must match the number of global</p>
<p>transitions</p>
<p> referenced</p>
<p> by</p>
<p> CPs</p>
<p> according</p>
<p> to</p>
<p> the</p>
<p> corresponding</p>
<p>NrOfGlobalTransitions</p>
<p> members.</p>
<h1 style="page-break-before:always; "></h1>
<p>115</p>
<p>Page</p>
<p><b>Appendix</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Test 5</p>
<p>The  number</p>
<p> of</p>
<p> SEs</p>
<p> according  to  the  EDF  must</p>
<p> match  the  value  of</p>
<p> the</p>
<p>NrOfSupervisedEntities</p>
<p> member of the main structure.</p>
<p>Test 17</p>
<p>The  </p>
<p>NrOfStartedGlobalTransitions</p>
<p> value  of  a  CP  must  match  the  number  of</p>
<p>global transitions having that CP as a starting point according to the EDF.</p>
<p>Test 19</p>
<p>If an alive supervision is defined for a CP, then the </p>
<p>WdgMExpectedAliveIndications</p>
<p> member of that CP must match the number of expected alive indications of the alive</p>
<p>supervision, as specified in the EDF.</p>
<p>Test 20</p>
<p>If an alive supervision is defined for a CP, then the </p>
<p>WdgMMinMargin</p>
<p> member of that</p>
<p>CP  must</p>
<p> match  the  corresponding  attribute  (</p>
<p>.../WdgMMinMargin</p>
<p>)</p>
<p> in  the  alive</p>
<p>supervision, as specified in the EDF.</p>
<p>Test 21</p>
<p>If an alive supervision is defined for a CP, then the  </p>
<p>WdgMMaxMargin</p>
<p> member of that</p>
<p>CP  must</p>
<p> match  the  corresponding  attribute  (</p>
<p>.../WdgMMaxMargin</p>
<p>)</p>
<p> in  the  alive</p>
<p>supervision, as specified in the EDF.</p>
<p>Test 22</p>
<p>If</p>
<p> an</p>
<p> alive</p>
<p> supervision</p>
<p> is</p>
<p> defined</p>
<p> for</p>
<p> a</p>
<p> CP,</p>
<p> then</p>
<p> the</p>
<p>WdgMSupervisionReferenceCycle</p>
<p> member</p>
<p> of</p>
<p> that</p>
<p> CP  must</p>
<p> match  the</p>
<p>corresponding  attribute  (</p>
<p>.../WdgMSupervisionReferenceCycle</p>
<p>)</p>
<p> in  the  alive</p>
<p>supervision, as specified in the EDF.</p>
<p>Test 27</p>
<p>The  </p>
<p>NrOfLocalTransitions</p>
<p> value  of  a  CP  must  be  set  to  the  number  of  local</p>
<p>transitions having that CP as a destination point according to the EDF.</p>
<p>Test 28</p>
<p>The </p>
<p>NrOfGlobalTransitions</p>
<p> value of a  CP  must  be  set  to  the  number  of  global</p>
<p>transitions having that CP as a destination point according to the EDF.</p>
<p>Test 32</p>
<p>If no alive supervision is defined for a CP, then the </p>
<p>WdgMExpectedAliveIndications</p>
<p> member of that CP must be zero (see Test 19).</p>
<p>Test 33</p>
<p>If no alive supervision is defined for a CP, then the </p>
<p>WdgMMinMargin</p>
<p> member </p>
<p>of</p>
<p> that</p>
<p>CP must be zero (see Test 20).</p>
<p>Test 34</p>
<p>If no alive supervision is defined for a CP, then the </p>
<p>WdgMMaxMargin</p>
<p> member of that</p>
<p>CP must be zero (see Test 21).</p>
<p>Test 35</p>
<p>If</p>
<p> no</p>
<p> alive</p>
<p> supervision</p>
<p> is</p>
<p> defined</p>
<p> for</p>
<p> a</p>
<p> CP,</p>
<p> then</p>
<p> the</p>
<p>WdgMSupervisionReferenceCycle</p>
<p> member of that CP  must  be zero (see Test</p>
<p>22).</p>
<p>Test 37</p>
<p>WdgM_TransitionType-&gt;WdgMDeadlineMin</p>
<p> must</p>
<p> match  the  corresponding</p>
<p>value in the EDF.</p>
<p>Test 38</p>
<p>WdgM_TransitionType-&gt;WdgMDeadlineMax</p>
<p> must</p>
<p> match  the  corresponding</p>
<p>value in the EDF.</p>
<p>Test 39</p>
<p>WdgM_GlobalTransitionType-&gt;WdgMDeadlineMin</p>
<p> must</p>
<p> match</p>
<p> the</p>
<p>corresponding value in the EDF.</p>
<p>65</p>
<p>66</p>
<p>66</p>
<p>66</p>
<p>65</p>
<p>66</p>
<p>66</p>
<p>66</p>
<p>69</p>
<p>69</p>
<p>69</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Appendix</b></p>
<p>Page 116</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Test 40</p>
<p>WdgM_GlobalTransitionType-&gt;WdgMDeadlineMax</p>
<p> must</p>
<p> match</p>
<p> the</p>
<p>corresponding value in the EDF.</p>
<p>Test 41</p>
<p>The  </p>
<p>WdgMitialStatus</p>
<p> value  of</p>
<p> each  SE  must</p>
<p> match  the  value  entered  as</p>
<p>WdgMSupervisedEntityInitialMode</p>
<p> for</p>
<p> the</p>
<p> </p>
<p>WdgMLocalStatusParams</p>
<p>element assigned to the SE.</p>
<p>Test 42</p>
<p>For</p>
<p> every</p>
<p> entity:</p>
<p> </p>
<p>X</p>
<p> must</p>
<p> match</p>
<p> </p>
<p>Y</p>
<p>,</p>
<p> where</p>
<p> </p>
<p>X</p>
<p> is</p>
<p> the</p>
<p>WdgMFailedSupervisionRefCycleTol</p>
<p> member  of  an  SE  in  the  generated</p>
<p>configuration and </p>
<p>Y</p>
<p> is the element </p>
<p>WdgMFailedSupervisionRefCycleTol</p>
<p> in the</p>
<p>WdgMLocalStatusParams</p>
<p> defined for the same entity in the EDF.</p>
<p>Test 43</p>
<p>For every entity: </p>
<p>X</p>
<p> must match </p>
<p>Y</p>
<p>, where </p>
<p>X</p>
<p> is the </p>
<p>WdgMFailedDeadlineRefCycleTol</p>
<p> member</p>
<p> of</p>
<p> an  SE  in  the  generated  configuration  and  </p>
<p>Y</p>
<p> is</p>
<p> the  element</p>
<p>WdgMFailedDeadlineRefCycleTol</p>
<p> in  the  </p>
<p>WdgMLocalStatusParams</p>
<p> defined</p>
<p>for the same entity in the EDF.</p>
<p>Test 44</p>
<p>For every entity: </p>
<p>X</p>
<p> must match </p>
<p>Y</p>
<p>, where  </p>
<p>X</p>
<p> is the </p>
<p>WdgMDeadlineReferenceCycle</p>
<p>member of a that supervised entity in the generated configuration and </p>
<p>Y</p>
<p> is  the element</p>
<p>WdgMDeadlineReferenceCycle</p>
<p> in  the  </p>
<p>WdgMLocalStatusParams</p>
<p> defined  for</p>
<p>the same entity in the EDF.</p>
<p>Test 45</p>
<p>For</p>
<p> every</p>
<p> entity:</p>
<p> </p>
<p>X</p>
<p> must</p>
<p> match</p>
<p> </p>
<p>Y</p>
<p>,</p>
<p> where</p>
<p> </p>
<p> </p>
<p>X</p>
<p> is</p>
<p> the</p>
<p>WdgMFailedProgramFlowRefCycleTol</p>
<p> member  of  an  SE  in  the  generated</p>
<p>configuration and </p>
<p>Y</p>
<p> is the element </p>
<p>WdgMFailedProgramFlowRefCycleTol</p>
<p> in the</p>
<p>WdgMLocalStatusParams</p>
<p> defined for the same entity in the EDF.</p>
<p>Test 46</p>
<p>For</p>
<p> every</p>
<p> entity:</p>
<p> </p>
<p>X</p>
<p> must</p>
<p> match</p>
<p> </p>
<p>Y</p>
<p>,</p>
<p> where</p>
<p> </p>
<p> </p>
<p>X</p>
<p> is</p>
<p> the</p>
<p>WdgMProgramFlowReferenceCycle</p>
<p> member  of  a  that  supervised  entity  in  the</p>
<p>generated configuration and </p>
<p>Y</p>
<p> is the element </p>
<p>WdgMProgramFlowReferenceCycle</p>
<p>in the </p>
<p>WdgMLocalStatusParams</p>
<p> defined for the same entity in the EDF.</p>
<p>Test 47</p>
<p>Each  SE  in  the  generated  configuration  must</p>
<p> have  its  </p>
<p>OSApplication</p>
<p> set</p>
<p> to</p>
<p>WDGM_INVALID_OSAPPLICATION</p>
<p>.</p>
<p>Test 85</p>
<p>The set of relations between alive supervisions and CPs in the EDF is the same as in the</p>
<p>generated configuration file, i.e. each CP has on both sides either the same or no alive</p>
<p>supervision associated. <b>Note: </b>Related to Error 1092</p>
<p>.</p>
<p>Test 86</p>
<p>In the generated configuration file, for each SE: All CPs that are referenced in the SE are</p>
<p>defined (in array  </p>
<p>WdgMCheckPoint</p>
<p>).  <b>Note: </b>This  includes  the check  for references  by</p>
<p>CP-ID</p>
<p> and references by address to CP-list item (related to Error 1093)</p>
<p>.</p>
<p>Test 89</p>
<p>The</p>
<p> </p>
<p>WdgMGeneral</p>
<p> parameter</p>
<p> </p>
<p>WdgMVersionInfoApi</p>
<p> and</p>
<p> the</p>
<p> constant</p>
<p>WDGM_VERSION_INFO_API</p>
<p> defined in </p>
<p>WdgM_Cfg_Features.h</p>
<p> must match.</p>
<p>Test 90</p>
<p>The</p>
<p> </p>
<p>WdgMGeneral</p>
<p> parameter</p>
<p> </p>
<p>WdgMDevErrorDetect</p>
<p> and</p>
<p> the</p>
<p> constant</p>
<p>WDGM_DEV_ERROR_DETECT</p>
<p> defined in </p>
<p>WdgM_Cfg_Features.h</p>
<p> must match.</p>
<p>Test 91</p>
<p>The</p>
<p> </p>
<p>WdgMGeneral</p>
<p> parameter</p>
<p> </p>
<p>WdgMDemReport</p>
<p> and</p>
<p> the</p>
<p> constant</p>
<p>WDGM_DEM_REPORT</p>
<p> defined in WdgM_Cfg_Features.h must match.</p>
<p>69</p>
<p>58</p>
<p>57</p>
<p>57</p>
<p>58</p>
<p>58</p>
<p>59</p>
<p>59</p>
<p>59</p>
<p>59</p>
<p>60</p>
<p>60</p>
<p>111</p>
<p>111</p>
<p>40</p>
<p>40</p>
<p>38</p>
<p>38</p>
<p>38</p>
<p>38</p>
<h1 style="page-break-before:always; "></h1>
<p>117</p>
<p>Page</p>
<p><b>Appendix</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Test 92</p>
<p>The  </p>
<p>WdgMGeneral</p>
<p> parameter</p>
<p> </p>
<p>WdgMDefensiveBehavior</p>
<p> and  the  constant</p>
<p>WDGM_DEFENSIVE_BEHAVIOR</p>
<p> defined in </p>
<p>WdgM_Cfg_Features.h</p>
<p> must match.</p>
<p>Test 93</p>
<p>The</p>
<p> </p>
<p>WdgMGeneral</p>
<p> parameter</p>
<p> </p>
<p>WdgMImmediateReset</p>
<p> and</p>
<p> the</p>
<p> constant</p>
<p>WDGM_IMMEDIATE_RESET</p>
<p> defined in </p>
<p>WdgM_Cfg_Features.h</p>
<p> must match.</p>
<p>Test 94</p>
<p>The</p>
<p> </p>
<p>WdgMGeneral</p>
<p> parameter</p>
<p> </p>
<p>WdgMOffModeEnabled</p>
<p> and</p>
<p> the</p>
<p> constant</p>
<p>WDGM_OFF_MODE_ENABLED</p>
<p> defined in </p>
<p>WdgM_Cfg_Features.h</p>
<p> must match.</p>
<p>Test 95</p>
<p>The </p>
<p>WdgMGeneral</p>
<p> parameter  </p>
<p>WdgMUseOsSuspendInterrupt</p>
<p> and  the  constant</p>
<p>WDGM_USE_OS_SUSPEND_INTERRUPT</p>
<p> defined  in  </p>
<p>WdgM_Cfg_Features.h</p>
<p> must</p>
<p>match.</p>
<p>Test 96</p>
<p>The</p>
<p> </p>
<p>WdgMGeneral</p>
<p> parameter</p>
<p> </p>
<p>WdgMTimebaseSource</p>
<p> and</p>
<p> the</p>
<p> constant</p>
<p>WDGM_TIMEBASE_SOURCE</p>
<p> defined in </p>
<p>WdgM_Cfg_Features.h</p>
<p> must match.</p>
<p>Test 97</p>
<p>The</p>
<p> </p>
<p>WdgMGeneral</p>
<p> parameter</p>
<p> </p>
<p>WdgMSecondResetPath</p>
<p> and</p>
<p> the</p>
<p> constant</p>
<p>WDGM_SECOND_RESET_PATH</p>
<p> defined in </p>
<p>WdgM_Cfg_Features.h</p>
<p> must match.</p>
<p>Test 98</p>
<p>The </p>
<p>WdgMGeneral</p>
<p> parameter  </p>
<p>WdgMTickOverrunCorrection</p>
<p> and  the  constant</p>
<p>WDGM_TICK_OVERRUN_CORRECTION</p>
<p> defined  in  </p>
<p>WdgM_Cfg_Features.h</p>
<p> must</p>
<p>match.</p>
<p>Test 99</p>
<p>The  </p>
<p>WdgMGeneral</p>
<p> parameter</p>
<p> </p>
<p>WdgMEntityDeactivationEnabled</p>
<p> and  the</p>
<p>constant</p>
<p> </p>
<p>WDGM_ENTITY_DEACTIVATION_ENABLED</p>
<p> defined</p>
<p> in</p>
<p>WdgM_Cfg_Features.h</p>
<p> must match.</p>
<p>Test 100</p>
<p>The</p>
<p> </p>
<p>WdgMGeneral</p>
<p> parameter</p>
<p> </p>
<p>WdgMStateChangeNotification</p>
<p> and</p>
<p> the</p>
<p>constant</p>
<p> </p>
<p>WDGM_STATE_CHANGE_NOTIFICATION</p>
<p> defined</p>
<p> in</p>
<p>WdgM_Cfg_Features.h</p>
<p> must match.</p>
<p>Test 101</p>
<p>The </p>
<p>WdgMGeneral</p>
<p> parameter </p>
<p>WdgMUseRte</p>
<p> and  the  constant  </p>
<p>WDGM_USE_RTE</p>
<p>defined in </p>
<p>WdgM_Cfg_Features.h</p>
<p> must match.</p>
<p>Test 102</p>
<p>The  </p>
<p>WdgMGeneral</p>
<p> parameter  </p>
<p>WdgMDemSupervisionReport</p>
<p> and  the  constant</p>
<p>WDGM_DEM_SUPERVISION_REPORT</p>
<p> defined  in  </p>
<p>WdgM_Cfg_Features.h</p>
<p> must</p>
<p>match.</p>
<p>Test 103</p>
<p>The  </p>
<p>WdgMGeneral</p>
<p> parameter  </p>
<p>WdgMFirstCycleAliveCounterReset</p>
<p> and  the</p>
<p>constant</p>
<p> </p>
<p>WDGM_FIRSTCYCLE_ALIVECOUNTER_RESET</p>
<p> defined</p>
<p> in</p>
<p>WdgM_Cfg_Features.h</p>
<p> must match.</p>
<p>Test 104</p>
<p>The value </p>
<p>WDGM_GLOBAL_TRANSITIONS</p>
<p> in </p>
<p>WdgM_Cfg_Features.h</p>
<p> must be </p>
<p>STD_ON</p>
<p>if the configuration includes global transitions and </p>
<p>STD_OFF</p>
<p> otherwise.</p>
<p>Test 105</p>
<p>The value </p>
<p>WDGM_AUTOSAR_3_1_X_COMPATIBILITY</p>
<p> in </p>
<p>WdgM_Cfg_Features.h</p>
<p> must</p>
<p>be </p>
<p>STD_ON</p>
<p> if there is at least one SE  with its  attribute </p>
<p>WdgMSupportedAutosarAPI</p>
<p> set to the enumeration value </p>
<p>API_3_1</p>
<p>. Otherwise this value must be </p>
<p>STD_OFF</p>
<p>.</p>
<p>41</p>
<p>41</p>
<p>39</p>
<p>39</p>
<p>40</p>
<p>40</p>
<p>43</p>
<p>43</p>
<p>44</p>
<p>44</p>
<p>45</p>
<p>45</p>
<p>46</p>
<p>46</p>
<p>47</p>
<p>47</p>
<p>47</p>
<p>47</p>
<p>42</p>
<p>42</p>
<p>42</p>
<p>42</p>
<p>48</p>
<p>48</p>
<p>62</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Appendix</b></p>
<p>Page 118</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Test 106</p>
<p>The  value  </p>
<p>WDGM_MULTIPLE_TRIGGER_MODES</p>
<p> must</p>
<p> be  </p>
<p>STD_ON</p>
<p> if</p>
<p> </p>
<p>WdgMTrigger</p>
<p>elements  have  more  than  one  </p>
<p>WdgMTriggerMode</p>
<p> subelement.  Otherwise  this  value</p>
<p>must be </p>
<p>STD_OFF</p>
<p>. <b>Note: </b>It is required elsewhere that all triggers have the same amount</p>
<p>of trigger modes. Therefore you can take any trigger for performing this test.</p>
<p><b>5.1.4</b></p>
<p><b>Integrity Checks</b></p>
<p><b>Test No.</b></p>
<p><b>Requirement</b></p>
<p>Test 18</p>
<p>If the </p>
<p>WdgMIsEndCheckpointGlobal</p>
<p> value of a CP is </p>
<p>TRUE</p>
<p>, then that CP must not be</p>
<p>the source of any global transition.</p>
<p>Test 23</p>
<p>The </p>
<p>WdgMAliveLRef</p>
<p> value of a CP must only be </p>
<p>NULL_PTR</p>
<p> if and only  if there is  no</p>
<p>alive supervision defined for that CP.</p>
<p>Test 24</p>
<p>The </p>
<p>WdgMAliveGRef</p>
<p> value of a CP must only be </p>
<p>NULL_PTR</p>
<p> if and only  if there is  no</p>
<p>alive supervision defined for that CP.</p>
<p>Test 25</p>
<p>The </p>
<p>WdgMDeadlineMonitoring</p>
<p> value of a CP must be set to </p>
<p>TRUE</p>
<p> if that  CP  is  the</p>
<p>source  or  destination  of  at  least  one  transition  with  associated  deadline  monitoring.</p>
<p>Otherwise this value will be set to </p>
<p>FALSE</p>
<p>.</p>
<p>Test 26</p>
<p>The </p>
<p>WdgMOutgoingDeadlineMax</p>
<p> value of a CP must be set to the maximum deadline</p>
<p>associated to any of the transitions having that CP as a starting point.</p>
<p>Test 29</p>
<p>The </p>
<p>WdgMLocalTransitionRef</p>
<p> member of a CP  must  be set  to  </p>
<p>NULL_PTR</p>
<p> if  and</p>
<p>only if there are no local transitions having that CP as a destination point.</p>
<p>Test 30</p>
<p>The </p>
<p>WdgMGlobalTransitionsRef</p>
<p> member of a CP must be set to </p>
<p>NULL_PTR</p>
<p> if and</p>
<p>only if there are no global transitions having that CP as a destination point.</p>
<p>Test 31</p>
<p>The </p>
<p>WdgMStartsAGlobalTransition</p>
<p> value of a CP must be set to </p>
<p>TRUE</p>
<p> if that CP is</p>
<p>the starting point of a global transition. Otherwise this value must be set to </p>
<p>FALSE</p>
<p>.</p>
<p>Test 48</p>
<p>The</p>
<p> following</p>
<p> condition</p>
<p> must</p>
<p> be</p>
<p> fulfilled</p>
<p> for</p>
<p> each</p>
<p> SE:</p>
<p> Either</p>
<p>WdgMFailedProgramFlowRefCycleTol</p>
<p> is</p>
<p> greater</p>
<p> than</p>
<p> zero,</p>
<p> or</p>
<p>WdgMProgramFlowReferenceCycle</p>
<p> is zero (see Error 1053</p>
<p>)</p>
<p>Test 49</p>
<p>The</p>
<p> following</p>
<p> condition</p>
<p> must</p>
<p> be</p>
<p> fulfilled</p>
<p> for</p>
<p> each</p>
<p> SE:</p>
<p> Either</p>
<p>WdgMFailedDeadlineRefCycleTol</p>
<p> is</p>
<p> zero,</p>
<p> or</p>
<p>WdgMDeadlineReferenceCycle</p>
<p> is greater than zero (see Error 1054</p>
<p>).</p>
<p>Test 50</p>
<p>The</p>
<p> following</p>
<p> condition</p>
<p> must</p>
<p> be</p>
<p> fulfilled</p>
<p> for</p>
<p> each</p>
<p> SE:</p>
<p> Either</p>
<p>WdgMFailedDeadlineRefCycleTol</p>
<p> is</p>
<p> greater</p>
<p> than</p>
<p> zero,</p>
<p> or</p>
<p>WdgMDeadlineReferenceCycle</p>
<p> is zero (see Error 1055</p>
<p>).</p>
<p>59</p>
<p>60</p>
<p>109</p>
<p>58</p>
<p>59</p>
<p>109</p>
<p>58</p>
<p>59</p>
<p>110</p>
<h1 style="page-break-before:always; "></h1>
<p>119</p>
<p>Page</p>
<p><b>Appendix</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Test 51</p>
<p>The  following  condition  must  be  fulfilled  for  systems  with  internal</p>
<p> software  timebase</p>
<p>source:</p>
<p> The</p>
<p> shortest</p>
<p> </p>
<p>WdgMDeadlineMax</p>
<p> greater</p>
<p> zero</p>
<p> value</p>
<p> among</p>
<p> all</p>
<p>WdgMDeadlineSupervision</p>
<p> elements</p>
<p> must</p>
<p> be</p>
<p> greater</p>
<p> or</p>
<p> equal</p>
<p> to</p>
<p>WdgMSupervisionCycle</p>
<p> (see Error 1059</p>
<p>).</p>
<p>Test 52</p>
<p>The  following  condition  must</p>
<p> be  fulfilled:</p>
<p> </p>
<p>1  /  WdgMTicksPerSecond</p>
<p>)  &lt;=</p>
<p>WdgMSupervisionCycle</p>
<p> (see Error 1060</p>
<p>).</p>
<p>Test 53</p>
<p>The </p>
<p>WdgMSupervisionCycle</p>
<p> stored in the EDF  must  be greater than  zero  (see</p>
<p>Error 1123</p>
<p>).</p>
<p>Test 54</p>
<p>The following condition must be fulfilled: </p>
<p>0 &lt; ticks_per_second &lt;= rti_hz / 2</p>
<p>.</p>
<p>Test 55</p>
<p>The</p>
<p> targeted</p>
<p> precision</p>
<p> must</p>
<p> fulfill</p>
<p> the</p>
<p> following</p>
<p> condition:</p>
<p> </p>
<p>int</p>
<p> (round</p>
<p>(ticks_per_second *  window_start * 0.001)) &lt;= 65535</p>
<p>. <b>Note: </b></p>
<p>65535</p>
<p> is</p>
<p>the maximum 16-bit integer (see Error 1075</p>
<p>).</p>
<p>Test 56</p>
<p>The</p>
<p> targeted</p>
<p> precision</p>
<p> must</p>
<p> fulfill</p>
<p> the</p>
<p> following</p>
<p> condition:</p>
<p> </p>
<p>int</p>
<p> (round</p>
<p>(ticks_per_second * condition_value * 0.001)) &lt;= 65535</p>
<p>. <b>Note: </b></p>
<p>65535</p>
<p>is the maximum 16-bit integer (see Error 1075</p>
<p>).</p>
<p>Test 57</p>
<p>Each </p>
<p>WdgMWatchdog</p>
<p> element must have a </p>
<p>WdgMTrigger</p>
<p> value associated to it  (see</p>
<p>Error 1076</p>
<p>).</p>
<p>Test 58</p>
<p>In each SE, there must be a maximum of one CP having an alive counter (see Error 1086</p>
<p>).</p>
<p>Test 59</p>
<p>Make sure that transitions reference existing CPs (see Error 1091</p>
<p>).</p>
<p>Test 60</p>
<p>Make sure that global transitions reference only existing SEs as source (see Error 1094</p>
<p>).</p>
<p>Test 61</p>
<p>Make sure that global transitions reference only  existing SEs  as  destination (see Error</p>
<p>1095</p>
<p>).</p>
<p>Test 62</p>
<p>The minimum deadline of each </p>
<p>WdgMDeadlineSupervision</p>
<p> element must be less or</p>
<p>equal to the maximum deadline (see Error 1096</p>
<p>).</p>
<p>Test 63</p>
<p>No deadline  value  must  be  greater  than  </p>
<p>(1 / tps) * MAX_16_BIT_VALUE</p>
<p> (see</p>
<p>Error 1097</p>
<p>).</p>
<p>Test 64</p>
<p>The following condition must  be fulfilled for configurations  with an internal  software tick</p>
<p>counter source:  </p>
<p>(1 / WdgMTicksPerSecond[Hz]) = WdgMSupervisionCycle</p>
<p>[s]</p>
<p> (see Error 1098</p>
<p>).</p>
<p>Test 65</p>
<p>The trigger modes  belonging to each trigger must  build a zero-based list  of increasing</p>
<p>integers without a gap (see Error 1109</p>
<p>).</p>
<p>Test 66</p>
<p>Every  transition must  have no more  than  one  </p>
<p>WdgMDeadlineSupervision</p>
<p> element</p>
<p>assigned to it (see Error 1114</p>
<p>).</p>
<p>69</p>
<p>52</p>
<p>110</p>
<p>51</p>
<p>52</p>
<p>110</p>
<p>52</p>
<p>113</p>
<p>111</p>
<p>111</p>
<p>111</p>
<p>111</p>
<p>111</p>
<p>111</p>
<p>111</p>
<p>111</p>
<p>111</p>
<p>111</p>
<p>112</p>
<p>113</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Appendix</b></p>
<p>Page 120</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Test 67</p>
<p>The </p>
<p>WdgMProgramFlowMonitoring</p>
<p> boolean value of an SE must be true if and only if</p>
<p>there are local or global transitions starting or ending in any of the CPs of that SE.</p>
<p>Test 87</p>
<p>All defined Watchdog devices in the EDF must have the same number of </p>
<p>WdgMTrigger</p>
<p>elements. <b>Note: </b>Not necessarily the same modes with respect to mode settings.</p>
<p>Test 88</p>
<p>The following condition must be fulfilled: </p>
<p>(WdgMFailedProgramFlowRefCycleTol =</p>
<p>0) OR (WdgMProgramFlowRefCycle &gt; 0)</p>
<p>. <b>Note: </b>Related to Error 1052</p>
<p>.</p>
<p>Test 107</p>
<p>The </p>
<p>WdgMTriggerTimeout</p>
<p> field in each element in the </p>
<p>WdgMTriggerMode</p>
<p> array  (of</p>
<p>type </p>
<p>WdgM_TriggerModeType</p>
<p>) must have a value greater than zero (Error 1124</p>
<p>).</p>
<p><b>5.1.5</b></p>
<p><b>Errors To Be Detected by the Verifier to Protect the Embedded Code</b></p>
<p><b>Test No.</b></p>
<p><b>Requirement</b></p>
<p>Test 6</p>
<p>The </p>
<p>WdgMSupervisedEntityRef</p>
<p> value of the  main structure shall be a NULL pointer</p>
<p>if and only if the number of SEs according to the EDF is zero.</p>
<p>Test 7</p>
<p>The </p>
<p>EntityStatusLRef</p>
<p> member of each SE must not be a NULL pointer.</p>
<p>Test 8</p>
<p>The </p>
<p>EntityStatusGRef</p>
<p> member of each SE must not be a NULL pointer.</p>
<p>Test 9</p>
<p>The </p>
<p>WdgMAliveLRef</p>
<p> member of each checkpoint shall be </p>
<p>NULL_PTR</p>
<p> if and only if the</p>
<p>member </p>
<p>WdgMAliveGRef</p>
<p> in the same SE is </p>
<p>NULL_PTR</p>
<p>.</p>
<p>Test 10</p>
<p>The main </p>
<p>WdgM_ConfigType</p>
<p> structure shall have its </p>
<p>DataGSRef</p>
<p> member set to a non-</p>
<p>NULL pointer.</p>
<p>Test 11</p>
<p>The main </p>
<p>WdgM_ConfigType</p>
<p> structure shall have its </p>
<p>DataGRef</p>
<p> member set to a non-</p>
<p>NULL pointer.</p>
<p>Test 12</p>
<p>The main </p>
<p>WdgM_ConfigType</p>
<p> structure shall have its </p>
<p>EntityGSRef</p>
<p> member set  to a</p>
<p>non-NULL pointer.</p>
<p>Test 13</p>
<p>The main </p>
<p>WdgM_ConfigType</p>
<p> structure  shall  have  its  </p>
<p>GlobalTransitionFlagsGS</p>
<p>member set to </p>
<p>NULL</p>
<p> if and only if there are no global transitions.</p>
<p>Test 14</p>
<p>The  value  of  </p>
<p>WdgM_GlobalTransitionType-&gt;GlobalTransitionFlagId</p>
<p> must</p>
<p>match the position of the current element in the </p>
<p>WdgM_GlobalTransitionType</p>
<p> array.</p>
<p>Test 15</p>
<p>The </p>
<p>EntityStatusLRef</p>
<p> member of each SE must point to a unique variable.</p>
<p>Test 16</p>
<p>The </p>
<p>EntityStatusGRef</p>
<p> member of each SE must point to a unique variable.</p>
<p>109</p>
<p>113</p>
<h1 style="page-break-before:always; "></h1>
<p>121</p>
<p>Page</p>
<p><b>Appendix</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>Test 68</p>
<p>The CPs belonging to each SE must have IDs that build a zero-based list  of increasing</p>
<p>integers without a gap (see Error 1001</p>
<p>).</p>
<p>Test 69</p>
<p>Each SE must have at least one CP (see Error 1016</p>
<p>).</p>
<p>Test 70</p>
<p>There</p>
<p> must</p>
<p> be</p>
<p> either</p>
<p> a</p>
<p> global</p>
<p> transition</p>
<p> or</p>
<p> a</p>
<p> local</p>
<p> transition</p>
<p> for</p>
<p> every</p>
<p>WdgMDeadlineSupervision</p>
<p> element (see Error 1031</p>
<p>).</p>
<p>Test 71</p>
<p>The ID of each SE must be unique (see Error 1062</p>
<p>).  <b>Note: </b>Actually  superseded by</p>
<p>handling of Error 1071</p>
<p>. See below.</p>
<p>Test 72</p>
<p>Each SE must have an initial checkpoint (see Error 1064</p>
<p>).</p>
<p>Test 73</p>
<p>There must be at least one callback function for the SEs or for the main structure if the</p>
<p>flag </p>
<p>WDGM_STATE_CHANGE_NOTIFICATION</p>
<p> is set to </p>
<p>STD_ON</p>
<p> (see Error 1066</p>
<p>).</p>
<p>Test 74</p>
<p>The number of SEs must not be zero (see Error 1090</p>
<p>).</p>
<p>Test 75</p>
<p>The </p>
<p>WdgM_LocalStateChangeCbk</p>
<p> member of  each  SE  must  point  to  the  callback</p>
<p>function configured for that  SE  according to the EDF.  Otherwise this  member must  be</p>
<p>NULL_PTR</p>
<p> (see Error 1066</p>
<p>).</p>
<p>Test 76</p>
<p>The  </p>
<p>WdgM_GlobalStateChangeCbk</p>
<p> member</p>
<p> of</p>
<p> the  main  structure  must</p>
<p> be</p>
<p>NULL_PTR</p>
<p> if no callback function was configured for signaling a global state change (see</p>
<p>Error 1066</p>
<p>).</p>
<p>Test 77</p>
<p>The callback functions assigned to SEs must have a unique name (see Error 1068</p>
<p>).</p>
<p>Test 78</p>
<p>CPs defined as local end CPs must not have outgoing local  transitions  (see Error 1069</p>
<p>).</p>
<p>Test 79</p>
<p>CPs defined as local initial CPs must not have incoming local transitions (see Error 1070</p>
<p>).</p>
<p>Test 80</p>
<p>The SE IDs must build a zero-based list of increasing integers without a gap (see Error</p>
<p>1071</p>
<p>).</p>
<p>Test 81</p>
<p>If the </p>
<p>WdgMFailedSupervisionRefCycleTol</p>
<p> of an SE</p>
<p> is set  to greater than</p>
<p>zero, then there shall be an alive supervision counter associated to one of the CPs of that</p>
<p>SE (see Error 1057</p>
<p>).</p>
<p>Test 82</p>
<p>Each CP configured to be an SE initial CP must have CP </p>
<p>ID = 0</p>
<p>.</p>
<p>Test 83</p>
<p>The </p>
<p>STD_OFF</p>
<p> and </p>
<p>STD_ON</p>
<p> constants must be defined as zero (<b>0</b>) and one (<b>1</b>).</p>
<p>Test 84</p>
<p>The value for</p>
<p> WdgMTicksPerSecond</p>
<p> must be greater than zero.</p>
<p>108</p>
<p>108</p>
<p>109</p>
<p>110</p>
<p>111</p>
<p>110</p>
<p>47</p>
<p>110</p>
<p>111</p>
<p>110</p>
<p>110</p>
<p>110</p>
<p>110</p>
<p>110</p>
<p>111</p>
<p>57</p>
<p>110</p>
<p>51</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Appendix</b></p>
<p>Page 122</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>6</b></p>
<p><b>Abbreviations</b></p>
<p><b>Abbreviation </b></p>
<p><b>Description</b></p>
<p><b>API</b></p>
<p>Application Programming Interface</p>
<p><b>ASIL</b></p>
<p>Automotive Safety Integrity Level</p>
<p><b>BswM</b></p>
<p>Basic Software Module</p>
<p><b>CP</b></p>
<p>Checkpoint</p>
<p><b>DEM</b></p>
<p>Diagnostic Event Manager</p>
<p><b>DET</b></p>
<p>Development Error Tracer </p>
<p><b>DVC</b></p>
<p>DaVinci Configurator Pro (by Vector Informatik GmbH)</p>
<p><b>ECU</b></p>
<p>Electronic Control Unit</p>
<p><b>EDF</b></p>
<p>ECU Description File</p>
<p><b>ISO</b></p>
<p>International Organization for Standardization</p>
<p><b>MCU</b></p>
<p>Microcontroller Unit</p>
<p><b>N/A</b></p>
<p>Not available</p>
<p><b>OS</b></p>
<p>Operating System</p>
<p><b>QM</b></p>
<p>Quality Managed Software (software development process)</p>
<p><b>RTE</b></p>
<p>Run-Time Environment</p>
<p><b>SCHM</b></p>
<p>Schedule Manager module (according AUTOSAR 4.0 r1)</p>
<p><b>SE</b></p>
<p>Supervised Entity</p>
<p><b>SEID</b></p>
<p>Supervised Entity Identifier</p>
<p><b>SW-C, SWC</b></p>
<p>Software Component</p>
<h1 style="page-break-before:always; "></h1>
<p>123</p>
<p>Page</p>
<p><b>Abbreviations</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Abbreviation </b></p>
<p><b>Description</b></p>
<p><b>S-Wdg</b></p>
<p>Safe Watchdog Driver (implementation by TTTech)</p>
<p><b>S-WdgIf</b></p>
<p>Safe Watchdog Interface (implementation by TTTech)</p>
<p><b>S-WdgM</b></p>
<p>Safe Watchdog Manager (implementation by TTTech)</p>
<p><b>WD</b></p>
<p>Watchdog</p>
<p><b>WdgM</b></p>
<p>AUTOSAR 4.0 r1 Watchdog Manager</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Abbreviations</b></p>
<p>Page 124</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>7</b></p>
<p><b>Glossary</b></p>
<p><b>Term </b></p>
<p><b>Description</b></p>
<p><b>Alive Indications</b></p>
<p>An indication provided by a Supervised Entity Alive counter</p>
<p>to signal its aliveness to the S-WdgM.</p>
<p><b>Alive Monitoring</b></p>
<p>A kind of S-WdgM monitoring (supervision) that checks if a</p>
<p>Supervised Entity is executed sufficiently often and not too</p>
<p>often.</p>
<p><b>Checkpoint</b></p>
<p>A point in the control flow of a supervised entity where the</p>
<p>activity is reported to the S-WdgM.</p>
<p><b>Closed Graph</b></p>
<p>A closed graph is a directed graph where every Checkpoint</p>
<p>is reachable, starting from the local initial Checkpoint.</p>
<p><b>Configuration Tool</b></p>
<p>A  tool  used  for  creating  a  S-WdgM  configuration,  e.g,</p>
<p>DaVinci Configurator Pro.</p>
<p><b>Container</b></p>
<p>Refers  to  the  AUTOSAR  term  &quot;container&quot;.  Represents  a</p>
<p>structure with different parameters.</p>
<p><b>Deadline Monitoring</b></p>
<p>Kind of S-WdgM monitoring (supervision) that checks if the</p>
<p>execution time between two Checkpoints is lower or higher</p>
<p>as the configured limits.</p>
<p><b>Destination</b></p>
<p><b>Checkpoint</b></p>
<p>End point of a transition.</p>
<p><b>End Checkpoint</b></p>
<p>The  last  Checkpoint  that  is  monitored  for  a  Supervised</p>
<p>Entity.  After  passing  the  End  Checkpoint,  the  S-WdgM</p>
<p>expects  that  the  entity  is  not</p>
<p> monitored.</p>
<p> To  start</p>
<p> the</p>
<p>monitoring  again  the  Initial  Checkpoint  must  be  passed</p>
<p>first.  A  Supervised  Entity  can  have  zero  or  more  End</p>
<p>Checkpoints.</p>
<p><b>Error</b></p>
<p>Discrepancy between a computed, observed or measured</p>
<p>value or condition, and the true, specified or theoretically</p>
<p>correct value or condition.</p>
<p><b>Failure</b></p>
<p>Termination of the ability of an element, to perform a</p>
<p>function as required.</p>
<p><b>Fault</b></p>
<p>Abnormal condition that can cause an element or an item to</p>
<h1 style="page-break-before:always; "></h1>
<p>125</p>
<p>Page</p>
<p><b>Glossary</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>fail.</p>
<p><b>Fault Detection Time</b></p>
<p>See. <i>S-WdgM Fault Detection Time</i>.</p>
<p><b>Fault Reaction Time</b></p>
<p>The  Fault  Reaction Time  is  the  S-WdgM  Fault  Reaction</p>
<p>Time plus the S-Wdg Fault Reaction Time.</p>
<p><b>Global</b></p>
<p><b> Monitoring</b></p>
<p><b>Status</b></p>
<p>Status that summarizes the Local  Monitoring  Status  of  all</p>
<p>supervised entities.</p>
<p><b>Global Transition</b></p>
<p>A global transition is a transition between two checkpoints</p>
<p>in the  logical  program  flow  (i.e.,  <i>source  </i>and  <i>destination</i></p>
<p>checkpoint),  where  the  checkpoints  belong  to  different</p>
<p>supervised entities.</p>
<p><b>Initial Checkpoint</b></p>
<p>The  first  Checkpoint  that  is  monitored  in  the  Supervised</p>
<p>Entity. The monitoring of a Supervised Entity must start at</p>
<p>this Checkpoint. A Supervised Entity has exactly one Initial</p>
<p>Checkpoint.</p>
<p><b>Local</b></p>
<p><b> Monitoring</b></p>
<p><b>Status</b></p>
<p>Status that represents the current result of supervision of a</p>
<p>single Supervised Entity.</p>
<p><b>Local Transition</b></p>
<p>A  Local</p>
<p> Transition  is</p>
<p> the</p>
<p> transition  between</p>
<p> two</p>
<p>checkpoints (i.e., <i>source </i>and <i>destination </i>checkpoint) in the</p>
<p>logical program flow in the same Supervised Entity.</p>
<p><b>Program</b></p>
<p><b> Flow</b></p>
<p><b>Monitoring</b></p>
<p>Kind of S-WdgM monitoring (supervision) that checks if the</p>
<p>inspected software is executed in a predefined sequence.</p>
<p>This sequence is defined by the user and collected in the S-</p>
<p>WdgM configuration.</p>
<p><b>S-WdgM</b></p>
<p><b> Fault</b></p>
<p><b>Detection Time</b></p>
<p>The  time-span  from  the  occurrence  of</p>
<p> a  fault</p>
<p> to  the</p>
<p>detection of the  fault  by the  S-WdgM.  The  detection of  a</p>
<p>fault</p>
<p> is</p>
<p> indicated</p>
<p> by</p>
<p> a</p>
<p> change</p>
<p> of</p>
<p> the</p>
<p> state</p>
<p>WDGM_LOCAL_STATE_OK</p>
<p> or</p>
<p>WDGM_GLOBAL_STATE_OK</p>
<p> to a different state.</p>
<p>It is called <i>diagnostic test interval </i>in [6]</p>
<p>, part1.</p>
<p><b>S-WdgM</b></p>
<p><b> Tick</b></p>
<p><b>(Counter)</b></p>
<p>Tick  Counter</p>
<p> is  used  for</p>
<p> deadline  monitoring  time</p>
<p>measurement.</p>
<p> Depending</p>
<p> on</p>
<p> the</p>
<p> parameter</p>
<p>WdgMTimebaseSource</p>
<p> the Tick Counter is incremented</p>
<p>by 1 for each supervision cycle or, for higher precision, with</p>
<p>the API function</p>
<p> WdgM_UpdateTickCounter()</p>
<p> or with</p>
<p>a hardware counter.</p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Glossary</b></p>
<p>Page 126</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Safe State</b></p>
<p>The Safe State is the operating mode of an item without an</p>
<p>unreasonable level of risk ([6]</p>
<p>, part1).</p>
<p><b>Safe</b></p>
<p><b> Watchdog</b></p>
<p><b>Manager Stack</b></p>
<p>The  software  module  consisting  of</p>
<p> Safe  Watchdog</p>
<p>Manager,  Safe  Watchdog  Interface  and  Safe  Watchdog</p>
<p>Driver.</p>
<p><b>Safe</b></p>
<p><b> Watchdog</b></p>
<p><b>Manager</b></p>
<p><b>(S-WdgM)</b></p>
<p>The hardware-independent upper software layer of the Safe</p>
<p>Watchdog Manager Stack.</p>
<p><b>Safe</b></p>
<p><b> Watchdog</b></p>
<p><b>Interface</b></p>
<p><b>(S-WdgIf)</b></p>
<p>The  hardware-independent  middle  software  layer  of  the</p>
<p>Safe Watchdog Manager Stack.</p>
<p><b>Safe Watchdog  Driver</b></p>
<p><b>(S-Wdg)</b></p>
<p>The  hardware-dependent</p>
<p> lowest</p>
<p> layer</p>
<p> of</p>
<p> the</p>
<p> Safe</p>
<p>Watchdog Manager Stack. Controls the Watchdog device.</p>
<p><b>Source Checkpoint</b></p>
<p>Start point of a transition.</p>
<p><b>Supervised Entity</b></p>
<p>A  software entity that is monitored by the  S-WdgM.  Each</p>
<p>supervised entity has  exactly one  identifier.  A  supervised</p>
<p>entity denotes a collection of checkpoints within a software</p>
<p>component or basic software module. There may be zero,</p>
<p>one or more supervised entities in a software component or</p>
<p>basic  software  module.  Each  entity  has  a  state  that  is</p>
<p>based on the states  reported  from  all  its  checkpoints.  All</p>
<p>checkpoints  of  one  entity  belong  to  the  same  memory</p>
<p>context.</p>
<p><b>Supervision Cycle</b></p>
<p>The  time  period  of</p>
<p> the  S-WdgM  in  which  the  cyclic</p>
<p>supervision algorithm is performed.</p>
<p><b>Supervision</b></p>
<p><b>Reference Cycle</b></p>
<p>The number of Supervision Cycles used as a reference by</p>
<p><i>Alive</i>,</p>
<p> <i>Deadline  </i>and  <i>Program  Flow  Supervision  </i>for</p>
<p>periodic supervision. Every kind of supervision has its own</p>
<p>reference cycle.</p>
<p><b>Timebase Tick</b></p>
<p>The  S-WdgM  measures  the  deadline  of  a  Transition  in</p>
<p>Timebase  Ticks.  (In  the  context  of  this  document  also</p>
<p>referred to as <i>S-WdgM Tick</i>.)</p>
<p><b>Note:  </b>The  Timebase  Tick  is  provided  either  by  the  S-</p>
<p>WdgM itself, or it can be provided by an external source.</p>
<p>128</p>
<h1 style="page-break-before:always; "></h1>
<p>127</p>
<p>Page</p>
<p><b>Glossary</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Trigger Mode</b></p>
<p>The S-WdgM Trigger Mode  is  a  set  of  Watchdog  trigger</p>
<p>times and Watchdog mode. One Trigger Mode is a group</p>
<p>of the following three parameters:</p>
<p>WdgMTriggerWindowStart</p>
<p>WdgMTriggerConditionValue</p>
<p>WdgMWatchdogMode</p>
<p>Each  Watchdog  device  can  have  one  or  more  Trigger</p>
<p>Modes.</p>
<p><b>Watchdog Device</b></p>
<p>The  Watchdog  Device  is  the  hardware  part</p>
<p> which</p>
<p>represents the watchdog functionality. It can be an internal</p>
<p>watchdog  integrated  on  the  MCU  chip,  or  it  can  be  an</p>
<p>external watchdog device outside the MCU. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Glossary</b></p>
<p>Page 128</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>8</b></p>
<p><b>References</b></p>
<p>[1]</p>
<p>AUTOSAR, <i>Specification of Watchdog Manager</i>. 080. V. 2.0.0. Rel. 4.0. Rev. 1.</p>
<p>[2]</p>
<p>AUTOSAR, <i>Specification of Watchdog Interface</i>. 041. V. 2.3.0. Rel. 4.0. Rev. 1.</p>
<p>[3]</p>
<p>AUTOSAR, <i>Specification of Watchdog Driver</i>. 039. V. 2.3.0. Rel. 4.0. Rev. 1.</p>
<p>[4]</p>
<p>TTTech Automotive GmbH, <i>Safe Watchdog Interface</i>, User Manual. D-MSP-M-70-006.</p>
<p>[5]</p>
<p>TTTech Automotive GmbH, <i>Safe Watchdog Manager</i>, Safety Manual. D-SAFEX-S-70-001.</p>
<p>[6]</p>
<p>ISO 26262-2011, <i>Road vehicles – Functional safety</i>. International Standard.</p>
<p>International Organization for Standardization (ISO), 2011.</p>
<p>[7]</p>
<p>AUTOSAR, <i>Specification of Watchdog Manager</i>. 080. V. 1.2.2. Rel. 3.1. Rev. 1.</p>
<h1 style="page-break-before:always; "></h1>
<p>129</p>
<p>Page</p>
<p><b>References</b></p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>9</b></p>
<p><b>License Information</b></p>
<p>The S-WdgM Configuration Generator is copyright TTTech Automotive GmbH © 2011 –</p>
<p>2012. All rights reserved. The use of the software is subject to TTTech's Standard</p>
<p>Software License Terms for Embedded Software and Software Tools provided together</p>
<p>with the software. In case you don't have access to TTTech's Standard Software</p>
<p>License Terms please contact office@tttech-automotive.com</p>
<p>The S-WdgM Configuration Generator was developed with the Python programming</p>
<p>language (Copyright © 2001-2012 Python Software Foundation; All Rights Reserved) -</p>
<p>For Python parts of the software see PYTHON SOFTWARE FOUNDATION LICENSE</p>
<p>VERSION 2 in the LICENSE file provided with this software.</p>
<p>The S-WdgM Configuration Generator includes the lxml library (Copyright © 2004 Infrae.</p>
<p>All rights reserved) - for the lxml library see the full license text in the LICENSE file</p>
<p>provided with this software.</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Index</b></p>
<p><b>Safe Watchdog Manager</b></p>
<p>130</p>
<p>Page</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p><b>Index</b></p>
<p><b>- A -</b></p>
<p>Abbreviations     122</p>
<p>Alive counter violation     27</p>
<p>Alive indications     26</p>
<p>Alive supervision     33</p>
<p>Aliveness     18</p>
<p>Aliveness parameters     19</p>
<p>Aliveness supervision     26</p>
<p>Aliveness violation     18</p>
<p>API description     73</p>
<p>type definitions     73</p>
<p>Appl_Dem.h     12</p>
<p>Appl_Det.h     12</p>
<p>Appl_Mcu.h     12</p>
<p>Appl_Mcu_PerformReset     89</p>
<p>AUTOSAR 3.1 and 4.0 Compatibility     33</p>
<p><b>- C -</b></p>
<p>Checkpoint     9, 18</p>
<p>destination checkpoint     21</p>
<p>end checkpoint     21</p>
<p>initial checkpoint     21</p>
<p>local initial checkpoint     22</p>
<p>CheckpointID     78</p>
<p>Compiler.h     11</p>
<p>Compiler_Cfg     12</p>
<p>Configuration generation     102</p>
<p>output files     107</p>
<p>workflow     105</p>
<p><b>- D -</b></p>
<p>Deadline     15</p>
<p>Deadline monitoring     33</p>
<p>Deadline reference cycle     17</p>
<p>Deadline violation     17, 27</p>
<p>Default reset path     30</p>
<p>Dem_ReportErrorStatus()     12</p>
<p>Destination checkpoint     15</p>
<p>Det_ReportError()     12</p>
<p><b>- E -</b></p>
<p>End checkpoint     21</p>
<p>Entities, checkpoint, transitions     34</p>
<p>Error messages     108</p>
<p>basic errors     108</p>
<p>semantic errors     108</p>
<p><b>- F -</b></p>
<p>Fault detection time     27</p>
<p>Fault reaction time     27</p>
<p><b>- G -</b></p>
<p>Global data     97</p>
<p>Global memory     97</p>
<p>Global shared data     97</p>
<p>Global shared memory     97</p>
<p>Global state     33, 39, 40, 41, 42, 43, 44, 45</p>
<p>WdgMExpiredSupervisionCycleTol     33</p>
<p>Global transitions     15, 22</p>
<p>WdgMGlobalTransitionDestRef     22</p>
<p>WdgMGlobalTransitionSourceRef     22</p>
<p>Glossary     124</p>
<p><b>- I -</b></p>
<p>Initial checkpoint     21</p>
<p>Integration     94</p>
<p>deadline measurement     100</p>
<p>initialization of the S-WdgM     94</p>
<p>memory sections     95</p>
<p>tick counter     100</p>
<p>timing setup     97</p>
<p>Introduction     4</p>
<p>architecture overview     5</p>
<p>use cases     7</p>
<p><b>- L -</b></p>
<p>local end checkpoint     22</p>
<p>Local entity data     96</p>
<p>Local entity memory     96</p>
<p>Local reflexive transition     22</p>
<p>Local state     31</p>
<p>Local transition     15, 21</p>
<p><b>- M -</b></p>
<p>Maximum deadline    </p>
<p>WdgMDeadlineMax     15, 69</p>
<p>Maximum reaction time     29</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Index</b></p>
<p><b>Safe Watchdog Manager</b></p>
<p>131</p>
<p>Page</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>MCU reset     30</p>
<p>MCU reset state     30</p>
<p>Mcu_PerformReset()     12</p>
<p>MemMap.h     12</p>
<p>Minimum deadline    </p>
<p>WdgMDeadlineMin     15, 69</p>
<p>Minimum reaction time     28</p>
<p><b>- N -</b></p>
<p>Node     9</p>
<p><b>- P -</b></p>
<p>PlatformTypes.h     12</p>
<p>Primary reset path     30</p>
<p>Program flow monitoring     33</p>
<p>Program flow reference cycle     14</p>
<p>Program flow violation     27</p>
<p>Program flow violations     14</p>
<p><b>- R -</b></p>
<p>Reference cycle     33</p>
<p>Reference cycle tolerance     33</p>
<p>Rte_Type.h     12</p>
<p>Rte_WdgM_Type.h     12</p>
<p><b>- S -</b></p>
<p>Safe state     27, 30</p>
<p>Safe Watchdog Manager     9</p>
<p>alive counter options     65</p>
<p>alive supervision     18</p>
<p>API description     73</p>
<p>basic functionality     13</p>
<p>checkpoint options     65</p>
<p>configuration parameters     38</p>
<p>deadline monitoring     15</p>
<p>deviations from AUTOSAR 4.0 r1     34</p>
<p>ECU description configuration     72</p>
<p>fault reaction time     27</p>
<p>file structure     10</p>
<p>general settings     49</p>
<p>global deadline options     69</p>
<p>global preprocessor settings     38</p>
<p>global state     33</p>
<p>global transition options     68</p>
<p>global transitions     22</p>
<p>local deadline options     69</p>
<p>local entity state     31</p>
<p>local transition options     67</p>
<p>program flow supervision     13</p>
<p>reset path     30</p>
<p>safe state     30</p>
<p>supervised entity     13</p>
<p>supervised entity options     57</p>
<p>supervision cycle     25</p>
<p>SchM_WdgM.h     12</p>
<p>Secondary reset path     30</p>
<p>SEID     78</p>
<p>Std_Types.h     11</p>
<p>Std_VersionInfoType     76</p>
<p>Supervised entity     6, 9, 13, 18</p>
<p>Supervision cycle     25</p>
<p>main function     25</p>
<p>WdgM_MainFunction()     25</p>
<p>WdgMTriggerConditionValue     26, 77</p>
<p>WdgMTriggerWindowStart     26, 77</p>
<p>Supervision reference cycle     31</p>
<p>S-WdgM     9, 122</p>
<p>application level API functions     76</p>
<p>callback functions     84</p>
<p>expected interfaces     88</p>
<p>system level API functions     84</p>
<p>type definitions     73</p>
<p>S-WdgM supervision cycle     19, 25</p>
<p>S-WdgM Verifier     103</p>
<p><b>- T -</b></p>
<p>Tolerance value     31</p>
<p>Tolerances     36</p>
<p>Transition     9, 15</p>
<p>global     15</p>
<p>local     15</p>
<p>local reflexive     22</p>
<p>WdgMDeadlineStartRef     15, 70</p>
<p>WdgMDeadlineStopRef     15, 70</p>
<p><b>- W -</b></p>
<p>Watchdog and Reset     36</p>
<p>WDGIF_MODE_OFF     40</p>
<p>WdgIf_Types.h     11</p>
<p>WdgIfDeviceRef     55</p>
<p>WdgInitialTimeout     99</p>
<p>WdgM.c     11</p>
<p>WdgM.h     11</p>
<p>WdgM_ActivateAliveSupervision(SEID)     91</p>
<p>WdgM_ActivateSupervisionEntity()     37, 47, 82</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Index</b></p>
<p><b>Safe Watchdog Manager</b></p>
<p>132</p>
<p>Page</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>WdgM_Cbk_GptNotification()     93</p>
<p>WdgM_Cfg.h     11</p>
<p>WdgM_Cfg_Features.h     11, 33</p>
<p>WdgM_Checkpoint.c     11</p>
<p>WdgM_CheckpointIdType     74</p>
<p>WdgM_CheckpointReached()     13, 18, 78, 96</p>
<p>WdgM_ConfigType     73</p>
<p>WdgM_DeactivateAliveSupervision(SEID)     92</p>
<p>WdgM_DeactivateSupervisionEntity()     37, 47, 81</p>
<p>WdgM_Delnit()     37</p>
<p>WDGM_DEM_REPORT     38</p>
<p>WDGM_DEV_ERROR_DETECT     38</p>
<p>WDGM_E_CPID     78</p>
<p>WDGM_E_NO_INIT     78</p>
<p>WDGM_E_PARAM_SEID     78</p>
<p>WDGM_E_PARAM_STATE     78</p>
<p>WDGM_ENTITY_DEACTIVATION_ENABLED     47</p>
<p>WDGM_EXTERNAL_SOFTWARE_TICK     44</p>
<p>WDGM_FIRSTCYCLE_ALIVECOUNTER_RESET    </p>
<p>48, 95</p>
<p>WdgM_GetAliveSupervisionStatus(SEID, *status)    </p>
<p>91</p>
<p>WdgM_GetGlobalStatus()     79</p>
<p>WdgM_GetGlobalStatus(*status)     91</p>
<p>WdgM_GetLocalStatus()     79</p>
<p>WdgM_GetMode()     77</p>
<p>WdgM_GetMode(*Mode)     91</p>
<p>WdgM_GetVersionInfo()     92</p>
<p>WDGM_GLOBAL_STATE_STOPPED     43</p>
<p>WdgM_GlobalStatusType     75</p>
<p>WdgM_GssChangeCbk(status)     92</p>
<p>WDGM_IMMEDIATE_RESET     31, 39</p>
<p>WdgM_Init(&amp;Config)     92</p>
<p>WdgM_Init()     95</p>
<p>WDGM_INTERNAL_HARDWARE_TICK     45</p>
<p>WDGM_INTERNAL_SOFTWARE_TICK     45</p>
<p>WdgM_IssChangeCbk(status)     92</p>
<p>WDGM_LOCAL_STATUS_DEACTIVATED     21, 82</p>
<p>WDGM_LOCAL_STATUS_FAILED     81</p>
<p>WDGM_LOCAL_STATUS_OK     81</p>
<p>WdgM_LocalStatusType     74</p>
<p>WdgM_MainFunction()     25, 27, 95, 97</p>
<p>WdgM_MainFunction_AliveSupervision()     93</p>
<p>WdgM_MemMap.h     11, 50, 96, 106</p>
<p>WdgM_ModeType     74</p>
<p>WdgM_OSMemMap.h     11, 50, 96, 106</p>
<p>WdgM_PBcfg.c     11</p>
<p>WdgM_PBcfg.h     11</p>
<p>WdgM_PerformReset()     80</p>
<p>WDGM_SECOND_RESET_PATH     30, 33, 45</p>
<p>WdgM_SetMode()     76</p>
<p>WdgM_SetMode(Mode)     90</p>
<p>WDGM_STATE_CHANGE_NOTIFICATION     47</p>
<p>WdgM_SupervisedEntityIdType     73</p>
<p>WDGM_TICK_OVERRUN_CORRECTION     46</p>
<p>WdgM_TimeBaseTickType     75</p>
<p>WdgM_UpdateAliveCounter(SEID)     91</p>
<p>WdgM_UpdateTickCounter()     99</p>
<p>WdgMAliveSupervisionCheckpointRef     67</p>
<p>WdgMAppTaskRef     64</p>
<p>WdgMCallerId     48</p>
<p>WdgMCheckpointId     65</p>
<p>WdgMConfig_Mode0     107</p>
<p>WdgMDeadlineMax     15, 69</p>
<p>WdgMDeadlineMin     15, 69</p>
<p>WdgMDeadlineReferenceCycle     18, 33, 59</p>
<p>WdgMDeadlineStartRef     15, 70</p>
<p>WdgMDeadlineStopRef     15, 70</p>
<p>WdgMDefensiveBehavior     41</p>
<p>WdgMDemReport     38</p>
<p>WdgMDemSupervisionReport     42</p>
<p>WdgMDevErrorDetect     37, 38</p>
<p>WdgMEnableEntityDeactivation     47, 61</p>
<p>WdgMEntityDeactivationEnabled     47</p>
<p>WdgMExpectedAliveIndications     19, 65</p>
<p>WdgMExpiredSupervisionCycleTol     33, 53</p>
<p>WdgMFailedDeadlineRefCycleTol     18, 33, 58</p>
<p>WdgMFailedProgramFlowRefCycleTol     14, 33, 59</p>
<p>WdgMFailedSupervisionRefCycleTol     33, 57</p>
<p>WdgMFirstCycleAliveCounterReset     18, 48</p>
<p>WdgMGlobalCheckpointFinalRef     53</p>
<p>WdgMGlobalCheckpointInitialRef     54</p>
<p>WdgMGlobalMemoryAppTaskRef     49</p>
<p>WdgMGlobalStateChangeCbk     49, 84</p>
<p>WdgMGlobalTransitionDestRef     22, 68</p>
<p>WdgMGlobalTransitionSourceRef     22, 69</p>
<p>WdgMImmediateReset     39</p>
<p>WdgMInitialTriggerModeId     50</p>
<p>WdgMLocalCheckpointFinalRef     63</p>
<p>WdgMLocalCheckpointInitialRef     64</p>
<p>WdgMLocalStateChangeCbk     63, 84</p>
<p>WdgMLocalStatusSupervisedEntityRef     61</p>
<p>WdgMLocalTransitionDestRef     21, 67</p>
<p>WdgMLocalTransitionSourceRef     21, 68</p>
<p>WdgMMaxMargin     19, 66</p>
<p>WdgMMinMargin     19, 66</p>
<p>WdgMModeID     50, 56</p>
<p>WdgMOffModeEnabled     40</p>
<p>WdgMProgramFlowReferenceCycle     14, 26, 33, 60</p>
<p>WdgMSecondResetPath     45</p>
<p>WdgMStateChangeNotification     47</p>
<p>WdgMSupervisedEntityId     61</p>
<p>WdgMSupervisedEntityInitialMode     58</p>
<p>WdgMSupervisionCycle     19, 52, 53, 99</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Index</b></p>
<p><b>Safe Watchdog Manager</b></p>
<p>133</p>
<p>Page</p>
<p><i>TTTech Automotive Confidential and Proprietary</i></p>
<p><i>© 2011 - 2014 TTTech Automotive GmbH</i></p>
<p><i>Safe Watchdog Manager 3.3.1</i></p>
<p><i>Document number: D-MSP-M-70-001</i></p>
<p>WdgMSupervisionReferenceCycle     19, 33, 66</p>
<p>WdgMSupportedAutosarAPI     62, 90</p>
<p>WdgMTickOverrunCorrection     46</p>
<p>WdgMTicksPerSecond     51, 99</p>
<p>WdgMTimebaseSource     44</p>
<p>WdgMTriggerConditionValue     26, 56, 77, 99</p>
<p>WdgMTriggerModeId     51</p>
<p>WdgMTriggerWatchdogRef     57</p>
<p>WdgMTriggerWindowStart     26, 56, 77, 99</p>
<p>WdgMUseOsSuspendInterrupt     43</p>
<p>WdgMUseRte     42</p>
<p>WdgMVersionInfoApi     40</p>
<p>WdgMWatchdogMode     55, 77</p>
<p>WdgMWatchdogName     54</p>
<p>WdgWindowStart     99</p>
<p><b>- Z -</b></p>
<p>Zero alive indication     20</p>
</body>
</html>
{% endraw %}