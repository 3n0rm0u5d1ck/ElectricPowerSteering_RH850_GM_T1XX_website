---
layout: default
title: TechnicalReference_Os
nav_order: 7
parent: OS
---
{% raw %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title></title>
  <meta name="generator" content="LibreOffice 24.2.7.2 (Linux)"/>
  <meta name="created" content="00:00:00"/>
  <meta name="changed" content="00:00:00"/>
</head>
<body>
<h1></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>MICROSAR OS SafeContext </b></p>
<p>Technical Reference </p>
<p> </p>
<p> </p>
<p>Version 9.01 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Status </p>
<p>Released </p>
<p>Document ID </p>
<p>OS01.0280 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>2 / 136 </p>
<p><b>Document Information </b></p>
<p><b>History </b></p>
<p><b>Author </b></p>
<p><b>Date </b></p>
<p><b>Version </b></p>
<p><b>Remarks </b></p>
<p>Rmk </p>
<p>2012-06-26 </p>
<p>6.00 </p>
<p>creation based on AUTOSAR 3.0 version </p>
<p>Shk </p>
<p>2013-09-18 </p>
<p>6.01 </p>
<p>SingleSource template applied and </p>
<p>variants for ASR3.x, ASR4.x, SafeContext </p>
<p>and non-SafeContext prepared </p>
<p>Biv </p>
<p>2014-02-04 </p>
<p>6.02 </p>
<p>MultiCore references corrected </p>
<p>Zfa </p>
<p>2014-05-05 </p>
<p>6.03 </p>
<p>Updated timer description </p>
<p>Asl </p>
<p>2014-08-14 </p>
<p>8.00 </p>
<p>Examples chapter excluded </p>
<p>TimingAnalyzer removed </p>
<p>Updated counter related macros and </p>
<p>configuration  </p>
<p>Asl </p>
<p>2014-10-16 </p>
<p>8.01 </p>
<p>Added PeripheralRegion API </p>
<p>Added Non-Trusted Function API </p>
<p>Added CheckMPUAccess API </p>
<p>Asl </p>
<p>2015-01-29 </p>
<p>9.00 </p>
<p>Updated interpretation of </p>
<p>OsSecondsPerTick and </p>
<p>OsCounterTicksPerBase </p>
<p>Rk </p>
<p>2015-06-17 </p>
<p>9.01 </p>
<p>Added MICROSAR OS Timing Hooks </p>
<p>Added table of terms to the glossary </p>
<p>Added the information that forcible </p>
<p>termination is currently not supported </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>3 / 136 </p>
<p><b>Reference Documents </b></p>
<p><b>No. </b></p>
<p><b>Title </b></p>
<p><b>Version </b></p>
<p>[1]  </p>
<p>AUTOSAR_SWS_OS.pdf </p>
<p>AUTOSAR OS specification; This document is available in PDF-format on the </p>
<p>internet a the AUTOSAR homepage (http://www.autosar.org) </p>
<p>V5.0.0 </p>
<p>[2]  </p>
<p>AUTOSAR_TR_BSWModuleList.pdf </p>
<p>1.6.0 </p>
<p>[3]  </p>
<p>OSEK/VDX Operating System Specification </p>
<p>This document is available in PDF-format on the Internet at the OSEK/VDX </p>
<p>homepage (http://www.osek-vdx.org) </p>
<p>2.2.3 </p>
<p>[4]  </p>
<p>TechincalReference_Microsar_Os_Multicore.pdf </p>
<p>1.00 </p>
<p>[5]  </p>
<p>TechnicalReference_MicrosarOS_xxxx.pdf </p>
<p>Technical reference of Vector MICROSAR OS; Hardware specific part </p>
<p>-- </p>
<p>[6]  </p>
<p>OIL: OSEK Implementation Language </p>
<p>This document is available in PDF-format on the Internet at the OSEK/VDX </p>
<p>homepage (http://www.osek-vdx.org) </p>
<p>2.3 </p>
<p>[7]  </p>
<p>Tutorial_osCAN.pdf </p>
<p>Tutorial for the MICROSAR OS OSEK/AUTOSAR Realtime Operating System </p>
<p>1.00 </p>
<p>[8]  </p>
<p>autosar.xsd </p>
<p>AUTOSAR XML schema </p>
<p>4.0.3 </p>
<p>[9]  </p>
<p>MicrosarOS_xxxx_SafeContext_SafetyManual.pdf </p>
<p>Application Conditions for SEooC; Implementation specific document </p>
<p>-- </p>
<p><b>Scope of the Document </b></p>
<p>MICROSAR  OS  is  an  operating  system,  compliant  with  the  AUTOSAR  OS  and  OSEK </p>
<p>standards. The general aspects of all SafeContext implementations are described in this </p>
<p>document. For each implementation, the hardware specific part is described in a separate </p>
<p>document [4]. </p>
<p>The implementation is based on the AUTOSAR OS specification [1]. </p>
<p>It is also based on the OSEK OS specification 2.2 described in the document [3]. </p>
<p>As a SEooC, it is further based on assumptions regarding safety requirements. Details can </p>
<p>be found in [9]. </p>
<p>This </p>
<p>documentation </p>
<p>assumes </p>
<p>that </p>
<p>the </p>
<p>reader </p>
<p>is </p>
<p>familiar </p>
<p>with </p>
<p>both </p>
<p>the </p>
<p>OSEK </p>
<p>OS </p>
<p>specification and the AUTOSAR OS specification. </p>
<p>This documentation describes only the operating system and the code generation tool. </p>
<p>OSEK  is  a  registered  trademark  of  Continental Automotive  GmbH  (until  2007:  Siemens </p>
<p>AG). </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>4 / 136 </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>We have configured the programs in accordance with your specifications in the </p>
<p>questionnaire. Whereas the programs do support other configurations than the one </p>
<p>specified in your questionnaire, Vector´s release of the programs delivered to your </p>
<p>company is expressly restricted to the configuration you have specified in the </p>
<p>questionnaire. </p>
<p><b> </b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>5 / 136 </p>
<p><b>Contents </b></p>
<p><b>1</b></p>
<p> </p>
<p><b>Component History ...................................................................................................... 14</b></p>
<p> </p>
<p><b>2</b></p>
<p> </p>
<p><b>Introduction .................................................................................................................. 15</b></p>
<p> </p>
<p>2.1</p>
<p> </p>
<p>Architecture Overview ................................................................................... 15</p>
<p> </p>
<p><b>3</b></p>
<p> </p>
<p><b>Functional Description ................................................................................................ 17</b></p>
<p> </p>
<p>3.1</p>
<p> </p>
<p>Features ........................................................................................................ 17</p>
<p> </p>
<p>3.2</p>
<p> </p>
<p>Main Functions .............................................................................................. 17</p>
<p> </p>
<p>3.2.1</p>
<p> </p>
<p>Timer and Alarms .......................................................................................... 18</p>
<p> </p>
<p>3.2.1.1</p>
<p> </p>
<p>Time Base ..................................................................................................... 19</p>
<p> </p>
<p>3.2.1.1.1</p>
<p> </p>
<p>Counter Macros ............................................................................................. 19</p>
<p> </p>
<p>3.2.1.1.2</p>
<p> </p>
<p>Temporal Range of Alarms ............................................................................ 19</p>
<p> </p>
<p>3.2.1.2</p>
<p> </p>
<p>Timer Interrupt Routine .................................................................................. 19</p>
<p> </p>
<p>3.2.1.2.1</p>
<p> </p>
<p>Counter API ................................................................................................... 19</p>
<p> </p>
<p>3.2.2</p>
<p> </p>
<p>Stack Handling .............................................................................................. 20</p>
<p> </p>
<p>3.2.2.1</p>
<p> </p>
<p>Task Stack ..................................................................................................... 20</p>
<p> </p>
<p>3.2.2.2</p>
<p> </p>
<p>Interrupt Stack ............................................................................................... 20</p>
<p> </p>
<p>3.2.2.3</p>
<p> </p>
<p>Stack Monitoring ............................................................................................ 21</p>
<p> </p>
<p>3.2.2.4</p>
<p> </p>
<p>Stack Usage .................................................................................................. 21</p>
<p> </p>
<p>3.2.3</p>
<p> </p>
<p>Interrupt Handling .......................................................................................... 21</p>
<p> </p>
<p>3.2.3.1</p>
<p> </p>
<p>Interrupt Categories....................................................................................... 22</p>
<p> </p>
<p>3.2.3.1.1</p>
<p> </p>
<p>Category 1: ................................................................................................... 22</p>
<p> </p>
<p>3.2.3.1.2</p>
<p> </p>
<p>Category 2: ................................................................................................... 22</p>
<p> </p>
<p>3.2.3.2</p>
<p> </p>
<p>Usage of the Interrupt API before StartOS ..................................................... 23</p>
<p> </p>
<p>3.2.4</p>
<p> </p>
<p>Timing Protection .......................................................................................... 24</p>
<p> </p>
<p>3.2.4.1</p>
<p> </p>
<p>Reaction on Protection Failure ...................................................................... 24</p>
<p> </p>
<p>3.2.4.2</p>
<p> </p>
<p>Timing Measurement ..................................................................................... 24</p>
<p> </p>
<p>3.2.4.2.1</p>
<p> </p>
<p>Timing measurement configuration for a specific task/ISR ............................ 25</p>
<p> </p>
<p>3.2.4.2.2</p>
<p> </p>
<p>Global configuration of timing measurement ................................................. 25</p>
<p> </p>
<p>3.2.4.3</p>
<p> </p>
<p>Hook functions .............................................................................................. 26</p>
<p> </p>
<p>3.2.5</p>
<p> </p>
<p>Memory Protection ........................................................................................ 26</p>
<p> </p>
<p>3.2.6</p>
<p> </p>
<p>Schedule Tables ............................................................................................ 27</p>
<p> </p>
<p>3.2.6.1</p>
<p> </p>
<p>Synchronization ............................................................................................. 27</p>
<p> </p>
<p>3.2.6.1.1</p>
<p> </p>
<p>Starting a synchronizable Schedule Table ..................................................... 27</p>
<p> </p>
<p>3.2.6.1.2</p>
<p> </p>
<p>Autostart ........................................................................................................ 27</p>
<p> </p>
<p>3.2.6.1.3</p>
<p> </p>
<p>Suspending a Schedule Table and keeping its Synchronization .................... 28</p>
<p> </p>
<p>3.2.6.1.4</p>
<p> </p>
<p>Providing a Global Time ................................................................................ 28</p>
<p> </p>
<p>3.2.6.1.5</p>
<p> </p>
<p>Exact Synchronization ................................................................................... 28</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>6 / 136 </p>
<p>3.2.6.1.6</p>
<p> </p>
<p>Limits of the Synchronization Algorithm ......................................................... 29</p>
<p> </p>
<p>3.2.6.1.7</p>
<p> </p>
<p>Details about using NextScheduleTable ........................................................ 30</p>
<p> </p>
<p>3.2.6.1.8</p>
<p> </p>
<p>Concurrent Actions ........................................................................................ 30</p>
<p> </p>
<p>3.2.6.2</p>
<p> </p>
<p>High-Resolution Schedule Tables .................................................................. 30</p>
<p> </p>
<p>3.2.6.2.1</p>
<p> </p>
<p>Setup ............................................................................................................ 31</p>
<p> </p>
<p>3.2.6.3</p>
<p> </p>
<p>Cyclical Expiry Point Actions ......................................................................... 31</p>
<p> </p>
<p>3.2.7</p>
<p> </p>
<p>Trusted Functions .......................................................................................... 31</p>
<p> </p>
<p>3.2.7.1</p>
<p> </p>
<p>Generated Stub Functions ............................................................................. 31</p>
<p> </p>
<p>3.3</p>
<p> </p>
<p>Error Handling ............................................................................................... 33</p>
<p> </p>
<p>3.3.1</p>
<p> </p>
<p>Error Messages ............................................................................................. 33</p>
<p> </p>
<p>3.3.2</p>
<p> </p>
<p>OSEK / AUTOSAR OS Error Numbers .......................................................... 33</p>
<p> </p>
<p>3.3.3</p>
<p> </p>
<p>MICROSAR OS Error Numbers .................................................................... 34</p>
<p> </p>
<p>3.3.3.1</p>
<p> </p>
<p>Error Numbers of Group Task Management / (1) ........................................... 35</p>
<p> </p>
<p>3.3.3.2</p>
<p> </p>
<p>Error Numbers of Group Interrupt Handling / (2) ............................................ 37</p>
<p> </p>
<p>3.3.3.3</p>
<p> </p>
<p>Error Numbers of Group Resource Management / (3) ................................... 39</p>
<p> </p>
<p>3.3.3.4</p>
<p> </p>
<p>Error Numbers of Group Event Control / (4) .................................................. 40</p>
<p> </p>
<p>3.3.3.5</p>
<p> </p>
<p>Error Numbers of Group Alarm Management / (5) ......................................... 42</p>
<p> </p>
<p>3.3.3.6</p>
<p> </p>
<p>Error Numbers of Group Operating System Execution Control / (6) ............... 44</p>
<p> </p>
<p>3.3.3.7</p>
<p> </p>
<p>Error Numbers of Schedule Table Control / (7) .............................................. 46</p>
<p> </p>
<p>3.3.3.8</p>
<p> </p>
<p>Error Numbers of Group Counter API / (8) ..................................................... 49</p>
<p> </p>
<p>3.3.3.9</p>
<p> </p>
<p>Error Numbers of Group Timing Protection and Timing Measurement / (9) .... 51</p>
<p> </p>
<p>3.3.3.10</p>
<p> </p>
<p>Platform specific error codes (A) ................................................................... 53</p>
<p> </p>
<p>3.3.3.11</p>
<p> </p>
<p>Error Numbers of Group Application API (B) .................................................. 53</p>
<p> </p>
<p>3.3.3.12</p>
<p> </p>
<p>Error Numbers of Group Semaphores (C) ..................................................... 54</p>
<p> </p>
<p>3.3.3.13</p>
<p> </p>
<p>Error Numbers of Group MultiCore related functions (D) ............................... 55</p>
<p> </p>
<p>3.3.3.14</p>
<p> </p>
<p>Error Numbers of Group (Non-)TrustedFunctions (E) .................................... 55</p>
<p> </p>
<p>3.3.3.15</p>
<p> </p>
<p>Error Numbers of Group IOC (F) ................................................................... 56</p>
<p> </p>
<p>3.3.4</p>
<p> </p>
<p>Reactions on Error Situations ........................................................................ 56</p>
<p> </p>
<p><b>4</b></p>
<p> </p>
<p><b>Installation .................................................................................................................... 57</b></p>
<p> </p>
<p>4.1</p>
<p> </p>
<p>Installation Requirements .............................................................................. 57</p>
<p> </p>
<p>4.2</p>
<p> </p>
<p>Installation Disk ............................................................................................. 57</p>
<p> </p>
<p>4.3</p>
<p> </p>
<p>OIL Configurator ............................................................................................ 58</p>
<p> </p>
<p>4.3.1</p>
<p> </p>
<p>INI Files of the OIL Tool ................................................................................. 58</p>
<p> </p>
<p>4.3.2</p>
<p> </p>
<p>OIL Implementation Files ............................................................................... 58</p>
<p> </p>
<p>4.3.3</p>
<p> </p>
<p>Code Generator ............................................................................................ 58</p>
<p> </p>
<p>4.4</p>
<p> </p>
<p>OSEK Operating System ............................................................................... 58</p>
<p> </p>
<p>4.4.1</p>
<p> </p>
<p>Installation Paths ........................................................................................... 58</p>
<p> </p>
<p>4.5</p>
<p> </p>
<p>XML Configurations ....................................................................................... 59</p>
<p> </p>
<p>4.5.1</p>
<p> </p>
<p>Parameter Definition Files ............................................................................. 59</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>7 / 136 </p>
<p><b>5</b></p>
<p> </p>
<p><b>Integration .................................................................................................................... 60</b></p>
<p> </p>
<p>5.1</p>
<p> </p>
<p>Scope of Delivery .......................................................................................... 60</p>
<p> </p>
<p>5.1.1</p>
<p> </p>
<p>Static Files ..................................................................................................... 60</p>
<p> </p>
<p>5.1.2</p>
<p> </p>
<p>Dynamic Files................................................................................................ 60</p>
<p> </p>
<p>5.1.2.1</p>
<p> </p>
<p>Code Generator GENxxxx ............................................................................. 60</p>
<p> </p>
<p>5.1.2.1.1</p>
<p> </p>
<p>Generated file libconf .................................................................................... 60</p>
<p> </p>
<p>5.1.2.2</p>
<p> </p>
<p>Application Template Generator GENTMPL .................................................. 61</p>
<p> </p>
<p>5.2</p>
<p> </p>
<p>Include Structure ........................................................................................... 61</p>
<p> </p>
<p><b>6</b></p>
<p> </p>
<p><b>API Description ............................................................................................................ 62</b></p>
<p> </p>
<p>6.1</p>
<p> </p>
<p>Standard API - Overview ............................................................................... 62</p>
<p> </p>
<p>6.2</p>
<p> </p>
<p>API Functions defined by Vector - Overview .................................................. 65</p>
<p> </p>
<p>6.3</p>
<p> </p>
<p>Timing Measurement API .............................................................................. 66</p>
<p> </p>
<p>6.3.1</p>
<p> </p>
<p>GetTaskMaxExecutionTime ........................................................................... 66</p>
<p> </p>
<p>6.3.2</p>
<p> </p>
<p>GetISRMaxExecutionTime ............................................................................ 67</p>
<p> </p>
<p>6.3.3</p>
<p> </p>
<p>GetTaskMaxBlockingTime ............................................................................. 67</p>
<p> </p>
<p>6.3.4</p>
<p> </p>
<p>GetISRMaxBlockingTime .............................................................................. 68</p>
<p> </p>
<p>6.3.5</p>
<p> </p>
<p>GetTaskMinInterArrivalTime .......................................................................... 69</p>
<p> </p>
<p>6.3.6</p>
<p> </p>
<p>GetISRMinInterArrivalTime ............................................................................ 70</p>
<p> </p>
<p>6.4</p>
<p> </p>
<p>Implementation specific Behavior .................................................................. 70</p>
<p> </p>
<p>6.4.1</p>
<p> </p>
<p>Interrupt Handling .......................................................................................... 70</p>
<p> </p>
<p>6.4.1.1</p>
<p> </p>
<p>EnableAllInterrupts ........................................................................................ 71</p>
<p> </p>
<p>6.4.1.2</p>
<p> </p>
<p>DisableAllInterrupts ....................................................................................... 72</p>
<p> </p>
<p>6.4.1.3</p>
<p> </p>
<p>ResumeAllInterrupts ...................................................................................... 72</p>
<p> </p>
<p>6.4.1.4</p>
<p> </p>
<p>SuspendAllInterrupts ..................................................................................... 73</p>
<p> </p>
<p>6.4.1.5</p>
<p> </p>
<p>ResumeOSInterrupts ..................................................................................... 74</p>
<p> </p>
<p>6.4.1.6</p>
<p> </p>
<p>SuspendOSInterrupts .................................................................................... 75</p>
<p> </p>
<p>6.4.2</p>
<p> </p>
<p>Resource Management ................................................................................. 76</p>
<p> </p>
<p>6.4.2.1</p>
<p> </p>
<p>GetResource ................................................................................................. 76</p>
<p> </p>
<p>6.4.2.2</p>
<p> </p>
<p>ReleaseResource .......................................................................................... 77</p>
<p> </p>
<p>6.4.3</p>
<p> </p>
<p>Execution Control .......................................................................................... 78</p>
<p> </p>
<p>6.4.3.1</p>
<p> </p>
<p>StartOS ......................................................................................................... 78</p>
<p> </p>
<p>6.4.3.2</p>
<p> </p>
<p>ShutdownOS ................................................................................................. 79</p>
<p> </p>
<p>6.5</p>
<p> </p>
<p>Hook Routines ............................................................................................... 80</p>
<p> </p>
<p>6.5.1</p>
<p> </p>
<p>Standard Hooks ............................................................................................. 80</p>
<p> </p>
<p>6.5.1.1</p>
<p> </p>
<p>StartupHook .................................................................................................. 80</p>
<p> </p>
<p>6.5.1.2</p>
<p> </p>
<p>PreTaskHook ................................................................................................. 81</p>
<p> </p>
<p>6.5.1.3</p>
<p> </p>
<p>PostTaskHook ............................................................................................... 81</p>
<p> </p>
<p>6.5.1.4</p>
<p> </p>
<p>ErrorHook ...................................................................................................... 82</p>
<p> </p>
<p>6.5.1.5</p>
<p> </p>
<p>ShutdownHook .............................................................................................. 82</p>
<p> </p>
<p>6.5.1.6</p>
<p> </p>
<p>ProtectionHook .............................................................................................. 83</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>8 / 136 </p>
<p>6.5.2</p>
<p> </p>
<p>ISR Hooks ..................................................................................................... 83</p>
<p> </p>
<p>6.5.2.1</p>
<p> </p>
<p>UserPreISRHook ........................................................................................... 83</p>
<p> </p>
<p>6.5.2.2</p>
<p> </p>
<p>UserPostISRHook ......................................................................................... 84</p>
<p> </p>
<p>6.5.3</p>
<p> </p>
<p>Alarm Hook ................................................................................................... 85</p>
<p> </p>
<p>6.5.3.1</p>
<p> </p>
<p>PreAlarmHook (currently not supported) ....................................................... 85</p>
<p> </p>
<p>6.5.4</p>
<p> </p>
<p>MICROSAR OS Timing Hooks ...................................................................... 85</p>
<p> </p>
<p>6.5.4.1</p>
<p> </p>
<p>Hooks for arrival ............................................................................................ 86</p>
<p> </p>
<p>6.5.4.1.1</p>
<p> </p>
<p>OS_VTH_ACTIVATION ................................................................................. 86</p>
<p> </p>
<p>6.5.4.1.2</p>
<p> </p>
<p>OS_VTH_SETEVENT ................................................................................... 86</p>
<p> </p>
<p>6.5.4.1.3</p>
<p> </p>
<p>OS_VTH_TRANSFER_SEMA ....................................................................... 87</p>
<p> </p>
<p>6.5.4.2</p>
<p> </p>
<p>Hook for context switch ................................................................................. 88</p>
<p> </p>
<p>6.5.4.2.1</p>
<p> </p>
<p>OS_VTH_SCHEDULE .................................................................................. 88</p>
<p> </p>
<p>6.5.4.3</p>
<p> </p>
<p>Hooks for locking ........................................................................................... 89</p>
<p> </p>
<p>6.5.4.3.1</p>
<p> </p>
<p>OS_VTH_GOT_RES ..................................................................................... 89</p>
<p> </p>
<p>6.5.4.3.2</p>
<p> </p>
<p>OS_VTH_REL_RES...................................................................................... 90</p>
<p> </p>
<p>6.5.4.3.3</p>
<p> </p>
<p>OS_VTH_REQ_SPINLOCK .......................................................................... 90</p>
<p> </p>
<p>6.5.4.3.4</p>
<p> </p>
<p>OS_VTH_GOT_SPINLOCK .......................................................................... 91</p>
<p> </p>
<p>6.5.4.3.5</p>
<p> </p>
<p>OS_VTH_REL_SPINLOCK ........................................................................... 92</p>
<p> </p>
<p>6.5.4.3.6</p>
<p> </p>
<p>OS_VTH_TOOK_SEMA ................................................................................ 93</p>
<p> </p>
<p>6.5.4.3.7</p>
<p> </p>
<p>OS_VTH_REL_SEMA ................................................................................... 93</p>
<p> </p>
<p>6.5.4.3.8</p>
<p> </p>
<p>OS_VTH_DISABLEDINT .............................................................................. 94</p>
<p> </p>
<p>6.5.4.3.9</p>
<p> </p>
<p>OS_VTH_ENABLEDINT ............................................................................... 95</p>
<p> </p>
<p>6.6</p>
<p> </p>
<p>Non-Trusted Functions .................................................................................. 95</p>
<p> </p>
<p>6.6.1</p>
<p> </p>
<p>Functionality .................................................................................................. 95</p>
<p> </p>
<p>6.6.2</p>
<p> </p>
<p>API ................................................................................................................ 96</p>
<p> </p>
<p>6.7</p>
<p> </p>
<p>MPU Access Checking API............................................................................ 96</p>
<p> </p>
<p>6.8</p>
<p> </p>
<p>Peripheral Regions ........................................................................................ 97</p>
<p> </p>
<p>6.8.1</p>
<p> </p>
<p>Reading functions ......................................................................................... 97</p>
<p> </p>
<p>6.8.2</p>
<p> </p>
<p>Writing functions ............................................................................................ 98</p>
<p> </p>
<p>6.8.3</p>
<p> </p>
<p>Modifying functions ....................................................................................... 99</p>
<p> </p>
<p><b>7</b></p>
<p> </p>
<p><b>Configuration.............................................................................................................. 100</b></p>
<p> </p>
<p>7.1</p>
<p> </p>
<p>Configuration and generation process ......................................................... 100</p>
<p> </p>
<p>7.1.1</p>
<p> </p>
<p>XML Configuration ....................................................................................... 100</p>
<p> </p>
<p>7.1.2</p>
<p> </p>
<p>OIL Configurator .......................................................................................... 101</p>
<p> </p>
<p>7.2</p>
<p> </p>
<p>Configuration Variants ................................................................................. 101</p>
<p> </p>
<p>7.3</p>
<p> </p>
<p>Configuration of the XML / OIL Attributes ..................................................... 101</p>
<p> </p>
<p>7.3.1</p>
<p> </p>
<p>OS ............................................................................................................... 102</p>
<p> </p>
<p>7.3.1.1</p>
<p> </p>
<p>ProtectionHookReaction / OsOSProtectionHookReaction ........................... 105</p>
<p> </p>
<p>7.3.1.2</p>
<p> </p>
<p>TimingMeasurement / OsOSTimingMeasurement ....................................... 106</p>
<p> </p>
<p>7.3.1.3</p>
<p> </p>
<p>PeripheralRegion / OsOSPeripheralRegion ................................................. 107</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>9 / 136 </p>
<p>7.3.2</p>
<p> </p>
<p>Task ............................................................................................................ 107</p>
<p> </p>
<p>7.3.2.1</p>
<p> </p>
<p>AUTOSTART / OsTaskAutostart .................................................................. 109</p>
<p> </p>
<p>7.3.2.2</p>
<p> </p>
<p>TIMING_PROTECTION / OsTaskTimingProtection ..................................... 109</p>
<p> </p>
<p>7.3.2.3</p>
<p> </p>
<p>Task attributes concerning the timing analyzer ............................................ 110</p>
<p> </p>
<p>7.3.3</p>
<p> </p>
<p>Counter ........................................................................................................ 111</p>
<p> </p>
<p>7.3.4</p>
<p> </p>
<p>Alarm .......................................................................................................... 112</p>
<p> </p>
<p>7.3.4.1</p>
<p> </p>
<p>ACTION / OsAlarmAction ............................................................................ 113</p>
<p> </p>
<p>7.3.4.2</p>
<p> </p>
<p>AUTOSTART / OsAlarmAutostart ................................................................ 114</p>
<p> </p>
<p>7.3.5</p>
<p> </p>
<p>Resource ..................................................................................................... 115</p>
<p> </p>
<p>7.3.6</p>
<p> </p>
<p>Event ........................................................................................................... 116</p>
<p> </p>
<p>7.3.7</p>
<p> </p>
<p>ISR .............................................................................................................. 116</p>
<p> </p>
<p>7.3.7.1</p>
<p> </p>
<p>UseSpecialFunctionName / OsIsrUseSpecialFunctionName ....................... 117</p>
<p> </p>
<p>7.3.7.2</p>
<p> </p>
<p>TIMING_PROTECTION / OsIsrTimingProtection ......................................... 118</p>
<p> </p>
<p>7.3.7.2.1</p>
<p> </p>
<p>LOCKINGTIME / OsIsrResourceLock ......................................................... 119</p>
<p> </p>
<p>7.3.7.3</p>
<p> </p>
<p>ISR Attributes concerning the Timing Analyzer ............................................ 119</p>
<p> </p>
<p>7.3.8</p>
<p> </p>
<p>COM ........................................................................................................... 120</p>
<p> </p>
<p>7.3.9</p>
<p> </p>
<p>NM .............................................................................................................. 120</p>
<p> </p>
<p>7.3.10</p>
<p> </p>
<p>APPMODE / OsAppMode............................................................................ 120</p>
<p> </p>
<p>7.3.11</p>
<p> </p>
<p>Application / OsApplication .......................................................................... 121</p>
<p> </p>
<p>7.3.11.1</p>
<p> </p>
<p>Trusted Functions ........................................................................................ 122</p>
<p> </p>
<p>7.3.12</p>
<p> </p>
<p>Scheduletable ............................................................................................. 123</p>
<p> </p>
<p>7.3.12.1</p>
<p> </p>
<p>AUTOSTART / OsScheduleTableAutostart .................................................. 123</p>
<p> </p>
<p>7.3.12.2</p>
<p> </p>
<p>EXPIRY_POINT / OsScheduleTableExpiryPoint .......................................... 124</p>
<p> </p>
<p>7.3.12.3</p>
<p> </p>
<p>Expiry point action ADJUST ........................................................................ 125</p>
<p> </p>
<p>7.3.12.4</p>
<p> </p>
<p>Expiry point action ACTIVATETASK ............................................................ 125</p>
<p> </p>
<p>7.3.12.5</p>
<p> </p>
<p>Expiry point action SETEVENT ................................................................... 126</p>
<p> </p>
<p>7.3.12.6</p>
<p> </p>
<p>LOCAL_TO_GLOBAL_TIME_SYNCHRONIZATION / </p>
<p>OsScheduleTableSync ................................................................................ 126</p>
<p> </p>
<p><b>8</b></p>
<p> </p>
<p><b>System Generation .................................................................................................... 128</b></p>
<p> </p>
<p>8.1</p>
<p> </p>
<p>Code Generator .......................................................................................... 128</p>
<p> </p>
<p>8.1.1</p>
<p> </p>
<p>Generated Files ........................................................................................... 128</p>
<p> </p>
<p>8.1.2</p>
<p> </p>
<p>Automatic Documentation ........................................................................... 128</p>
<p> </p>
<p>8.1.3</p>
<p> </p>
<p>Conditional Generation ................................................................................ 129</p>
<p> </p>
<p>8.1.4</p>
<p> </p>
<p>Generated files backup ............................................................................... 129</p>
<p> </p>
<p>8.2</p>
<p> </p>
<p>Application Template Generator .................................................................. 129</p>
<p> </p>
<p>8.3</p>
<p> </p>
<p>Compiler ...................................................................................................... 129</p>
<p> </p>
<p>8.3.1</p>
<p> </p>
<p>Include Paths .............................................................................................. 129</p>
<p> </p>
<p><b>9</b></p>
<p> </p>
<p><b>AUTOSAR Standard Compliance .............................................................................. 130</b></p>
<p> </p>
<p>9.1</p>
<p> </p>
<p>Deviations ................................................................................................... 130</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>10 / 136 </p>
<p>9.2</p>
<p> </p>
<p>Limitations ................................................................................................... 130</p>
<p> </p>
<p>9.2.1</p>
<p> </p>
<p>API Function OS_GetVersionInfo ................................................................ 130</p>
<p> </p>
<p>9.2.2</p>
<p> </p>
<p>Forcible Termination .................................................................................... 130</p>
<p> </p>
<p>9.2.3</p>
<p> </p>
<p>AUTOSAR Debug support ........................................................................... 130</p>
<p> </p>
<p>9.2.4</p>
<p> </p>
<p>Port Interface............................................................................................... 130</p>
<p> </p>
<p>9.2.5</p>
<p> </p>
<p>NULL Pointer Checks .................................................................................. 130</p>
<p> </p>
<p>9.2.6</p>
<p> </p>
<p>SafeContext specific limitations ................................................................... 130</p>
<p> </p>
<p><b>10</b></p>
<p> </p>
<p><b>Debugging Support .................................................................................................... 132</b></p>
<p> </p>
<p>10.1</p>
<p> </p>
<p>Kernel aware Debugging ............................................................................. 132</p>
<p> </p>
<p>10.2</p>
<p> </p>
<p>Version and Variant Coding ......................................................................... 132</p>
<p> </p>
<p><b>11</b></p>
<p> </p>
<p><b>Glossary and Abbreviations ...................................................................................... 134</b></p>
<p> </p>
<p>11.1</p>
<p> </p>
<p>Abbreviations .............................................................................................. 134</p>
<p> </p>
<p>11.2</p>
<p> </p>
<p>Terms .......................................................................................................... 135</p>
<p> </p>
<p><b>12</b></p>
<p> </p>
<p><b>Contact ........................................................................................................................ 136</b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>11 / 136 </p>
<p><b>Illustrations </b></p>
<p>Figure 2-1</p>
<p> </p>
<p>AUTOSAR 3.x Architecture Overview ....................................................... 15</p>
<p> </p>
<p>Figure 2-2</p>
<p> </p>
<p>AUTOSAR architecture ............................................................................. 15</p>
<p> </p>
<p>Figure 3-1</p>
<p> </p>
<p>Functional parts ........................................................................................ 18</p>
<p> </p>
<p>Figure 3-2</p>
<p> </p>
<p>Counter Macros ........................................................................................ 19</p>
<p> </p>
<p>Figure 7-1</p>
<p> </p>
<p>System overview of software parts .......................................................... 100</p>
<p> </p>
<p>Figure 7-2</p>
<p> </p>
<p>Relation between Physical Units, Counter Units and Driver Units ........... 112</p>
<p> </p>
<p><b> </b></p>
<p><b>Tables </b></p>
<p>Table 3-1 </p>
<p> </p>
<p>Supported SWS features .......................................................................... 17</p>
<p> </p>
<p>Table 3-2 </p>
<p> </p>
<p>Not supported SWS features .................................................................... 17</p>
<p> </p>
<p>Table 3-3 </p>
<p> </p>
<p>Interdependence between the OS attribute </p>
<p>TimingMeasurement</p>
<p> and </p>
<p>the task/ISR attribute </p>
<p>TIMING_PROTECTION</p>
<p> ........................................... 26</p>
<p> </p>
<p>Table 3-4 </p>
<p> </p>
<p>OSEK/AUTOSAR OS error numbers ........................................................ 33</p>
<p> </p>
<p>Table 3-5 </p>
<p> </p>
<p>Implementation specific error numbers ..................................................... 34</p>
<p> </p>
<p>Table 3-6 </p>
<p> </p>
<p>Error types ................................................................................................ 35</p>
<p> </p>
<p>Table 3-7 </p>
<p> </p>
<p>API functions of group Task Management / (1) ......................................... 35</p>
<p> </p>
<p>Table 3-8 </p>
<p> </p>
<p>Error numbers of group Task Management / (1) ........................................ 37</p>
<p> </p>
<p>Table 3-9 </p>
<p> </p>
<p>API functions of group Interrupt Handling / (2) .......................................... 38</p>
<p> </p>
<p>Table 3-10 </p>
<p> </p>
<p>Error numbers of group Interrupt Handling / (2) ........................................ 38</p>
<p> </p>
<p>Table 3-11 </p>
<p> </p>
<p>API functions of group Resource Management / (3) ................................. 39</p>
<p> </p>
<p>Table 3-12 </p>
<p> </p>
<p>Error numbers of group Resource Management / (3) ................................ 40</p>
<p> </p>
<p>Table 3-13 </p>
<p> </p>
<p>API functions of group Event Control / (4) ................................................. 40</p>
<p> </p>
<p>Table 3-14 </p>
<p> </p>
<p>Error numbers of group Event Control / (4) ............................................... 42</p>
<p> </p>
<p>Table 3-15 </p>
<p> </p>
<p>API functions of group Alarm Management / (5) ........................................ 42</p>
<p> </p>
<p>Table 3-16 </p>
<p> </p>
<p>Error numbers of group Alarm Management / (5) ...................................... 44</p>
<p> </p>
<p>Table 3-17 </p>
<p> </p>
<p>API functions of group Operating System Execution Control / (6) ............. 44</p>
<p> </p>
<p>Table 3-18 </p>
<p> </p>
<p>Error numbers of group Operating System Execution Control / (6) ........... 45</p>
<p> </p>
<p>Table 3-19 </p>
<p> </p>
<p>API functions of group Schedule Table Control / (7) .................................. 46</p>
<p> </p>
<p>Table 3-20 </p>
<p> </p>
<p>Error numbers of group Schedule Table Control / (7) ................................ 49</p>
<p> </p>
<p>Table 3-21 </p>
<p> </p>
<p>API functions of group Counter API / (8) ................................................... 49</p>
<p> </p>
<p>Table 3-22 </p>
<p> </p>
<p>Error numbers of group Counter API / (8) ................................................. 50</p>
<p> </p>
<p>Table 3-23 </p>
<p> </p>
<p>API functions of group Timing Protection and Timing Measurement / (9) .. 51</p>
<p> </p>
<p>Table 3-24 </p>
<p> </p>
<p>Error numbers of group Timing Protection and Timing Measurement / (9)  53</p>
<p> </p>
<p>Table 3-25 </p>
<p> </p>
<p>API functions of group Application API / (B) .............................................. 53</p>
<p> </p>
<p>Table 3-26 </p>
<p> </p>
<p>Error numbers of group Application API / (B)............................................. 54</p>
<p> </p>
<p>Table 3-27 </p>
<p> </p>
<p>API functions of group Semaphores / (C) .................................................. 54</p>
<p> </p>
<p>Table 3-28 </p>
<p> </p>
<p>Error numbers of group Semaphores / (C) ................................................ 55</p>
<p> </p>
<p>Table 3-29 </p>
<p> </p>
<p>API functions of group (Non-)TrustedFunctions (E) ................................... 55</p>
<p> </p>
<p>Table 3-30 </p>
<p> </p>
<p>Error numbers of group (Non-)TrustedFunctions (E) ................................. 56</p>
<p> </p>
<p>Table 4-1 </p>
<p> </p>
<p>Installed components ................................................................................ 57</p>
<p> </p>
<p>Table 4-2 </p>
<p> </p>
<p>System configuration and generation tools ............................................... 58</p>
<p> </p>
<p>Table 5-1 </p>
<p> </p>
<p>Files generated by code generator GENxxxx ............................................ 60</p>
<p> </p>
<p>Table 5-2 </p>
<p> </p>
<p>Variables generated into the file libconf ..................................................... 61</p>
<p> </p>
<p>Table 6-1 </p>
<p> </p>
<p>Standard API functions ............................................................................. 65</p>
<p> </p>
<p>Table 6-2 </p>
<p> </p>
<p>Vector API functions .................................................................................. 66</p>
<p> </p>
<p>Table 6-3 </p>
<p> </p>
<p>GetTaskMaxExecutionTime ...................................................................... 67</p>
<p> </p>
<p>Table 6-4 </p>
<p> </p>
<p>GetISRMaxExecutionTime ........................................................................ 67</p>
<p> </p>
<p>Table 6-5 </p>
<p> </p>
<p>GetTaskMaxBlockingTime ........................................................................ 68</p>
<p> </p>
<p>Table 6-6 </p>
<p> </p>
<p>GetISRMaxBlockingTime .......................................................................... 69</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>12 / 136 </p>
<p>Table 6-7 </p>
<p> </p>
<p>GetTaskMinInterArrivalTime ...................................................................... 70</p>
<p> </p>
<p>Table 6-8 </p>
<p> </p>
<p>GetISRMinInterArrivalTime ....................................................................... 70</p>
<p> </p>
<p>Table 6-9 </p>
<p> </p>
<p>EnableAllInterrupts ................................................................................... 71</p>
<p> </p>
<p>Table 6-10 </p>
<p> </p>
<p>DisableAllInterrupts ................................................................................... 72</p>
<p> </p>
<p>Table 6-11 </p>
<p> </p>
<p>ResumeAllInterrupts ................................................................................. 73</p>
<p> </p>
<p>Table 6-12 </p>
<p> </p>
<p>SuspendAllInterrupts ................................................................................ 74</p>
<p> </p>
<p>Table 6-13 </p>
<p> </p>
<p>ResumeOSInterrupts ................................................................................ 75</p>
<p> </p>
<p>Table 6-14 </p>
<p> </p>
<p>SuspendOSInterrupts ............................................................................... 76</p>
<p> </p>
<p>Table 6-15 </p>
<p> </p>
<p>GetResource ............................................................................................ 77</p>
<p> </p>
<p>Table 6-16 </p>
<p> </p>
<p>ReleaseResource ..................................................................................... 78</p>
<p> </p>
<p>Table 6-17 </p>
<p> </p>
<p>StartOS ..................................................................................................... 79</p>
<p> </p>
<p>Table 6-18 </p>
<p> </p>
<p>ShutdownOS ............................................................................................ 80</p>
<p> </p>
<p>Table 6-19 </p>
<p> </p>
<p>StartupHook .............................................................................................. 80</p>
<p> </p>
<p>Table 6-20 </p>
<p> </p>
<p>PreTaskHook ............................................................................................ 81</p>
<p> </p>
<p>Table 6-21 </p>
<p> </p>
<p>PostTaskHook ........................................................................................... 81</p>
<p> </p>
<p>Table 6-22 </p>
<p> </p>
<p>ErrorHook ................................................................................................. 82</p>
<p> </p>
<p>Table 6-23 </p>
<p> </p>
<p>ShutdownHook ......................................................................................... 83</p>
<p> </p>
<p>Table 6-24 </p>
<p> </p>
<p>ProtectionHook ......................................................................................... 83</p>
<p> </p>
<p>Table 6-25 </p>
<p> </p>
<p>UserPreISRHook ...................................................................................... 84</p>
<p> </p>
<p>Table 6-26 </p>
<p> </p>
<p>UserPostISRHook .................................................................................... 84</p>
<p> </p>
<p>Table 6-27 </p>
<p> </p>
<p>PreAlarmHook .......................................................................................... 85</p>
<p> </p>
<p>Table 6-28 </p>
<p> </p>
<p>OS_VTH_ACTIVATION ............................................................................ 86</p>
<p> </p>
<p>Table 6-29 </p>
<p> </p>
<p>OS_VTH_SETEVENT .............................................................................. 87</p>
<p> </p>
<p>Table 6-30 </p>
<p> </p>
<p>OS_VTH_TRANSFER_SEMA .................................................................. 88</p>
<p> </p>
<p>Table 6-31 </p>
<p> </p>
<p>OS_VTH_SCHEDULE .............................................................................. 89</p>
<p> </p>
<p>Table 6-32 </p>
<p> </p>
<p>OS_VTH_GOT_RES ................................................................................ 90</p>
<p> </p>
<p>Table 6-33 </p>
<p> </p>
<p>OS_VTH_REL_RES ................................................................................. 90</p>
<p> </p>
<p>Table 6-34 </p>
<p> </p>
<p>OS_VTH_REQ_SPINLOCK ...................................................................... 91</p>
<p> </p>
<p>Table 6-35 </p>
<p> </p>
<p>OS_VTH_GOT_SPINLOCK ...................................................................... 92</p>
<p> </p>
<p>Table 6-36 </p>
<p> </p>
<p>OS_VTH_REL_SPINLOCK ...................................................................... 92</p>
<p> </p>
<p>Table 6-37 </p>
<p> </p>
<p>OS_VTH_TOOK_SEMA ........................................................................... 93</p>
<p> </p>
<p>Table 6-38 </p>
<p> </p>
<p>OS_VTH_REL_SEMA .............................................................................. 94</p>
<p> </p>
<p>Table 6-39 </p>
<p> </p>
<p>OS_VTH_DISABLEDINT .......................................................................... 95</p>
<p> </p>
<p>Table 6-40 </p>
<p> </p>
<p>OS_VTH_ENABLEDINT ........................................................................... 95</p>
<p> </p>
<p>Table 6-41 API osCallNonTrustedFunction ........................................................................... 96</p>
<p> </p>
<p>Table 6-42 </p>
<p> </p>
<p>osCheckMPUAccess API .......................................................................... 97</p>
<p> </p>
<p>Table 6-43 </p>
<p> </p>
<p>ReadPeripheral API .................................................................................. 98</p>
<p> </p>
<p>Table 6-44 </p>
<p> </p>
<p>WritePeripheral API .................................................................................. 99</p>
<p> </p>
<p>Table 6-45 </p>
<p> </p>
<p>ModifyPeripheral API ................................................................................ 99</p>
<p> </p>
<p>Table 7-1 </p>
<p> </p>
<p>OS attributes........................................................................................... 105</p>
<p> </p>
<p>Table 7-2 </p>
<p> </p>
<p>Sub-attributes of ProtectionHookReaction = SELECTED ........................ 105</p>
<p> </p>
<p>Table 7-3 </p>
<p> </p>
<p>Sub-attributes of </p>
<p>TimingMeasurement</p>
<p> = </p>
<p>TRUE</p>
<p> .................................... 107</p>
<p> </p>
<p>Table 7-4 </p>
<p> </p>
<p>Sub-attributes of </p>
<p>PeripheralRegion</p>
<p> .................................................. 107</p>
<p> </p>
<p>Table 7-5 </p>
<p> </p>
<p>Task attributes ........................................................................................ 109</p>
<p> </p>
<p>Table 7-6 </p>
<p> </p>
<p>Sub-attributes of TASK-&gt;AUTOSTART=</p>
<p>TRUE</p>
<p> ......................................... 109</p>
<p> </p>
<p>Table 7-7 </p>
<p> </p>
<p>Sub-attributes of TASK-&gt; </p>
<p>TIMING_PROTECTION</p>
<p>=</p>
<p>TRUE</p>
<p> ......................... 110</p>
<p> </p>
<p>Table 7-8 </p>
<p> </p>
<p>Task attributes concerning the timing analyzer ......................................... 111</p>
<p> </p>
<p>Table 7-9 </p>
<p> </p>
<p>Attributes of COUNTER .......................................................................... 112</p>
<p> </p>
<p>Table 7-10 </p>
<p> </p>
<p>Attributes of ALARM ............................................................................... 113</p>
<p> </p>
<p>Table 7-11 </p>
<p> </p>
<p>Sub-attributes of ACTION = ACTIVATETASK .......................................... 114</p>
<p> </p>
<p>Table 7-12 </p>
<p> </p>
<p>Sub-attributes of ACTION = SETEVENT ................................................ 114</p>
<p> </p>
<p>Table 7-13 </p>
<p> </p>
<p>Sub-attributes of ACTION = ALARMCALLBACK ..................................... 114</p>
<p> </p>
<p>Table 7-14 </p>
<p> </p>
<p>Sub-attributes of AUTOSTART = </p>
<p>TRUE</p>
<p> ................................................... 115</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>13 / 136 </p>
<p>Table 7-15 </p>
<p> </p>
<p>Attributes of RESOURCE ....................................................................... 116</p>
<p> </p>
<p>Table 7-16 </p>
<p> </p>
<p>Sub-attributes of EVENT ........................................................................ 116</p>
<p> </p>
<p>Table 7-17 </p>
<p> </p>
<p>Attributes of ISR ..................................................................................... 117</p>
<p> </p>
<p>Table 7-18 </p>
<p> </p>
<p>Sub-attributes of UseSpecialFunctionname / </p>
<p>OsIsrUseSpecialFunctionName .............................................................. 117</p>
<p> </p>
<p>Table 7-19 </p>
<p> </p>
<p>Sub-attributes of </p>
<p>TIMING_PROTECTION</p>
<p> / OsIsrTimingProtection ........... 119</p>
<p> </p>
<p>Table 7-20 </p>
<p> </p>
<p>Sub-attributes of LOCKINGTIME / OsIsrResourceLock .......................... 119</p>
<p> </p>
<p>Table 7-21 </p>
<p> </p>
<p>ISR attributes concerning the timing analyzer ......................................... 120</p>
<p> </p>
<p>Table 7-22 </p>
<p> </p>
<p>Attributes of Appmode / OsAppMode ...................................................... 121</p>
<p> </p>
<p>Table 7-23 </p>
<p> </p>
<p>Attributes of Application / OsApplication .................................................. 122</p>
<p> </p>
<p>Table 7-24 </p>
<p> </p>
<p>Sub-attributes for trusted functions ......................................................... 122</p>
<p> </p>
<p>Table 7-25 </p>
<p> </p>
<p>Attributes of SCHEDULETABLE ............................................................. 123</p>
<p> </p>
<p>Table 7-26 </p>
<p> </p>
<p>Sub-attributes for auto start of a schedule table ...................................... 124</p>
<p> </p>
<p>Table 7-27 </p>
<p> </p>
<p>Sub-attributes of expiry points................................................................. 125</p>
<p> </p>
<p>Table 7-28 </p>
<p> </p>
<p>Sub-attributes of expiry point action ADJUST ......................................... 125</p>
<p> </p>
<p>Table 7-29 </p>
<p> </p>
<p>Sub-attributes of expiry point action ACTIVATETASK ............................. 125</p>
<p> </p>
<p>Table 7-30 </p>
<p> </p>
<p>Sub-attributes of expiry point action SETEVENT .................................... 126</p>
<p> </p>
<p>Table 7-31 </p>
<p> </p>
<p>Sub-attributes SCHEDULETABLE-&gt; </p>
<p>LOCAL_TO_GLOBAL_TIME_SYNCHRONIZATION = </p>
<p>TRUE</p>
<p> .................. 127</p>
<p> </p>
<p>Table 10-1 </p>
<p> </p>
<p>Bit-definitions of the variant coding, ucSysVariant1 ................................. 133</p>
<p> </p>
<p>Table 10-2 </p>
<p> </p>
<p>Bit-definitions of the variant coding, osSysVariant2 ................................. 133</p>
<p> </p>
<p>Table 10-3 </p>
<p> </p>
<p>Bit definitions of the variant coding, osOrtiVariant ................................... 133</p>
<p> </p>
<p>Table 11-1 </p>
<p> </p>
<p>Abbreviations .......................................................................................... 134</p>
<p> </p>
<p>Table 11-2 </p>
<p> </p>
<p>Terms ..................................................................................................... 135</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>14 / 136 </p>
<p><b>1 </b></p>
<p><b>Component History </b></p>
<p>The </p>
<p>component </p>
<p>history </p>
<p>gives </p>
<p>an </p>
<p>overview </p>
<p>over </p>
<p>the </p>
<p>important </p>
<p>milestones </p>
<p>that </p>
<p>are </p>
<p>supported in the different versions of the component. </p>
<p>This chapter is included in  any MICROSAR component documentation. For the OS, the </p>
<p>history on the intended level is not relevant as MICROSAR OS implements all mandatory </p>
<p>requirements of AUTOSAR OS. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>15 / 136 </p>
<p><b>2 </b></p>
<p><b>Introduction </b></p>
<p>This document describes the functionality, API and configuration of the general part of the </p>
<p>AUTOSAR BSW module OS as specified in [1]. </p>
<p> </p>
<p><b>Supported AUTOSAR Release: </b></p>
<p>4.0.3 </p>
<p><b>Supported Configuration Variants: </b></p>
<p>pre-compile </p>
<p><b>Vendor ID: </b></p>
<p>OS_VENDOR_ID </p>
<p>30 </p>
<p>decimal </p>
<p>(= Vector-</p>
<p>Informatik, according to </p>
<p>HIS) </p>
<p><b>Module ID: </b></p>
<p>OS_MODULE_ID   </p>
<p>1 decimal (according to </p>
<p>ref. [2]) </p>
<p> </p>
<p><b>2.1 </b></p>
<p><b>Architecture Overview </b></p>
<p>The following figure shows where the OS is located in the AUTOSAR architecture. </p>
<p> </p>
<p>Figure 2-1 </p>
<p>AUTOSAR 3.x Architecture Overview   </p>
<p>Figure 2-2 </p>
<p>AUTOSAR architecture </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>16 / 136 </p>
<p> </p>
<p>The MICROSAR OS is an operating system based on the AUTOSAR OS standard V5.0.0 </p>
<p>(ref. [1]) and on OSEK OS standard 2.2.3 (ref. [3]). </p>
<p>This  MICROSAR  OS  operating  system  is  a  real  time  operating  system,  which  was </p>
<p>specified </p>
<p>for </p>
<p>the </p>
<p>usage </p>
<p>in </p>
<p>electronic </p>
<p>control </p>
<p>units </p>
<p>on </p>
<p>a </p>
<p>range </p>
<p>of </p>
<p>small </p>
<p>to </p>
<p>large </p>
<p>microprocessors.  MICROSAR  OS  has  attributes  which </p>
<p>differ  from  commonly  known </p>
<p>operating systems and which allow a very efficient implementation even on systems with </p>
<p>low resources of RAM and ROM. </p>
<p>As a requirement, there is no dynamic creation of new tasks at runtime; all tasks have to </p>
<p>be </p>
<p>defined </p>
<p>before </p>
<p>compilation. </p>
<p>The </p>
<p>operating </p>
<p>system </p>
<p>has </p>
<p>no </p>
<p>dynamic </p>
<p>memory </p>
<p>management and there is no shell for the control of tasks by hand. </p>
<p>The  operating  system  and  the  application  are  compiled  and  linked  together  to  one  file, </p>
<p>which is loaded into an emulator or is burned into an EPROM or Flash EEPROM. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>17 / 136 </p>
<p><b>3 </b></p>
<p><b>Functional Description </b></p>
<p><b>3.1 </b></p>
<p><b>Features </b></p>
<p>The features listed in this chapter cover the complete functionality specified in [1]. </p>
<p>The  &quot;supported&quot; and  &quot;not  supported&quot; features  are  presented  in  the  following  two  tables. </p>
<p>For further information of not supported features, also see chapter 9. </p>
<p> </p>
<p>The following features described in [1] are supported: </p>
<p><b>Supported Feature </b></p>
<p>The Vector MICROSAR OS implements all mandatory features described in the chapter about </p>
<p>System Scalability within [1]. However, some minor restrictions apply, see chapter 9 in this </p>
<p>document. </p>
<p>Table 3-1  </p>
<p>Supported SWS features </p>
<p>The  following  features  described  in </p>
<p>[1]  are  supported  in  MultiCore  implementations. </p>
<p>However, </p>
<p>they </p>
<p>are </p>
<p>currently </p>
<p>not </p>
<p>described </p>
<p>in </p>
<p>this </p>
<p>document, </p>
<p>but </p>
<p>in </p>
<p>the </p>
<p>additional </p>
<p>documentation [4]. </p>
<p><b>Conditionally Supported Feature </b></p>
<p>MultiCore </p>
<p>Inter OSApplication Communication (IOC) </p>
<p>Table 3-2  </p>
<p>Not supported SWS features </p>
<p>The  OSEK  /  AUTOSAR  OS  specifications  leave  many  points  open  on  implementation. </p>
<p>Every OSEK / AUTOSAR OS implementation for a specific microcontroller has to define </p>
<p>the open points to achieve an optimal solution for the processor. The operating system has </p>
<p>to  fit  the  target  microprocessor  and  the  C-compiler.  The  programming  model  of  the  C-</p>
<p>compiler is as important as the hardware of the processor. </p>
<p><b>3.2 </b></p>
<p><b>Main Functions </b></p>
<p>The operating system is started by the application. The startup module (which is not part of </p>
<p>the operating system) calls the function main. In the main function, the user has to call the </p>
<p>API function </p>
<p>StartOS. StartOS</p>
<p> will initialize the operating system, install the interrupt </p>
<p>routine for the alarm handling, and then call the scheduler. </p>
<p>StartOS</p>
<p> will never return to </p>
<p>the main function. </p>
<p>The function of the scheduler is to evaluate the task with the highest priority in the </p>
<p>READY</p>
<p> </p>
<p>state and  call this task.  If  the task  was  previously  pre-empted  by  another higher  priority </p>
<p>task, the scheduler resumes the task. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>18 / 136 </p>
<p>The operating system is controlled by external events. External events can be events from </p>
<p>interrupt  routines,  from  the  alarm  management,  or  from  schedule  tables  (Alarms  and </p>
<p>schedule  tables  are  also  driven  by  interrupt  service  routines).  Therefore,  any  external </p>
<p>event will result in the change of task states. </p>
<p> </p>
<p>Figure 3-1 </p>
<p>Functional parts </p>
<p>Interrupt routines are under the control of the application programmer. An OSEK operating </p>
<p>system  allows  a  fast  and  efficient  interrupt  handling,  so  interrupts  have  a  short  latency </p>
<p>time. It is possible to call certain system functions from interrupt routines. It is necessary </p>
<p>that the operating system has knowledge of any existing interrupt routines. </p>
<p><b>3.2.1 </b></p>
<p><b>Timer and Alarms </b></p>
<p>All  time-based  actions  are  performed  in  OSEK  using  counters,  alarms,  and  schedule </p>
<p>tables.  Counters  are  part  of  the  kernel  and  are  incremented  by  a  specific  hardware </p>
<p>resource  or  by  means  of  the  system  service </p>
<p>IncrementCounter</p>
<p>.  In  case  of  a  time-</p>
<p>based counter, the counter is incremented periodically. Alarms and schedule tables have </p>
<p>fixed references to counters. MICROSAR OS supports up to 256 counters. </p>
<p>An  alarm,  if  activated,  has  a  certain  value.  If  the  referenced  counter  reaches  the  given </p>
<p>value,  a  defined  action  is  performed.  The  action  to  each  alarm  is  defined  by  the  OIL </p>
<p>Configurator and is compiled into the ROM. The alarm value is passed as a parameter to </p>
<p>the functions </p>
<p>SetRelAlarm</p>
<p> or </p>
<p>SetAbsAlarm.</p>
<p> </p>
<p>A schedule table, if activated, has a certain starting value. If the referred counter reaches </p>
<p>the  given  value,  the  first  defined  action  is  performed.  The  further  actions  are  defined </p>
<p>relative to this first action. These relative starting times are defined together with the action </p>
<p>by  the  OIL  Configurator  and  compiled  into  ROM.  The  starting  value  is  passed  as  a </p>
<p>parameter to the functions </p>
<p>StartScheduleTableRel </p>
<p>or </p>
<p>StartScheduleTableAbs</p>
<p>. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>19 / 136 </p>
<p><b>3.2.1.1 </b></p>
<p><b>Time Base </b></p>
<p><b>3.2.1.1.1 </b></p>
<p><b>Counter Macros </b></p>
<p>To  support  the  portability  of  OSEK,  application  alarm  related  functions,  for  example </p>
<p>SetRelAlarm</p>
<p>,  should  be  called  using  macros  for  the  calculation  of  ticks  based  on </p>
<p>millisecond or seconds: </p>
<p>SetRelAlarm (Alarm1, OS_xx2TICKS_&lt;CounterName&gt; (1200), OS_xx2TICKS_&lt;CounterName&gt; </p>
<p>(1200));  </p>
<p>The macros </p>
<p>OS_TICKS2xx_&lt;CounterName&gt;()</p>
<p> (whereas </p>
<p>xx</p>
<p> denotes </p>
<p>NS</p>
<p>, </p>
<p>US</p>
<p>, </p>
<p>MS</p>
<p> or </p>
<p>SEC</p>
<p>; </p>
<p>described by the AUTOSAR standard) may be used to convert tick values (as returned for </p>
<p>example  by </p>
<p>GetElapsedTime()</p>
<p>  and </p>
<p>GetCounterValue()</p>
<p>  )  to  into  a  second  based </p>
<p>timer </p>
<p>unit. </p>
<p>Additionally, </p>
<p>MICROSAR </p>
<p>OS </p>
<p>provides </p>
<p>the </p>
<p>inverse </p>
<p>macros </p>
<p>OS_xx2TICKS_&lt;CounterName&gt;()</p>
<p> for conversion into the opposite direction (see Figure </p>
<p>2-2).  </p>
<p> </p>
<p> </p>
<p>Figure 3-2 </p>
<p>Counter Macros </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Depending on the hardware settings, certain nanosecond times may not be </p>
<p>representable accurately. </p>
<p> </p>
<p>Therefore, if large times, very small times or very high precision is needed, use </p>
<p>AUTOSAR OS </p>
<p>OsTimeConstant</p>
<p> instead (see 7.3.3). </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>3.2.1.1.2 </b></p>
<p><b>Temporal Range of Alarms </b></p>
<p>The  temporal  range  of  an  alarm  depends  on  the  Counter,  which  drives  the  alarm.  The </p>
<p>important </p>
<p>configuration </p>
<p>attributes </p>
<p>here </p>
<p>are </p>
<p>OsSecondsPerTick </p>
<p>and </p>
<p>OsCounterMaxAllowedValue</p>
<p> (see 7.3.3). </p>
<p><b>3.2.1.2 </b></p>
<p><b>Timer Interrupt Routine </b></p>
<p>The timer interrupt routines are category 2 ISRs and are part of the operating system. The </p>
<p>configuration is done automatically by the OS using information that has to be defined in </p>
<p>the OIL Configurator. </p>
<p><b>3.2.1.2.1 </b></p>
<p><b>Counter API </b></p>
<p>To </p>
<p>obtain </p>
<p>the </p>
<p>counter </p>
<p>specific </p>
<p>limits </p>
<p>(e.g. </p>
<p>maxallowedvalue</p>
<p>) </p>
<p>the </p>
<p>function </p>
<p>GetAlarmBase</p>
<p> can be used. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>20 / 136 </p>
<p><b>1.1.1.1.1.1 Initialization </b></p>
<p>Former versions of osCAN and MICROSAR OS provided the API functions: </p>
<p>StatusType InitCounter&lt;CounterName&gt;(TickType ticks); </p>
<p>These functions have been removed, as they do not conform to the standardized counter </p>
<p>API described in [1]. Instead, counters are always initialized to 0 during </p>
<p>StartOS()</p>
<p>. </p>
<p><b>1.1.1.1.1.2 Read Counter </b></p>
<p>MICROSAR  OS  provides  the  API  functions  GetCounterValue  and  GetElapsedValue  as </p>
<p>defined by [1]. </p>
<p>Former versions of osCAN and MICROSAR OS provided the API functions: </p>
<p>TickType GetCounterValue&lt;CounterName&gt;(void); </p>
<p>These functions have been removed, as they do not conform to the standardized counter </p>
<p>API described in [1]. It is recommended to use the API function GetCounterValue defined </p>
<p>by AUTOSAR Standard instead. </p>
<p><b>1.1.1.1.1.3 Increment Counter </b></p>
<p>StatusType IncrementCounter(CounterType CounterName); </p>
<p>This function is the AUTOSAR OS standardized function to trigger a counter. </p>
<p><b> </b></p>
<p> </p>
<p><b>Example </b></p>
<p>The ISR that triggers the counter must be of category 2. </p>
<p>ISR(MyCounterISR) </p>
<p>{ </p>
<p>   IncrementCounter(MyCounter); </p>
<p>} </p>
<p> </p>
<p><b> </b></p>
<p>Former versions of osCAN and MICROSAR OS provided the API function </p>
<p>void CounterTrigger&lt;CounterName&gt;(void); </p>
<p>These functions have been removed, as they do not conform to the standardized counter </p>
<p>API described in [1]. It is recommended to use the API function IncrementCounter defined </p>
<p>by AUTOSAR Standard instead. </p>
<p><b>3.2.2 </b></p>
<p><b>Stack Handling </b></p>
<p><b>3.2.2.1 </b></p>
<p><b>Task Stack </b></p>
<p>Each task has its own stack. The task stack holds all local data and return addresses of </p>
<p>the task. In addition, the register context of the task is saved onto the stack if the task is </p>
<p>preempted.  If  the  task  is  transferred  to  the  running  state  again,  the  register  context  is </p>
<p>removed from the task stack to restore the previously saved registers. </p>
<p><b>3.2.2.2 </b></p>
<p><b>Interrupt Stack </b></p>
<p>The implementation of interrupt stacks depends on the hardware, and is described in ref. </p>
<p>[4].  </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>21 / 136 </p>
<p><b>3.2.2.3 </b></p>
<p><b>Stack Monitoring </b></p>
<p>MICROSAR OS SafeContext always initializes the last useable bytes of each stack with an </p>
<p>indicator value. </p>
<p>This indicator is then checked with each task switch or ISR exit. A change of the element </p>
<p>value  indicates  a  stack  overflow  by  the  task  or  ISR.  In  this  case,  the  system  calls  the </p>
<p>ErrorHook</p>
<p> (if configured), the </p>
<p>ShutdownHook </p>
<p>(if configured) and enters the shutdown </p>
<p>state. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>MICROSAR OS checks the indicator value only at task switches and on a return from </p>
<p>an ISR. Therefore, stack overflows are not detected immediately. Detection might be </p>
<p>delayed arbitrary in case of a stack overflow in a hook routine. Some implementations </p>
<p>of MICROSAR OS implement additional checks of the indicator value, see [4]. If </p>
<p>memory protection is configured, stack overflows in tasks and ISRs of non-trusted </p>
<p>applications are found immediately by the memory protection if the stack is followed by </p>
<p>an area with no access rights. </p>
<p><b> </b></p>
<p><b> </b></p>
<p>In case a stack fault is detected by memory protection, the ProtectionHook is called with </p>
<p>parameter </p>
<p>E_OS_PROTECTION_MEMORY. </p>
<p>If </p>
<p>a </p>
<p>stack </p>
<p>fault </p>
<p>is </p>
<p>detected </p>
<p>by </p>
<p>stack </p>
<p>monitoring, MICROSAR OS goes into shutdown after the ProtectionHook. </p>
<p> </p>
<p><b>3.2.2.4 </b></p>
<p><b>Stack Usage </b></p>
<p>If  StackUsageMeasurement  is  set  to </p>
<p>TRUE</p>
<p>,  the  OS  fills  all  available  stacks  with  the </p>
<p>indicator value 0xAA during StartOS (startup times will be slower). This allows measuring </p>
<p>the amount  of  stack  used  since  StartOS by  counting  the amount of  bytes  that have  not </p>
<p>been overwritten yet.  </p>
<p>The following function is available to determine the amount of used stack: </p>
<p>osuint16 osGetStackUsage(TaskType taskId) </p>
<p><b>&gt; </b> Argument: Task number </p>
<p><b>&gt; </b> Return value:  Maximum stack usage (bytes) by task since call of </p>
<p>StartOS()</p>
<p> </p>
<p>Additional implementations specific functions may be available. Please see the hardware </p>
<p>specific part of the documentation of this implementation [4]. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Dependent on the stack size, the measurement operation can take a long time. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>3.2.3 </b></p>
<p><b>Interrupt Handling </b></p>
<p>Implementation  specific  details  about  interrupt  handling  are  described  in  the  hardware </p>
<p>specific part of this implementation [4]. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>22 / 136 </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Knowledge about the interrupt handling is very important. If interrupt routines are used </p>
<p>it is essential to read this chapter. </p>
<p><b> </b></p>
<p> </p>
<p><b>3.2.3.1 </b></p>
<p><b>Interrupt Categories </b></p>
<p>The OSEK OS specification defines two groups of interrupts.  </p>
<p><b>3.2.3.1.1 </b></p>
<p><b>Category 1: </b></p>
<p>Interrupts  of  category  1  are  in  general  not allowed  to use API functions;  as  such,  these </p>
<p>routines can be programmed without restrictions and are completely independent from the </p>
<p>kernel. The programming conventions depend on the utilized compiler and assembler. </p>
<p>Category 1 interrupts can be enabled before call of </p>
<p>StartOS()</p>
<p>. If interrupts of category 1 </p>
<p>and 2 cannot be disabled separately, all interrupts must be disabled. </p>
<p>Interrupts of category  1 are allowed to call the interrupt API as an exception to the rule </p>
<p>presented  above.  If  the  interrupt API  is  used  and  the  category  1  interrupts  are  enabled </p>
<p>before the call of </p>
<p>StartOS</p>
<p>, the user has to take care about variable initialization of the </p>
<p>interrupt API, as described in chapter 3.2.3.2. </p>
<p><b>1.1.1.1.1.4 Exceptions and SC2, SC3, SC4 </b></p>
<p>According to the AUTOSAR-Standard, category 1 interrupts should be avoided with SC2, </p>
<p>SC3 </p>
<p>and </p>
<p>SC4. </p>
<p>MICROSAR </p>
<p>OS </p>
<p>does </p>
<p>not </p>
<p>allow </p>
<p>category </p>
<p>1 </p>
<p>interrupts </p>
<p>with </p>
<p>TimingProtection</p>
<p>. </p>
<p>Because </p>
<p>non-maskable </p>
<p>interrupts </p>
<p>need </p>
<p>to </p>
<p>be </p>
<p>configured </p>
<p>to </p>
<p>category  1,  some  MICROSAR  OS  implementations  allow  exceptions  even  with  timing </p>
<p>protection.  </p>
<p>The user may write &quot;normal&quot; interrupt code in an exception routine, which returns to the </p>
<p>application.  Please  note  that  this  sort  of  exception  routines  will  cause  the  exception </p>
<p>handler to add runtime to the account of the interrupted task or ISR. </p>
<p><b>3.2.3.1.2 </b></p>
<p><b>Category 2: </b></p>
<p>Interrupts of category 2 may use certain restricted API functions. Interrupts of category 2 </p>
<p>can be programmed as normal C functions using the macro </p>
<p>ISR(name).</p>
<p> The C function </p>
<p>is  called  by  the  operating  system. The  necessary  preparation for the  interrupt  routine  is </p>
<p>done automatically by a generated function. </p>
<p>ISR (AnInterruptRoutine) </p>
<p>{ </p>
<p> </p>
<p>   /* code with API calls */ </p>
<p> </p>
<p>} </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Category 2 interrupts must be disabled until call of </p>
<p>StartOS()</p>
<p>! This also applies for </p>
<p>the timer interrupts, i.e. this interrupt must be stopped by the user at a software reset. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>23 / 136 </p>
<p>To ensure data consistency, the operating system needs to disable category 2 </p>
<p>interrupts during critical sections of code. Therefore, applications must not use non-</p>
<p>maskable interrupts as category 2 interrupts. </p>
<p><b> </b></p>
<p> </p>
<p><b>3.2.3.2 </b></p>
<p><b>Usage of the Interrupt API before StartOS </b></p>
<p>The usage of the interrupt API functions is in general allowed before the operating system </p>
<p>is started. The affected functions are:  </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>DisableAllInterupts, EnableAllInterrupts </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>SuspendAllInterrupts, ResumeAllInterrupts </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>SuspendOSInterrupts, ResumeOSInterrupts </p>
<p>However,  these  functions  use  some  internal  variables  that  have  to  be  initialized  to  zero </p>
<p>before  the  first  call  of  the  interrupt  API.  Typically,  this  initialization  is  performed  by  the </p>
<p>startup code (which might be delivered with the compiler). In case no startup code is used, </p>
<p>the </p>
<p>function </p>
<p>osInitialize()</p>
<p> </p>
<p>needs </p>
<p>to </p>
<p>be </p>
<p>called. </p>
<p>osInitialize</p>
<p> </p>
<p>initializes </p>
<p>the </p>
<p>variables which are used in the interrupt API. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>24 / 136 </p>
<p><b>3.2.4 </b></p>
<p><b>Timing Protection </b></p>
<p>The  timing  protection  is  implemented  in  the  Scalability  Classes  2  and  4.  This  chapter </p>
<p>provides some hints on the functionality according to the AUTOSAR OS standard [1] and </p>
<p>describes additional functionality provided by Vector MICROSAR OS. To enable the timing </p>
<p>protection of a task or ISR, the OIL-attribute </p>
<p>TIMING_PROTECTION</p>
<p> of the respective task </p>
<p>or ISR needs to be configured, as described in chapters 7.3.2.2 and 7.3.7.2 . (AUTOSAR </p>
<p>XML: OsTaskTimingProtection/OsIsrTimingProtection). </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>The runtime of all tasks and ISRs is observed, however parts of the time for task switch </p>
<p>and interrupt entry/exit cannot be monitored by the timing protection. Therefore, some </p>
<p>extra time for task switches and interrupt entry/exit needs to be considered in the </p>
<p>configuration of the timing protection. </p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Timing Protection is implemented with interrupts. If the application manually disables </p>
<p>interrupts anywhere, the timing protection cannot work as expected. In order to enable </p>
<p>and disable interrupts, the application <b>must </b>use the following API functions: </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>DisableAllInterupts, EnableAllInterrupts </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>SuspendAllInterrupts, ResumeAllInterrupts </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>SuspendOSInterrupts, ResumeOSInterrupts</p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>The timing protection works very precise. However, if an OS API function is called by a </p>
<p>task/ISR, the OS may enter a critical section; if a timing protection violation is detected </p>
<p>while the system is in a critical section, the call of the protection hook may be delayed </p>
<p>until the end of the critical section. Note, that critical sections in AUTOSAR OS are very </p>
<p>short. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>3.2.4.1 </b></p>
<p><b>Reaction on Protection Failure </b></p>
<p>The AUTOSAR specification describes different possibilities how to react to a protection </p>
<p>violation. </p>
<p>In </p>
<p>SafeContext </p>
<p>implementations, </p>
<p>reaction </p>
<p>to </p>
<p>such  a </p>
<p>situation </p>
<p>is </p>
<p>limited </p>
<p>to </p>
<p>Shutdown. </p>
<p><b>3.2.4.2 </b></p>
<p><b>Timing Measurement </b></p>
<p>MICROSAR  OS  is  not  only  able  to  provide  timing  protection  but  allows  using  the  same </p>
<p>functionality  for  timing  measurement.  If  timing  measurement  is  performed  for  a  specific </p>
<p>task or ISR, the OS measures the following times for that task or ISR: </p>
<p><b>&gt; </b> the maximum run time since StartOS </p>
<p><b>&gt; </b> the maximum locking times for resources and interrupts since StartOS </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>25 / 136 </p>
<p><b>&gt; </b> the minimum time distance between two arrivals since StartOS  </p>
<p>The debugger can read the result of the timing measurement via ORTI. Alternatively, the </p>
<p>application may use the timing measurement API as described in chapter 6.4. </p>
<p>The OS attribute </p>
<p>TimingMeasurement</p>
<p> and the task/ISR attribute </p>
<p>TIMING_PROTECTION</p>
<p> </p>
<p>are provided to setup timing protection and measurement. </p>
<p>The hardware timers and internal data structures to store measured times are limited in </p>
<p>size. When  this  limit  is  exceeded  by  any  measured  time  (e.g.  of a  resource  or interrupt </p>
<p>lock), the ErrorHook function is called and the system goes into shutdown state. </p>
<p><b>3.2.4.2.1 </b></p>
<p><b>Timing measurement configuration for a specific task/ISR </b></p>
<p>Timing  measurement  can  be  configured  individually  for  each  task  and  ISR.  As  timing </p>
<p>protection </p>
<p>requires </p>
<p>the </p>
<p>OS </p>
<p>to </p>
<p>measure </p>
<p>the </p>
<p>timing </p>
<p>values, </p>
<p>timing </p>
<p>measurement </p>
<p>is </p>
<p>performed for all tasks and ISRs that have timing protection configured by means of the </p>
<p>attribute </p>
<p>TIMING_PROTECTION</p>
<p>.  By  selecting  the  sub  attribute  OnlyMeasure,  the  OS </p>
<p>disables the timing protection but still measures the timing values. Please note that this </p>
<p>configuration might be overridden by means of the global configuration, described in the </p>
<p>next chapter. </p>
<p><b>3.2.4.2.2 </b></p>
<p><b>Global configuration of timing measurement </b></p>
<p>In order to save configuration time, the timing measurement can be configured globally for </p>
<p>all  tasks  and  ISRs.  MICROSAR  OS  provides  the  OIL-attribute </p>
<p>TimingMeasurement</p>
<p> </p>
<p>(AUTOSAR  XML: </p>
<p>OsOSTimingMeasurement</p>
<p>)  for  that  purpose.  That  attribute  provides </p>
<p>the possibilities to: </p>
<p><b>&gt; </b> Disable the timing measurement globally. This is an optimization to save memory and </p>
<p>runtime of the timing measurement. Please set the attribute </p>
<p>TimingMeasurement</p>
<p> to </p>
<p>FALSE</p>
<p> (deselect it) for this configuration. </p>
<p><b>&gt; </b> Collect timing data for all tasks and ISRS. The collected timing values can be used to </p>
<p>perform scheduleability analysis and to set up the timing protection later on. For this </p>
<p>configuration, please set the attribute </p>
<p>TimingMeasurement</p>
<p> to </p>
<p>TRUE</p>
<p> (select it) and </p>
<p>choose </p>
<p>OnlyMeasureAll</p>
<p> for the value of the sub attribute GlobalConfig.  </p>
<p><b>&gt; </b> Perform timing measurement as configured for the task or ISR. Set the attribute </p>
<p>TimingMeasurement</p>
<p> to </p>
<p>TRUE</p>
<p> (select it) and select </p>
<p>AsSelected</p>
<p> for the value of the </p>
<p>subattribute GlobalConfig to achieve this. </p>
<p><b>&gt; </b> Ignore the task/ISR attribute OnlyMeasure (perform timing measurement and protection </p>
<p>as if this attribute was set to </p>
<p>FALSE</p>
<p>). For this configuration, please set the attribute </p>
<p>TimingMeasurement</p>
<p> to </p>
<p>TRUE</p>
<p> (select the attribute) and select </p>
<p>ProtectAndMeasureAll</p>
<p> for the value of the subattribute GlobalConfig. </p>
<p>The chapter 7.3.2.2 provides a description of the attribute </p>
<p>TIMING_PROTECTION</p>
<p> for tasks </p>
<p>while </p>
<p>chapter </p>
<p>7.3.7.2 </p>
<p>provides </p>
<p>the </p>
<p>respective </p>
<p>description </p>
<p>for </p>
<p>ISRs. </p>
<p>Chapter </p>
<p>7.3.1.4 </p>
<p>provides a description of the attribute </p>
<p>TimingMeasurement</p>
<p>. The table below documents </p>
<p>the  interdependence  between  the  OS-attribute  TimingMasurement  and  the  task/ISR-</p>
<p>Attribute </p>
<p>TIMING_PROTECTION</p>
<p>. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>26 / 136 </p>
<p> </p>
<p><b>OS </b></p>
<p><b>TASK/ISR </b></p>
<p><b> </b></p>
<p><b>                   </b></p>
<p><b>TIMING_PROTECTION </b></p>
<p><b>Timing-</b></p>
<p><b>Measuremen</b></p>
<p><b>t </b></p>
<p><b>Global-</b></p>
<p><b>Config </b></p>
<p><b>FALSE </b></p>
<p><b>TRUE </b></p>
<p><b> </b></p>
<p><b>OnlyMeasure </b></p>
<p><b> </b></p>
<p><b>FALSE </b></p>
<p><b>TRUE </b></p>
<p><b>FALSE</b></p>
<p>1</p>
<p><b> </b></p>
<p><b> </b></p>
<p>No timing protection, </p>
<p>no timing </p>
<p>measurement, </p>
<p>Timing protection but no </p>
<p>timing measurement </p>
<p>Timing protection but no </p>
<p>timing measurement, warning </p>
<p>as the sub attribute </p>
<p>OnyMeasure is overridden </p>
<p><b>TRUE </b></p>
<p><b>Only-</b></p>
<p><b>Measure-</b></p>
<p><b>All </b></p>
<p>No timing protection </p>
<p>but timing </p>
<p>measurement </p>
<p>No timing protection but </p>
<p>timing measurement, </p>
<p>warning as the sub </p>
<p>attribute OnlyMeasure is </p>
<p>overridden </p>
<p>No timing protection but </p>
<p>timing measurement </p>
<p><b>AsSelecte</b></p>
<p><b>d </b></p>
<p>No timing protection </p>
<p>and no timing </p>
<p>measurement </p>
<p>Timing protection and </p>
<p>measurement </p>
<p>No Timing protection but </p>
<p>timing measurement </p>
<p><b>ProtectAn</b></p>
<p><b>d-</b></p>
<p><b>MeasureAl</b></p>
<p><b>l </b></p>
<p>No timing protection </p>
<p>but timing </p>
<p>measurement </p>
<p>Timing protection and </p>
<p>measurement </p>
<p>Timing protection and </p>
<p>measurement, warning as the </p>
<p>sub attribute OnlyMeasure is </p>
<p>overridden. </p>
<p>Table 3-3  </p>
<p>Interdependence between the OS attribute </p>
<p>TimingMeasurement</p>
<p> and the task/ISR attribute </p>
<p>TIMING_PROTECTION</p>
<p> </p>
<p><b>3.2.4.3 </b></p>
<p><b>Hook functions </b></p>
<p>The runtime of the hook functions PreTaskHook and PostTaskHook (Chapters  6.6.2 and </p>
<p>6.6.3) is considered to belong to the runtime of the currently active task. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Depending on the implementation, the execution of the ProtectionHook might be </p>
<p>delayed until the PreTaskHook or PostTaskHook has finished. In case of a protection </p>
<p>violation during the PostTaskHook while a task state change into the states </p>
<p>SUSPENDED or WAITING, the call of the ProtectionHook gets lost. </p>
<p>Therefore, the PreTaskHook and the PostTaskHook are allowed for debugging </p>
<p>purposes only. They must be disabled in production code, see [9]. </p>
<p><b> </b></p>
<p><b> </b></p>
<p>The runtime of the hook functions UserPreIsrHook and UserPostIsrHook (Chapters 6.6.7 </p>
<p>and 6.6.8) is considered to belong to the runtime of the currently active ISR. </p>
<p><b>3.2.5 </b></p>
<p><b>Memory Protection </b></p>
<p>MICROSAR OS uses the MPU of the microcontroller to implement memory protection as </p>
<p>described in [1]. Former versions of MICROSAR OS fulfilled the AUTOSAR requirement </p>
<p>OS195  and  prevented  write  access  to  Task/ISR  private  data  areas  even  within </p>
<p>an </p>
<p>                                            </p>
<p>1</p>
<p> Optimization: The timing measurement API is unavailable </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>27 / 136 </p>
<p>OSApplication. This behaviour is defined as optional by AUTOSAR and not implemented in </p>
<p>most current versions of MICROSAR OS. It is explicitly mentioned in [5] if supported. </p>
<p><b>3.2.6 </b></p>
<p><b>Schedule Tables </b></p>
<p>MICROSAR OS implements schedule tables as defined by the AUTOSAR standard. The </p>
<p>document  [1]  provides  the  base  description  of  schedule  tables  and  their  usage.  This </p>
<p>chapter is meant as an extension that clarifies and corrects some points, provides details </p>
<p>about points left open and describes corrections and extensions by MICROSAR OS.  </p>
<p>AUTOSAR  defines  schedule  tables  for  all  scalability  classes,  but  synchronization  to  a </p>
<p>global time only for SC2 and SC4. MICROSAR OS offers some additional error checking </p>
<p>to the AUTOSAR standard. </p>
<p><b>3.2.6.1 </b></p>
<p><b>Synchronization </b></p>
<p>In </p>
<p>SC2 </p>
<p>and </p>
<p>SC4 </p>
<p>or </p>
<p>the </p>
<p>High-Resolution </p>
<p>Schedule </p>
<p>Tables </p>
<p>option, </p>
<p>it </p>
<p>is </p>
<p>possible </p>
<p>to </p>
<p>synchronize a schedule table to a global time source. The schedule table must be marked </p>
<p>with the OIL attribute </p>
<p>LOCAL_TO_GLOBAL_TIME_SYNCHRONIZATION</p>
<p>.  </p>
<p><b>3.2.6.1.1 </b></p>
<p><b>Starting a synchronizable Schedule Table </b></p>
<p>One </p>
<p>way </p>
<p>to </p>
<p>start </p>
<p>a </p>
<p>synchronizable </p>
<p>schedule </p>
<p>table </p>
<p>is </p>
<p>to </p>
<p>use </p>
<p>the </p>
<p>functions </p>
<p>StartScheduleTableRel(Tablename, TimeOffset)</p>
<p> </p>
<p>and </p>
<p>StartScheduleTableAbs(Tablename, Time)</p>
<p>. The time parameters refer to the local </p>
<p>time and not to the global time. It is assumed that the schedule table will not have an offset </p>
<p>to  global  time:  when  synchronization  starts,  the  start  of  the  schedule  table  is  moved  to </p>
<p>global time zero. Note that the schedule table always starts at the stated start time. A call </p>
<p>of </p>
<p>SyncScheduleTable</p>
<p>  does  not  influence  this  start  time.  Synchronization  starts  after </p>
<p>execution of the first expiry point. </p>
<p>The recommended way to start a synchronizable schedule table is to use the combination </p>
<p>of </p>
<p>StartScheduleTableSynchron(Tablename</p>
<p>) and </p>
<p>SyncScheduleTable().</p>
<p> </p>
<p>The </p>
<p>first expiry point is executed at global time 0. The schedule table starts execution after a </p>
<p>global time is available, i.e. after calling </p>
<p>SyncScheduleTable()</p>
<p> for the schedule table. If </p>
<p>SyncScheduleTable()</p>
<p> is never called for the schedule table, the schedule table is </p>
<p>never executed. The following algorithm describes a possibility to set up a timeout:  </p>
<p>Set </p>
<p>up </p>
<p>an </p>
<p>alarm </p>
<p>to </p>
<p>the </p>
<p>timeout </p>
<p>time. </p>
<p>When </p>
<p>the </p>
<p>alarm </p>
<p>expires </p>
<p>and </p>
<p>GetScheduleTableStatus()</p>
<p>  indicates  that  the  schedule  table  is  still  waiting,  call </p>
<p>SyncScheduleTable()</p>
<p> </p>
<p>with </p>
<p>an </p>
<p>arbitrary </p>
<p>time. </p>
<p>Note: </p>
<p>if </p>
<p>the </p>
<p>call </p>
<p>to </p>
<p>SyncScheduleTable()</p>
<p> is done in an interrupt, it may occur between the two API calls, </p>
<p>and thus gets overridden by the arbitrary time. </p>
<p><b>3.2.6.1.2 </b></p>
<p><b>Autostart </b></p>
<p>For an automatic start of a schedule table on startup of the OS, the attribute AUTOSTART </p>
<p>must be set. The sub-attribute </p>
<p>TYPE</p>
<p> defines how the start is performed. The possibilities </p>
<p>are: </p>
<p>ABSOLUT</p>
<p>, </p>
<p>RELATIVE</p>
<p>  and </p>
<p>SYNCHRON</p>
<p>.  These  types  of  autostart  are  similar  to  the </p>
<p>normal </p>
<p>start </p>
<p>of </p>
<p>a </p>
<p>schedule </p>
<p>table </p>
<p>using </p>
<p>StartScheduleTableAbs</p>
<p>, </p>
<p>StartScheduleTableRel</p>
<p> </p>
<p>or </p>
<p>StartScheduleTableSynchron</p>
<p>. </p>
<p>For </p>
<p>ABSOLUT</p>
<p> </p>
<p>and </p>
<p>RELATIVE</p>
<p>, an absolute or relative start time needs to be provided. In case of </p>
<p>SYNCHRON</p>
<p>, </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>28 / 136 </p>
<p>the schedule table starts after </p>
<p>SynchScheduleTable</p>
<p> has been called and the global time </p>
<p>reaches zero.  </p>
<p>Note, that just like for </p>
<p>StartScheduleTableSynchron(),</p>
<p> the schedule table will wait </p>
<p>forever if </p>
<p>SyncScheduleTable()</p>
<p> is never called.  </p>
<p><b>3.2.6.1.3 </b></p>
<p><b>Suspending a Schedule Table and keeping its Synchronization </b></p>
<p>The AUTOSAR standard does not define a way to suspend the execution of a schedule </p>
<p>table  and  keep  its  synchronization  for  later  restart.  The  suggested  approach  is  to  use </p>
<p>NextScheduleTable()</p>
<p> to append a schedule table that effectively does nothing.  </p>
<p>Currently, AUTOSAR  does  not  define  a  way  to  retrieve  the  internal  schedule  table  time </p>
<p>(neither the currently estimated global time nor the time relative to the first expiry point of </p>
<p>the schedule table).  </p>
<p><b>3.2.6.1.4 </b></p>
<p><b>Providing a Global Time </b></p>
<p>The current global time is handed to the schedule table via </p>
<p>SyncScheduleTable()</p>
<p>.</p>
<p> If a </p>
<p>deviation  of  the  schedule  table  to  the  global  time  is  found,  the  schedule  table  starts  to </p>
<p>synchronize at the next expiry point that allows synchronization. </p>
<p>The  global  time  must  be  a  continuous  range  of  integers:  So  e.g.  FlexRay’s  time  tuple </p>
<p>(cycle, macroticks) cannot directly be used as global time, but must be converted. </p>
<p>The provided global time must have the same resolution as the local time and the same </p>
<p>period as the schedule table time (i.e. the </p>
<p>LENGTH</p>
<p> of the schedule table). If this is not the </p>
<p>case, it must be converted before being handed to </p>
<p>SyncScheduleTable()</p>
<p>. </p>
<p><b> </b></p>
<p> </p>
<p><b>Example </b></p>
<p>Converting the FlexRay time: </p>
<p>Be </p>
<p>gMacroPerCycle </p>
<p>the number of </p>
<p>macroticks </p>
<p>per cycle, </p>
<p>cycle </p>
<p>the current </p>
<p>cycle number, </p>
<p>macroticks </p>
<p>the current macrotick number and </p>
<p>f</p>
<p> is the factor to </p>
<p>convert the FlexRay tick length the HW counter tick length: </p>
<p> </p>
<p>GlobalTime = (gMacroPerCycle * cycle + macroticks) * f </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>3.2.6.1.5 </b></p>
<p><b>Exact Synchronization </b></p>
<p>There  is  always  a  time  span  between  reading  the  global  time  and  handing  it  to  the </p>
<p>operating system. Therefore, synchronization is never absolutely exact.  </p>
<p>If  an  interrupt  interferes,  the  time  span  may  be  unexpectedly  large.  While  this  may  be </p>
<p>ignorable </p>
<p>if </p>
<p>the </p>
<p>resolution </p>
<p>is </p>
<p>large </p>
<p>compared </p>
<p>with </p>
<p>the </p>
<p>interrupt </p>
<p>running </p>
<p>times, </p>
<p>it </p>
<p>is </p>
<p>noticeable  when  using  a  fine  grained  global  time,  for  example  in  conjunction  with  High-</p>
<p>Resolution Schedule Tables, or if some (higher prior) interrupts have long running times. It </p>
<p>is desirable to be undisturbed by (higher prior) interrupts during synchronization.  </p>
<p>The  AUTOSAR  Standard  demands,  that  calling  any  API  functions  is  not  allowed  in </p>
<p>between function pairs </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>29 / 136 </p>
<p>DisableAllInterrupts/EnableAllInterrupts, </p>
<p>SuspendAllInterrupts/ResumeAllInterrupts, </p>
<p>SuspendOSInterrupts/ResumeOSInterrupts. </p>
<p>MICROSAR </p>
<p>OS </p>
<p>makes </p>
<p>an </p>
<p>exception </p>
<p>from </p>
<p>the </p>
<p>standard </p>
<p>in </p>
<p>this </p>
<p>point: </p>
<p>SyncScheduleTable()</p>
<p> can be called in between these function pairs. </p>
<p>Therefore, a Sync procedure may look like the following example: </p>
<p>DisableAllInterrupts(); </p>
<p>now=getCurrentGlobalTime(); </p>
<p>SyncScheduleTable(MyScheduleTable, now); </p>
<p>EnableAllInterrupts(); </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>This is unnecessary if </p>
<p>SyncScheduleTable()</p>
<p> is called from an interrupt which does </p>
<p>not allow nesting.  </p>
<p>Also note, that </p>
<p>SuspendAllInterrupts()/DisableAllInterrupts()</p>
<p> still allow </p>
<p>timing protection interrupts (if timing protection is used). </p>
<p><b> </b></p>
<p> </p>
<p><b>3.2.6.1.6 </b></p>
<p><b>Limits of the Synchronization Algorithm </b></p>
<p>The  synchronization  algorithm  as  described  by  the  AUTOSAR  standard  only  corrects </p>
<p>deviations of the past – it does not make assumptions about deviations of the present or </p>
<p>the  future.  Differences  in  clock  speed  (between  local  time  and  global  time)  are  not </p>
<p>completely compensated. </p>
<p><b>Simplified </b></p>
<p><b>synchronization </b></p>
<p><b>algorithm: </b></p>
<p>When </p>
<p>SyncScheduleTable</p>
<p> </p>
<p>is </p>
<p>called, </p>
<p>the </p>
<p>difference between the local schedule table time and the provided global time is computed </p>
<p>and stored internally. Nothing more happens until an expiry point expires. Then, the times </p>
<p>between subsequent expiry points are adapted. The adaptation stops once the computed </p>
<p>deviation  is  compensated  or  a  new  global  time  is  provided.  In  case  new  deviations </p>
<p>between  the  global  and  local  time  occur,  they  are  considered  after  the  next  call  of </p>
<p>SyncScheduleTable</p>
<p> in the same way as just described. </p>
<p>As a result of this algorithm, a permanent deviation in the speed of global and local clock </p>
<p>might not be compensated completely.  </p>
<p><b> </b></p>
<p> </p>
<p><b>Example </b></p>
<p>The local schedule table time</p>
<p>2</p>
<p> runs 10 % slower then the global time. Whenever the </p>
<p>global time reaches a multiple of 100, the function </p>
<p>SyncScheduleTable</p>
<p> is called to </p>
<p>provide the global time to the schedule table. Both times start simultaneously at zero. </p>
<p>When the global time reaches 100, the local time is 90 because of the 10 % difference. </p>
<p>SyncScheduleTable</p>
<p> is called, and computes a difference of 10. We assume now </p>
<p>that the difference is compensated until the next call of </p>
<p>SyncScheduleTable</p>
<p> occurs. </p>
<p>The local time is then: 90+10+90=190 while the global time is 200. Again we have the </p>
<p>same difference, so 10 needs to be corrected. The same occurs for all subsequent </p>
<p>calls of </p>
<p>SyncScheduleTable</p>
<p>, too. </p>
<p>                                            </p>
<p>2</p>
<p> The local time is based on the MCU’s internal clock. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>30 / 136 </p>
<p><b> </b></p>
<p><b> </b></p>
<p>Although the computed difference between current time values of global and local time is </p>
<p>corrected,  the  same  difference  occurs  in  the  next  synchronization  step.  However,  using </p>
<p>synchronization </p>
<p>the </p>
<p>deviation </p>
<p>stays </p>
<p>constant. </p>
<p>Without </p>
<p>synchronization, </p>
<p>it </p>
<p>would </p>
<p>accumulate.  </p>
<p><b>3.2.6.1.7 </b></p>
<p><b>Details about using NextScheduleTable </b></p>
<p>The AUTOSAR standard leaves open certain details of using </p>
<p>NextScheduleTable</p>
<p> with </p>
<p>synchronizable </p>
<p>schedule </p>
<p>tables. </p>
<p>The </p>
<p>following </p>
<p>describes </p>
<p>the </p>
<p>implementation </p>
<p>of </p>
<p>NextScheduleTable</p>
<p> MICROSAR OS.  </p>
<p>If two schedule tables are chained using the API function </p>
<p>NextScheduleTable()</p>
<p>, the </p>
<p>second </p>
<p>schedule </p>
<p>table </p>
<p>takes </p>
<p>over </p>
<p>the </p>
<p>synchronized </p>
<p>schedule </p>
<p>table </p>
<p>time </p>
<p>of </p>
<p>the </p>
<p>predecessor</p>
<p>3</p>
<p>.  </p>
<p>When  switching  to  a  schedule  table  that  does  not  allow  synchronization,  the  remaining </p>
<p>difference  to  the  global  time  is  saved:  upon  switching  to  a  schedule  table  that  allows </p>
<p>synchronization it will immediately start to synchronize. </p>
<p><b>3.2.6.1.8 </b></p>
<p><b>Concurrent Actions </b></p>
<p>If a task is activated at an expiry point, and an event for this task is set at the same expiry </p>
<p>point,  always  all  tasks  will be  activated before  events are  set.  However,  if two  schedule </p>
<p>tables are using the same counter; one of these schedule tables activates a task and the </p>
<p>other  schedule  table  sets  an  event  for  this  task  at  the  same  time,  the  behaviour  is </p>
<p>undefined. </p>
<p><b>3.2.6.2 </b></p>
<p><b>High-Resolution Schedule Tables  </b></p>
<p>AUTOSAR schedule tables are driven by a counter (hardware or software), and thus offer </p>
<p>the same resolution. While it is possible to configure a higher resolution for the counter, </p>
<p>this </p>
<p>increases </p>
<p>also </p>
<p>the </p>
<p>interrupt </p>
<p>load. </p>
<p>High-Resolution </p>
<p>Schedule </p>
<p>Tables </p>
<p>offer </p>
<p>a </p>
<p>microsecond  resolution  or  better</p>
<p>4</p>
<p>  without  unnecessary  additional  interrupt  load: At  each </p>
<p>expiry  point,  a  timer  interrupt  is  reprogrammed  so  it  will  be  reactivated  exactly  at  the </p>
<p>following expiry point</p>
<p>5</p>
<p>.  </p>
<p>Note  that  high  resolution  schedule  tables  are  not  supported  by  all  MICROSAR  OS </p>
<p>implementations. </p>
<p>It is possible to use standard schedule tables and High-Resolution Schedule Tables at the </p>
<p>same  time.  High-Resolution  Schedule  Tables  support  the  full  AUTOSAR  API,  including </p>
<p>synchronization (see 3.2.5.1) and are particularly suited for FlexRay. </p>
<p>                                            </p>
<p>3</p>
<p> Therefore, if the two schedule tables have a different LENGTH, switching from one to the other is undefined: it may work, but may </p>
<p>also lead to unexpected results. This is not checked at runtime (and cannot be checked at generation time). </p>
<p>4</p>
<p> The actually achievable best resolution depends on the hardware, hardware settings and application </p>
<p>5</p>
<p> while the activation of the schedule table handler is done as exact as the underlying counter (the hardware) allows it, a certain time </p>
<p>span will expire until the expiry point is actually processed. Interrupts, non-preemptive tasks and interrupt disabling times impose </p>
<p>an additional jitter. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>31 / 136 </p>
<p><b>3.2.6.2.1 </b></p>
<p><b>Setup </b></p>
<p>To  create  a  High-Resolution  Schedule  Table,  create  a  Schedule  Table  and  choose  any </p>
<p>High-Resolution Counter</p>
<p> </p>
<p>as the underlying counter. This counter is available only on the </p>
<p>MICROSAR </p>
<p>OS </p>
<p>implementations </p>
<p>that </p>
<p>support </p>
<p>high </p>
<p>resolution </p>
<p>schedule </p>
<p>tables; </p>
<p>it </p>
<p>is </p>
<p>automatically available if supported. </p>
<p><b>3.2.6.3 </b></p>
<p><b>Cyclical Expiry Point Actions </b></p>
<p>Cyclical expiry point actions are a Vector specific extension of the AUTOSAR Standard to </p>
<p>ease the configuration of schedule table actions. In case an expiry point action shall be </p>
<p>executed cyclicly within a schedule table, the user may select the sub-attribute </p>
<p>Cyclic</p>
<p>. </p>
<p>This allows him to define a cycle time in the sub-attribute </p>
<p>CycleTime</p>
<p>. This informs the </p>
<p>generator that the expiry point action shall occur repeatedly with the configured cycle time </p>
<p>starting at the offset of the expiriy point, the action belongs to. </p>
<p>In case, the sub-attributes </p>
<p>Cyclic</p>
<p> and </p>
<p>CycleTime</p>
<p> have been configured, the generator </p>
<p>of the OS copies the expiry point actions to the configured locations within the schedule </p>
<p>table before it generates the schedule table. In case, there is already an expiry point at a </p>
<p>location where a cyclical expiry point action shall occur, the cyclical action is simply added </p>
<p>to the actions of that expiry point. In case there is no expiry point configured at the location </p>
<p>where  a  cyclical  expiry  point  action  schall  occur,  the  generator  invents  an  expiry  point. </p>
<p>Please note that generator invented expiry points do not allow synchronization as there is </p>
<p>no configuration of the synchronization step width possible. </p>
<p> </p>
<p><b>3.2.7 </b></p>
<p><b>Trusted Functions </b></p>
<p>MICROSAR  OS  OSEK/AUTOSAR  provides  two  possibilities  to  call  trusted  functions:  by </p>
<p>direct call of API function </p>
<p>CallTrustedFunction</p>
<p> or by using generated stub functions. </p>
<p>It is possible to mix applications using direct calls and applications using generated stub </p>
<p>functions. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Inside trusted functions there is full access to all memory. Therefore, each trusted </p>
<p>function with address arguments for return values must check the access rights of the </p>
<p>caller before writing results through an address argument. The API provides the </p>
<p>functions </p>
<p>CheckTaskMemoryAccess</p>
<p> and </p>
<p>CheckISRMemoryAccess</p>
<p> for address </p>
<p>checking. </p>
<p><b> </b></p>
<p> </p>
<p><b>3.2.7.1 </b></p>
<p><b>Generated Stub Functions </b></p>
<p>The  generation  of  stubs  for  trusted  functions  is  a  Vector  specific  extension  of  the </p>
<p>AUTOSAR OS standard to ease the usage of trusted functions. </p>
<p>To enable stub generation for an application, the </p>
<p>TRUSTED</p>
<p> attribute of this application and </p>
<p>the sub-attribute </p>
<p>GenerateStub</p>
<p> must be set to </p>
<p>TRUE</p>
<p>. </p>
<p>In  this  case,  a  caller  stub  with  the  name </p>
<p>Call_&lt;name&gt;</p>
<p>  is  generated  for  each  trusted </p>
<p>function  of  the  application,  where </p>
<p>&lt;name&gt;</p>
<p>  is  the  name  of  the  trusted  function.  The </p>
<p>generated stub function Call_&lt;name&gt; packs its parameters into a structure as needed by </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>32 / 136 </p>
<p>the </p>
<p>standard  API </p>
<p>function </p>
<p>CallTrustedFunction </p>
<p>and </p>
<p>calls </p>
<p>that  API </p>
<p>function.  Another </p>
<p>generated  stub  function  performs  an  unpacking  of  the  parameters  so  that  the  user's </p>
<p>trusted function does not need to get all the parameters via one pointer, but can have a set </p>
<p>of parameters and a return value like any legal C-function. </p>
<p>In  case  the  sub-attribute </p>
<p>GenerateStub</p>
<p>  is  set  to </p>
<p>TRUE</p>
<p>,  the  user  has  to  define  the </p>
<p>parameters and the return value of the trusted function as well. The sub-attribute </p>
<p>Params</p>
<p> </p>
<p>shall contain a comma-separated list of type and parameter name (as they would occur in </p>
<p>a function definition in C). The sub-attribute </p>
<p>ReturnType</p>
<p> shall define the return type of </p>
<p>the function. </p>
<p>The stubs are generated into the file trustfct.c. </p>
<p>See 10.8 for an example using generated stub functions for trusted applications. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>The generator does not produce prototypes for the trusted functions to be called by the </p>
<p>trusted function stubs. The prototypes shall be provided by the writer of these functions </p>
<p>and included into the file usrostyp.h. Parameter types and the return type need to be </p>
<p>defined there also in case they are no simple types of the C-language. The file </p>
<p>usrostyp.h is described in chapter 5.2. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>33 / 136 </p>
<p><b>3.3 </b></p>
<p><b>Error Handling </b></p>
<p><b>3.3.1 </b></p>
<p><b>Error Messages </b></p>
<p>If </p>
<p>the </p>
<p>kernel </p>
<p>detects </p>
<p>errors, </p>
<p>the </p>
<p>OSEK </p>
<p>error </p>
<p>handling </p>
<p>is </p>
<p>called. </p>
<p>The </p>
<p>hook </p>
<p>routine </p>
<p>ErrorHook</p>
<p> is called if selected. </p>
<p>Depending on the situation in which an error was detected the error handling will return to </p>
<p>the current active task or the system will be shut down. </p>
<p><b>3.3.2 </b></p>
<p><b>OSEK / AUTOSAR OS Error Numbers </b></p>
<p> </p>
<p>The  OSEK  specification  defines  several  error  numbers  that  are  returned  by  the  API </p>
<p>functions. A  certain  error number  has  different meanings for  different API functions. The </p>
<p>user has to know the API function to interpret the error number correctly. </p>
<p>With  the  AUTOSAR  OS  specification,  the  range  of  error  numbers  was  extended.  The </p>
<p>following table shows all specified error numbers. </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p>0 </p>
<p>E_OK </p>
<p>Service executed successfully </p>
<p>1 </p>
<p>E_OS_ACCESS   </p>
<p>Several APIs: general access of object failure </p>
<p>2 </p>
<p>E_OS_CALLEVEL   </p>
<p>Several APIs: service accessed from wrong context  </p>
<p>3 </p>
<p>E_OS_ID       </p>
<p>Several APIs: service called with wrong ID </p>
<p>4 </p>
<p>E_OS_LIMIT     </p>
<p>Several APIs: service called too often </p>
<p>5 </p>
<p>E_OS_NOFUNC    </p>
<p>Several APIs: (warning) service not executed </p>
<p>6 </p>
<p>E_OS_RESOURCE   </p>
<p>Several APIs: service called with occupied resource </p>
<p>7 </p>
<p>E_OS_STATE   </p>
<p>Several APIs: object is in wrong state </p>
<p>8 </p>
<p>E_OS_VALUE    </p>
<p>Several APIs: passed parameter has wrong value </p>
<p>9 </p>
<p>E_OS_SERVICEID  </p>
<p>Several APIs: service can not be called </p>
<p>10 </p>
<p>E_OS_ILLEGAL_ADDRESS  </p>
<p>Several APIs: invalid address passed </p>
<p>11 </p>
<p>E_OS_MISSINGEND  </p>
<p>Several APIs: task terminated without TerminatTask </p>
<p>12 </p>
<p>E_OS_DISABLEDINT  </p>
<p>Several APIs: service called with disabled interrupts </p>
<p>13 </p>
<p>E_OS_STACKFAULT  </p>
<p>Stack monitoring detected fault </p>
<p>14 </p>
<p>E_OS_PROTECTION_MEMORY  </p>
<p>Memory access violation </p>
<p>15 </p>
<p>E_OS_PROTECTION_TIME </p>
<p>Execution time budget exceeded </p>
<p>16 </p>
<p>E_OS_PROTECTION_ARRIVAL  </p>
<p>Arrival before the timeframe expired </p>
<p>17 </p>
<p>E_OS_PROTECTION_LOCKED  </p>
<p>Task/ISR blocked too long (e.g. by disabled interrupts) </p>
<p>18 </p>
<p>E_OS_PROTECTION_EXCEPTION  </p>
<p>A trap occurred </p>
<p>Table 3-4  </p>
<p>OSEK/AUTOSAR OS error numbers </p>
<p>The additional implementation specific error numbers are defined as: </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>34 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p>20 </p>
<p>E_OS_SYS_ASSERTION </p>
<p>This error is generated if the kernel detects an </p>
<p>internal inconsistency. The reason and an exact </p>
<p>explanation is described below. </p>
<p>21 </p>
<p>E_OS_SYS_ABORT </p>
<p>This error is generated if the kernel has to shut down </p>
<p>the system but the reason was not an API function. </p>
<p>22 </p>
<p>E_OS_SYS_DIS_INT </p>
<p>This error number is no longer used. It is replaced by </p>
<p>the AUTOSAR OS conformant number </p>
<p>E_OS_DISABLEDINT</p>
<p>. </p>
<p>23 </p>
<p>E_OS_SYS_API_ERROR  </p>
<p>This error is generated if an error occurs in an API </p>
<p>function and there is no error code specified in the </p>
<p>OSEK specification. The reason and an exact </p>
<p>explanation is described below. </p>
<p>24 </p>
<p>E_OS_SYS_ALARM_MANAGEMENT  </p>
<p>A general warning issued in certain cases involving </p>
<p>the alarm management. Detailed description </p>
<p>in the implementation specific manual  </p>
<p>25 </p>
<p>E_OS_SYS_WARNING </p>
<p>A general warning issued in certain cases. Detailed </p>
<p>description in the implementation specific manual. </p>
<p>Table 3-5  </p>
<p>Implementation specific error numbers </p>
<p> </p>
<p>More implementation specific errors may be described in ref. [4]. </p>
<p><b>3.3.3 </b></p>
<p><b>MICROSAR OS Error Numbers </b></p>
<p>In  addition  to  the  OSEK  error  numbers,  all  MICROSAR  OS  implementations  provide </p>
<p>unique error numbers for an exact error description. All error numbers are defined as a 16-</p>
<p>bit value. The error numbers are defined in the header file </p>
<p>osekerr.h</p>
<p> and are defined </p>
<p>according to the following syntax: </p>
<p>0xgfee </p>
<p>  ||+--- consecutive error number </p>
<p>  |+---- number of function in the function group </p>
<p>  +----- number of function group  </p>
<p>The error numbers common to all MICROSAR OS implementations are described below. </p>
<p>The implementation specific error numbers have a function group number &gt;= 0xA000 and </p>
<p>are described in the document [4].  </p>
<p>To access these error numbers the </p>
<p>ERRORHOOK</p>
<p> has to be enabled. The numbers are then </p>
<p>accessible via the macro </p>
<p>OSErrorGetosCANError().</p>
<p> </p>
<p>Error Types: </p>
<p><b>Error Type </b></p>
<p><b>Description </b></p>
<p>OSEK </p>
<p>OSEK / AUTOSAR error. After calling the </p>
<p>ErrorHook</p>
<p>, the program is </p>
<p>continued. </p>
<p>assertion </p>
<p>System assertion error. After calling the </p>
<p>ErrorHook</p>
<p> the operating system </p>
<p>is shut down. Assertion checking is always enabled in SafeContext </p>
<p>implementations. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>35 / 136 </p>
<p><b>Error Type </b></p>
<p><b>Description </b></p>
<p>syscheck </p>
<p>System error. After calling the </p>
<p>ErrorHook</p>
<p> the operating system is shut </p>
<p>down. Refer to the specific error for a description how to enable or disable </p>
<p>error checking. </p>
<p>Table 3-6  </p>
<p>Error types </p>
<p><b>3.3.3.1 </b></p>
<p><b>Error Numbers of Group Task Management / (1) </b></p>
<p>Group (1) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>ActivateTask </p>
<p>AT </p>
<p>1 </p>
<p>TerminateTask </p>
<p>TT </p>
<p>2 </p>
<p>ChainTask </p>
<p>HT </p>
<p>3 </p>
<p>Schedule </p>
<p>SH </p>
<p>4 </p>
<p>GetTaskState </p>
<p>GS </p>
<p>5 </p>
<p>GetTaskID </p>
<p>GI </p>
<p>6 </p>
<p>osMissingTerminateError </p>
<p>MT </p>
<p>7 </p>
<p>Table 3-7  </p>
<p>API functions of group Task Management / (1) </p>
<p>Error numbers of group (1): </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x1101 </p>
<p>osdErrATWrongTaskID </p>
<p>OSEK </p>
<p>Called with invalid task ID </p>
<p>0x1102 </p>
<p>osdErrATWrongTask </p>
<p>Prio </p>
<p>assertion </p>
<p>Task has wrong priority level  </p>
<p>0x1103 </p>
<p>osdErrATMultiple </p>
<p>Activation </p>
<p>OSEK </p>
<p>number of activation of activated task </p>
<p>exceeds limit </p>
<p>0x1104 </p>
<p>osdErrATIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x1105 </p>
<p>osdErrATAlarm </p>
<p>MultipleActivation </p>
<p>OSEK </p>
<p>Number of activation of activated task </p>
<p>exceeds limit (task activation is performed </p>
<p>by alarm-expiration or expiry point action)  </p>
<p>0x1106 </p>
<p>osdErrATNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this task </p>
<p>0x1107 </p>
<p>osdErrATCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x1108 </p>
<p>osdErrATWrongAppState </p>
<p>OSEK </p>
<p>Referenced object is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE</p>
<p> </p>
<p>0x1201 </p>
<p>osdErrTTDisabled </p>
<p>Interrupts </p>
<p>OSEK </p>
<p>TerminateTask</p>
<p> called with disabled </p>
<p>interrupts </p>
<p>0x1202 </p>
<p>osdErrTTResources </p>
<p>OSEK </p>
<p>TerminateTask</p>
<p> called with occupied </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>36 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>Occupied </p>
<p>resources </p>
<p>0x1203 </p>
<p>osdErrTTNotActivated </p>
<p>assertion </p>
<p>TerminateTask</p>
<p> attempted for a task with </p>
<p>activation counter == 0 (not activated) </p>
<p>0x1204 </p>
<p>osdErrTTOnInterrupt </p>
<p>Level </p>
<p>OSEK </p>
<p>TerminateTask</p>
<p> called from an interrupt </p>
<p>service routine </p>
<p>0x1205 </p>
<p>osdErrTTNoImmediate </p>
<p>TaskSwitch  </p>
<p>assertion </p>
<p>TerminateTask</p>
<p> has tried to start the </p>
<p>Scheduler without success. </p>
<p>0x1206 </p>
<p>osdErrTTCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x1208 </p>
<p>osdErrTTWrongActiveTa</p>
<p>skID </p>
<p>assertion </p>
<p>Task index is not valid during call of </p>
<p>TerminateTask</p>
<p> </p>
<p>0x1301 </p>
<p>osdErrHTInterrupts </p>
<p>Disabled </p>
<p>OSEK </p>
<p>ChainTask</p>
<p> called with disabled interrupts </p>
<p>0x1302 </p>
<p>osdErrHTResources </p>
<p>Occupied </p>
<p>OSEK </p>
<p>ChainTask</p>
<p> called with occupied </p>
<p>resources </p>
<p>0x1303 </p>
<p>osdErrHTWrongTaskID </p>
<p>OSEK </p>
<p>New task has invalid ID </p>
<p>0x1304 </p>
<p>osdErrHTNotActivated </p>
<p>assertion </p>
<p>Tried to terminate a task which have an </p>
<p>activation counter which is zero </p>
<p>0x1305 </p>
<p>osdErrHTMultiple </p>
<p>Activation </p>
<p>OSEK </p>
<p>Number of activation of new task exceeds </p>
<p>limit </p>
<p>0x1306 </p>
<p>osdErrHTOnInterrupt </p>
<p>Level </p>
<p>OSEK </p>
<p>ChainTask</p>
<p> called on interrupt level </p>
<p>0x1307 </p>
<p>osdErrHTWrongTask </p>
<p>Prio </p>
<p>assertion </p>
<p>ChainTask</p>
<p> was called from wrong priority </p>
<p>level </p>
<p>0x1308 </p>
<p>osdErrHTNoImmediate </p>
<p>TaskSwitch </p>
<p>assertion </p>
<p>ChainTask</p>
<p> has tried to activate the </p>
<p>Scheduler without success. </p>
<p>0x1309 </p>
<p>osdErrHTCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x130A </p>
<p>osdErrHTNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this task </p>
<p>0x130B </p>
<p>osdErrHTWrongAppState </p>
<p>OSEK </p>
<p>Referenced object is owned by an </p>
<p>OSApplication which was terminated. </p>
<p>0x130D </p>
<p>osdErrHTWrongActiveTa</p>
<p>skID </p>
<p>assertion </p>
<p>Task index is not valid during call of </p>
<p>ChainTask</p>
<p> </p>
<p>0x1401 </p>
<p>osdErrSHInterrupts </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Schedule called with disabled interrupts </p>
<p>0x1402 </p>
<p>osdErrSHOnInterrupt </p>
<p>Level </p>
<p>OSEK </p>
<p>Schedule called on interrupt level </p>
<p>0x1403 </p>
<p>osdErrSHScheduleNot </p>
<p>Allowed </p>
<p>assertion </p>
<p>Schedule called from task with enabled </p>
<p>stack sharing by setting </p>
<p>NotUsingSchedule</p>
<p> in the OIL </p>
<p>Configurator </p>
<p>0x1405 </p>
<p>osdErrSHResources </p>
<p>Occupied </p>
<p>OSEK </p>
<p>Called with an occupied resource </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>37 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x1406 </p>
<p>osdErrSHCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x1409 </p>
<p>osdErrSHWrongActiveTa</p>
<p>skID </p>
<p>assertion </p>
<p>Task index is not valid during call of </p>
<p>Schedule</p>
<p> </p>
<p>0x1501 </p>
<p>osdErrGSWrongTaskID </p>
<p>OSEK </p>
<p>Called with invalid task ID </p>
<p>0x1502 </p>
<p>osdErrGSIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x1503 </p>
<p>osdErrGSIllegalAddr </p>
<p>OSEK </p>
<p>Caller has no write access rights for </p>
<p>address argument </p>
<p>0x1504 </p>
<p>osdErrGSCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x1505 </p>
<p>osdErrGSNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this task </p>
<p>0x1506 </p>
<p>osdErrGSWrongAppState </p>
<p>OSEK </p>
<p>Referenced object is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x1507 </p>
<p>osdErrGSOddInvocation </p>
<p>assertion </p>
<p>Invocation of internal function  </p>
<p>osGetTaskState</p>
<p> detected although </p>
<p>ReducedStatusChecks</p>
<p> was enabled </p>
<p>0x1601 </p>
<p>osdErrGIIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x1602 </p>
<p>osdErrGIIllegalAddr </p>
<p>OSEK </p>
<p>Caller has no write access rights for </p>
<p>address argument. </p>
<p>0x1603 </p>
<p>osdErrGICallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x1604 </p>
<p>osdErrGIOddInvocation </p>
<p>assertion </p>
<p>Invocation of internal function  </p>
<p>osGetTaskID</p>
<p> detected although </p>
<p>ReducedStatusChecks</p>
<p> was enabled </p>
<p>0x1701 </p>
<p>osdErrMTMissing </p>
<p>TerminateTask </p>
<p>syscheck </p>
<p>Exit of task without the call of </p>
<p>TerminateTask</p>
<p> or </p>
<p>ChainTask</p>
<p>. This </p>
<p>error is detected in </p>
<p>EXTENDED STATUS</p>
<p> </p>
<p>only. </p>
<p>Table 3-8  </p>
<p>Error numbers of group Task Management / (1) </p>
<p><b>3.3.3.2 </b></p>
<p><b>Error Numbers of Group Interrupt Handling / (2) </b></p>
<p>Group (2) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>EnableAllInterrupts </p>
<p>EA </p>
<p>4 </p>
<p>DisableAllInterrupts </p>
<p>DA </p>
<p>5 </p>
<p>ResumeOSInterrupts </p>
<p>RI </p>
<p>6 </p>
<p>SuspendOSInterrupts </p>
<p>SI </p>
<p>7 </p>
<p>osUnhandledException </p>
<p>UE </p>
<p>8 </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>38 / 136 </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>osSaveDisableLevelNested </p>
<p>SD </p>
<p>9 </p>
<p>osRestoreEnableLevelNested </p>
<p>RE </p>
<p>A </p>
<p>osSaveDisableGlobalNested </p>
<p>SG </p>
<p>B </p>
<p>osRestoreEnableGlobalNested </p>
<p>RG </p>
<p>C </p>
<p>ResumeAllInterrupts </p>
<p>RA </p>
<p>D </p>
<p>SuspendAllInterrupts </p>
<p>SA </p>
<p>E </p>
<p>GetISRID </p>
<p>II </p>
<p>2 </p>
<p>Interrupt Exit</p>
<p> (SC3 only)</p>
<p> </p>
<p>IX </p>
<p>3 </p>
<p>Table 3-9  </p>
<p>API functions of group Interrupt Handling / (2) </p>
<p>Error numbers of group (2): </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p> </p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x2401 </p>
<p>osdErrEAIntAPIWrong </p>
<p>Sequence         </p>
<p>assertion </p>
<p>DisableAllInterrupts</p>
<p> not called </p>
<p>before </p>
<p>0x2501 </p>
<p>osdErrDAIntAPI </p>
<p>Disabled         </p>
<p> </p>
<p>assertion </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x2801 </p>
<p>osdErrUEUnhandled </p>
<p>Exception </p>
<p>syscheck </p>
<p>An unhandled exception or interrupt was </p>
<p>detected. This error check is always </p>
<p>enabled. </p>
<p>0x2901 </p>
<p>osdErrSDWrongCounter </p>
<p>assertion </p>
<p>Wrong counter value detected </p>
<p>0x2A01 </p>
<p>osdErrREWrongCounter </p>
<p>assertion </p>
<p>Wrong counter value detected </p>
<p>0x2B01 </p>
<p>osdErrSGWrongCounter  </p>
<p>assertion </p>
<p>Wrong counter value detected </p>
<p>0x2C01 </p>
<p>osdErrRGWrongCounter  </p>
<p>assertion </p>
<p>Wrong counter value detected </p>
<p>0x2201 </p>
<p>osdErrIIIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>GetISRID</p>
<p> was called with interrupts </p>
<p>disabled. </p>
<p>0x2202 </p>
<p>osdErrIICallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x2301 </p>
<p>osdErrIXResources </p>
<p>Occupied </p>
<p>OSEK </p>
<p>An ISR of category 2 was left with </p>
<p>resources still occupied. </p>
<p>0x2302 </p>
<p>osdErrIXIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>An ISR of category 2 was left with </p>
<p>interrupts disabled by </p>
<p>DisableAllInterrupts</p>
<p>, </p>
<p>SuspendAllInterrupts</p>
<p> or </p>
<p>SuspendOSInterrupts</p>
<p> </p>
<p>Table 3-10  </p>
<p>Error numbers of group Interrupt Handling / (2) </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>39 / 136 </p>
<p><b>3.3.3.3 </b></p>
<p><b>Error Numbers of Group Resource Management / (3) </b></p>
<p>Group (3) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>GetResource </p>
<p>GR </p>
<p>1 </p>
<p>ReleaseResource </p>
<p>RR </p>
<p>2 </p>
<p>Table 3-11  </p>
<p>API functions of group Resource Management / (3) </p>
<p>Error numbers of group (3): </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x3101 </p>
<p>osdErrGRWrongResource</p>
<p>ID </p>
<p>OSEK </p>
<p>Invalid resource ID </p>
<p>0x3102 </p>
<p>osdErrGRPriority </p>
<p>Occupied </p>
<p>assertion </p>
<p>Ceiling priority of the specified resource </p>
<p>already in use </p>
<p>0x3103 </p>
<p>osdErrGRResource </p>
<p>Occupied </p>
<p>OSEK </p>
<p>Resource already occupied </p>
<p>0x3104 </p>
<p>osdErrGRNoAccess </p>
<p>Rights </p>
<p>assertion </p>
<p>Task has no access to the specified </p>
<p>resource </p>
<p>0x3105 </p>
<p>osdErrGRWrongPrio </p>
<p>OSEK </p>
<p>Specified resource has a wrong priority. </p>
<p>Possible reason: the task has no access </p>
<p>rights to this resource.  </p>
<p>0x3106 </p>
<p>osdErrGRIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x3107 </p>
<p>osdErrGRNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this resource </p>
<p>0x3108 </p>
<p>osdErrGRCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x3109 </p>
<p>osdErrGRISRNoAccess </p>
<p>Rights </p>
<p>OSEK </p>
<p>Calling ISR has no access rights for this </p>
<p>resource </p>
<p>0x310B </p>
<p>osdErrGRWrongTaskID </p>
<p>assertion </p>
<p>Task index is not valid during call of </p>
<p>GetResource</p>
<p> </p>
<p>0x3201 </p>
<p>osdErrRRWrongResource</p>
<p>ID </p>
<p>OSEK </p>
<p>Invalid resource ID </p>
<p>0x3202 </p>
<p>osdErrRRCeiling </p>
<p>PriorityNotSet </p>
<p>assertion </p>
<p>Ceiling priority of the resource not found in </p>
<p>the ready bit field </p>
<p>0x3203 </p>
<p>osdErrRRWrongTask </p>
<p>assertion </p>
<p>Resource occupied by a different task </p>
<p>0x3204 </p>
<p>osdErrRRWrongPrio </p>
<p>OSEK </p>
<p>Specified resource has a wrong priority. </p>
<p>Possible reason: the task has no access </p>
<p>rights to this resource.  </p>
<p>0x3206 </p>
<p>osdErrRRNotOccupied </p>
<p>OSEK </p>
<p>The specified resource is not occupied by </p>
<p>the task </p>
<p>0x3207 </p>
<p>osdErrRRWrongSequence </p>
<p>OSEK </p>
<p>At least one other resource must be </p>
<p>released before </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>40 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x3208 </p>
<p>osdErrRRIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x3209 </p>
<p>osdErrRRNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this resource </p>
<p>0x320A </p>
<p>osdErrRRCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x320B </p>
<p>osdErrRRISRNoAccess </p>
<p>Rights </p>
<p>OSEK </p>
<p>Calling ISR has no access rights for this </p>
<p>resource </p>
<p>0x320D </p>
<p>osdErrRRNoReadyTaskFo</p>
<p>und </p>
<p>assertion </p>
<p>No valid priority found when calling </p>
<p>ReleaseResource</p>
<p> </p>
<p>0x320E </p>
<p>osdErrRRWrongTaskID </p>
<p>assertion </p>
<p>Task index is not valid during call of </p>
<p>ReleaseResource</p>
<p> </p>
<p>0x320F </p>
<p>osdErrRRWrongHighRdyP</p>
<p>rio </p>
<p>assertion </p>
<p>No valid high ready priority task index </p>
<p>during call of </p>
<p>ReleaseResource</p>
<p> </p>
<p>Table 3-12  </p>
<p>Error numbers of group Resource Management / (3) </p>
<p> </p>
<p><b>3.3.3.4 </b></p>
<p><b>Error Numbers of Group Event Control / (4) </b></p>
<p>Group (4) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>SetEvent </p>
<p>SE </p>
<p>1 </p>
<p>ClearEvent </p>
<p>CE </p>
<p>2 </p>
<p>GetEvent </p>
<p>GE </p>
<p>3 </p>
<p>WaitEvent </p>
<p>WE </p>
<p>4 </p>
<p>Table 3-13  </p>
<p>API functions of group Event Control / (4) </p>
<p>Error numbers of group (4): </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x4101 </p>
<p>osdErrSEWrongTaskID </p>
<p>OSEK </p>
<p>Invalid task ID </p>
<p>0x4102 </p>
<p>osdErrSENotExtended </p>
<p>Task </p>
<p>OSEK </p>
<p>Cannot </p>
<p>SetEvent</p>
<p> to basic task </p>
<p>0x4103 </p>
<p>osdErrSETaskSuspended </p>
<p>OSEK </p>
<p>Cannot </p>
<p>SetEvent</p>
<p> to task in </p>
<p>SUSPENDED</p>
<p> </p>
<p>state. The error code might occur in case </p>
<p>of API call </p>
<p>SetEvent</p>
<p> or in case of </p>
<p>alarm/schedule table action to set an </p>
<p>event. </p>
<p>0x4104 </p>
<p>osdErrSEWrongTask </p>
<p>Prio </p>
<p>assertion </p>
<p>Wrong task priority detected </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>41 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x4105 </p>
<p>osdErrSEIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x4106 </p>
<p>osdErrSECallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x4107 </p>
<p>osdErrSENoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this task </p>
<p>0x4108 </p>
<p>osdErrSEWrongAppState </p>
<p>OSEK </p>
<p>Referenced task is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x4201 </p>
<p>osdErrCENotExtended </p>
<p>Task </p>
<p>OSEK </p>
<p>A basic task cannot clear an event </p>
<p>0x4202 </p>
<p>osdErrCEOnInterrupt </p>
<p>Level </p>
<p>OSEK </p>
<p>ClearEvent</p>
<p> called on interrupt level </p>
<p>0x4203 </p>
<p>osdErrCEIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x4204 </p>
<p>osdErrCECallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x4301 </p>
<p>osdErrGEWrongTaskID </p>
<p>OSEK </p>
<p>Invalid task ID </p>
<p>0x4302 </p>
<p>osdErrGENotExtended </p>
<p>Task </p>
<p>OSEK </p>
<p>Cannot </p>
<p>GetEvent</p>
<p> from basic task </p>
<p>0x4303 </p>
<p>osdErrGETaskSuspended </p>
<p>OSEK </p>
<p>Cannot </p>
<p>GetEvent</p>
<p> from a task in </p>
<p>SUSPENDED</p>
<p> state </p>
<p>0x4304 </p>
<p>osdErrGEIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x4305 </p>
<p>osdErrGEIllegalAddr </p>
<p>OSEK </p>
<p>Caller has no write access rights for </p>
<p>address argument </p>
<p>0x4306 </p>
<p>osdErrGECallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x4307 </p>
<p>osdErrGENoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this task </p>
<p>0x4308 </p>
<p>osdErrGEWrongAppState </p>
<p>OSEK </p>
<p>Referenced task is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE</p>
<p> </p>
<p>0x4309 </p>
<p>osdErrGEOddInvocation </p>
<p>assertion </p>
<p>Invocation of internal function  </p>
<p>osGetEvent </p>
<p>detected although </p>
<p>ReducedStatusChecks</p>
<p> was enabled  </p>
<p>0x4401 </p>
<p>osdErrWENotExtended </p>
<p>Task </p>
<p>OSEK </p>
<p>WaitEvent</p>
<p> called by basic task </p>
<p>0x4402 </p>
<p>osdErrWEResources </p>
<p>Occupied </p>
<p>OSEK </p>
<p>WaitEvent</p>
<p> called with occupied </p>
<p>resources </p>
<p>0x4403 </p>
<p>osdErrWEInterrupts </p>
<p>Disabled </p>
<p>OSEK </p>
<p>WaitEvent</p>
<p> called with disabled interrupts </p>
<p>0x4404 </p>
<p>osdErrWEOnInterrupt </p>
<p>Level </p>
<p>OSEK </p>
<p>WaitEvent</p>
<p> called on interrupt level </p>
<p>0x4405 </p>
<p>osdErrWECallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>42 / 136 </p>
<p>Table 3-14  </p>
<p>Error numbers of group Event Control / (4) </p>
<p> </p>
<p><b>3.3.3.5 </b></p>
<p><b>Error Numbers of Group Alarm Management / (5) </b></p>
<p>Group (5) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>GetAlarmBase </p>
<p>GB </p>
<p>1 </p>
<p>GetAlarm </p>
<p>GA </p>
<p>2 </p>
<p>SetRelAlarm </p>
<p>SA </p>
<p>3 </p>
<p>SetAbsAlarm </p>
<p>SL </p>
<p>4 </p>
<p>CancelAlarm </p>
<p>CA </p>
<p>5 </p>
<p>osWorkAlarm </p>
<p>WA </p>
<p>6 </p>
<p>Table 3-15  </p>
<p>API functions of group Alarm Management / (5) </p>
<p>Error numbers of group (5): </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x5101 </p>
<p>osdErrGBWrongAlarmID </p>
<p>OSEK </p>
<p>Invalid alarm ID </p>
<p>0x5102 </p>
<p>osdErrGBIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x5103 </p>
<p>osdErrGBIllegalAddr </p>
<p>OSEK </p>
<p>Caller has no write access rights for </p>
<p>address argument </p>
<p>0x5104 </p>
<p>osdErrGBCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x5105 </p>
<p>osdErrGBNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this alarm </p>
<p>0x5106 </p>
<p>osdErrGBWrongAppState </p>
<p>OSEK </p>
<p>Referenced object is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x5201 </p>
<p>osdErrGAWrongAlarmID </p>
<p>OSEK </p>
<p>Invalid alarm ID </p>
<p>0x5202 </p>
<p>osdErrGANotActive </p>
<p>OSEK </p>
<p>Alarm not active </p>
<p>0x5203 </p>
<p>osdErrGAIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x5204 </p>
<p>osdErrGAIllegalAddr </p>
<p>OSEK </p>
<p>Caller has no write access rights for </p>
<p>address argument </p>
<p>0x5205 </p>
<p>osdErrGACallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x5206 </p>
<p>osdErrGANoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this alarm </p>
<p>0x5207 </p>
<p>osdErrGAWrongAppState </p>
<p>OSEK </p>
<p>Referenced alarm is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>43 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x5301 </p>
<p>osdErrSAWrongAlarmID </p>
<p>OSEK </p>
<p>Invalid alarm id </p>
<p>0x5302 </p>
<p>osdErrSAAlreadyActive </p>
<p>OSEK </p>
<p>Alarm already active </p>
<p>0x5303 </p>
<p>osdErrSAWrongCycle </p>
<p>OSEK </p>
<p>Specified cycle is out of range </p>
<p>0x5304 </p>
<p>osdErrSAWrongDelta </p>
<p>OSEK </p>
<p>Specified delta is out of range </p>
<p>0x5305 </p>
<p>osdErrSAIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x5306 </p>
<p>osdErrSAZeroIncrement </p>
<p>OSEK </p>
<p>SetRelAlarm</p>
<p> was called with the </p>
<p>parameter increment set to zero. (This is </p>
<p>no longer allowed with AUTOSAR OS) </p>
<p>0x5307 </p>
<p>osdErrSACallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x5308 </p>
<p>osdErrSANoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this alarm </p>
<p>0x5309 </p>
<p>osdErrSAWrongAppState </p>
<p>OSEK </p>
<p>Referenced alarm is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x5401 </p>
<p>osdErrSLWrongAlarmID </p>
<p>OSEK </p>
<p>Invalid alarm ID </p>
<p>0x5402 </p>
<p>osdErrSLAlreadyActive </p>
<p>OSEK </p>
<p>Alarm already active </p>
<p>0x5403 </p>
<p>osdErrSLWrongCycle </p>
<p>OSEK </p>
<p>Specified cycle is out of range </p>
<p>0x5404 </p>
<p>osdErrSLWrongStart </p>
<p>OSEK </p>
<p>Specified start is out of range </p>
<p>0x5405 </p>
<p>osdErrSLIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x5406 </p>
<p>osdErrSLCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x5407 </p>
<p>osdErrSLNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this alarm </p>
<p>0x5408 </p>
<p>osdErrSLWrongAppState </p>
<p>OSEK </p>
<p>Referenced alarm is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x5501 </p>
<p>osdErrCAWrongAlarmID </p>
<p>OSEK </p>
<p>Invalid alarm ID </p>
<p>0x5502 </p>
<p>osdErrCANotActive </p>
<p>OSEK </p>
<p>Alarm not active </p>
<p>0x5503 </p>
<p>osdErrCAIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0x5504 </p>
<p>osdErrCAAlarmInternal </p>
<p>syscheck </p>
<p>Internal error detected while alarm was </p>
<p>cancelled. This error is only detected when </p>
<p>OSInternalChecks</p>
<p> is set to </p>
<p>Additional</p>
<p>. </p>
<p>0x5505 </p>
<p>osdErrCACallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x5506 </p>
<p>osdErrCANoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this alarm </p>
<p>0x5507 </p>
<p>osdErrCAWrongAppState </p>
<p>OSEK </p>
<p>Referenced alarm is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>44 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x5601 </p>
<p>osdErrWAWrongIDonHeap </p>
<p>assertion </p>
<p>Wrong alarm ID in heap data structure for </p>
<p>alarm management </p>
<p>0x5602 </p>
<p>osdErrWAHeapOverflow </p>
<p>assertion </p>
<p>Overflow in internal data structure for </p>
<p>alarm management </p>
<p>0x5603 </p>
<p>osdErrWAUnknownAction </p>
<p>assertion </p>
<p>Invalid alarm action type during processing </p>
<p>of an expired alarm </p>
<p>0x5604 </p>
<p>osdErrWAWrongCounterI</p>
<p>D </p>
<p>assertion </p>
<p>Invalid counter ID during processing of an </p>
<p>expired alarm with </p>
<p>OsAlarmAction=OsAlarmIncrementC</p>
<p>ounter</p>
<p>. </p>
<p>Table 3-16  </p>
<p>Error numbers of group Alarm Management / (5) </p>
<p> </p>
<p><b>3.3.3.6 </b></p>
<p><b>Error Numbers of Group Operating System Execution Control / (6) </b></p>
<p>Group (6) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>osCheckStackOverflow </p>
<p>SO </p>
<p>1 </p>
<p>osSchedulePrio </p>
<p>SP </p>
<p>2 </p>
<p>osGetStackUsage </p>
<p>SU </p>
<p>3 </p>
<p>osCheckLibraryVersionAndVariant </p>
<p>CL </p>
<p>4 </p>
<p>osErrorHook </p>
<p>EH </p>
<p>5 </p>
<p>StartOS </p>
<p>ST </p>
<p>6 </p>
<p>osSchedInsertTask </p>
<p>QI </p>
<p>7 </p>
<p>osSchedRemoveRunningTask </p>
<p>QR </p>
<p>8 </p>
<p>osSchedOnHomePrio </p>
<p>QS </p>
<p>9 </p>
<p>osSchedOccupyInternalResource </p>
<p>QO </p>
<p>A </p>
<p>Table 3-17  </p>
<p>API functions of group Operating System Execution Control / (6) </p>
<p>Error numbers of group (6): </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x6101 </p>
<p>osdErrSOStackOverflow </p>
<p>syscheck </p>
<p>Task stack overflow detected. This error is </p>
<p>only detected when the OIL attribute </p>
<p>WithStackCheck</p>
<p> is set to </p>
<p>TRUE</p>
<p>. </p>
<p>0x6201 </p>
<p>osdErrSPInterrupts </p>
<p>Enabled </p>
<p>assertion </p>
<p>Scheduler called with enabled interrupts </p>
<p>0x6301 </p>
<p>osdErrSUWrongTaskID </p>
<p>assertion </p>
<p>Called with invalid task ID </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>45 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x6401 </p>
<p>osdErrCLWrongLibrary </p>
<p>syscheck </p>
<p>Wrong library linked to application. This </p>
<p>error check is always enabled. </p>
<p>0x6501 </p>
<p>osdErrEHInterrupts </p>
<p>Enabled </p>
<p>assertion </p>
<p>ErrorHook</p>
<p> called with enabled interrupts </p>
<p>0x6601 </p>
<p>osdErrSTMemoryError </p>
<p>assertion </p>
<p>StartOS</p>
<p> failed while initializing memory. </p>
<p>0x6602 </p>
<p>osdErrSTNoImmediate </p>
<p>TaskSwitch </p>
<p>assertion </p>
<p>StartOS</p>
<p> tried to activate the Scheduler </p>
<p>without success. </p>
<p>0x6603 </p>
<p>osdErrSTWrongAppMode </p>
<p>syscheck </p>
<p>StartOS</p>
<p> was called with an invalid </p>
<p>parameter value. This error is only </p>
<p>detected if the attribute </p>
<p>STATUS</p>
<p> is set to </p>
<p>EXTENDED</p>
<p>. </p>
<p>0x6604 </p>
<p>osdErrSTConfigCRCErro</p>
<p>r </p>
<p>assertion </p>
<p>Configuration CRC mismatch detected </p>
<p>during </p>
<p>StartOS </p>
<p>0x6606 </p>
<p>osdErrSTConfigMagicNr</p>
<p>Error </p>
<p>assertion </p>
<p>Error reading the magic number from </p>
<p>config block during </p>
<p>StartOS</p>
<p> </p>
<p>0x6607 </p>
<p>osdErrSTInvalidMajorV</p>
<p>ersion </p>
<p>assertion </p>
<p>Error reading the major version number </p>
<p>from config block during </p>
<p>StartOS</p>
<p> </p>
<p>0x6608 </p>
<p>osdErrSTInvalidMinorV</p>
<p>ersion </p>
<p>assertion </p>
<p>Error reading the minor version number </p>
<p>from config block during </p>
<p>StartOS</p>
<p> </p>
<p>0x6609 </p>
<p>osdErrSTInvalidSTCfg </p>
<p>assertion </p>
<p>Schedule table has an invalid autostart </p>
<p>type value. </p>
<p>0x6701 </p>
<p>osdErrQIWrongTaskPrio </p>
<p>assertion </p>
<p>Wrong Task Priority in </p>
<p>osSchedInsertTask</p>
<p> </p>
<p>0x6801 </p>
<p>osdErrQRInterruptsEna</p>
<p>bled </p>
<p>assertion </p>
<p>Interrupts are enabled during </p>
<p>osSchedRemoveRunningTask</p>
<p> </p>
<p>0x6802 </p>
<p>osdErrQRWrongTaskID </p>
<p>assertion </p>
<p>Task index not valid in </p>
<p>osSchedRemoveRunningTask</p>
<p> </p>
<p>0x6803 </p>
<p>osdErrQRWrongTaskPrio </p>
<p>assertion </p>
<p>Priority not valid in </p>
<p>osSchedRemoveRunningTask</p>
<p> </p>
<p>0x6804 </p>
<p>osdErrQRWrongHighRdyP</p>
<p>rio </p>
<p>assertion </p>
<p>High ready task priority not valid in </p>
<p>osSchedRemoveRunningTask</p>
<p> </p>
<p>0x6901 </p>
<p>osdErrQSInterruptsEna</p>
<p>bled </p>
<p>assertion </p>
<p>Interrupts are enabled during </p>
<p>osSchedOnHomePrio</p>
<p> </p>
<p>0x6902 </p>
<p>osdErrQSNoReadyTaskFo</p>
<p>und </p>
<p>assertion </p>
<p>No High ready task has been found in </p>
<p>osSchedOnHomePrio</p>
<p> </p>
<p>0x6903 </p>
<p>osdErrQSWrongPriority </p>
<p>assertion </p>
<p>Priority not valid in </p>
<p>osSchedOnHomePrio</p>
<p> </p>
<p>0x6A01 </p>
<p>osdErrQOWrongTaskID </p>
<p>assertion </p>
<p>Task index not valid in </p>
<p>osSchedOccupyInternalResource</p>
<p> </p>
<p>Table 3-18  </p>
<p>Error numbers of group Operating System Execution Control / (6) </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>46 / 136 </p>
<p><b>3.3.3.7 </b></p>
<p><b>Error Numbers of Schedule Table Control / (7) </b></p>
<p>Group (7) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>StartScheduleTableRel </p>
<p>SR </p>
<p>1 </p>
<p>StartScheduleTableAbs </p>
<p>SS </p>
<p>2 </p>
<p>StopScheduleTable </p>
<p>SP </p>
<p>3 </p>
<p>GetScheduleTableStatus </p>
<p>SG </p>
<p>4 </p>
<p>NextScheduleTable </p>
<p>SN </p>
<p>5 </p>
<p>osWorkScheduleTable </p>
<p>WS </p>
<p>6 </p>
<p>SyncScheduleTable</p>
<p> (SC2 and SC4)</p>
<p> </p>
<p>SY </p>
<p>7 </p>
<p>SetScheduleTableAsync</p>
<p> (SC2 and SC4)</p>
<p> </p>
<p>AY </p>
<p>8 </p>
<p>StartScheduleTableSynchron</p>
<p> (SC2 and SC4)</p>
<p> </p>
<p>TS </p>
<p>C </p>
<p>Table 3-19  </p>
<p>API functions of group Schedule Table Control / (7) </p>
<p>Error numbers of group (7): </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x7101 </p>
<p>osdErrSRWrongID </p>
<p>OSEK </p>
<p>StartScheduleTableRel</p>
<p> was called </p>
<p>with an invalid schedule table ID. </p>
<p>0x7102 </p>
<p>osdErrSRAlready </p>
<p>RunningOrNext </p>
<p>OSEK </p>
<p>StartScheduleTableRel</p>
<p> was called for </p>
<p>a schedule table that is already running or </p>
<p>next. </p>
<p>0x7103 </p>
<p>osdErrSRZeroOffset </p>
<p>OSEK </p>
<p>StartScheduleTableRel</p>
<p> was called </p>
<p>with the parameter Offset set to zero. </p>
<p>0x7104 </p>
<p>osdErrSROffsetTooBig </p>
<p>OSEK </p>
<p>StartScheduleTableRel</p>
<p> was called </p>
<p>with the parameter Offset bigger than </p>
<p>MAXALLOWEDVALUE</p>
<p> of the respective </p>
<p>counter. </p>
<p>0x7105 </p>
<p>osdErrSRIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>StartScheduleTableRel</p>
<p> was called </p>
<p>with disabled interrupts. </p>
<p>0x7106 </p>
<p>osdErrSRCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x7107 </p>
<p>osdErrSRNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this schedule table </p>
<p>0x7109 </p>
<p>osdErrSRImplicite </p>
<p>Sync </p>
<p>OSEK </p>
<p>StartScheduleTableRel</p>
<p> was called for </p>
<p>an implicitly synchronized ScheduleTable </p>
<p>0x710a </p>
<p>osdErrSRWrongAppState </p>
<p>OSEK </p>
<p>Referenced schedule table is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x7201 </p>
<p>osdErrSSWrongID </p>
<p>OSEK </p>
<p>StartScheduleTableAbs</p>
<p> was called </p>
<p>with an invalid schedule table ID. </p>
<p>0x7202 </p>
<p>osdErrSSAlready </p>
<p>OSEK </p>
<p>StartScheduleTableAbs</p>
<p> was called for </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>47 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>RunningOrNext </p>
<p>a schedule table, which is already running </p>
<p>or next. </p>
<p>0x7203 </p>
<p>osdErrSSTickvalueToo  </p>
<p>Big </p>
<p>OSEK </p>
<p>StartScheduleTableAbs</p>
<p> was called </p>
<p>with the parameter TickValue bigger than </p>
<p>MAXALLOWEDVALUE</p>
<p> of the respective </p>
<p>counter. </p>
<p>0x7204 </p>
<p>osdErrSSIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>StartScheduleTableAbs</p>
<p> was called </p>
<p>with disabled interrupts. </p>
<p>0x7205 </p>
<p>osdErrSSCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x7206 </p>
<p>osdErrSSNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this schedule table </p>
<p>0x7207 </p>
<p>osdErrSSWrongAppState </p>
<p>OSEK </p>
<p>Referenced schedule table is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x7301 </p>
<p>osdErrSPWrongID </p>
<p>OSEK </p>
<p>StopScheduleTable</p>
<p> was called with an </p>
<p>invalid schedule table ID. </p>
<p>0x7302 </p>
<p>osdErrSPNotRunning </p>
<p>OSEK </p>
<p>StopScheduleTable</p>
<p> was called for a </p>
<p>schedule table, which is in stopped or next </p>
<p>state. </p>
<p>0x7303 </p>
<p>osdErrSPIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>StopScheduleTable</p>
<p> was called with </p>
<p>disabled interrupts. </p>
<p>0x7304 </p>
<p>osdErrSPCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x7305 </p>
<p>osdErrSPNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this schedule table </p>
<p>0x7306 </p>
<p>osdErrSPUnknownCase </p>
<p>Assertion </p>
<p>An internal error occured </p>
<p>0x7307 </p>
<p>osdErrSPWrongAppState </p>
<p>OSEK </p>
<p>Referenced schedule table is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x7401 </p>
<p>osdErrSGWrongID </p>
<p>OSEK </p>
<p>GetScheduleTableStatus</p>
<p> was called </p>
<p>with an invalid schedule table ID. </p>
<p>0x7402 </p>
<p>osdErrSGIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>GetScheduleTableStatus</p>
<p> was called </p>
<p>with disabled interrupts </p>
<p>0x7403 </p>
<p>osdErrSGCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x7404 </p>
<p>osdErrSGNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this schedule table </p>
<p>0x7405 </p>
<p>osdErrSGIllegalAddr </p>
<p>OSEK </p>
<p>Caller has no write access rights for </p>
<p>address argument </p>
<p>0x7406 </p>
<p>osdErrSGWrongAppState </p>
<p>OSEK </p>
<p>Referenced schedule table is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x7407 </p>
<p>osdErrSGOddInvocation </p>
<p>assertion </p>
<p>Invocation of internal function  </p>
<p>osGetScheduleTableStatus</p>
<p> detected </p>
<p>although </p>
<p>ReducedStatusChecks</p>
<p> was </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>48 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>enabled </p>
<p>0x7501 </p>
<p>osdErrSNWrongCurrent </p>
<p>ID </p>
<p>OSEK </p>
<p>NextScheduleTable</p>
<p> was called with an </p>
<p>invalid schedule table ID for the parameter </p>
<p>ScheduleTableID_current</p>
<p>. </p>
<p>0x7502 </p>
<p>osdErrSNWrongNextID </p>
<p>OSEK </p>
<p>NextScheduleTable</p>
<p> was called with an </p>
<p>invalid schedule table ID for the parameter </p>
<p>ScheduleTableID_next</p>
<p>. </p>
<p>0x7503 </p>
<p>osdErrSNNotRunning </p>
<p>OSEK </p>
<p>NextScheduleTable</p>
<p> was called to chain </p>
<p>a schedule table after another schedule </p>
<p>table, that is currently not running. </p>
<p>0x7504 </p>
<p>osdErrSNAlready </p>
<p>RunningOrNext </p>
<p>OSEK </p>
<p>NextScheduleTable</p>
<p> was called to chain </p>
<p>a running schedule table after another </p>
<p>schedule table. </p>
<p>0x7505 </p>
<p>osdErrSNDifferent </p>
<p>Counters </p>
<p>OSEK </p>
<p>NextScheduleTable</p>
<p> was called to chain </p>
<p>two schedule tables, which are driven by </p>
<p>different counters. </p>
<p>0x7506 </p>
<p>osdErrSNIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>NextScheduleTable</p>
<p> was called with </p>
<p>interrupts disabled. </p>
<p>0x7507 </p>
<p>osdErrSNCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x7508 </p>
<p>osdErrSNNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this schedule table </p>
<p>0x7509 </p>
<p>osdErrSNWrongAppState </p>
<p>OSEK </p>
<p>Referenced schedule table is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x7601 </p>
<p>osdErrWSUnknownAction </p>
<p>assertion </p>
<p>An invalid action was found in a schedule </p>
<p>table </p>
<p>0x7602 </p>
<p>osdErrWSUnknown </p>
<p>Reaction </p>
<p>assertion </p>
<p>An internal error occured </p>
<p>0x7603 </p>
<p>osdErrWSWrongID </p>
<p>assertion </p>
<p>No valid schedule table index in </p>
<p>osWorkScheduleTable</p>
<p> </p>
<p>0x7701 </p>
<p>osdErrSYCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x7702 </p>
<p>osdErrSYWrongID </p>
<p>OSEK </p>
<p>Called with wrong schedule table ID </p>
<p>0x7703 </p>
<p>osdErrSYNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this schedule table </p>
<p>0x7704 </p>
<p>osdErrSYIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Called with interrupts disabled </p>
<p>0x7705 </p>
<p>osdErrSYSTNotRunning </p>
<p>OSEK </p>
<p>The Schedule table is currently not running </p>
<p>0x7706 </p>
<p>osdErrSYGlobalTimeToo</p>
<p>Big </p>
<p>OSEK </p>
<p>The Global Time is larger than the </p>
<p>LENGTH</p>
<p> </p>
<p>of the schedule table </p>
<p>0x7707 </p>
<p>osdErrSYSyncKindNot </p>
<p>Explicit </p>
<p>OSEK </p>
<p>SyncScheduleTable</p>
<p> was called for a </p>
<p>Schedule table that is not explicitly </p>
<p>synchronized. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>49 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x7708 </p>
<p>osdErrSYWrongAppState </p>
<p>OSEK </p>
<p>Referenced schedule table is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x7801 </p>
<p>osdErrAYCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x7802 </p>
<p>osdErrAYWrongID </p>
<p>OSEK </p>
<p>Called with wrong schedule table ID </p>
<p>0x7803 </p>
<p>osdErrAYNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this schedule table </p>
<p>0x7804 </p>
<p>osdErrAYIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Called with interrupts disabled </p>
<p>0x7805 </p>
<p>osdErrAYWrongAppState </p>
<p>OSEK </p>
<p>Referenced schedule table is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x7C01 </p>
<p>osdErrTSCallContext              </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x7C02 </p>
<p>osdErrTSWrongID                 </p>
<p>OSEK </p>
<p>Called with invalid schedule table id. </p>
<p>0x7C03 </p>
<p>osdErrTSNoAccess                </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this schedule table </p>
<p>0x7C04 </p>
<p>osdErrTSIntAPI </p>
<p>Disabled          </p>
<p>OSEK </p>
<p>Called with interrupts disabled </p>
<p>0x7C05 </p>
<p>osdErrTSSTAlready </p>
<p>Running        </p>
<p>OSEK </p>
<p>The schedule table is already running or </p>
<p>scheduled to run after a currently running </p>
<p>schedule table </p>
<p>0x7C06 </p>
<p>osdErrTSGlobalTimeToo</p>
<p>Big  </p>
<p>OSEK </p>
<p>The offset to Global Time is larger than the </p>
<p>LENGTH</p>
<p> of the schedule table </p>
<p>0x7C08 </p>
<p>osdErrTSSyncKindNot </p>
<p>Explicit </p>
<p>OSEK </p>
<p>StartScheduleTableSynchron</p>
<p> was </p>
<p>called for a Schedule table that is not </p>
<p>explicitly synchronized. </p>
<p>0x7C09 </p>
<p>osdErrTSWrongAppState </p>
<p>OSEK </p>
<p>Referenced schedule table is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>Table 3-20  </p>
<p>Error numbers of group Schedule Table Control / (7) </p>
<p><b>3.3.3.8 </b></p>
<p><b>Error Numbers of Group Counter API / (8) </b></p>
<p>Group (8) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>IncrementCounter </p>
<p>IC </p>
<p>1 </p>
<p>GetCounterValue  </p>
<p>GC </p>
<p>3 </p>
<p>GetElapsedValue </p>
<p>GV </p>
<p>4 </p>
<p>Table 3-21  </p>
<p>API functions of group Counter API / (8) </p>
<p>Error numbers of group (8): </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>50 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x8101 </p>
<p>osdErrICWrongCounter </p>
<p>ID </p>
<p>OSEK </p>
<p>IncrementCounter</p>
<p> was called for an </p>
<p>invalid counter or a hardware counter. </p>
<p>0x8102 </p>
<p>osdErrICIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>IncrementCounter</p>
<p> was called with </p>
<p>interrupts disabled. </p>
<p>0x8103 </p>
<p>osdErrICCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0x8104 </p>
<p>osdErrICNoAccess </p>
<p>OSEK </p>
<p>Calling application has no access rights for </p>
<p>this counter </p>
<p>0x8105 </p>
<p>osdErrICWrongAppState </p>
<p>OSEK </p>
<p>Referenced counter is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x8301 </p>
<p>osdErrGCCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context. </p>
<p>0x8302 </p>
<p>osdErrGCIntAPIDisabled </p>
<p>OSEK </p>
<p>Called with disabled interrupts </p>
<p>0x8303 </p>
<p>osdErrGCWrongID </p>
<p>OSEK </p>
<p>Parameter CounterID is invalid </p>
<p>0x8304 </p>
<p>osdErrGCNoAccess </p>
<p>OSEK </p>
<p>Counter not accessible by the caller </p>
<p>0x8305 </p>
<p>osdErrGCIllegalAddr </p>
<p>OSEK </p>
<p>Location the reference parameter Value </p>
<p>points to is not writable for the calling </p>
<p>application </p>
<p>0x8306 </p>
<p>osdErrGCWrongAppState </p>
<p>OSEK </p>
<p>Referenced ISR is owned by an </p>
<p>OSApplication that is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x8307 </p>
<p>osdErrGCOddInvocation </p>
<p>assertion </p>
<p>Invocation of internal function  </p>
<p>osGetCounterValue</p>
<p> detected although </p>
<p>ReducedStatusChecks</p>
<p> was enabled  </p>
<p>0x8401 </p>
<p>osdErrGVCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context. </p>
<p>0x8402 </p>
<p>osdErrGVIntAPIDisabled </p>
<p>OSEK </p>
<p>Called with disabled interrupts </p>
<p>0x8403 </p>
<p>osdErrGVWrongID </p>
<p>OSEK </p>
<p>Parameter CounterID is invalid </p>
<p>0x8404 </p>
<p>osdErrGVNoAccess </p>
<p>OSEK </p>
<p>Counter not accessible by the caller </p>
<p>0x8405 </p>
<p>osdErrGVIllegalAddr </p>
<p>OSEK </p>
<p>Location a reference parameter points to is </p>
<p>not writable for the calling application </p>
<p>0x8406 </p>
<p>osdErrGVWrongAppState </p>
<p>OSEK </p>
<p>Referenced ISR is owned by an </p>
<p>OSApplication that is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x8407 </p>
<p>osdErrGVIllegalValue </p>
<p>OSEK </p>
<p>The passed value is illegal </p>
<p>0x8408 </p>
<p>osdErrGVIllegalPointer</p>
<p>s </p>
<p>OSEK </p>
<p>The pointers for out parameters Value and </p>
<p>Elapsed Value are identical. </p>
<p>0x8409 </p>
<p>osdErrGVOddInvocation </p>
<p>assertion </p>
<p>Invocation of internal function  </p>
<p>osGetElapsedValue</p>
<p> detected although </p>
<p>ReducedStatusChecks</p>
<p> was enabled </p>
<p>Table 3-22  </p>
<p>Error numbers of group Counter API / (8) </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>51 / 136 </p>
<p><b>3.3.3.9 </b></p>
<p><b>Error Numbers of Group Timing Protection and Timing Measurement / (9) </b></p>
<p>Group (9) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>GetTaskMinInterArrivalTime </p>
<p>TM </p>
<p>0 </p>
<p>BlockingTimeMonitoring </p>
<p>BM </p>
<p>7 </p>
<p>GetTaskMaxExecutionTime </p>
<p>TE </p>
<p>8 </p>
<p>GetISRMaxExecutionTime </p>
<p>IE </p>
<p>9 </p>
<p>GetTaskMaxBlockingTime </p>
<p>TB </p>
<p>A </p>
<p>GetISRMaxBlockingTime </p>
<p>IB </p>
<p>B </p>
<p>ExecutionTimeMonitoring </p>
<p>ET </p>
<p>D </p>
<p>GetISRMinInterArrivalTime </p>
<p>MI </p>
<p>F </p>
<p>Table 3-23  </p>
<p>API functions of group Timing Protection and Timing Measurement / (9) </p>
<p> </p>
<p> </p>
<p>Error numbers of group (9): </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x9001 </p>
<p>osdErrTMWrongTaskID </p>
<p>OSEK </p>
<p>Called with wrong TASK ID </p>
<p>0x9002 </p>
<p>osdErrTMNoAccess </p>
<p>OSEK </p>
<p>The calling application has no access </p>
<p>rights for the TASK </p>
<p>0x9003 </p>
<p>osdErrTMIllegalAddr </p>
<p>OSEK </p>
<p>The caller has no access rights for the </p>
<p>memory region </p>
<p>0x9004 </p>
<p>osdErrTMWrongAppState </p>
<p>OSEK </p>
<p>Referenced task is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x9702 </p>
<p>osdErrBMResAlready </p>
<p>Measured </p>
<p>assertion </p>
<p>A blocking time measurement was started </p>
<p>that is already running. This might happen </p>
<p>if timing protection is active and </p>
<p>SuspendAllInterrupts</p>
<p> is called after </p>
<p>DisableAllInterrupts</p>
<p> has already </p>
<p>been called. </p>
<p>0x9703 </p>
<p>osdErrBMInvalidProces</p>
<p>sInStart </p>
<p>assertion </p>
<p>Internal error: attempt to start Block Timing </p>
<p>Protection with an invalid task or ISR </p>
<p>0x9704 </p>
<p>osdErrBMInvalidProces</p>
<p>sInStop </p>
<p>assertion </p>
<p>Internal error: attempt to stop Block Timing </p>
<p>Protection with an invalid task or ISR </p>
<p>0x9705 </p>
<p>osdErrBMInvalidResour</p>
<p>ce </p>
<p>assertion </p>
<p>Attempt to monitor blocking time for an </p>
<p>invalid resource detected. </p>
<p>0x9801 </p>
<p>osdErrTEWrongTaskID </p>
<p>OSEK </p>
<p>GetTaskMaxExecutionTime</p>
<p> was called </p>
<p>with an invalid task identifier </p>
<p>0x9802 </p>
<p>osdErrTENoAccess </p>
<p>OSEK </p>
<p>The calling application has no access </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>52 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>rights for this task </p>
<p>0x9803 </p>
<p>osdErrTEIllegalAddr </p>
<p>OSEK </p>
<p>The caller has no access rights for this </p>
<p>memory region </p>
<p>0x9804 </p>
<p>osdErrTEWrongAppState </p>
<p>OSEK </p>
<p>Referenced task is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x9901 </p>
<p>osdErrIEWrongISRID </p>
<p>OSEK </p>
<p>GetISRMaxExecutionTime</p>
<p> was called </p>
<p>with an invalid ISR identifier </p>
<p>0x9902 </p>
<p>osdErrIENoAccess </p>
<p>OSEK </p>
<p>The calling application has no access </p>
<p>rights for this ISR </p>
<p>0x9903 </p>
<p>osdErrIEIllegalAddr </p>
<p>OSEK </p>
<p>The caller has no access rights for this </p>
<p>memory region. </p>
<p>0x9904 </p>
<p>osdErrIEWrongAppState </p>
<p>OSEK </p>
<p>Referenced ISR is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x9A01 </p>
<p>osdErrTBWrongTaskID </p>
<p>OSEK </p>
<p>Called with wrong Task ID </p>
<p>0x9A02 </p>
<p>osdErrTBWrongBlock </p>
<p>Type </p>
<p>OSEK </p>
<p>Called with wrong blocking type </p>
<p>0x9A03 </p>
<p>osdErrTBWrongResource</p>
<p>ID </p>
<p>OSEK </p>
<p>Called with wrong resource ID </p>
<p>0x9A04 </p>
<p>osdErrTBNoAccessTo </p>
<p>Task </p>
<p>OSEK </p>
<p>The calling application has no access </p>
<p>rights for the task </p>
<p>0x9A05 </p>
<p>osdErrTBNoAccessTo </p>
<p>Resource </p>
<p>OSEK </p>
<p>The calling application has no access </p>
<p>rights for the resource </p>
<p>0x9A06 </p>
<p>osdErrTBIllegalAddr </p>
<p>OSEK </p>
<p>The caller has no access rights for this </p>
<p>memory region </p>
<p>0x9A07 </p>
<p>osdErrTBWrongAppState </p>
<p>OSEK </p>
<p>Referenced task is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>0x9B01 </p>
<p>osdErrIBWrongISRID </p>
<p>OSEK </p>
<p>Called with wrong ISR ID </p>
<p>0x9B02 </p>
<p>osdErrIBWrongBlock </p>
<p>Type </p>
<p>OSEK </p>
<p>Called with wrong blocking type </p>
<p>0x9B03 </p>
<p>osdErrIBWrongResource</p>
<p>ID </p>
<p>OSEK </p>
<p>Called with wrong resource ID </p>
<p>0x9B04 </p>
<p>osdErrIBNoAccessToISR </p>
<p>OSEK </p>
<p>The calling application has no access </p>
<p>rights for the ISR </p>
<p>0x9B05 </p>
<p>osdErrIBNoAccessTo </p>
<p>Resource </p>
<p>OSEK </p>
<p>The calling application has no access </p>
<p>rights for the resource </p>
<p>0x9B06 </p>
<p>osdErrIBIllegalAddr </p>
<p>OSEK </p>
<p>The caller has no access rights for the </p>
<p>memory region </p>
<p>0x9B07 </p>
<p>osdErrIBWrongAppState </p>
<p>OSEK </p>
<p>Referenced ISR is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>53 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error Type </b></p>
<p><b>Reason </b></p>
<p>0x9D01 </p>
<p>osdErrETNoCurrent </p>
<p>Process </p>
<p>assertion </p>
<p>Execution Time Monitoring has detected </p>
<p>an invalid process ID </p>
<p>0x9F01 </p>
<p>osdErrMIWrongISRID </p>
<p>OSEK </p>
<p>Called with wrong ISR ID </p>
<p>0x9F02 </p>
<p>osdErrMINoAccess </p>
<p>OSEK </p>
<p>The calling application has no access </p>
<p>rights for the ISR </p>
<p>0x9F03 </p>
<p>osdErrMIIllegalAddr </p>
<p>OSEK </p>
<p>The caller has no access rights for the </p>
<p>memory region </p>
<p>0x9F04 </p>
<p>osdErrMIWrongAppState </p>
<p>OSEK </p>
<p>Referenced ISR is owned by an </p>
<p>OSApplication which is not in state </p>
<p>APPLICATION_ACCESSIBLE </p>
<p>Table 3-24  </p>
<p>Error numbers of group Timing Protection and Timing Measurement / (9) </p>
<p><b>3.3.3.10 </b></p>
<p><b>Platform specific error codes (A) </b></p>
<p>Group (A) contains platform specific error numbers. Please refer to [5] for further detail. </p>
<p><b>3.3.3.11 </b></p>
<p><b>Error Numbers of Group Application API (B) </b></p>
<p>Group (B) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>GetApplicationState </p>
<p>AS </p>
<p>1 </p>
<p>AllowAccess </p>
<p>AA </p>
<p>2 </p>
<p>TerminateApplication </p>
<p>TA </p>
<p>4 </p>
<p>Table 3-25  </p>
<p>API functions of group Application API / (B) </p>
<p>Error numbers of group (B): </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error </b></p>
<p><b>Type </b></p>
<p><b>Reason </b></p>
<p>0xB101 </p>
<p>osdErrASCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context. </p>
<p>0xB102 </p>
<p>osdErrASIntAPIDisabled </p>
<p>OSEK </p>
<p>Called with disabled interrupts </p>
<p>0xB103 </p>
<p>osdErrASWrongAppID </p>
<p>OSEK </p>
<p>Called with invalid OSApplication ID </p>
<p>0xB104 </p>
<p>osdErrASOddInvocation </p>
<p>assertion </p>
<p>Invocation of internal function  </p>
<p>osGetApplicationState</p>
<p> detected </p>
<p>although </p>
<p>ReducedStatusChecks</p>
<p> was </p>
<p>enabled </p>
<p>0xB201 </p>
<p>osdErrAACallContext </p>
<p>OSEK </p>
<p>Called from invalid call context. </p>
<p>0xB202 </p>
<p>osdErrAAIntAPIDisabled </p>
<p>OSEK </p>
<p>Called with disabled interrupts </p>
<p>0xB203 </p>
<p>osdErrAAWrongState </p>
<p>OSEK </p>
<p>Currently active application is not in state </p>
<p>APPLICATION_RESTARTING </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>54 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error </b></p>
<p><b>Type </b></p>
<p><b>Reason </b></p>
<p>0xB401 </p>
<p>osdErrTAWrongRestart </p>
<p>Option </p>
<p>OSEK </p>
<p>Invalid restart option </p>
<p>0xB402 </p>
<p>osdErrTACallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0xB403 </p>
<p>osdErrTAIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Called with interrupts disabled </p>
<p>0xB404 </p>
<p>osdErrTAWrongAppID </p>
<p>OSEK </p>
<p>Called with wrong OSApplication ID. </p>
<p>0xB405 </p>
<p>osdErrTANoAccess </p>
<p>OSEK </p>
<p>Caller has not sufficient access rights to </p>
<p>terminate the given OSApplication. </p>
<p>0xB406 </p>
<p>osdErrTAWrongAppState </p>
<p>OSEK </p>
<p>Referenced application is in wrong state. </p>
<p>0xB407 </p>
<p>osdErrTAInvalidTaskSta</p>
<p>te </p>
<p>assertion </p>
<p>Task state corrupt in TerminateApplication </p>
<p>Table 3-26  </p>
<p>Error numbers of group Application API / (B) </p>
<p><b>3.3.3.12 </b></p>
<p><b>Error Numbers of Group Semaphores (C) </b></p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>This group is only available for implementations that have been ordered with the </p>
<p>feature Semaphores. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p>Group (C) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>osGetSemaphore </p>
<p>GM </p>
<p>1 </p>
<p>osReleaseSemaphore </p>
<p>RS </p>
<p>2 </p>
<p>Table 3-27  </p>
<p>API functions of group Semaphores / (C) </p>
<p>Error numbers of group (C): </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error </b></p>
<p><b>Type </b></p>
<p><b>Reason </b></p>
<p>0xC101 </p>
<p>osdErrGMWrongSemaphore</p>
<p>ID </p>
<p>OSEK </p>
<p>GetSemaphore called with wrong </p>
<p>Semaphore ID </p>
<p>0xC102 </p>
<p>osdErrGMOnInterruptLev</p>
<p>el </p>
<p>OSEK </p>
<p>Called on Interrupt Level </p>
<p>0xC103 </p>
<p>osdErrGMNotExtendedTas</p>
<p>k </p>
<p>OSEK </p>
<p>Called from a Basic Task </p>
<p>0xC104 </p>
<p>osdErrGMResourcesOccup</p>
<p>OSEK </p>
<p>Called while resources are occupied </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>55 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error </b></p>
<p><b>Type </b></p>
<p><b>Reason </b></p>
<p>ied </p>
<p>0xC105 </p>
<p>osdErrGMInterruptsDisa</p>
<p>bled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>0xC201 </p>
<p>osdErrRSWrongSemaphore</p>
<p>ID </p>
<p>OSEK </p>
<p>ReleaseSemaphore called with wrong </p>
<p>Semaphore ID </p>
<p>0xC203 </p>
<p>osdErrRSAlreadyRelease</p>
<p>d </p>
<p>OSEK </p>
<p>Tried to release a semaphore that is not </p>
<p>occupied </p>
<p>0xC204 </p>
<p>osdErrRSWrongTaskPrio </p>
<p>assertion </p>
<p>Task has wrong priority level </p>
<p>0xC205 </p>
<p>osdErrRSInterruptsDisa</p>
<p>bled </p>
<p>OSEK </p>
<p>Interrupts are disabled with functions </p>
<p>provided by OSEK </p>
<p>Table 3-28  </p>
<p>Error numbers of group Semaphores / (C) </p>
<p><b>3.3.3.13 </b></p>
<p><b>Error Numbers of Group MultiCore related functions (D) </b></p>
<p>Group (D) is reserved for MultiCore implementations. MultiCore specific detail is currently </p>
<p>contained in the additional documentation. Please refer to [4] for further detail. </p>
<p><b>3.3.3.14 </b></p>
<p><b>Error Numbers of Group (Non-)TrustedFunctions (E) </b></p>
<p>Group (E) contains the functions: </p>
<p><b>API Function </b></p>
<p><b>Abbreviation </b></p>
<p><b>Function </b></p>
<p><b>Number </b></p>
<p>CallTrustedFunction </p>
<p>CT </p>
<p>3 </p>
<p>CallNonTrustedFunction </p>
<p>NT </p>
<p>4 </p>
<p>PeripheralAPI functions </p>
<p>PA </p>
<p>5 </p>
<p>Table 3-29  </p>
<p>API functions of group (Non-)TrustedFunctions (E) </p>
<p>Error numbers of group (E): </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error </b></p>
<p><b>Type </b></p>
<p><b>Reason </b></p>
<p>0xE301 </p>
<p>osdErrCTWrongFctIdx </p>
<p>OSEK </p>
<p>Invalid function index for trusted function </p>
<p>0xE302 </p>
<p>osdErrCTCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0xE303 </p>
<p>osdErrCTIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Called with interrupts disabled </p>
<p>0xE404 </p>
<p>osdErrNTWrongFctIdx </p>
<p>OSEK </p>
<p>Invalid function index for non-trusted </p>
<p>function </p>
<p>0xE405 </p>
<p>osdErrNTCallContext </p>
<p>OSEK </p>
<p>Called from invalid call context </p>
<p>0xE406 </p>
<p>osdErrNTIntAPI </p>
<p>Disabled </p>
<p>OSEK </p>
<p>Called with interrupts disabled </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>56 / 136 </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p><b> </b></p>
<p><b>Error </b></p>
<p><b>Type </b></p>
<p><b>Reason </b></p>
<p>0xE501 </p>
<p>osdErrPAInvalidAreaInd</p>
<p>ex </p>
<p>assertion </p>
<p>Not a valid peripheral region ID used within </p>
<p>the API </p>
<p>0xE502 </p>
<p>osdErrPANoAccessRight </p>
<p>assertion </p>
<p>The current caller does not have access </p>
<p>rights to the peripheral region </p>
<p>0xE503 </p>
<p>osdErrPAInvalidAddress </p>
<p>assertion </p>
<p>The address which is accessed is not </p>
<p>included within the passed peripheral </p>
<p>region </p>
<p>Table 3-30  </p>
<p>Error numbers of group (Non-)TrustedFunctions (E) </p>
<p><b>3.3.3.15 </b></p>
<p><b>Error Numbers of Group IOC (F) </b></p>
<p>Group (F) is reserved for implementations supporting IOC. IOC specific detail is currently </p>
<p>contained in the platform specific documentation. Please refer to [5] for further detail. </p>
<p><b>3.3.4 </b></p>
<p><b>Reactions on Error Situations </b></p>
<p>Depending on the error that has occurred, different reactions are performed: </p>
<p><b>&gt; </b> Errors detected from wrong usage of API functions: Call of </p>
<p>ErrorHook</p>
<p> and return to </p>
<p>the calling task or interrupt routine. </p>
<p><b>&gt; </b> Errors detected in the kernel: Call of </p>
<p>ErrorHook</p>
<p> and call of </p>
<p>ShutdownOS</p>
<p> (which calls </p>
<p>ShutdownHook</p>
<p>). </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>57 / 136 </p>
<p><b>4 </b></p>
<p><b>Installation </b></p>
<p>The </p>
<p>MICROSAR </p>
<p>OS </p>
<p>package </p>
<p>might </p>
<p>be </p>
<p>delivered </p>
<p>together </p>
<p>with </p>
<p>other </p>
<p>MICROSAR </p>
<p>embedded software. In this case, the OS is already included in the delivered package, and </p>
<p>no separate installation is necessary. If MICROSAR OS is delivered stand alone, it comes </p>
<p>up with an installation program, which installs the operating system source files and the </p>
<p>OIL  Configurator.  To  use  the  OS  with  ARXML  configurations,  the  DaVinci  configurator </p>
<p>must be installed in addition. </p>
<p><b>4.1 </b></p>
<p><b>Installation Requirements </b></p>
<p>The installation program and the OIL Configurator are 32-bit Windows programs.  </p>
<p>Requirements: </p>
<p><b>&gt; </b> Microsoft Windows95, Windows98, Windows NT, Windows 2000, Windows XP, </p>
<p>Windows Vista, Windows 7 </p>
<p><b>&gt; </b> 64 MByte of free disk space (for a complete installation) </p>
<p><b>4.2 </b></p>
<p><b>Installation Disk </b></p>
<p>All parts of the OSEK system, the OIL Configurator, and the code generator are delivered </p>
<p>with a Windows installation program. The installation program copies all files onto the local </p>
<p>hard disk and sets all paths in the INI files. The installation program asks the user for an </p>
<p>installation path; this path is the root path for all installed components. The selected path is </p>
<p>referred to in the following as </p>
<p>root</p>
<p>. The delivered installation uses the path </p>
<p>C:\OSEK</p>
<p> as </p>
<p>the default </p>
<p>root</p>
<p> path. </p>
<p>There are two possible installation styles than can be selected: </p>
<p><b>&gt; </b> MICROSAR style: compatible with Vector AUTOSAR stack </p>
<p><b>&gt; </b> osCAN style: compatible with osCAN </p>
<p>The installation paths are determined depending on the selected style </p>
<p>The installed components are: </p>
<p> </p>
<p><b>Components </b></p>
<p><b>osCAN style </b></p>
<p><b>MICROSAR style </b></p>
<p>OIL Configurator </p>
<p>root\OILTOOL </p>
<p>root\Generators\Tools\OilTool </p>
<p>OSEK system </p>
<p>root\HwPlatform </p>
<p>root\BSW\Os </p>
<p>Table 4-1  </p>
<p>Installed components </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>58 / 136 </p>
<p><b>4.3 </b></p>
<p><b>OIL Configurator </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info</b></p>
<p><b> </b></p>
<p>Please note that 'OIL Configurator' and 'OIL Tool' are used as synonyms in this </p>
<p>document.</p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p>The </p>
<p>OIL </p>
<p>Configurator </p>
<p>is </p>
<p>a </p>
<p>common </p>
<p>tool </p>
<p>for </p>
<p>different </p>
<p>OSEK </p>
<p>implementations. </p>
<p>The </p>
<p>implementation specific parts are the code generator and the OIL implementation files for </p>
<p>the code generator. </p>
<p> </p>
<p><b>Components </b></p>
<p><b>osCAN style </b></p>
<p><b>MICROSAR style </b></p>
<p>OIL Configurator </p>
<p>root\OILTOOL </p>
<p>root\Generators\Tools\OilTool </p>
<p>OIL implementation files </p>
<p>root\OILTOOL\GEN </p>
<p>root\Generators\Os </p>
<p>Code generator </p>
<p>root\OILTOOL\GEN </p>
<p>root\Generators\Os </p>
<p>Table 4-2  </p>
<p>System configuration and generation tools </p>
<p><b>4.3.1 </b></p>
<p><b>INI Files of the OIL Tool </b></p>
<p>The OIL Configurator has two INI files, which are in the directory of the OIL Configurator: </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>OILGEN.INI </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>OILCFG.INI </p>
<p><b>4.3.2 </b></p>
<p><b>OIL Implementation Files </b></p>
<p>The implementation files are copied onto the local hard disk by the installation program. </p>
<p>The OIL tool has knowledge about these files through the INI file </p>
<p>OILGEN.INI</p>
<p> (the correct </p>
<p>path is set by the installation program). </p>
<p>The implementation files are described in the hardware specific part of this manual [4]. </p>
<p><b>4.3.3 </b></p>
<p><b>Code Generator </b></p>
<p>The  code  generator </p>
<p>GENxxxx.EXE</p>
<p>  is copied  onto  the  local hard disk  by  the  installation </p>
<p>program.  The  code  generator  is  defined  in  the  INI-file </p>
<p>OILGEN.INI</p>
<p>.  (‘xxxx’  has  to  be </p>
<p>replaced by a hardware dependent abbreviation)   </p>
<p><b>4.4 </b></p>
<p><b>OSEK Operating System </b></p>
<p><b>4.4.1 </b></p>
<p><b>Installation Paths </b></p>
<p>The delivered operating system parts are organized in different subdirectories.  </p>
<p>The following structure is used by osCAN style installations: </p>
<p><b>&gt; </b></p>
<p>root\HwPlatform\APPL\Compiler\Derivative </p>
<p>Sample applications </p>
<p><b>&gt; </b></p>
<p>root\HwPlatform\BIN </p>
<p>executable files (e.g. make tool) </p>
<p><b>&gt; </b></p>
<p>root\HwPlatform\bswmd_files </p>
<p>XML parameter descrption files </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>59 / 136 </p>
<p><b>&gt; </b></p>
<p>root\HwPlatform\DOC </p>
<p>Documentation </p>
<p><b>&gt; </b></p>
<p>root\HwPlatform\INCLUDE </p>
<p>OSEK include files </p>
<p><b>&gt; </b></p>
<p>root\HwPlatform\LIB </p>
<p>OSEK library  (only if a library is available)  </p>
<p><b>&gt; </b></p>
<p>root\HwPlatform\SRC </p>
<p>OSEK sources (C and Assembler) </p>
<p> </p>
<p>The following structure is used by MICROSAR style installations: </p>
<p><b>&gt; </b></p>
<p>root\Demo\Os </p>
<p>Sample applications </p>
<p><b>&gt; </b></p>
<p>root\Generators\Os </p>
<p>executable files (e.g. make tool) </p>
<p><b>&gt; </b></p>
<p>root\Generators\Components\_Schemes\</p>
<p> </p>
<p>Os_&lt;platform and derivate&gt;_bswmd \bswmd </p>
<p>XML parameter descrption files </p>
<p><b>&gt; </b></p>
<p>root\Doc\TechnicalReferences </p>
<p><b>&gt; </b></p>
<p>root \Doc\UserManuals </p>
<p>Documentation </p>
<p><b>&gt; </b></p>
<p>root\BSW\Os </p>
<p>OSEK include files </p>
<p><b>&gt; </b></p>
<p>root\BSW\Os </p>
<p>OSEK library  (only if a library is available)  </p>
<p><b>&gt; </b></p>
<p>root\BSW\Os </p>
<p>OSEK sources (C and Assembler) </p>
<p> </p>
<p><b>4.5 </b></p>
<p><b>XML Configurations </b></p>
<p>AUTOSAR uses for configuration files the XML format. An XML Schema (ref. [8]) defines </p>
<p>the structure. For each derivative there is an ECU Parameter Definition File (file extension </p>
<p>is </p>
<p>arxml</p>
<p>)  which  defines  all  attributes  (standard  attribute  and  vendor/platform  specific </p>
<p>attributes). </p>
<p>The Vector implementation of AUTOSAR OS uses the OIL [6] configuration file format or </p>
<p>ECU Configuration files. A conversion of ECUC files to OIL, as it was necessary in former </p>
<p>versions of MICROSAR OS, is not required any more. </p>
<p><b>4.5.1 </b></p>
<p><b>Parameter Definition Files </b></p>
<p>Parameter </p>
<p>Definition </p>
<p>Files </p>
<p>for </p>
<p>the </p>
<p>implementation </p>
<p>can </p>
<p>be </p>
<p>found </p>
<p>in </p>
<p>the </p>
<p>directory </p>
<p>root\HwPlatform\BSWMD_files </p>
<p>(osCAN style) or</p>
<p> </p>
<p>root\Generators\Components\_Schemes\Os_&lt;platform and </p>
<p>derivate&gt;_bswmd\bswmd </p>
<p>(MICROSAR style). </p>
<p>The files have the name </p>
<p>OS_&lt;platform and derivate&gt;_bswmd.arxml</p>
<p>. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>60 / 136 </p>
<p><b>5 </b></p>
<p><b>Integration </b></p>
<p>This chapter gives necessary information for the integration of the MICROSAR OS into an </p>
<p>application environment of an ECU. </p>
<p><b>5.1 </b></p>
<p><b>Scope of Delivery </b></p>
<p>The delivery of the OS contains the files that are described in the chapters 5.1.1 and 5.1.2: </p>
<p><b>5.1.1 </b></p>
<p><b>Static Files </b></p>
<p>The static file list is described in the platform specific technical reference [4] </p>
<p><b>5.1.2 </b></p>
<p><b>Dynamic Files </b></p>
<p>The  dynamic  files  are  generated  by  the  code  generator  GENxxxx  (xxxx  is  replaced  by </p>
<p>hardware platform name).  </p>
<p><b>5.1.2.1 </b></p>
<p><b>Code Generator GENxxxx </b></p>
<p><b>File Name </b></p>
<p><b>Description </b></p>
<p>tcb.c </p>
<p>tcb contains the task control block and other OS object  </p>
<p>tcb.h </p>
<p>task and other OS object related information, like task Ids – definitions </p>
<p>required by static include files (e.g. array sizes) </p>
<p>tcbpost.h </p>
<p>task and other OS object related information, like task Ids – declarations </p>
<p>that require static include files (e.g. typedef's) </p>
<p>trustfct.h </p>
<p>Header containing trusted function information </p>
<p>trustfct.c </p>
<p>Trusted function data and generated stubs </p>
<p>libconf </p>
<p>Information for usage in makefiles, not available on all platforms, see </p>
<p>chapter 5.1.2.1.1 </p>
<p>&lt;OILFileName&gt;.ort </p>
<p>Generated if kernel aware debugging with the ORTI interface is enabled, </p>
<p>Table 5-1  </p>
<p>Files generated by code generator GENxxxx </p>
<p>In addition to the files listed in Table 5-1, some hardware dependent files are generated </p>
<p>which are described in the hardware specific technical reference [4]. </p>
<p><b>5.1.2.1.1 </b></p>
<p><b>Generated file libconf </b></p>
<p>The  file  libconf  is  meant  for  the  inclusion  into  makefiles.  It  sets  some  variables  in </p>
<p>accordance  to  general  configuration  settings  of  MICROSAR  OS  to  inform  the  make </p>
<p>process about them. Dependent on the platform, the file may contain more information or </p>
<p>be even unavailable, so please see the hardware specific technical reference [4].  </p>
<p>The table below describes the generated variables. </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>61 / 136 </p>
<p><b>Variable </b></p>
<p><b>Meaning </b></p>
<p>LIB</p>
<p> </p>
<p>Always 0, because MICROSAR OS SafeContext cannot be configured to library </p>
<p>variant.</p>
<p> </p>
<p>STATUS_LEVEL</p>
<p> </p>
<p>Reflects the setting of the configuration attribute STATUS of MICROSAR OS. </p>
<p>Possible values: </p>
<p>EXTENDED_STATUS = 1</p>
<p> </p>
<p>DEBUG_SUPPORT</p>
<p> </p>
<p>Always 1, because ORTIDebugSupport is always enabled for MICROSAR OS </p>
<p>SafeContext.</p>
<p> </p>
<p>Table 5-2  </p>
<p>Variables generated into the file libconf </p>
<p> </p>
<p> </p>
<p><b>5.1.2.2 </b></p>
<p><b>Application Template Generator GENTMPL </b></p>
<p>Former  versions  of  MICROSAR  OS  and  osCAN  came  with  a  template  code  generator </p>
<p>which generates a main.c template file with empty implementations for the objects defined </p>
<p>in the configuration. This is not supported any more in newer implementations. </p>
<p><b>5.2 </b></p>
<p><b>Include Structure </b></p>
<p>The header files </p>
<p>tcb.h</p>
<p> and </p>
<p>tcbpost.h</p>
<p> are included into the file </p>
<p>os.h</p>
<p>. The user must </p>
<p>include </p>
<p>os.h</p>
<p> in every module of his application. The headers </p>
<p>tcb.h</p>
<p> and </p>
<p>tcbpost.h</p>
<p> are </p>
<p>included  automatically. Always  recompile  all  files  after  a  new  generation  of </p>
<p>tcb.h</p>
<p>  and </p>
<p>tcbpost.h</p>
<p>. </p>
<p>If an application is using trusted functions and the Vector extension “GenerateStubs”, an </p>
<p>include file named </p>
<p>usrostyp.h</p>
<p> must be present in the include path. This file must contain </p>
<p>all user specific data types used for trusted functions. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>62 / 136 </p>
<p><b>6 </b></p>
<p><b>API Description </b></p>
<p><b>6.1 </b></p>
<p><b>Standard API - Overview </b></p>
<p>This  chapter  gives  an  overview  of  all  standard  API  functions  defined  for  the  OS.  The </p>
<p>following synonyms present the standard specifications: </p>
<p><b>&gt; </b> ASR: AUTOSAR standard, reference [1] </p>
<p><b>&gt; </b> OSEK: OSEK standard, reference [3] </p>
<p>These standard specifications contain the detailed API descriptions. In case part of an API </p>
<p>function  is  implementation  specific,  the  detailed  API  description  is  given  in  a  further </p>
<p>subchapter in this document. </p>
<p><b>API Function Prototype </b></p>
<p><b>Standard </b></p>
<p><b>Specification </b></p>
<p><b>Scalability </b></p>
<p><b>Class </b></p>
<p><b>OSEK </b></p>
<p><b>ASR </b></p>
<p><b>1 </b></p>
<p><b>2 </b></p>
<p><b>3 </b></p>
<p><b>4 </b></p>
<p>Task Handling </p>
<p>StatusType <b>ActivateTask </b> (TaskType TaskID)</p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>TerminateTask </b>(void) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>ChainTask    </b> (TaskType TaskID) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>Schedule     </b> (void) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>GetTaskID    </b> (TaskRefType TaskID) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>GetTaskState </b> (TaskType TaskID, </p>
<p>                         TaskStateRefType State) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>Event Control </p>
<p>StatusType <b>SetEvent  </b> (TaskType TaskID, </p>
<p>                      EventMaskType Mask) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>ClearEvent </b>(EventMaskType Mask) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>GetEvent  </b> (TaskType TaskID, </p>
<p>                      EventMaskRefType Mask) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>WaitEvent </b> (EventMaskType Mask) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>Interrupt Handling </p>
<p>The behavior of the interrupt handling functions is implementation specific. For a detailed </p>
<p>description see hardware specific technical reference [4]. </p>
<p>void <b>EnableAllInterrupts  </b>(void) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>void <b>DisableAllInterrupts </b>(void) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>void <b>ResumeAllInterrupts  </b>(void) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>void <b>SuspendAllInterrupts </b>(void) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>void <b>ResumeOSInterrupts   </b>(void) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>void <b>SuspendOSInterrupts  </b>(void) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>63 / 136 </p>
<p><b>API Function Prototype </b></p>
<p><b>Standard </b></p>
<p><b>Specification </b></p>
<p><b>Scalability </b></p>
<p><b>Class </b></p>
<p><b>OSEK </b></p>
<p><b>ASR </b></p>
<p><b>1 </b></p>
<p><b>2 </b></p>
<p><b>3 </b></p>
<p><b>4 </b></p>
<p>Resource Management </p>
<p>The behaviour of the resource management functions is implementation specific </p>
<p>StatusType <b>GetResource     </b> (ResourceType ResID) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>ReleaseResource </b> (ResourceType ResID) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>Alarms </p>
<p>StatusType <b>GetAlarmBase </b> (AlarmType AlarmID, </p>
<p>                        AlarmBaseRefType Info) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>GetAlarm     </b> (AlarmType AlarmID, </p>
<p>                        TickRefType Tick) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>SetRelAlarm  </b> (AlarmType AlarmID, </p>
<p>                        TickType Increment, </p>
<p>                        TickType cycle) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>SetAbsAlarm  </b> (AlarmType AlarmID, </p>
<p>                        TickType Start, </p>
<p>                        TickType cycle) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>CancelAlarm  </b> (AlarmType AlarmID) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>Execution Control </p>
<p>void        <b> StartOS    </b>(AppModeType Mode) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>void        <b> ShutdownOS </b>(StatusType Error) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>ISRType     <b> GetISRID  </b>(void) </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>AppModeType <b>GetActiveApplicationMode</b>(void) </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>ApplicationType <b>GetApplicationID   </b> (void) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> CallTrustedFunction </b></p>
<p> (TrustedFunctionIndexType FunctionIndex, </p>
<p> TrustedFunctionParameterRefType FunctionParams) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType   GetApplicationState </p>
<p> (ApplicationType Application, </p>
<p>ApplicationStateRefType Value) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>Hook Routines </p>
<p>The context for called hook routines is implementation specific. For a detailed description see </p>
<p>see hardware specific technical reference [4]. </p>
<p>void  <b> ErrorHook          </b>(StatusType Error) </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>void  <b> PreTaskHook        </b>(void) </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>void  <b> PostTaskHook       </b>(void) </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>void  <b> StartupHook        </b>(void) </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>void  <b> ShutdownHook       </b>(StatusType Error) </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>ProtectionReturnType <b>ProtectionHook </b></p>
<p>                         (StatusType Fatalerror) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>64 / 136 </p>
<p><b>API Function Prototype </b></p>
<p><b>Standard </b></p>
<p><b>Specification </b></p>
<p><b>Scalability </b></p>
<p><b>Class </b></p>
<p><b>OSEK </b></p>
<p><b>ASR </b></p>
<p><b>1 </b></p>
<p><b>2 </b></p>
<p><b>3 </b></p>
<p><b>4 </b></p>
<p>Schedule Tables </p>
<p>StatusType  <b> StartScheduleTableRel </b></p>
<p><b>    </b>(ScheduleTableType ScheduleTableID, </p>
<p>      TickType Offset) </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> StartScheduleTableAbs </b></p>
<p><b>    </b>(ScheduleTableType ScheduleTableID, </p>
<p>      TickType Start) </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> StopScheduleTable </b></p>
<p><b>    </b>(ScheduleTableType ScheduleTableID) </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> NextScheduleTable </b></p>
<p><b>    </b>(ScheduleTableType ScheduleTableID_From, </p>
<p>      ScheduleTableType ScheduleTableID_To) </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> StartScheduleTableSynchron </b></p>
<p><b>    </b>(ScheduleTableType ScheduleTableID) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> SyncScheduleTable </b></p>
<p><b>    </b>(ScheduleTableType ScheduleTableID, </p>
<p>      TickType Value) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> SetScheduleTableAsync </b></p>
<p><b>    </b>(ScheduleTableType ScheduleTableID) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> GetScheduleTableStatus </b></p>
<p><b>    </b>(ScheduleTableType ScheduleTableID, </p>
<p>      ScheduleTableStatusRefType ScheduleStatus) </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>Counters </p>
<p>StatusType  <b> IncrementCounter </b></p>
<p><b>    </b>(CounterType CounterID) </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> GetCounterValue </b></p>
<p><b>    </b>(CounterType CounterID, TickRefType Value) </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> GetElapsedValue </b></p>
<p><b>    </b>(CounterType CounterID, TickRefType Value, </p>
<p>      TickRefType ElapsedValue) </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>Access Rights Management </p>
<p>AccessType  <b> CheckISRMemoryAccess </b></p>
<p><b>    </b>(ISRType ISRID, </p>
<p>      MemoryStartAddressType Address, </p>
<p>      MemorySizeType Size) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>AccessType  <b> CheckTaskMemoryAccess </b></p>
<p><b>    </b>(TaskType TaskID, </p>
<p>      MemoryStartAddressType Address, </p>
<p>      MemorySizeType Size) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>ObjectAccessType <b>CheckObjectAccess </b></p>
<p><b>    </b>(ApplicationType ApplID, </p>
<p>      ObjectTypeType ObjectType, …) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>65 / 136 </p>
<p><b>API Function Prototype </b></p>
<p><b>Standard </b></p>
<p><b>Specification </b></p>
<p><b>Scalability </b></p>
<p><b>Class </b></p>
<p><b>OSEK </b></p>
<p><b>ASR </b></p>
<p><b>1 </b></p>
<p><b>2 </b></p>
<p><b>3 </b></p>
<p><b>4 </b></p>
<p>ApplicationType <b>CheckObjectOwnership </b></p>
<p><b>    </b>(ObjectTypeType ObjectType, …) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>Table 6-1  </p>
<p>Standard API functions </p>
<p><b>6.2 </b></p>
<p><b>API Functions defined by Vector - Overview </b></p>
<p>This chapter gives an overview of all API functions defined for the OS by Vector. Further </p>
<p>chapters contain detailed descriptions of these API functions. </p>
<p><b>API Function Prototype </b></p>
<p><b>Scalability </b></p>
<p><b>Class </b></p>
<p><b>1 </b></p>
<p><b>2 </b></p>
<p><b>3 </b></p>
<p><b>4 </b></p>
<p>Measurement API </p>
<p>For a detailed description see chapter 6.4. </p>
<p>StatusType  <b> GetTaskMaxExecutionTime </b></p>
<p><b>     </b> (TaskType TaskID, osTPTimeRefType MaxTime) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> GetISRMaxExecutionTime </b></p>
<p>      (ISRType TaskID, osTPTimeRefType MaxTime) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> GetTaskMaxBlockingTime </b></p>
<p>      (TaskType TaskID, BlockTypeType BlockType, </p>
<p>       ResourceType ResourceID, osTPTimeRefType MaxTime) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType  <b> GetISRMaxBlockingTime </b></p>
<p>      (ISRType ISRID, BlockTypeType BlockType, </p>
<p>       ResourceType ResourceID, osTPTimeRefType MaxTime) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>osGetISRMinInterArrivalTime </b></p>
<p>       (ISRType ISRID, osTPTimeStampRefType MinTime) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>StatusType <b>osGetTaskMinInterArrivalTime </b></p>
<p>       (TaskType ISRID, osTPTimeStampRefType MinTime) </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>Non-Trusted Functions </p>
<p>Calling service functions from Non-Trusted Applications. The complement part of the AUTOSAR </p>
<p>API CallTrustedFunction. </p>
<p>StatusType  <b> osCallNonTrustedFunction </b></p>
<p> (NonTrustedFunctionIndexType FunctionIndex, </p>
<p> NonTrustedFunctionParameterRefType FunctionParams) </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>Peripheral Region API </p>
<p>API to access memory mapped hardware registers, which are only accessible in </p>
<p>privileged mode. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>osuint8  <b>osReadPeripheral8</b>(osuint16 area, osuint32 address) </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>osuint16 <b>osReadPeripheral16</b>(osuint16 area, osuint32 address) </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>osuint32 <b>osReadPeripheral32</b>(osuint16 area, osuint32 address) </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>66 / 136 </p>
<p><b>API Function Prototype </b></p>
<p><b>Scalability </b></p>
<p><b>Class </b></p>
<p><b>1 </b></p>
<p><b>2 </b></p>
<p><b>3 </b></p>
<p><b>4 </b></p>
<p>void <b>osWritePeripheral8</b>(osuint16 area, osuint32 address, osuint8 </p>
<p>value) </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>void <b>osWritePeripheral16</b>(osuint16 area, osuint32 address, osuint16 </p>
<p>value) </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>void <b>osWritePeripheral32</b>(osuint16 area, osuint32 address, osuint32 </p>
<p>value) </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>void <b>osModifyPeripheral8</b>(osuint16 area, osuint32 address, osuint8 </p>
<p>clearmask, osuint8 setmask) </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>void <b>osModifyPeripheral16</b>(osuint16 area, osuint32 address, osuint16 </p>
<p>clearmask, osuint16 setmask) </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>void <b>osModifyPeripheral32</b>(osuint16 area, osuint32 address, osuint32 </p>
<p>clearmask, osuint32 setmask) </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>MPU Access Checking API </p>
<p>Check whether you have read/write access to a given address.</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>uint8 <b>osCheckMPUAccess</b>(uint8* DestinationAddress) </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>Table 6-2  </p>
<p>Vector API functions </p>
<p><b>6.3 </b></p>
<p><b>Timing Measurement API </b></p>
<p><b>6.3.1 </b></p>
<p><b>GetTaskMaxExecutionTime </b></p>
<p><b>Prototype </b></p>
<p>StatusType <b>GetTaskMaxExecutionTime </b>( TaskType TaskID, osTPTimeRefType MaxTime ) </p>
<p><b>Parameter </b></p>
<p>TaskID </p>
<p>The task to be questioned </p>
<p>MaxTime </p>
<p>Maximum execution time, measured in all finished time frames. </p>
<p><b>Return code </b></p>
<p>E_OK </p>
<p>No errors </p>
<p>E_OS_ID </p>
<p>The </p>
<p>TaskID</p>
<p> is not valid. </p>
<p><b>Functional Description </b></p>
<p>The maximum execution time of finished executions of the questioned task since StartOS. The value is in </p>
<p>ticks of the ExecutionTime hardware timer. The number of ticks per ms of this timer is printed into the HTML </p>
<p>list file.  </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Available in Scalability Classes 2 and 4. </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>This function is only available if the attribute </p>
<p>TimingMeasurement</p>
<p> is set to </p>
<p>TRUE</p>
<p> (is selected) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>67 / 136 </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>task  or cat2 ISR </p>
<p>Table 6-3  </p>
<p>GetTaskMaxExecutionTime </p>
<p><b>6.3.2 </b></p>
<p><b>GetISRMaxExecutionTime </b></p>
<p><b>Prototype </b></p>
<p>StatusType <b>GetISRMaxExecutionTime </b>( ISRType  TaskID, osTPTimeRefType MaxTime ) </p>
<p><b>Parameter </b></p>
<p>TaskID </p>
<p>The task to be questioned </p>
<p>MaxTime </p>
<p>Maximum execution time of the respective ISR for all finished ISR activations. </p>
<p><b>Return code </b></p>
<p>E_OK </p>
<p>No errors </p>
<p>E_OS_ID </p>
<p>The </p>
<p>ISRID</p>
<p> is not valid. </p>
<p><b>Functional Description </b></p>
<p>The maximum execution time of finished executions of the questioned ISR since StartOS. The value is in </p>
<p>ticks of the ExecutionTime hardware timer. The number of ticks per ms of this timer is printed into the HTML </p>
<p>list file.  </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Available in Scalability Classes 2 and 4. </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant.  </p>
<p><b>&gt; </b></p>
<p>This function is only available if the attribute </p>
<p>TimingMeasurement</p>
<p> is set to </p>
<p>TRUE</p>
<p> (is selected) </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>task  or cat2 ISR </p>
<p>Table 6-4  </p>
<p>GetISRMaxExecutionTime </p>
<p><b>6.3.3 </b></p>
<p><b>GetTaskMaxBlockingTime </b></p>
<p><b>Prototype </b></p>
<p>StatusType <b>GetTaskMaxBlockingTime </b>( </p>
<p>    TaskType  TaskID, </p>
<p>    BlockTypeType BlockType, </p>
<p>    ResourceType  ResourceID, </p>
<p>    osTPTimeRefType MaxTime ) </p>
<p><b>Parameter </b></p>
<p>TaskID </p>
<p>The task to be questioned </p>
<p>BlockType </p>
<p>OS_ALL_INTERRUPTS</p>
<p>, </p>
<p>OS_OS_INTERRUPTS</p>
<p> or </p>
<p>OS_RESOURCE</p>
<p> </p>
<p>ResourceID </p>
<p>If </p>
<p>BlockType</p>
<p> == </p>
<p>OS_RESOURCE</p>
<p>, ResourceID specifies the Resource </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>68 / 136 </p>
<p>MaxTime </p>
<p>Maximum of all measured times. </p>
<p><b>Return code </b></p>
<p>E_OK </p>
<p>No errors </p>
<p>E_OS_ID </p>
<p>The </p>
<p>TaskID</p>
<p>, the </p>
<p>BlockType</p>
<p> or the </p>
<p>ResourceID</p>
<p> are invalid. </p>
<p><b>Functional Description </b></p>
<p>The maximum blocking time of finished locking sequences of the questioned task and the resource or </p>
<p>interrupt lock type since StartOS. The value is in ticks of the BlockingTime hardware timer. The number of </p>
<p>ticks per ms of this timer is printed into the HTML list file. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Available in Scalability Classes 2 and 4. </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant.  </p>
<p><b>&gt; </b></p>
<p>This function is only available if the attribute </p>
<p>TimingMeasurement</p>
<p> is set to </p>
<p>TRUE</p>
<p> (is selected) </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>task  or cat2 ISR </p>
<p>Table 6-5  </p>
<p>GetTaskMaxBlockingTime </p>
<p><b>6.3.4 </b></p>
<p><b>GetISRMaxBlockingTime </b></p>
<p><b>Prototype </b></p>
<p>StatusType <b>GetISRMaxBlockingTime </b>( </p>
<p>    ISRType  ISRID, </p>
<p>    BlockTypeType BlockType, </p>
<p>    ResourceType  ResourceID, </p>
<p>    osTPTimeRefType MaxTime ) </p>
<p><b>Parameter </b></p>
<p>ISRID</p>
<p> </p>
<p>The ISR to be questioned </p>
<p>BlockType </p>
<p>OS_ALL_INTERRUPTS</p>
<p>, </p>
<p>OS_OS_INTERRUPTS</p>
<p> or </p>
<p>OS_RESOURCE</p>
<p> </p>
<p>ResourceID </p>
<p>If </p>
<p>BlockType</p>
<p> == </p>
<p>OS_RESOURCE</p>
<p>, ResourceID specifies the Resource </p>
<p>MaxTime </p>
<p>Maximum of all measured times. </p>
<p><b>Return code </b></p>
<p>E_OK </p>
<p>No errors </p>
<p>E_OS_ID </p>
<p>The </p>
<p>TaskID</p>
<p>, the </p>
<p>BlockType</p>
<p> or the </p>
<p>ResourceID</p>
<p> are invalid. </p>
<p><b>Functional Description </b></p>
<p>The maximum blocking time of finished locking sequences of the questioned ISR and the resource or </p>
<p>interrupt lock type since StartOS. The value is in ticks of the BlockingTime hardware timer. The number of </p>
<p>ticks per ms of this timer is printed into the HTML list file. </p>
<p><b>Particularities and Limitations </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>69 / 136 </p>
<p><b>&gt; </b></p>
<p>Available in Scalability Classes 2 and 4. </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant.  </p>
<p><b>&gt; </b></p>
<p>This function is only available if the attribute </p>
<p>TimingMeasurement</p>
<p> is set to </p>
<p>TRUE</p>
<p> (is selected) </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>task  or cat2 ISR </p>
<p>Table 6-6  </p>
<p>GetISRMaxBlockingTime </p>
<p><b>6.3.5 </b></p>
<p><b>GetTaskMinInterArrivalTime </b></p>
<p><b>Prototype </b></p>
<p>StatusType <b>GetTaskMinInterArrivalTime</b>( TaskType TaskID, osTPTimeStampRefType </p>
<p>MinTime ) </p>
<p><b>Parameter </b></p>
<p>TaskID </p>
<p>The task to be questioned </p>
<p>MinTime </p>
<p>Minimum time between two task arrivals  </p>
<p><b>Return code </b></p>
<p>E_OK </p>
<p>No errors </p>
<p>E_OS_ID </p>
<p>The </p>
<p>TaskID</p>
<p> is not valid. </p>
<p>E_OS_ACCESS </p>
<p>No access rights to task (SC4 only) </p>
<p>E_OS_ILLEGAL_ADDRESS </p>
<p>Memory address of </p>
<p>MinTime</p>
<p> not writeable (SC4 only) </p>
<p><b>Functional Description </b></p>
<p>Returns the minimum time span between two arrivals of a task (see [1]) as measured since StartOS. The </p>
<p>value is in ticks of the InterArrivalTime hardware timer. The number of ticks per ms of this timer is printed </p>
<p>into the HTML list file. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Available in Scalability Classes 2 and 4. </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant.  </p>
<p><b>&gt; </b></p>
<p>This function is only available if the attribute </p>
<p>TimingMeasurement</p>
<p> is set to </p>
<p>TRUE</p>
<p> (is selected) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>70 / 136 </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>task  or cat2 ISR </p>
<p>Table 6-7  </p>
<p>GetTaskMinInterArrivalTime </p>
<p><b>6.3.6 </b></p>
<p><b>GetISRMinInterArrivalTime </b></p>
<p><b>Prototype </b></p>
<p>StatusType <b>GetISRMinInterArrivalTime </b>( ISRType IsrID, osTPTimeStampRefType </p>
<p>MinTime ) </p>
<p><b>Parameter </b></p>
<p>IsrID </p>
<p>The ISR to be questioned </p>
<p>MinTime </p>
<p>Minimum time between two ISR arrivals </p>
<p><b>Return code </b></p>
<p>E_OK </p>
<p>No errors </p>
<p>E_OS_ID </p>
<p>The </p>
<p>ISRID</p>
<p> is not valid. </p>
<p>E_OS_ACCESS </p>
<p>No access rights for this ISR (SC4 only) </p>
<p>E_OS_ILLEGAL_ADDRESS </p>
<p>Memory address of </p>
<p>MinTime</p>
<p> not writeable (SC4 only) </p>
<p><b>Functional Description </b></p>
<p>Returns the minimum time span between two arrivals of an ISR (see [1]) as measured since StartOS. The </p>
<p>value is in ticks of the InterArrivalTime hardware timer. The number of ticks per ms of this timer is printed </p>
<p>into the HTML list file. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Available in Scalability Classes 2 and 4. </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant.  </p>
<p><b>&gt; </b></p>
<p>This function is only available if the attribute </p>
<p>TimingMeasurement</p>
<p> is set to </p>
<p>TRUE</p>
<p> (is selected) </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>task or cat2 ISR </p>
<p>Table 6-8  </p>
<p>GetISRMinInterArrivalTime </p>
<p><b>6.4 </b></p>
<p><b>Implementation specific Behavior </b></p>
<p>The behaviour of the functions listed in this chapter is implementation specific.  </p>
<p><b>6.4.1 </b></p>
<p><b>Interrupt Handling  </b></p>
<p>In general the usage of the interrupt API functions is allowed before the operating system </p>
<p>is started. The affected functions are:  </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>DisableAllInterupts </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>EnableAllInterrupts </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>71 / 136 </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>SuspendAllInterrupts </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>ResumeAllInterrupts </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>SuspendOSInterrupts </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>ResumeOSInterrupts </p>
<p>The implementation specific behaviour is of these functions is described in [5]. </p>
<p><b>6.4.1.1 </b></p>
<p><b>EnableAllInterrupts </b></p>
<p><b>Prototype </b></p>
<p>void EnableAllInterrupts ( void ) </p>
<p><b>Parameter </b></p>
<p>-- </p>
<p>-- </p>
<p><b>Return code </b></p>
<p>void </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>This service restores the state saved by </p>
<p>DisableAllInterrupts</p>
<p>. </p>
<p> </p>
<p>This service is a counterpart of </p>
<p>DisableAllInterrupts</p>
<p> service, which has to be called before, and its </p>
<p>aim is the completion of the critical section of code. No API service calls are allowed within this critical </p>
<p>section. </p>
<p> </p>
<p>The implementation should adapt this service to the target hardware providing a minimum overhead. </p>
<p>Usually, this service enables recognition of interrupts by the central processing unit. </p>
<p> </p>
<p>This function might be implemented using a global interrupt flag or an interrupt level register. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>When using before </p>
<p>StartOS</p>
<p>, the function </p>
<p>osInitialize</p>
<p> must be called first to initialize the variables </p>
<p>which are used in the interrupt API. </p>
<p><b>&gt; </b></p>
<p>The function must not be used within handlers of non-maskable interrupts as this can violate the </p>
<p>consistancy of internal variables. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Table 6-9  </p>
<p>EnableAllInterrupts </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>72 / 136 </p>
<p><b>6.4.1.2 </b></p>
<p><b>DisableAllInterrupts </b></p>
<p><b>Prototype </b></p>
<p>void DisableAllInterrupts ( void ) </p>
<p><b>Parameter </b></p>
<p>-- </p>
<p>-- </p>
<p><b>Return code </b></p>
<p>Void </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>This service disables all interrupts for which the hardware supports disabling. The state before is saved for </p>
<p>the </p>
<p>EnableAllInterrupts</p>
<p> call.  </p>
<p>This service is intended to start a critical section of the code. This section shall be finished by calling the </p>
<p>EnableAllInterrupts</p>
<p> service. No API service calls are allowed within this critical section. </p>
<p>The implementation should adapt this service to the target hardware providing a minimum overhead. </p>
<p>Usually, this service disables recognition of interrupts by the central processing unit. </p>
<p>Note that this service does not support nesting. If nesting is needed for critical sections e.g. for libraries </p>
<p>SuspendOSInterrupts</p>
<p>/</p>
<p>ResumeOSInterrupts</p>
<p> or </p>
<p>SuspendAllInterrupt</p>
<p>/</p>
<p>ResumeAllInterrupts</p>
<p> </p>
<p>should be used. </p>
<p>This function might be implemented using a global interrupt flag or an interrupt level register. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>When using before </p>
<p>StartOS</p>
<p>, the function </p>
<p>osInitialize</p>
<p> must be called first to initialize the variables </p>
<p>which are used in the interrupt API. </p>
<p><b>&gt; </b></p>
<p>The function must not be used within handlers of non-maskable interrupts as this can violate the </p>
<p>consistancy of internal variables. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Table 6-10  </p>
<p>DisableAllInterrupts </p>
<p><b>6.4.1.3 </b></p>
<p><b>ResumeAllInterrupts </b></p>
<p><b>Prototype </b></p>
<p>void </p>
<p>ResumeAllInterrupts </p>
<p>( void ) </p>
<p><b>Parameter </b></p>
<p>-- </p>
<p>-- </p>
<p><b>Return code </b></p>
<p>void </p>
<p>-- </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>73 / 136 </p>
<p><b>Functional Description </b></p>
<p>This service restores the recognition status of all interrupts saved by the </p>
<p>SuspendAllInterrupts</p>
<p> </p>
<p>service.  </p>
<p> </p>
<p>This service is the counterpart of </p>
<p>SuspendAllInterrupts</p>
<p> service, which has to have been called </p>
<p>before, and its aim is the completion of the critical section of code. No API service calls beside </p>
<p>SuspendAllInterrupts</p>
<p>/</p>
<p>ResumeAllInterrupts</p>
<p> pairs and </p>
<p>SuspendOSInterrupts</p>
<p>/</p>
<p>ResumeOSInterrupts</p>
<p> pairs are allowed within this critical section. </p>
<p> </p>
<p>The implementation should adapt this service to the target hardware providing a minimum overhead. </p>
<p>SuspendAllInterrupts</p>
<p>/</p>
<p>ResumeAllInterrupts</p>
<p> can be nested. In case of nesting pairs of the calls </p>
<p>SuspendAllInterrupts</p>
<p> and </p>
<p>ResumeAllInterrupts</p>
<p> the interrupt recognition status saved by the first </p>
<p>call of </p>
<p>SuspendAllInterrupts</p>
<p> is restored by the last call of the </p>
<p>ResumeAllInterrupts</p>
<p> service. </p>
<p> </p>
<p>This function might be implemented using a global interrupt flag or an interrupt level register. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>When using before </p>
<p>StartOS</p>
<p>, the function </p>
<p>osInitialize</p>
<p> must be called first to initialize the variables </p>
<p>which are used in the interrupt API. </p>
<p><b>&gt; </b></p>
<p>The function must not be used within handlers of non-maskable interrupts as this can violate the </p>
<p>consistancy of internal variables. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Table 6-11  </p>
<p>ResumeAllInterrupts </p>
<p><b>6.4.1.4 </b></p>
<p><b>SuspendAllInterrupts </b></p>
<p><b>Prototype </b></p>
<p>void Suspend</p>
<p>AllInterrupts </p>
<p>( void ) </p>
<p><b>Parameter </b></p>
<p>-- </p>
<p>-- </p>
<p><b>Return code </b></p>
<p>void </p>
<p>-- </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>74 / 136 </p>
<p><b>Functional Description </b></p>
<p>This service saves the recognition status of all interrupts and disables all interrupts for which the hardware </p>
<p>supports disabling. </p>
<p> </p>
<p>This service is intended to protect a critical section of code from interruptions of any kind. This section shall </p>
<p>be finished by calling the </p>
<p>ResumeAllInterrupts</p>
<p> service. No API service calls beside </p>
<p>SuspendAllInterrupts</p>
<p>/</p>
<p>ResumeAllInterrupts</p>
<p> pairs and </p>
<p>SuspendOSInterrupts</p>
<p>/</p>
<p>ResumeOSInterrupts</p>
<p> pairs are allowed within this critical section. </p>
<p>The implementation should adapt this service to the target hardware providing a minimum overhead. </p>
<p> </p>
<p>This function might be implemented using a global interrupt flag or an interrupt level register. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>When using before </p>
<p>StartOS</p>
<p>, the function </p>
<p>osInitialize</p>
<p> must be called first to initialize the variables </p>
<p>which are used in the interrupt API. </p>
<p><b>&gt; </b></p>
<p>The function must not be used within handlers of non-maskable interrupts as this can violate the </p>
<p>consistancy of internal variables. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Table 6-12  </p>
<p>SuspendAllInterrupts </p>
<p><b>6.4.1.5 </b></p>
<p><b>ResumeOSInterrupts </b></p>
<p><b>Prototype </b></p>
<p>void </p>
<p>ResumeOSInterrupts </p>
<p>( void ) </p>
<p><b>Parameter </b></p>
<p>-- </p>
<p>-- </p>
<p><b>Return code </b></p>
<p>void </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>This service restores the recognition status of interrupts saved by the </p>
<p>SuspendOSInterrupts</p>
<p> service. </p>
<p> </p>
<p>This service is the counterpart of </p>
<p>SuspendOSInterrupts</p>
<p> service, which has to have been called before, </p>
<p>and its aim is the completion of the critical section of code. No API service calls beside </p>
<p>SuspendAllInterrupts</p>
<p>/</p>
<p>ResumeAllInterrupts</p>
<p> pairs and </p>
<p>SuspendOSInterrupts</p>
<p>/</p>
<p>ResumeOSInterrupts</p>
<p> pairs are allowed within this critical section. </p>
<p>The implementation should adapt this service to the target hardware providing a minimum overhead. </p>
<p>SuspendOSInterrupts</p>
<p>/</p>
<p>ResumeOSInterrupts</p>
<p> can be nested. In case of nesting pairs of the calls </p>
<p>SuspendOSInterrupts</p>
<p> and </p>
<p>ResumeOSInterrupts</p>
<p> the interrupt recognition status saved by the first </p>
<p>call of </p>
<p>SuspendOSInterrupts</p>
<p> is restored by the last call of the </p>
<p>ResumeOSInterrupts</p>
<p> service. </p>
<p> </p>
<p>This function might be implemented using a global interrupt flag or an interrupt level register </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>75 / 136 </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>When using before </p>
<p>StartOS</p>
<p>, the function </p>
<p>osInitialize</p>
<p> must be called first to initialize the variables </p>
<p>which are used in the interrupt API. </p>
<p><b>&gt; </b></p>
<p>The function must not be used within handlers of non-maskable interrupts as this can violate the </p>
<p>consistancy of internal variables. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Table 6-13  </p>
<p>ResumeOSInterrupts </p>
<p><b>6.4.1.6 </b></p>
<p><b>SuspendOSInterrupts </b></p>
<p><b>Prototype </b></p>
<p>void </p>
<p>SuspendOSInterrupts </p>
<p>( void ) </p>
<p><b>Parameter </b></p>
<p>-- </p>
<p>-- </p>
<p><b>Return code </b></p>
<p>void </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>This service saves the recognition status of interrupts of category 2 and disables the recognition of these </p>
<p>interrupts. </p>
<p> </p>
<p>This service is intended to protect a critical section of code. This section shall be finished by calling the </p>
<p>ResumeOSInterrupts</p>
<p> service. No API service calls beside </p>
<p>SuspendAllInterrupts</p>
<p>/</p>
<p>ResumeAllInterrupts</p>
<p> pairs and </p>
<p>SuspendOSInterrupts</p>
<p>/</p>
<p>ResumeOSInterrupts</p>
<p> pairs are allowed within this critical section. </p>
<p> </p>
<p>The implementation should adapt this service to the target hardware providing a minimum overhead. </p>
<p>It is intended only to disable interrupts of category 2. However, if this is not possible in an efficient way </p>
<p>more interrupts may be disabled. </p>
<p> </p>
<p>This function might be implemented using a global interrupt flag or an interrupt level register. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>When using before </p>
<p>StartOS</p>
<p>, the function </p>
<p>osInitialize</p>
<p> must be called first to initialize the variables </p>
<p>which are used in the interrupt API. </p>
<p><b>&gt; </b></p>
<p>The function must not be used within handlers of non-maskable interrupts as this can violate the </p>
<p>consistancy of internal variables. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>76 / 136 </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Table 6-14  </p>
<p>SuspendOSInterrupts </p>
<p><b>6.4.2 </b></p>
<p><b>Resource Management </b></p>
<p>The affected functions are: </p>
<p><b>&gt; </b> GetResource </p>
<p><b>&gt; </b> ReleaseResource </p>
<p>The implementation specific behaviour is of these functions is described in [4]. </p>
<p><b>6.4.2.1 </b></p>
<p><b>GetResource </b></p>
<p><b>Prototype </b></p>
<p>StatusType </p>
<p>GetResource </p>
<p>( ResourceType ResID ) </p>
<p><b>Parameter </b></p>
<p>ResID</p>
<p> </p>
<p>Reference to resource </p>
<p><b>Return code </b></p>
<p>E_OK</p>
<p> </p>
<p>No error </p>
<p>E_OS_ID </p>
<p>Resource </p>
<p>ResID</p>
<p> is invalid </p>
<p>E_OS_ACCESS </p>
<p>Attempt to get a resource which is already occupied by any task or ISR, or the </p>
<p>statically assigned priority of the calling task or interrupt routine is higher than </p>
<p>the calculated ceiling priority. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>77 / 136 </p>
<p><b>Functional Description </b></p>
<p>This call serves to enter critical sections in the code that are assigned to the resource referenced by </p>
<p>ResID</p>
<p>. A critical section shall always be left using </p>
<p>ReleaseResource</p>
<p>. </p>
<p> </p>
<p>Nested resource occupation is only allowed if the inner critical sections are completely executed within the </p>
<p>surrounding critical section (strictly stacked, Restrictions when using resources). Nested occupation of one </p>
<p>and the same resource is also forbidden!  </p>
<p> </p>
<p>It is recommended that corresponding calls to </p>
<p>GetResource</p>
<p> and </p>
<p>ReleaseResource</p>
<p> appear within the </p>
<p>same function.  </p>
<p> </p>
<p>It is not allowed to use services which are points of rescheduling for non preemptable tasks </p>
<p>(</p>
<p>TerminateTask</p>
<p>, </p>
<p>ChainTask</p>
<p>, </p>
<p>Schedule</p>
<p> and </p>
<p>WaitEvent</p>
<p>) in critical sections. Additionally, critical </p>
<p>sections are to be left before completion of an interrupt service routine.  </p>
<p> </p>
<p>Generally speaking, critical sections should be short.  </p>
<p>The service may be called from an ISR and from task level. </p>
<p> </p>
<p>Depending on the possibility to manipulate interrupt levels, this function may be used on interrupt level or </p>
<p>not and may be implemented differently. </p>
<p>If used on task level, the behavior and functionality is always the same (according to the specification). </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>Task level or cat2 ISR </p>
<p>Table 6-15  </p>
<p>GetResource </p>
<p><b>6.4.2.2 </b></p>
<p><b>ReleaseResource </b></p>
<p><b>Prototype </b></p>
<p>StatusType </p>
<p>ReleaseResource </p>
<p>( ResourceType ResID ) </p>
<p><b>Parameter </b></p>
<p>ResID</p>
<p> </p>
<p>Reference to resource </p>
<p><b>Return code </b></p>
<p>E_OK</p>
<p> </p>
<p>No error </p>
<p>E_OS_ID </p>
<p>Resource </p>
<p>ResID</p>
<p> is invalid </p>
<p>E_OS_NOFUNC </p>
<p>Attempt to release a resource which is not occupied by any task or ISR, or </p>
<p>another resource shall be released before. </p>
<p>E_OS_ACCESS </p>
<p>Attempt to release a resource that has a lower ceiling priority than the </p>
<p>statically assigned priority of the calling task or interrupt routine. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>78 / 136 </p>
<p><b>Functional Description </b></p>
<p>ReleaseResource is the counterpart of </p>
<p>GetResource</p>
<p> and serves to leave critical sections in the code that </p>
<p>are assigned to the resource referenced by </p>
<p>ResID</p>
<p>. </p>
<p> </p>
<p>For information on nesting conditions, see particularities of </p>
<p>GetResource</p>
<p>. </p>
<p> </p>
<p>The service may be called from an ISR and from task level. </p>
<p> </p>
<p>Depending on the possibility to manipulate interrupt levels, this function may be used on interrupt level or </p>
<p>not and may be implemented differently. </p>
<p>If used on task level, the behavior and functionality is always the same (according to the specification). </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>Task level or cat2 ISR </p>
<p>Table 6-16  </p>
<p>ReleaseResource </p>
<p><b>6.4.3 </b></p>
<p><b>Execution Control </b></p>
<p>The affected functions are: </p>
<p><b>&gt; </b> StartOS </p>
<p><b>&gt; </b> ShutdownOS </p>
<p>The implementation specific behavior is of these functions is described in [4]. </p>
<p><b>6.4.3.1 </b></p>
<p><b>StartOS </b></p>
<p><b>Prototype </b></p>
<p>void </p>
<p>StartOS </p>
<p>( AppModeType Mode ) </p>
<p><b>Parameter </b></p>
<p>Mode</p>
<p> </p>
<p>application mode </p>
<p><b>Return code </b></p>
<p>void</p>
<p> </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>The user can call this system service to start the operating system in a specific mode. </p>
<p> </p>
<p>Only allowed outside of the operating system, therefore implementation specific restrictions may apply. </p>
<p> </p>
<p>After calling </p>
<p>StartOS</p>
<p> the program never returns to the call level of </p>
<p>StartOS</p>
<p>. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>-- </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>79 / 136 </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>C main function </p>
<p>Table 6-17  </p>
<p>StartOS </p>
<p> </p>
<p><b>6.4.3.2 </b></p>
<p><b>ShutdownOS </b></p>
<p><b>Prototype </b></p>
<p>void ShutdownOS ( StatusType Error ) </p>
<p><b>Parameter </b></p>
<p>Error</p>
<p> </p>
<p>error occurred </p>
<p><b>Return code </b></p>
<p>void</p>
<p> </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>The user can call this system service to abort the overall system (e.g. emergency off). The operating </p>
<p>system also calls this function internally, if it has reached an undefined internal state and is no longer ready </p>
<p>to run. </p>
<p> </p>
<p>If a </p>
<p>ShutdownHook</p>
<p> is configured the hook routine </p>
<p>ShutdownHook</p>
<p> is always called (with </p>
<p>Error</p>
<p> as </p>
<p>argument) before shutting down the operating system. </p>
<p> </p>
<p>If </p>
<p>ShutdownHook</p>
<p> returns, further behaviour of </p>
<p>ShutdownOS</p>
<p> is implementation specific. </p>
<p> </p>
<p>In case of a system where OSEK OS and OSEKtime OS coexist, </p>
<p>ShutdownHook</p>
<p> has to return. </p>
<p> </p>
<p>Error</p>
<p> needs to be a valid error code supported by OSEK OS. In case of a system where OSEK OS and </p>
<p>OSEKtime OS coexist, </p>
<p>Error</p>
<p> might also be a value accepted by OSEKtime OS. In this case, if enabled by </p>
<p>an OSEKtime configuration parameter, OSEKtime OS will be shut down after OSEK OS shutdown. </p>
<p> </p>
<p>After this service the operating system is shut down. </p>
<p>Allowed at task level, ISR level, in </p>
<p>ErrorHook</p>
<p> and </p>
<p>StartupHook</p>
<p>, and also called internally by the </p>
<p>operating system. </p>
<p>If the operating system calls </p>
<p>ShutdownOS</p>
<p> it never uses </p>
<p>E_OK</p>
<p> as the passed parameter value. </p>
<p> </p>
<p>After the call of </p>
<p>ShutdownHook</p>
<p> MICROSAR OS disables all interrupts and will never return to the call </p>
<p>level. The </p>
<p>ShutdownHook</p>
<p> is called with disabled interrupts. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>-- </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>80 / 136 </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Table 6-18  </p>
<p>ShutdownOS </p>
<p><b>6.5 </b></p>
<p><b>Hook Routines </b></p>
<p>MICROSAR OS calls several hook routines. These may be hook routines as described in </p>
<p>the OSEK or Autosar standard. Additionally, MICROSAR provides Hook routines for ISR </p>
<p>entry/exit, Alarm time and timing supervision (MICROSAR OS Timing Hooks). </p>
<p>These hook routines are described in the subchapters below. </p>
<p>The  subchapters  describe  the  prototypes  of  the  called  hook  routines  and  their  calling </p>
<p>contexts. The current stack in the hook routines is implementation specific and described </p>
<p>in [4]. </p>
<p><b>6.5.1 </b></p>
<p><b>Standard Hooks </b></p>
<p>The  hook  routines  described  in  the  subchapters  are  defined  by  the  OSEK  and Autosar </p>
<p>standards. </p>
<p>All  these  hook  routines  need  to  be  implemented  by  the  user  if  they  are  enabled  in  the </p>
<p>configuration.  The  OS  calls  these  hook  routines  with  interrupts  disabled  (if  not  stated </p>
<p>otherwise). </p>
<p><b>6.5.1.1 </b></p>
<p><b>StartupHook </b></p>
<p><b>Prototypes </b></p>
<p>void <b>StartupHook </b>( void ) /* general startup hook */ </p>
<p>void <b>StartupHook_&lt;App&gt; </b>( void ) /* application specific startup hook */ </p>
<p><b>Parameter </b></p>
<p>-- </p>
<p>-- </p>
<p><b>Return code </b></p>
<p>void </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>The user may call the initialization routines for hardware drivers. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>interrupt or task context </p>
<p><b>&gt; </b></p>
<p>The </p>
<p>StartupHook</p>
<p> routine is called while the operating system is initialized. </p>
<p>Table 6-19  </p>
<p>StartupHook </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>81 / 136 </p>
<p><b>6.5.1.2 </b></p>
<p><b>PreTaskHook </b></p>
<p><b>Prototype </b></p>
<p>void <b>PreTaskHook </b>( void ) </p>
<p><b>Parameter </b></p>
<p>-- </p>
<p>-- </p>
<p><b>Return code </b></p>
<p>void </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>The user can use the API function </p>
<p>GetTaskID</p>
<p> to determine the new task. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The PreTaskHook may only be configured for debugging purpose in MICROSAR OS SafeContext, see </p>
<p>[9]. </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>interrupt or task context </p>
<p><b>&gt; </b></p>
<p>PreTaskHook</p>
<p> is called after a task is set into the RUNNING state (not into the READY state). </p>
<p><b>&gt; </b></p>
<p>For particularities of using PreTaskHook when using timing protection, please see [4] </p>
<p>Table 6-20  </p>
<p>PreTaskHook </p>
<p><b>6.5.1.3 </b></p>
<p><b>PostTaskHook </b></p>
<p><b>Prototype </b></p>
<p>void <b>PostTaskHook </b>( void ) </p>
<p><b>Parameter </b></p>
<p>-- </p>
<p>-- </p>
<p><b>Return code </b></p>
<p>void </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>The user can use the API function </p>
<p>GetTaskID</p>
<p> to determine the currently left task. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The PostTaskHook may only be configured for debugging purpose in MICROSAR OS SafeContext, see </p>
<p>[9]. </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>interrupt or task context </p>
<p><b>&gt; </b></p>
<p>PostTaskHook</p>
<p> is called before a task is taken out of the RUNNING state. </p>
<p><b>&gt; </b></p>
<p>For particularities of using the PostTaskHook when using timing protection, please see [4] </p>
<p>Table 6-21  </p>
<p>PostTaskHook </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>82 / 136 </p>
<p><b>6.5.1.4 </b></p>
<p><b>ErrorHook </b></p>
<p><b>Prototype </b></p>
<p>void <b>ErrorHook </b>( StatusType ErrorCode ) /* general error hook */ </p>
<p>void <b>ErrorHook_&lt;App&gt; </b>( StatusType ErrorCode ) /* appl. spec. error hook */ </p>
<p><b>Parameter </b></p>
<p>ErrorCode </p>
<p>Error code of API which detected the error and called the error hook </p>
<p><b>Return code </b></p>
<p>void </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>The user may use the error number parameter to decide how to react on the error. </p>
<p> </p>
<p>Additional error information is available in the error hook if the attributes </p>
<p>USEGETSERVICEID</p>
<p> and </p>
<p>USEPARAMETERACCESS</p>
<p> are set to </p>
<p>TRUE</p>
<p>. This information can be accessed by access macros; for details </p>
<p>refer to the OSEK specification [3]. All possible access macros are supported by MICROSAR OS. </p>
<p> </p>
<p>If </p>
<p>EXTENDED_STATUS</p>
<p> is enabled and </p>
<p>ErrorInfoLevel</p>
<p> is set to </p>
<p>Modulnames</p>
<p>, additional error </p>
<p>information is available in the </p>
<p>ErrorHook</p>
<p>. The variable </p>
<p>osActiveTaskModule</p>
<p> is a pointer to the module </p>
<p>name and the variable </p>
<p>osActiveTaskLineNumber</p>
<p> is the line number in the C module where the API </p>
<p>function was called. Inspecting these two variables allows the user to locate the source code that caused </p>
<p>the error message. </p>
<p> </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>interrupt or task context </p>
<p><b>&gt; </b></p>
<p>ErrorHook</p>
<p> is called every time an API function is called with wrong parameters or if the system detects </p>
<p>an error (e.g. stack overflow). </p>
<p>Table 6-22  </p>
<p>ErrorHook </p>
<p><b>6.5.1.5 </b></p>
<p><b>ShutdownHook </b></p>
<p><b>Prototype </b></p>
<p>void <b>ShutdownHook </b>( StatusType ErrorCode ) /* general shutdown hook */ </p>
<p>void <b>ShutdownHook_&lt;App&gt; </b>(StatusType ErrorCode) /* appl. spec. shutdown hook */ </p>
<p><b>Parameter </b></p>
<p>ErrorCode </p>
<p>Error code of API that detected the error and called the shutdown hook, or the </p>
<p>parameter that was passed to ShutdownOS. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>-- </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>83 / 136 </p>
<p><b>Functional Description </b></p>
<p>The ShutdownHook is called by ShutdownOS </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>-- </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>interrupt or task context </p>
<p><b>&gt; </b></p>
<p>The system calls the </p>
<p>ShutdownHook</p>
<p> routine if the function </p>
<p>ShutdownOS</p>
<p> was called. </p>
<p>Table 6-23  </p>
<p>ShutdownHook </p>
<p><b>6.5.1.6 </b></p>
<p><b>ProtectionHook </b></p>
<p><b>Prototype </b></p>
<p>ProtectionReturnType <b>ProtectionHook </b>( StatusType Fatalerror ) </p>
<p><b>Parameter </b></p>
<p>Fatalerror </p>
<p>depending on the detected protection error </p>
<p><b>Return code </b></p>
<p>ProtectionReturnType </p>
<p>The return value determines the strategy of further operation </p>
<p><b>Functional Description </b></p>
<p>Called on occurrence of a protection error. The application code has to decide about the recovery strategy </p>
<p>and pass an appropriate return value to the OS. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>In the scalability class SC1, no call of the </p>
<p>ProtectionHook</p>
<p> is supported. </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>interrupt or task context </p>
<p><b>&gt; </b></p>
<p>The </p>
<p>ProtectionHook</p>
<p> is called if a TimingProtection failure (SC2, SC4), a memory protection failure </p>
<p>(SC3, SC4), or processor exception (e.g. division by zero, illegal instruction etc.) is detected by </p>
<p>MICROSAR OS.  </p>
<p>Table 6-24  </p>
<p>ProtectionHook </p>
<p><b>6.5.2 </b></p>
<p><b>ISR Hooks </b></p>
<p><b>6.5.2.1 </b></p>
<p><b>UserPreISRHook </b></p>
<p><b>Prototype </b></p>
<p>Void <b>UserPreISRHook </b>( ISRType isr ) </p>
<p><b>Parameter </b></p>
<p>Isr </p>
<p>The identifier of the ISR that is about to be entered </p>
<p><b>Return code </b></p>
<p>Void </p>
<p>-- </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>84 / 136 </p>
<p><b>Functional Description </b></p>
<p>Called just before entering an ISR routine of a category 2 interrupt. </p>
<p>This Hook is intended to be used as a development aid. For example, it may be used to measure interrupt </p>
<p>run times. </p>
<p>This Hook is only available if the attribute CallISRHooks is set to </p>
<p>TRUE</p>
<p>. Note that this is allowed only for </p>
<p>debugging purpose in MICROSAR OS SafeContext, see [9]. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Only API functions that are allowed in cat2 ISRs are allowed to be called in the UserPreISRHook. </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>The UserPreISRHook runs in the exact same context as the ISR that is executed afterwards. This </p>
<p>includes settings for interrupt nesting, timing protection, timing measurement and memory protection. </p>
<p><b>&gt; </b></p>
<p>All OS API functions, incl. GetISRID(), GetApplicationID(), CheckObjectAccess() etc, work just as if </p>
<p>called from within the ISR </p>
<p>Table 6-25  </p>
<p>UserPreISRHook </p>
<p><b>6.5.2.2 </b></p>
<p><b>UserPostISRHook </b></p>
<p><b>Prototype </b></p>
<p>Void <b>UserPostISRHook </b>( ISRType isr ) </p>
<p><b>Parameter </b></p>
<p>Isr </p>
<p>The identifier of the ISR that was just left </p>
<p><b>Return code </b></p>
<p>Void </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>Called just after leaving an ISR routine of a category 2 interrupt. </p>
<p>This Hook is intended to be used as a development aid. For example, it may be used to measure interrupt </p>
<p>run times. </p>
<p>This Hook is only available if the attribute CallISRHooks is set to </p>
<p>TRUE</p>
<p>. Note that this is allowed only for </p>
<p>debugging purpose in MICROSAR OS SafeContext, see [9]. </p>
<p><b>Particularities and Limitations </b></p>
<p>The UserPostISRHook is called only after a regular return from the ISR routine. In particular: </p>
<p><b>&gt; </b></p>
<p>If an ISR is interrupted by a higher priority ISR, the UserPostISRHook is not called before entering the </p>
<p>new ISR.  </p>
<p><b>&gt; </b></p>
<p>If an ISR is killed, the UserPostISRHook is not called. </p>
<p><b>&gt; </b></p>
<p>Only API functions that are allowed in cat2 ISRs are allowed to be called in the UserPostISRHook. </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>The UserPreISRHook runs in the exact same context as the ISR that was just executed. This includes </p>
<p>settings for interrupt nesting, timing protection, timing measurement and memory protection. </p>
<p><b>&gt; </b></p>
<p>All OS API functions, incl. GetISRID(), GetApplicationID(), CheckObjectAccess() etc, work just as if </p>
<p>called from within the ISR </p>
<p>Table 6-26  </p>
<p>UserPostISRHook </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>85 / 136 </p>
<p><b>6.5.3 </b></p>
<p><b>Alarm Hook </b></p>
<p><b>6.5.3.1 </b></p>
<p><b>PreAlarmHook (currently not supported) </b></p>
<p><b>Prototype </b></p>
<p>void <b>PreAlarmHook_&lt;CounterName&gt; </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>-- </p>
<p><b>Return code </b></p>
<p>void </p>
<p>-- </p>
<p><b>Functional Description </b></p>
<p>Called in the timer ISR just before the alarm handling of the OS. </p>
<p>This Hook is only available if the timer attribute PreAlarmHook is set to </p>
<p>TRUE</p>
<p> </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Note that this feature is currently not supported. It will be available in future releases. </p>
<p><b>&gt; </b></p>
<p>Only API functions that are allowed in cat2 ISRs are allowed to be called in the PreAlarmHook. </p>
<p><b>&gt; </b></p>
<p>The execution time of the PreAlarmHook is not considered by the timing protection. </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>The PreAlarmHook runs in the same context as the system timer ISR. If an owner application is </p>
<p>configured, the system timer ISR and the PreAlarmHook is executed with the application rights of this </p>
<p>owner application. </p>
<p><b>&gt; </b></p>
<p>Interrupts of category 2 are disabled during the execution of the PreAlarmHook. </p>
<p>Table 6-27  </p>
<p>PreAlarmHook </p>
<p><b>6.5.4 </b></p>
<p><b>MICROSAR OS Timing Hooks </b></p>
<p>MICROSAR OS supports timing measurement and analysis by external tools. Therefor it </p>
<p>provides timing hooks. Timing hooks inform the external tools about several events within </p>
<p>the OS: </p>
<p></p>
<p> </p>
<p>Activation (arrival) of a task or ISR </p>
<p></p>
<p> </p>
<p>Context switch </p>
<p></p>
<p> </p>
<p>Locking of interrupts, resources or spinlocks </p>
<p>This documentation presents the respective hook routines in separate subchapters below. </p>
<p>The OS calls Timing hooks only if the user has configured them as described in Table 7-1, </p>
<p>attribute TimingHooks. The user shall implement the hooks as macros in the configured </p>
<p>header file. The OS provides empty definitions of these hooks. It uses the empty definition </p>
<p>of a hook in case of an unavailable definition by the user. Because of the empty definition, </p>
<p>the user needs not to implement all hooks. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>86 / 136 </p>
<p><b>6.5.4.1 </b></p>
<p><b>Hooks for arrival </b></p>
<p>MICROSAR OS prvides hooks that allow an external tool to trace all activations of task as </p>
<p>well  as  further  arrivals  like  the  setting  of  an  event  or  the  release  of  a  semaphore  with </p>
<p>transfer to another task. </p>
<p>This shall allow the external tool to visualize the arrivals and to measure the time between </p>
<p>them in order to allow a schedulability analysis.  </p>
<p>Mind that schedulability analysis requires the minimum time between arrivals while these </p>
<p>hooks only provide measured values. </p>
<p><b>6.5.4.1.1 </b></p>
<p><b>OS_VTH_ACTIVATION </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_ACTIVATION( TaskId, DestCoreId, CallerCoreId) </p>
<p><b>Parameter </b></p>
<p>TaskId </p>
<p>Identifier of the task which is activated </p>
<p>DestCoreId </p>
<p>Identifier of the core on which the task is activated </p>
<p>CallerCoreId </p>
<p>Identifier of the core which performs the activation (has called ActivateTask, </p>
<p>has called TerminateTask or has performed an alarm/schedule table action to </p>
<p>activate a task) </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>This hook is called on the caller core when that core has successfully performed the activation of TaskId on </p>
<p>the destination core. On single core systems both core IDs are always identical. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-28  </p>
<p>OS_VTH_ACTIVATION </p>
<p><b>6.5.4.1.2 </b></p>
<p><b>OS_VTH_SETEVENT </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_SETEVENT( TaskId, EventMask, StateChange, DestCoreId, CallerCoreId) </p>
<p><b>Parameter </b></p>
<p>TaskId </p>
<p>Identifier of the task which receives this event </p>
<p>EventMask </p>
<p>A bit mask with the events which shall be set </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>87 / 136 </p>
<p>StateChange </p>
<p>TRUE: The task state has changed from WAITING to READY </p>
<p>FALSE: The task state hasn’t changed </p>
<p>DestCoreId </p>
<p>Identifier of the core on which the task receives the event </p>
<p>CallerCoreId </p>
<p>Identifier of the core which performs the event setting (has called SetEvent or </p>
<p>performed an alarm/schedule table action to set an event) </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>This hook is called on the caller core when that core has successfully performed the event setting on the </p>
<p>destination core. On single core systems both core IDs are always identical. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-29  </p>
<p>OS_VTH_SETEVENT </p>
<p><b>6.5.4.1.3 </b></p>
<p><b>OS_VTH_TRANSFER_SEMA </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_TRANSFER_SEMA( FromThreadId, ToTaskId, SemaId, DestCoreId, CallerCoreId) </p>
<p><b>Parameter </b></p>
<p>FromThreadId </p>
<p>Identifier of the thread (task; ISR) which releases the semaphore </p>
<p>ToTaskId </p>
<p>Identifier ot the task which receives the semaphore </p>
<p>SemaId </p>
<p>Identifier of the semaphore to be transferred </p>
<p>DestCoreId </p>
<p>Identifier of the core on which the task igets the semaphore </p>
<p>CallerCoreId </p>
<p>Identifier of the core which releases the semaphore </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>This hook is called on the caller core when that core has successfully performed release of the semaphore </p>
<p>while a task was waiting for that semaphore. On single core systems both core IDs are always identical. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>88 / 136 </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p><b>&gt; </b></p>
<p>The semaphore feature is optional, so this macro may not be necessary on all implementations of </p>
<p>MICROSAR OS. </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-30  </p>
<p>OS_VTH_TRANSFER_SEMA </p>
<p><b>6.5.4.2 </b></p>
<p><b>Hook for context switch </b></p>
<p>MICROSAR  OS  provides  a  hook  routine  allowing  external  tools  to  trace  all  context </p>
<p>switches  from  task  to  ISR  and  back  as  well  as  between  tasks.  So  external  tools  may </p>
<p>visualize the information or measure the execution time of tasks and ISRs. </p>
<p>Mind that measured values may not reflect the worst case, which would be necessary for </p>
<p>schedulability analysis. </p>
<p><b>6.5.4.2.1 </b></p>
<p><b>OS_VTH_SCHEDULE </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_SCHEDULE( FromThreadId, FromThreadReason,  </p>
<p>                 ToThreadId,   ToThreadReason,  </p>
<p>                 CallerCoreId                      ) </p>
<p><b>Parameter </b></p>
<p>FromThreadId </p>
<p>Identifier of the thread (task, ISR) which has run on the caller core before the </p>
<p>switch took place </p>
<p>FromThreadReason </p>
<p>OS_VTHP_TASK_TERMINATION: The thread is a task, which has just been </p>
<p>terminated. </p>
<p>OS_VTHP_ISR_END: The thread is an ISR, which has reached its end. </p>
<p>OS_VTHP_TASK_WAITEVENT: The thread is a task, which waits for an </p>
<p>event. </p>
<p>OS_VTHP_TASK_WAITSEMA: The thread is a task, which waits tor the </p>
<p>release of a semaphore. </p>
<p>OS_VTHP_THREAD_PREEMPT: The thread is interrupted by another one, </p>
<p>which has higher priority. </p>
<p>ToThreadId </p>
<p>The identifier of the thread, which will run from now on </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>89 / 136 </p>
<p>ToThreadReason </p>
<p>OS_VTHP_TASK_ACTIVATION: The thread is a task, which was activated. </p>
<p>OS_VTHP_ISR_START: The thread is an ISR, which will now start execution. </p>
<p>OS_VTHP_TASK_SETEVENT: The thread is a task, which has just received </p>
<p>an event it was waiting for. It resumes execution right behind the call of </p>
<p>WaitEvent. </p>
<p>OS_VTHP_GOTSEMA: The thread is a task, which has just got the </p>
<p>semaphore it was waiting for. </p>
<p>OS_VTHP_THREAD_RESUME: The thread is a task or ISR, which was </p>
<p>preempted before and becomes running again as all higher priority tasks and </p>
<p>ISRs do not run anymore. </p>
<p>CallerCoreId </p>
<p>Identifier of the core which performs the thread switch </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>This hook is called on the caller core when that core in case it performs a thread switch (from one task or </p>
<p>ISR to another task or ISR). On single core systems both core IDs are always identical. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system internal functions with interrupts disabled. </p>
<p>Table 6-31  </p>
<p>OS_VTH_SCHEDULE </p>
<p> </p>
<p><b>6.5.4.3 </b></p>
<p><b>Hooks for locking </b></p>
<p>MICROSAR  OS  provides  hooks,  which  allow  an  external  tool  to  trace  locks.  This  is </p>
<p>important as locking times of tasks and ISRs influence the exectution of other tasks and </p>
<p>ISRs. The  kind  of  influence  is different  for different  locks  and  is  presented  below  in  the </p>
<p>functional description of the respective hooks.  </p>
<p>Please keep in mind that measured times for locking may not reflect the worst case. </p>
<p><b>6.5.4.3.1 </b></p>
<p><b>OS_VTH_GOT_RES </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_GOT_RES( ResId, CallerCoreId) </p>
<p><b>Parameter </b></p>
<p>ResId </p>
<p>Identifier of the resource which has been taken </p>
<p>CallerCoreId </p>
<p>Identifier of the core where GetResorce was called </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>90 / 136 </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>The OS calls this hook on a successful call of the API function GetResource. The priority of the calling task </p>
<p>or ISR has been increased so that other tasks and ISRs on the same core may need to wait until they can </p>
<p>be executed. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-32  </p>
<p>OS_VTH_GOT_RES </p>
<p><b>6.5.4.3.2 </b></p>
<p><b>OS_VTH_REL_RES </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_REL_RES( ResId, CallerCoreId) </p>
<p><b>Parameter </b></p>
<p>ResId </p>
<p>Identifier of the resource which has been released </p>
<p>CallerCoreId </p>
<p>Identifier of the core where ReleaseResorce was called </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>The OS calls this hook on a successful call of the API function ReleaseResource. The priority of the calling </p>
<p>task or ISR has been decreased so that other tasks and ISRs on the same core may become running as a </p>
<p>result. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-33  </p>
<p>OS_VTH_REL_RES </p>
<p><b>6.5.4.3.3 </b></p>
<p><b>OS_VTH_REQ_SPINLOCK </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_REQ_SPINLOCK( SpinlockId, CallerCoreId) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>91 / 136 </p>
<p><b>Parameter </b></p>
<p>SpinlockId </p>
<p>Identifier of the spinlock which has been requested </p>
<p>CallerCoreId </p>
<p>Identifier of the core where GetSpinlock was called </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>The OS calls this hook on an unsuccessfull attempt to get a spinlock. The calling task or ISR enters a busy </p>
<p>waiting state. Tasks or ISRs of lower priority have to wait until this task or ISR has taken and released the </p>
<p>spinlock. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p><b>&gt; </b></p>
<p>The hook is not called for optimized spinlocks </p>
<p><b>&gt; </b></p>
<p>The hook is not called for operating system internal spinlocks </p>
<p><b>&gt; </b></p>
<p>The hook is called only on multicore operating system implementations </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-34  </p>
<p>OS_VTH_REQ_SPINLOCK </p>
<p> </p>
<p><b>6.5.4.3.4 </b></p>
<p><b>OS_VTH_GOT_SPINLOCK </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_GOT_SPINLOCK( SpinlockId, CallerCoreId) </p>
<p><b>Parameter </b></p>
<p>SpinlockId </p>
<p>Identifier of the spinlock which has been taken </p>
<p>CallerCoreId </p>
<p>Identifier of the core where GetSpinlock or TryToGetSpinlock were called </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>The OS calls this hook whenever a spinlock has successfully been taken. If the task or ISR was not </p>
<p>successful immediately (entered busy waiting state), this hook means that it leaves the busy waiting state. </p>
<p>From now on no other task or ISR may get the spinlock until the current task or ISR has released it.  </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>92 / 136 </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p><b>&gt; </b></p>
<p>The hook is not called for optimized spinlocks </p>
<p><b>&gt; </b></p>
<p>The hook is not called for operating system internal spinlocks </p>
<p><b>&gt; </b></p>
<p>The hook is called only on multicore operating system implementations </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-35  </p>
<p>OS_VTH_GOT_SPINLOCK </p>
<p> </p>
<p><b>6.5.4.3.5 </b></p>
<p><b>OS_VTH_REL_SPINLOCK </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_REL_SPINLOCK( SpinlockId, CallerCoreId) </p>
<p><b>Parameter </b></p>
<p>SpinlockId </p>
<p>Identifier of the spinlock which has been released </p>
<p>CallerCoreId </p>
<p>Identifier of the core where ReleaseSpinlock was called </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>The OS calls this hook on a release of a spinlock. Other tasks and ISR may take the spinlock now. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p><b>&gt; </b></p>
<p>The hook is not called for optimized spinlocks </p>
<p><b>&gt; </b></p>
<p>The hook is not called for operating system internal spinlocks </p>
<p><b>&gt; </b></p>
<p>The hook is called only on multicore operating system implementations </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-36  </p>
<p>OS_VTH_REL_SPINLOCK </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>93 / 136 </p>
<p><b>6.5.4.3.6 </b></p>
<p><b>OS_VTH_TOOK_SEMA </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_TOOK_SEMA( TaskId, SemaId, CallerCoreId) </p>
<p><b>Parameter </b></p>
<p>TaskId </p>
<p>Identifier of the task which has taken the semaphore </p>
<p>SemaId </p>
<p>Identifier of the semaphore which has been taken </p>
<p>CallerCoreId </p>
<p>Identifier of the core where GetSemaphore was called </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>The OS calls this hook in the API function GetSemaphore if the semaphore was free before the call. If the </p>
<p>semaphore was held by another task, the current task is transferred to the waiting state, which is signaled </p>
<p>to the external tool by means of the OS_VTH_SCHEDULE hook as described in chapter 6.5.4.2.1. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p><b>&gt; </b></p>
<p>The semaphore feature is optional, so this macro may not be necessary on all implementations of </p>
<p>MICROSAR OS. </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-37  </p>
<p>OS_VTH_TOOK_SEMA </p>
<p> </p>
<p><b>6.5.4.3.7 </b></p>
<p><b>OS_VTH_REL_SEMA </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_REL_SEMA( ThreadId, SemaId, CallerCoreId) </p>
<p><b>Parameter </b></p>
<p>ThreadId </p>
<p>Identifier of the task or ISR which has released the semaphore </p>
<p>SemaId </p>
<p>Identifier of the semaphore which has been released </p>
<p>CallerCoreId </p>
<p>Identifier of the core where ReleaseSemaphore was called </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>94 / 136 </p>
<p><b>Functional Description </b></p>
<p>The OS calls this hook in the API function ReleaseSemaphore if the semaphore becomes free after the </p>
<p>call. If a task is currently waiting for the semaphore, the API function GetSemaphore calls </p>
<p>OS_VTH_TRANFER_SEMA instead, as described in chapter 6.5.4.1.3. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p><b>&gt; </b></p>
<p>The semaphore feature is optional, so this macro may not be necessary on all implementations of </p>
<p>MICROSAR OS. </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-38  </p>
<p>OS_VTH_REL_SEMA </p>
<p><b>6.5.4.3.8 </b></p>
<p><b>OS_VTH_DISABLEDINT </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_DISABLEDINT( IntLockId, CallerCoreId) </p>
<p><b>Parameter </b></p>
<p>IntLockId </p>
<p>OS_VTHP_CAT2INTERRUPTS: Interrupts have been disabled by means of </p>
<p>the current interrupt level. That interrupt level has been changed in order to </p>
<p>disable all category 2 interrupts, which also prevents task switch and </p>
<p>alarm/schedule table management. </p>
<p>OS_VTHP_ALLINTERRUPTS: Interrupts have been disabled by means of the </p>
<p>global interrupt enable/disable flag. Additionally to the effects described above, </p>
<p>also category 1 interrupts are disabled. </p>
<p>CallerCoreId </p>
<p>Identifier of the core where interrupts are disabled </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>The OS calls this hook if the application has called an API function to disable interrupts. The parameter </p>
<p>IntLockId describes whether category 1 interrupts may still occur. </p>
<p>Mind that the two types of interrupt locking (as described by the IntLockId) are independent from each other </p>
<p>so that the hook may be called twice before the hook OS_VTH_ENABLEDINT is called, dependent on the </p>
<p>application. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p><b>&gt; </b></p>
<p>The hook is not called for operating system internal interrupt locks </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>95 / 136 </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-39  </p>
<p>OS_VTH_DISABLEDINT </p>
<p><b>6.5.4.3.9 </b></p>
<p><b>OS_VTH_ENABLEDINT </b></p>
<p><b>Prototype </b></p>
<p>OS_VTH_ENABLEDINT( IntLockId, CallerCoreId) </p>
<p><b>Parameter </b></p>
<p>IntLockId </p>
<p>OS_VTHP_CAT2INTERRUPTS: Interrupts had been disabled by means of the </p>
<p>current interrupt level until this hook was called. The OS releases this lock </p>
<p>right after the hook has returned. </p>
<p>OS_VTHP_ALLINTERRUPTS: Interrupts had been disabled by means of the </p>
<p>global interrupt enable/disable flag before this hook was called. The OS </p>
<p>releases this lock right after the hook has returned. </p>
<p>CallerCoreId </p>
<p>Identifier of the core where interrupts are disabled </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>The OS calls this hook if the application has called an API function to enable interrupts. </p>
<p>Mind that the two types of interrupt locking (as described by the IntLockId) are independent from each other </p>
<p>so that interrupts may still be disabled by means of the other locking type after this hook has returned. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The hook is expected to be implemented as a macro. </p>
<p><b>&gt; </b></p>
<p>Reentrancy is possible on multicore systems with different caller core IDs </p>
<p><b>&gt; </b></p>
<p>Call of any operating system API function is prohibited in this hook routine </p>
<p><b>&gt; </b></p>
<p>The hook is not called for operating system internal interrupt locks </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>The hook routine is called from within operating system API functions with interrupts disabled. </p>
<p>Table 6-40  </p>
<p>OS_VTH_ENABLEDINT </p>
<p><b>6.6 </b></p>
<p><b>Non-Trusted Functions </b></p>
<p>Non-trusted functions are a VECTOR extension to the AUTOSAR OS specification. This concept </p>
<p>allows non-trusted applications to provide service functions, which are callable by trusted or non-</p>
<p>trusted tasks and ISRs, comparable to the AUTSAR OS API CallTrustedFunction. </p>
<p><b>6.6.1 </b></p>
<p><b>Functionality </b></p>
<p>The  OS  executes  Non-trusted  functions  with  the  memory  access  rights  and  service  protection </p>
<p>rights  of  the  owner  application. These  functions  can  access  local  data  of  the  owner  application </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>96 / 136 </p>
<p>without the possibility to overwrite private data of other applications. Non-trusted functions have no </p>
<p>access to the data on the callers stack. </p>
<p><b>6.6.2 </b></p>
<p><b>API </b></p>
<p><b>Prototype </b></p>
<p>StatusType <b>osCallNonTrustedFunction</b>(NonTrustedFunctionIndexType FunctionIndex, </p>
<p>NonTrustedFunctionParameterRefType FunctionParams); </p>
<p><b>Parameter </b></p>
<p>FunctionIndex </p>
<p>Index of the function to be called. </p>
<p>FunctionParams </p>
<p>Pointer to the parameters for the function to be called. If no parameters are provided, </p>
<p>a NULL pointer has to be passed. </p>
<p><b>Return code </b></p>
<p>E_OK </p>
<p>No error </p>
<p>E_OS_SERVICEID </p>
<p>No function defined for this index </p>
<p><b>Functional Description </b></p>
<p>Executes the non-trusted function referenced by FunctionIndex and passes argument FunctionParams. </p>
<p>The non-trusted function must conform to the following C prototype: </p>
<p>void NONTRUSTED_&lt;name of the non-trusted function(NonTrustedFunctionIndexType, </p>
<p>NonTrustedFunctionParameterRefType); </p>
<p>The arguments are the same as the arguments of CallNonTrustedFunction. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The non-trusted function is called in user mode with memory protection enabled </p>
<p><b>&gt; </b></p>
<p>The function has memory access rights of the owner application </p>
<p><b>&gt; </b></p>
<p>The function has the service protection rights of the owner application </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>Task, CAT2 ISR, trusted function, non-trusted function </p>
<p>Table 6-41 API osCallNonTrustedFunction </p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>Vector MICROSAR OS implementations offer the possibility of stub function generation </p>
<p>for trusted functions. This mechanism is <b>not </b>available for non-trusted functions. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>6.7 </b></p>
<p><b>MPU Access Checking API </b></p>
<p>MISCROSAR  OS  provides API,  which  returns  whether the  caller has  access  to  a  given </p>
<p>adderss. </p>
<p><b>Prototype </b></p>
<p>uint8 <b>osCheckMPUAccess</b>(uint8* DestinationAddress) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>97 / 136 </p>
<p><b>Parameter </b></p>
<p>DestinationAddress </p>
<p>The address to be checked for access </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>0: Current Software part has write access </p>
<p>1: Current Software part has no write access </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The value of DestinationAddress may be temporarly altered within this function (depending on the </p>
<p>platform). </p>
<p><b>&gt; </b></p>
<p>Due to data consistency, the function should not be used on addresses, which are shared among cores. </p>
<p><b>&gt; </b></p>
<p>A protection violation may occur during this function. But this protection violation does not lead to a </p>
<p>shutdown of the OS </p>
<p><b>&gt; </b></p>
<p>This function cannot be called prior to StartOS </p>
<p><b>Call context </b></p>
<p><b>&gt; </b></p>
<p>ProtectionHook </p>
<p><b>&gt; </b></p>
<p>Task trusted/non-trusted </p>
<p><b>&gt; </b></p>
<p>ISR Cat2 trusted/non-trusted </p>
<p><b>&gt; </b></p>
<p>ErrorHook </p>
<p><b>&gt; </b></p>
<p>ShutdownHook, </p>
<p><b>&gt; </b></p>
<p>trusted function </p>
<p><b>&gt; </b></p>
<p>non trusted function </p>
<p><b>&gt; </b></p>
<p>StartupHook </p>
<p>Table 6-42  </p>
<p>osCheckMPUAccess API </p>
<p><b>6.8 </b></p>
<p><b>Peripheral Regions </b></p>
<p>On  some  platforms,  there  are  memory  mapped  hardware  registers,  which  are  only </p>
<p>accessible  in  privileged  mode.  To  access  this  kind  of  registers  even  in  non-trusted </p>
<p>applications (i.e. non-privileged mode), MICROSAR OS provides Peripheral Regions. </p>
<p>To access such registers you have to configure a Peripheral Region and pass it’s ID to the </p>
<p>Peripheral Region API. The OS checks whether the caller has access to this region and </p>
<p>performs the requested access operation.  </p>
<p>The OS provides access functions for the following access types: 8, 16, and 32 bit. </p>
<p><b>6.8.1 </b></p>
<p><b>Reading functions </b></p>
<p><b>Prototype </b></p>
<p>osuint8  <b>osReadPeripheral8</b>(osuint16 area, osuint32 address) </p>
<p>osuint16 <b>osReadPeripheral16</b>(osuint16 area, osuint32 address) </p>
<p>osuint32 <b>osReadPeripheral32</b>(osuint16 area, osuint32 address) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>98 / 136 </p>
<p><b>Parameter </b></p>
<p>area </p>
<p>Identifier of peripheral regions to the read from </p>
<p>address </p>
<p>Address to be read from </p>
<p><b>Return code </b></p>
<p> </p>
<p>The content of “address” interpreted as 8 bit, 16 bit or 32 bit value </p>
<p><b>Functional Description </b></p>
<p><b>&gt; </b></p>
<p>reads either an 8 bit, or a 16 bit or a 32 bit value from “address” </p>
<p><b>&gt; </b></p>
<p>The function performs accessing checks (whether the caller has accessing rights to the peripheral </p>
<p>region and whether the address to be read from is within the configured range of the peripheral region) </p>
<p><b>&gt; </b></p>
<p>The error hook is raised in case of an error </p>
<p><b>&gt; </b></p>
<p>A shutdown is not issued in case of an error </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>These functions may not be called from OS hooks </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>These functions may be called from Task context </p>
<p><b>&gt; </b></p>
<p>These functions may be called from category 2 ISR context </p>
<p><b>&gt; </b></p>
<p>These functions can be called with interrupts enabled or with interrupts disabled </p>
<p>Table 6-43  </p>
<p>ReadPeripheral API </p>
<p><b>6.8.2 </b></p>
<p><b>Writing functions </b></p>
<p><b>Prototype </b></p>
<p>void <b>osWritePeripheral8</b>(osuint16 area, osuint32 address, osuint8 value) </p>
<p>void <b>osWritePeripheral16</b>(osuint16 area, osuint32 address, osuint16 value) </p>
<p>void <b>osWritePeripheral32</b>(osuint16 area, osuint32 address, osuint32 value) </p>
<p><b>Parameter </b></p>
<p>area </p>
<p>Identifier of peripheral regions to the read from </p>
<p>address </p>
<p>Address to write to </p>
<p>Value </p>
<p>Value to be written </p>
<p><b>Return code </b></p>
<p>None </p>
<p> </p>
<p><b>Functional Description </b></p>
<p><b>&gt; </b></p>
<p>Writes to either an 8 bit, or a 16 bit or a 32 bit value </p>
<p><b>&gt; </b></p>
<p>The function performs accessing checks (whether the caller has accessing rights to the peripheral </p>
<p>region and whether the address to be read from is within the configured range of the peripheral region) </p>
<p><b>&gt; </b></p>
<p>The error hook is raised in case of an error </p>
<p><b>&gt; </b></p>
<p>A shutdown is not issued in case of an error </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>99 / 136 </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>These functions may not be called from OS hooks </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>These functions may be called from Task context </p>
<p><b>&gt; </b></p>
<p>These functions may be called from category 2 ISR context </p>
<p><b>&gt; </b></p>
<p>These functions can be called with interrupts enabled or with interrupts disabled </p>
<p>Table 6-44  </p>
<p>WritePeripheral API </p>
<p><b>6.8.3 </b></p>
<p><b>Modifying functions </b></p>
<p><b>Prototype </b></p>
<p>void <b>osModifyPeripheral8</b>(osuint16 area, osuint32 address, osuint8 clearmask, </p>
<p>osuint8 setmask) </p>
<p>void <b>osModifyPeripheral16</b>(osuint16 area, osuint32 address, osuint16 clearmask, </p>
<p>osuint16 setmask) </p>
<p>void <b>osModifyPeripheral32</b>(osuint16 area, osuint32 address, osuint32 clearmask, </p>
<p>osuint32 setmask) </p>
<p><b>Parameter </b></p>
<p>area </p>
<p>Identifier of peripheral regions to the read from </p>
<p>address </p>
<p>Address to be modified </p>
<p>clearmask </p>
<p>Bitmask which is bitwise “ANDed” to “address” </p>
<p>setmask </p>
<p>Bitmask which is bitwise “ORed” to “address” </p>
<p><b>Return code </b></p>
<p>None </p>
<p> </p>
<p><b>Functional Description </b></p>
<p><b>&gt; </b></p>
<p>The function performs accessing checks (whether the caller has accessing rights to the peripheral </p>
<p>region and whether the address to be read from is within the configured range of the peripheral region) </p>
<p><b>&gt; </b></p>
<p>The error hook is raised in case of an error </p>
<p><b>&gt; </b></p>
<p>A shutdown is not issued in case of an error </p>
<p><b>&gt; </b></p>
<p>After the access checks has passed first the “clearmask” is ANDed to “address” and afterwards the </p>
<p>“setmask” is ORed to it. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>These functions may not be called from OS hooks </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>These functions may be called from Task context </p>
<p><b>&gt; </b></p>
<p>These functions may be called from category 2 ISR context </p>
<p><b>&gt; </b></p>
<p>These functions can be called with interrupts enabled or with interrupts disabled </p>
<p>Table 6-45  </p>
<p>ModifyPeripheral API </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>100 / 136 </p>
<p><b>7 </b></p>
<p><b>Configuration </b></p>
<p>Since  AUTOSAR  OS  3.0.0  specification,  XML  is  used  to  define  and  describe  an  OS </p>
<p>configuration.  However,  OIL  is  still  supported  as  an  alternative  description  language, </p>
<p>especially  if  the  OS  shall  be  used  stand-alone  without  any  other  AUTOSAR  software </p>
<p>modules. </p>
<p>All  OSEK  objects  and  their  attributes  have  to  be  defined  by  one  of  these  description </p>
<p>languages. </p>
<p><b>7.1 </b></p>
<p><b>Configuration and generation process </b></p>
<p><b>.h</b></p>
<p><b>AUTOSAR XML</b></p>
<p>Configuration Tool</p>
<p><b>Code</b></p>
<p>Generator</p>
<p><b>.oil</b></p>
<p><b>.c</b></p>
<p><b>OIL</b></p>
<p>Configurator</p>
<p><b>.xml</b></p>
<p>Configuration</p>
<p>files</p>
<p><b>.h</b></p>
<p><b>.c</b></p>
<p>Application </p>
<p>files</p>
<p><b>.h</b></p>
<p><b>.c</b></p>
<p>OS source </p>
<p>files</p>
<p>Compile and Link</p>
<p>Executable</p>
<p> </p>
<p>Figure 7-1 </p>
<p>System overview of software parts </p>
<p>The figure above shows the complete configuration process of a MICROSAR OS. First all </p>
<p>OS </p>
<p>objects </p>
<p>have </p>
<p>to </p>
<p>be </p>
<p>defined. </p>
<p>This </p>
<p>can </p>
<p>be </p>
<p>done </p>
<p>either </p>
<p>by </p>
<p>an  AUTOSAR </p>
<p>XML </p>
<p>configuration tool or by the OIL Configurator (in OIL). </p>
<p>An OIL or XML file is the base of the code generation process. After code generation all </p>
<p>files  (OS  source files,  application files  and generated  OS  configuration files) have  to be </p>
<p>compiled and linked to an executable. </p>
<p><b>7.1.1 </b></p>
<p><b>XML Configuration </b></p>
<p>A configuration which is based on XML must conform to the AUTOSAR XML schema[8]. </p>
<p>To  edit  a  MICROSAR  OS  XML  configuration  the  DaVinci  Configurator  Pro  or  Base  of </p>
<p>Vector  Informatik  GmbH  can  be  used.  Other </p>
<p>tools  that  are  able  to  edit  AUTOSAR </p>
<p>configurations may also be used. </p>
<p>The XML file that the tool produces has to be passed to the code generator to generate the </p>
<p>configuration files. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>101 / 136 </p>
<p><b>7.1.2 </b></p>
<p><b>OIL Configurator  </b></p>
<p>The OIL specification is based on the document &quot;OIL: OSEK Implementation Language – </p>
<p>Version:  2.3”  (ref.  [6]). Additional Attributes  are  defined  by  Vector  Informatik  GmbH;  the </p>
<p>resulting version of OIL is 4.0. </p>
<p>The  OIL  Configurator  is  a  Windows  based  program  that  is  used  to  configure  an  OSEK </p>
<p>application. The OIL Configurator reads and writes OIL files (OSEK Implementation Lan-</p>
<p>guage). The usage of the OIL Configurator is described in the online help of the OIL Con-</p>
<p>figurator. </p>
<p>The OIL Configurator has separate property tabs for each OSEK object type. Each object </p>
<p>has </p>
<p>several </p>
<p>standard </p>
<p>attributes </p>
<p>that </p>
<p>are  defined </p>
<p>in </p>
<p>the </p>
<p>OIL </p>
<p>specification.  Additional </p>
<p>attributes </p>
<p>that </p>
<p>are </p>
<p>implementation </p>
<p>specific </p>
<p>are </p>
<p>described </p>
<p>in </p>
<p>the </p>
<p>hardware </p>
<p>specific </p>
<p>document [4].  </p>
<p><b>7.2 </b></p>
<p><b>Configuration Variants </b></p>
<p>The OS supports the configuration variants </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>VARIANT-PRE-COMPILE </p>
<p>The MICROSAR OS system is typically delivered with the source code. The kernel is </p>
<p>implemented in several optimized variants, which are enabled from the OIL Configurator </p>
<p>using C defines. The source code of the operating system has to be compiled if the </p>
<p>configuration has changed. For some implementations, a library version of the operating </p>
<p>system is also supplied. For different configurations, different libraries have to be linked to </p>
<p>the application. </p>
<p>The  configuration  classes  of  the  OS  parameters depend  on  the  supported  configuration </p>
<p>variants. </p>
<p>For </p>
<p>their </p>
<p>definitions </p>
<p>please </p>
<p>see </p>
<p>the </p>
<p>OS_&lt;platform </p>
<p>and </p>
<p>derivate&gt;_bswmd.arxml</p>
<p> file. </p>
<p><b>7.3 </b></p>
<p><b>Configuration of the XML / OIL Attributes  </b></p>
<p>Some of the attributes of an OSEK object are standard for all OSEK implementations, and </p>
<p>some are specific for each implementation. </p>
<p>This chapter describes the attributes the user can set for each OSEK object. Please note </p>
<p>that setting an attribute to </p>
<p>TRUE</p>
<p> is used as a synonym for selecting it and setting to </p>
<p>FALSE</p>
<p> </p>
<p>is  used  as  a  synonym  for  deselecting  it.  The  reason  is  that  a  selection  in  the  OIL </p>
<p>Configurator  corresponds  to  setting  the  attribute  to </p>
<p>TRUE</p>
<p>  in  the  OIL  file  (this  can  be </p>
<p>checked by opening the OIL file with a normal text editor). </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>If a library version of the operating system is used, some attributes or attribute values </p>
<p>are not available or predefined. </p>
<p><b>1. </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>102 / 136 </p>
<p><b>7.3.1 </b></p>
<p><b>OS  </b></p>
<p>The OS object can only be defined once. The OS object controls general aspects of the </p>
<p>operating system. </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Name </p>
<p>n.a. </p>
<p>-- </p>
<p><b>&gt; </b></p>
<p>OIL: Freely selectable name, not used by </p>
<p>the code generator. </p>
<p><b>&gt; </b></p>
<p>XML: Not available in XML </p>
<p>Comment </p>
<p>n.a. </p>
<p>-- </p>
<p>Any comment. </p>
<p>CC </p>
<p>OsOSCC </p>
<p>ECC2, <b>AUTO </b></p>
<p>MICROSAR OS SafeContext must always be </p>
<p>configured to support Conformance class </p>
<p>ECC2. </p>
<p>STATUS </p>
<p>OsStatus </p>
<p>EXTENDED </p>
<p>MICROSAR OS SafeContext must always be </p>
<p>configured to support extended status (error) </p>
<p>messages. </p>
<p>SCALABILITY </p>
<p>CLASS  </p>
<p>OsScalabilityClass </p>
<p>SC3, SC4, </p>
<p><b>AUTO</b>. </p>
<p>MICROSAR OS SafeContext can be ordered in </p>
<p>Scalability classes SC3 or SC4. It must be </p>
<p>configured with the ordered Scalability class. </p>
<p>SCHEDULE </p>
<p>OsOSSchedule </p>
<p>MIXED, </p>
<p><b>AUTO </b></p>
<p>MICROSAR OS SafeContext always supports </p>
<p>preemptive and non-preemptive tasks, thus </p>
<p>scheduling policy must be configured to mixed </p>
<p>preemptive. </p>
<p>n.a. </p>
<p>OsHooks </p>
<p><i><b>hook </b></i></p>
<p><i><b>routines as </b></i></p>
<p><i><b>stated below </b></i></p>
<p><i><b>(as </b></i></p>
<p><i><b>Booleans) </b></i></p>
<p><b>&gt; </b></p>
<p>XML: Used as a container to store hook </p>
<p>routine information. </p>
<p><b>&gt; </b></p>
<p>OIL: not available </p>
<p>STARTUPHOOK </p>
<p>OsStartupHook </p>
<p>TRUE </p>
<p><b> </b></p>
<p>The </p>
<p>StartupHook</p>
<p> is always called at system </p>
<p>startup of a MICROSAR OS SafeContext. </p>
<p><b>&gt; </b></p>
<p>XML: This attribute is placed in container </p>
<p>OsHooks</p>
<p> </p>
<p>ERRORHOOK </p>
<p>OsErrorHook </p>
<p>TRUE </p>
<p><b> </b></p>
<p>The</p>
<p> ErrorHook</p>
<p> is always called if an error </p>
<p>occurs in a MICROSAR OS SafeContext. </p>
<p><b>&gt; </b></p>
<p>XML: This attribute is placed in container </p>
<p>OsHooks</p>
<p> </p>
<p>SHUTDOWNHOOK </p>
<p>OsShutdownHook </p>
<p>TRUE </p>
<p><b> </b></p>
<p>The</p>
<p> ShutdownHook</p>
<p> is always called at </p>
<p>system shutdown of a MICROSAR OS </p>
<p>SafeContext. </p>
<p><b>&gt; </b></p>
<p>XML: This attribute is placed in container </p>
<p>OsHooks</p>
<p> </p>
<p>PRETASKHOOK </p>
<p>OsPreTaskHook </p>
<p><b>FALSE </b></p>
<p>The </p>
<p>PreTaskHook</p>
<p> is not supported by </p>
<p>MICROSAR OS SafeContext. However, there is </p>
<p>a debug switch to turn it on during </p>
<p>development, see 6.5.1.2 and [9]. </p>
<p><b>&gt; </b></p>
<p>XML: This attribute is placed in container </p>
<p>OsHooks</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>103 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>POSTTASKHOOK </p>
<p>OsPostTaskHook </p>
<p><b>FALSE </b></p>
<p>The </p>
<p>PostTaskHook</p>
<p> is not supported by </p>
<p>MICROSAR OS SafeContext. However, there is </p>
<p>a debug switch to turn it on during </p>
<p>development, see 6.5.1.3 and [9]. </p>
<p><b>&gt; </b></p>
<p>XML: This attribute is placed in container </p>
<p>OsHooks</p>
<p> </p>
<p>PROTECTIONHOO</p>
<p>K </p>
<p>OsProtectionHook </p>
<p>TRUE </p>
<p><b> </b></p>
<p>The </p>
<p>ProtectionHook</p>
<p> is always called when a </p>
<p>protection error is detected in a MICROSAR OS </p>
<p>SafeContext. </p>
<p><b>&gt; </b></p>
<p>XML: This attribute is placed in container </p>
<p>OsHooks</p>
<p> </p>
<p>CallISRHooks </p>
<p>OsOSCallISRHook</p>
<p>s </p>
<p><b>FALSE </b></p>
<p>The </p>
<p>UserPreISRHook</p>
<p> and </p>
<p>UserPostISRHook</p>
<p> are not supported by </p>
<p>MICROSAR OS SafeContext. However, there is </p>
<p>a debug switch to turn them on during </p>
<p>development, see 6.5.2.1, 6.5.2.2 and [9]. </p>
<p>USEGET </p>
<p>SERVICEID </p>
<p>OsUseGetService </p>
<p>Id </p>
<p>TRUE </p>
<p><b> </b></p>
<p>Access macros for the service ID information </p>
<p>are always available in the error hook. </p>
<p>USEPARAMETER- </p>
<p>ACCESS </p>
<p>OsUseParameter </p>
<p>Access </p>
<p><b>FALSE </b></p>
<p>Access macros for the context related </p>
<p>information in the error hook are not supported </p>
<p>in MICROSAR OS SafeContext. </p>
<p>USERES </p>
<p>SCHEDULER </p>
<p>OsUseRes </p>
<p>Scheduler </p>
<p>TRUE, </p>
<p><b>FALSE </b></p>
<p>This parameter is available, as the AUTOSAR </p>
<p>standard requires it. Since AUTOSAR 4 the </p>
<p>resource RES_SCHEDULER was removed as </p>
<p>special case, therefore this attribute is silently </p>
<p>ignored by MICROSAR OS. </p>
<p>STACK </p>
<p>MONITORING </p>
<p>OsStackMonitoring </p>
<p>TRUE </p>
<p><b> </b></p>
<p>A stack check is performed with each task </p>
<p>switch. See also chapter 3.2.2.3 for details. </p>
<p>StackUsageMeasure</p>
<p>ment </p>
<p>OsStackUsageMe</p>
<p>asurement </p>
<p>TRUE, </p>
<p>FALSE, </p>
<p><b>AUTO </b></p>
<p>If selected, the stacks are filled with an indicator </p>
<p>value during StartOS. This allows measuring </p>
<p>the stack usage of tasks and ISRs. See also </p>
<p>chapter 3.2.2.5. If AUTO is selected, </p>
<p>StackUsageMeasurement uses the same </p>
<p>setting as STACKMONITORING. </p>
<p>ErrorInfoLevel </p>
<p>OsOSErrorInfo </p>
<p>Level </p>
<p>STANDARD </p>
<p>MICROSAR OS SafeContext will report </p>
<p>standard OSEK error codes and unique error </p>
<p>numbers, but no additional information about </p>
<p>the error location. </p>
<p>OSInternalChecks </p>
<p>OsOSInternal </p>
<p>Checks </p>
<p>ADDITIONAL </p>
<p>MICROSAR OS SafeContext will always </p>
<p>perform all available runtime error checks. </p>
<p>Compiler </p>
<p>OsOSCompiler </p>
<p><i>Implementatio</i></p>
<p><i>n specific </i></p>
<p><i><b> </b></i></p>
<p>The compiler can be chosen. If there is only </p>
<p>one compiler this attribute is also set by default. </p>
<p>ORTIDebug Support </p>
<p>OsOSORTIDebug</p>
<p>Support </p>
<p>TRUE </p>
<p><b> </b></p>
<p>The OS generator always produces an ORTI. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>104 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>ORTIDebugLevel </p>
<p>OsOSORTIDebug</p>
<p>Level </p>
<p> </p>
<p>ORTI_22_Add</p>
<p>itional </p>
<p>MICROSAR OS SafeContext will always </p>
<p>support version 2.2 of the ORTI standard with </p>
<p>all available features. </p>
<p>UserConfigurationV</p>
<p>ersion </p>
<p>OsOSUserConfigu</p>
<p>rationVersion </p>
<p><b>1</b>...65535 </p>
<p>Version number of the OS configuration. This </p>
<p>numeric value is not used by the OS, but </p>
<p>enables the user to track changes in the </p>
<p>configuration and validate the configuration </p>
<p>version actually used in the ECUC. Therefore, it </p>
<p>is suggested to increment this value each time </p>
<p>the OS configuration is modified. </p>
<p>ProtectionHook </p>
<p>Reaction </p>
<p>OsOSProtection </p>
<p>HookReaction </p>
<p>SELECTED </p>
<p>MICROSAR OS SafeContext does not support </p>
<p>forcible termination, thus requires this </p>
<p>parameter to be set to SELECTED. </p>
<p>See chapter 7.3.1.3 for information about the </p>
<p>sub-attributes and required values for </p>
<p>MICROSAR OS SafeContext. </p>
<p>Timing </p>
<p>Measurement </p>
<p>OsOSTiming </p>
<p>Measurement </p>
<p><b>TRUE </b></p>
<p> </p>
<p><b> </b></p>
<p>MICROSAR OS SafeContext will always </p>
<p>perform Timing measurement if delivered in </p>
<p>Scalability class SC4. </p>
<p>See chapter 7.3.1.4 for information about the </p>
<p>sub-attributes. Chapter 3.2.4.2 provides more </p>
<p>detailed information about configuration of </p>
<p>timing measurement. </p>
<p>TypeHeader Include </p>
<p>OsOSTypeHeader </p>
<p>Include </p>
<p>TRUE, </p>
<p><b>FALSE </b></p>
<p>If selected, the AUTOSAR type headers are </p>
<p>included in the file os_cfg.h. This is included in </p>
<p>the file os.h, which has to be included in all </p>
<p>source files that use API functions of </p>
<p>MICROSAR OS OSEK/AUTOSAR. The </p>
<p>AUTOSAR type headers are not necessary for </p>
<p>the usage of MICROSAR OS </p>
<p>OSEK/AUTOSAR, so it is safe to deselect this </p>
<p>attribute. </p>
<p>EnumeratedUnhandl</p>
<p>edISRs </p>
<p>OsOSEnumerated</p>
<p>UnhandledISRs </p>
<p>TRUE, </p>
<p><b>FALSE </b></p>
<p>Determines the handling of unassigned </p>
<p>interrupt sources. The default of this attribute is </p>
<p>FALSE</p>
<p>. </p>
<p>FALSE</p>
<p>: This is the normal handling for </p>
<p>unassigned interrupt sources. If no interrupt </p>
<p>service routine is defined in OIL for an interrupt </p>
<p>source the corresponding interrupt vector will </p>
<p>be directed to one common unhandled </p>
<p>exception handler. This setting must be chosen </p>
<p>for the final application software. </p>
<p>TRUE</p>
<p>: During application development, there </p>
<p>may be interrupts issued by unassigned </p>
<p>interrupt sources. In such case it could be a big </p>
<p>effort to determine the interrupt source. If this </p>
<p>attribute is set to </p>
<p>TRUE</p>
<p> the interrupt vector of </p>
<p>each unassigned interrupt source will be </p>
<p>directed to an unhandled exception routine. If </p>
<p>an unhandled exception occurs in that case, the </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>105 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>interrupt source which causes this exception </p>
<p>can easily be determined by the variable </p>
<p>“osISRUnhandledException_Number“. The </p>
<p>corresponding interrupt source can be </p>
<p>distinguished by having a look into the interrupt </p>
<p>vector table which normally is generated to </p>
<p>intvect.c. This is a debug feature only and is not </p>
<p>permitted for the final application software </p>
<p>running on a MICROSAR OS SafeContext. </p>
<p><i>This feature is optional. Please refer to </i>[5] <i>to </i></p>
<p><i>find out whether a specific implementation of </i></p>
<p><i>MICROSAR OS supports this feature. </i></p>
<p>ConditionalGenerati</p>
<p>ng </p>
<p>/MICROSAR/Boar</p>
<p>d/BoardGeneral/B</p>
<p>oardConditionalGe</p>
<p>nerating </p>
<p>TRUE, </p>
<p><b>FALSE </b></p>
<p>Determines whether the OS code generator </p>
<p>creates the files only if the relevant </p>
<p>configuration has been modified since the last </p>
<p>generator run (ConditionalGenerating = TRUE). </p>
<p>If ConditionalGenerating = FALSE, the OS files </p>
<p>are always generated. </p>
<p>For details about this attribute, see chapter </p>
<p>8.1.3. </p>
<p>Table 7-1  </p>
<p>OS attributes </p>
<p><b>7.3.1.1 ProtectionHookReaction / OsOSProtectionHookReaction </b></p>
<p><b>&gt; </b> MICROSAR OS SafeContext requires this attribute to be set to </p>
<p>SELECTED</p>
<p> with the </p>
<p>following subattributes: </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>KILLTASKISR </p>
<p>OsOSKILLTASK </p>
<p>ISR </p>
<p><b>FALSE </b></p>
<p>MICROSAR OS SafeContext does not support </p>
<p>the return value </p>
<p>PRO_TERMINATETASKISR</p>
<p>. </p>
<p>KILLAPPL </p>
<p>OsOSKILLAPPL </p>
<p><b>FALSE  </b></p>
<p>MICROSAR OS SafeContext does not support </p>
<p>the return value </p>
<p>PRO_TERMINATEAPPL</p>
<p>. </p>
<p>KILLAPPL_ </p>
<p>RESTART </p>
<p>OsOSKILLAPPL_</p>
<p>RESTART </p>
<p><b>FALSE </b></p>
<p>MICROSAR OS SafeContext does not support </p>
<p>the return value </p>
<p>PRO_TERMINATEAPPL_RESTART</p>
<p>. </p>
<p>SHUTDOWN </p>
<p>OsOS </p>
<p>SHUTDOWN </p>
<p><b>TRUE </b></p>
<p>PRO_SHUTDOWN</p>
<p> is the only return value </p>
<p>supported by MICROSAR OS SafeContext. </p>
<p>Table 7-2  </p>
<p>Sub-attributes of ProtectionHookReaction = SELECTED </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Currently MICROSAR OS does not support killing. So only SHUTDOWN should be </p>
<p>selected! </p>
<p><b> </b></p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>106 / 136 </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>If the Protection hook returns a value that is not configured by means of the sub-</p>
<p>attributes of </p>
<p>ProtectioHookReaction</p>
<p>, the OS performs a Shutdown. </p>
<p><b> </b></p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>MICROSAR OS allows to use the return values  </p>
<p></p>
<p>  PRO_KILLTASKISR,  </p>
<p></p>
<p>  PRO_KILLAPPL and  </p>
<p></p>
<p>  PRO_KILLAPPL_RESTART  </p>
<p>In the protection hook as synonyms for  </p>
<p></p>
<p>  PRO_TERMINATETASKISR, </p>
<p></p>
<p>  PRO_TERMINATEAPPL and  </p>
<p></p>
<p>  PRO_TERMINATEAPPL_RESTART  </p>
<p>as long as no macro OS_SUPPRESS_PROTHOOK_OLD_RET_VALS is defined. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>7.3.1.2 TimingMeasurement / OsOSTimingMeasurement </b></p>
<p>This  Attribute  must  be  set  to </p>
<p>TRUE</p>
<p>  for  a  MICROSAR  OS  SafeContext  that  has  been </p>
<p>delivered in Scalability class SC4. </p>
<p>Please see also 3.2.4.2 and 7.3.2.2. </p>
<p><b>&gt; </b> If this attribute is set to </p>
<p>TRUE</p>
<p>, the subattribute GlobalConfig allows to globally override </p>
<p>theTask/ISR settings for Timing Protection and Timing Measurement: </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value is written in </p>
<p>bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>GlobalConfig </p>
<p>OsGlobalConfig </p>
<p>ProtectAndMeasureAll </p>
<p><b>AsSelected </b></p>
<p>OnlyMeasureAll</p>
<p> </p>
<p><b>&gt; </b></p>
<p>ProtectAndMeasureAll</p>
<p>: The OS </p>
<p>provides timing measurement for all tasks </p>
<p>and ISRs regardless of their setting in the </p>
<p>attribute </p>
<p>TIMING_PROTECTION</p>
<p>. Timing </p>
<p>protection however is provided only for all </p>
<p>tasks and ISRs that have the attribute </p>
<p>TIMING_PROTECTION</p>
<p> set to </p>
<p>TRUE</p>
<p>. In </p>
<p>case the subattribute OnlyMeasure is set </p>
<p>to </p>
<p>TRUE</p>
<p>, that setting is ignored with a </p>
<p>warning. In case the attribute </p>
<p>TIMING_PROTECTION</p>
<p> of a task or ISR is </p>
<p>set to </p>
<p>FALSE</p>
<p>, the OS provides no timing </p>
<p>protection. </p>
<p><b>&gt; </b></p>
<p>AsSelected</p>
<p>: The os provides timing </p>
<p>protection for a task or ISR if that is </p>
<p>configured, the attribute OnlyMeasure is </p>
<p>honored. </p>
<p><b>&gt; </b></p>
<p>OnlyMeasureAll</p>
<p>: The OS does not </p>
<p>provide timing protection for any Task or </p>
<p>ISR. Instead, it provides timing </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>107 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value is written in </p>
<p>bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>measurement for all tasks and ISRs. In </p>
<p>case a task or ISR is configured to have </p>
<p>timing protection and has the subattribute </p>
<p>OnlyMeasure set to </p>
<p>FALSE</p>
<p>, that setting is </p>
<p>overridden with a warning. </p>
<p>Table 7-3  </p>
<p>Sub-attributes of </p>
<p>TimingMeasurement</p>
<p> = </p>
<p>TRUE</p>
<p> </p>
<p><b>7.3.1.3 </b></p>
<p><b>PeripheralRegion / OsOSPeripheralRegion </b></p>
<p><b>OIL Name </b></p>
<p><b>XML Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>StartAddress </p>
<p>OsOSStartAddress </p>
<p>- </p>
<p>Numeric value </p>
<p>Specifies the start address of the </p>
<p>peripheral region, which shall be </p>
<p>configured. </p>
<p>EndAddress </p>
<p>OsOSEndAddress </p>
<p>- </p>
<p>Numeric value </p>
<p>Specifies the end address of the </p>
<p>peripheral region, which shall be </p>
<p>configured. </p>
<p>Identifier </p>
<p>OsOSIdentifier </p>
<p>- </p>
<p>Area name </p>
<p>Must be a unique C-identifier, which can </p>
<p>be used in an application or BSW module </p>
<p>to access the peripheral region. </p>
<p>ACCESSING_</p>
<p>APPLICATION </p>
<p>OsOSAccessingApplication </p>
<p>- </p>
<p>Grants access for this Peripheral Region. </p>
<p>Multiple applications can be defined for </p>
<p>the same Peripheral Region. </p>
<p>Table 7-4  </p>
<p>Sub-attributes of </p>
<p>PeripheralRegion</p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>The application is allowed to access memory addresses in the interval of StartAddress </p>
<p>&lt;= memory to be accessed &lt;= EndAddress </p>
<p>The “EndAddress” value is included! All bytes of a peripheral access must fit into the </p>
<p>peripheral region. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>7.3.2 </b></p>
<p><b>Task </b></p>
<p>In the section Task all tasks and their attributes have to be defined. </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Name </p>
<p>Short-Name </p>
<p>- </p>
<p>Name of the task. This name is used as an </p>
<p>argument to all task-related OSEK API </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>108 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>functions (e.g. </p>
<p>ActivateTask</p>
<p>). The task </p>
<p>function (or task body) has to be defined using </p>
<p>the C macro </p>
<p>TASK</p>
<p>() (which appends the suffix </p>
<p>func</p>
<p> to the task name). </p>
<p>Comment  </p>
<p>n.a. </p>
<p>-- </p>
<p>Any comment. </p>
<p>TYPE  </p>
<p>OsTaskTYPE </p>
<p>BASIC, </p>
<p>EXTENDED, </p>
<p>AUTO </p>
<p>Type of the task: either BASIC or EXTENDED. </p>
<p>If set to AUTO, the type is calculated based on </p>
<p>the settings for events and the activation count. </p>
<p>SCHEDULE </p>
<p>OsTaskSchedule </p>
<p>NON, </p>
<p>FULL </p>
<p>Scheduling policy for this task.  </p>
<p>PRIORITY </p>
<p>OsTaskPriority </p>
<p>- </p>
<p>The priority of the task. A higher number </p>
<p>represents a higher priority (according to the </p>
<p>OSEK specification). The priority may be set </p>
<p>with gaps, though the gaps will be eliminated by </p>
<p>the code generator. Several tasks may be set </p>
<p>on the same priority level. </p>
<p>ACTIVATION  </p>
<p>OsTaskActivation </p>
<p>- </p>
<p>The number of activations that are recorded in </p>
<p>the kernel while the task is possibly running or </p>
<p>delayed by higher priority tasks. </p>
<p>If </p>
<p>ACTIVATION</p>
<p> is set to a value bigger than 1, </p>
<p>no events can be received. </p>
<p>AUTOSTART  </p>
<p>OsTaskAutostart </p>
<p>- </p>
<p>If set to </p>
<p>TRUE</p>
<p>, the task will be activated at </p>
<p>startup of the operating system. See chapter </p>
<p>7.3.2.1 for details about the sub-attributes. </p>
<p>EVENT </p>
<p>OsTaskEventRef </p>
<p>- </p>
<p>Reference to an event that is used by this task. </p>
<p>This attribute can only be used for extended </p>
<p>tasks (the attribute </p>
<p>TYPE</p>
<p> might be set to </p>
<p>EXTENDED</p>
<p> or </p>
<p>AUTO</p>
<p>). This attribute can be used </p>
<p>multiply if more than one </p>
<p>EVENT</p>
<p> has to be </p>
<p>assigned. </p>
<p>If events are used with this task, the attribute </p>
<p>ACTIVATION</p>
<p> cannot be bigger than 1. </p>
<p>RESOURCE </p>
<p>OsTaskResource </p>
<p>Ref </p>
<p>- </p>
<p>Reference to a resource that is occupied by this </p>
<p>task. This attribute can be used multiply if more </p>
<p>than one </p>
<p>RESOURCE</p>
<p> shall be assigned. </p>
<p>StackSize </p>
<p>OsTaskStackSize </p>
<p>- </p>
<p>Task stack size in byte. This attribute is only </p>
<p>available if the implementation supports </p>
<p>configurable task stacks. </p>
<p>TIMING_PROTECTI</p>
<p>ON </p>
<p>OsTaskTiming </p>
<p>Protection </p>
<p>- </p>
<p>Selects timing protection for the task. See </p>
<p>chapter 7.3.2.2 for information about the sub-</p>
<p>attributes. </p>
<p>ACCESSING_ </p>
<p>APPLICATION </p>
<p>OsTaskAccessing</p>
<p>Application </p>
<p>- </p>
<p>Defines access rights of an application for this </p>
<p>task. This attribute can be defined multiply, so </p>
<p>different applications might have access right to </p>
<p>the same task. This attribute can be used in </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>109 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>scalability classes SC3 and SC4 only. </p>
<p>Table 7-5  </p>
<p>Task attributes </p>
<p><b>7.3.2.1 AUTOSTART / OsTaskAutostart </b></p>
<p><b>&gt; </b> OIL: If attribute set to </p>
<p>FALSE</p>
<p>: </p>
<p> No sub-attributes. </p>
<p><b>&gt; </b> XML: If this container is not present: </p>
<p> AUTOSTART switched off. </p>
<p><b>&gt; </b> If attribute is set to </p>
<p>TRUE</p>
<p>: </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>APPMODE </p>
<p>OsTaskAppMode </p>
<p>Ref </p>
<p><b>- </b></p>
<p>Defines an application mode in which the task </p>
<p>is started in automatically. This attribute might </p>
<p>be defined several times to start the task in </p>
<p>different application modes. </p>
<p>Table 7-6  </p>
<p>Sub-attributes of TASK-&gt;AUTOSTART=</p>
<p>TRUE</p>
<p> </p>
<p><b>7.3.2.2 TIMING_PROTECTION / OsTaskTimingProtection </b></p>
<p>Please note that </p>
<p>TIMING_PROTECTION</p>
<p> = </p>
<p>TRUE</p>
<p> can only be selected for a MICROSAR </p>
<p>OS SafeContext that has been delivered in Scalability class SC4. </p>
<p><b>&gt; </b> If attribute is set to </p>
<p>FALSE</p>
<p>: </p>
<p>No sub-attributes. </p>
<p><b>&gt; </b> If this attribute is not defined in XML: </p>
<p>Timing protection is switched off. </p>
<p>The value of this attribute might be overridden by the OS attribute </p>
<p>TimingMeasurement</p>
<p>, </p>
<p>as described in chapters 7.3.1.4 and 3.2.4.2 </p>
<p><b>&gt; </b> If attribute is set to </p>
<p>TRUE</p>
<p>: </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>EXECUTION </p>
<p>BUDGET </p>
<p>OsTaskExecution </p>
<p>Budget </p>
<p>- </p>
<p>Defines the maximum execution time for the </p>
<p>task </p>
<p>TIMEFRAME </p>
<p>OsTaskTimeFrame </p>
<p>- </p>
<p>Defines the minimum time between task </p>
<p>activations </p>
<p>MAXOS </p>
<p>OsTaskOsInterrupt</p>
<p>- </p>
<p>Maximum time OS interrupts are locked (by </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>110 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>INTERRUPT </p>
<p>LOCKTIME </p>
<p>LockBudget </p>
<p>SuspendOSInterrupts</p>
<p>) </p>
<p>MAXALL </p>
<p>INTERRUPT </p>
<p>LOCKTIME </p>
<p>OsTaskAllInterrupt</p>
<p>LockBudget </p>
<p>- </p>
<p>Maximum time ALL interrupts are locked (by </p>
<p>SuspendAllInterrupts</p>
<p> or </p>
<p>DisableAllInterrupts</p>
<p>) </p>
<p>LOCKINGTIME = </p>
<p>RESOURCELOCK </p>
<p>OsTaskResource </p>
<p>Lock </p>
<p>- </p>
<p>Is intended to be a container for sub-attributes </p>
<p>concerning the locking time of resources </p>
<p>LOCKINGTIME = </p>
<p>RESOURCELOCK/ </p>
<p>RESOURCE </p>
<p>Inside the </p>
<p>container </p>
<p>OsTaskResource </p>
<p>Lock: </p>
<p>OsTaskResource </p>
<p>LockResourceRef </p>
<p>- </p>
<p>The resource for which the locking time is </p>
<p>specified. </p>
<p>LOCKINGTIME = </p>
<p>RESOURCELOCK/ </p>
<p>RESOURCELOCK </p>
<p>TIME </p>
<p>Inside the </p>
<p>container </p>
<p>OsTaskResource </p>
<p>Lock: </p>
<p>OsTaskResource </p>
<p>LockBudget </p>
<p>- </p>
<p>Maximum time the resource is locked (by </p>
<p>GetResource</p>
<p>) </p>
<p>OnlyMeasure </p>
<p>OsOnlyMeasure </p>
<p>TRUE </p>
<p><b>FALSE </b></p>
<p>If set to </p>
<p>FALSE</p>
<p>, timing values of this task are </p>
<p>measured and violations against the configured </p>
<p>values lead to a call of the ProtectionHook. If </p>
<p>set to </p>
<p>TRUE</p>
<p>, the timing values are still </p>
<p>measured but no call of the ProtectionHook </p>
<p>occurs. </p>
<p>Table 7-7  </p>
<p>Sub-attributes of TASK-&gt; </p>
<p>TIMING_PROTECTION</p>
<p>=</p>
<p>TRUE</p>
<p> </p>
<p><b>7.3.2.3 </b></p>
<p><b>Task attributes concerning the timing analyzer </b></p>
<p>The following attributes have to be used when working with the timing analyzer tool. They </p>
<p>are used as input for this tool. </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>ComputationTime </p>
<p>OsTask </p>
<p>ComputationTime </p>
<p>- </p>
<p>The worst case execution time (in </p>
<p>nanoseconds) </p>
<p>Period </p>
<p>OsTaskPeriod </p>
<p>- </p>
<p>The minimum activation period of the task (in </p>
<p>nanoseconds) </p>
<p>Deadline </p>
<p>OsTaskDeadline </p>
<p>- </p>
<p>The deadline of the task (in nanoseconds) </p>
<p>PRIORITY </p>
<p>OsTaskPriority </p>
<p>- </p>
<p>Priority of the task </p>
<p>UseResource </p>
<p>Occupation </p>
<p>OsTaskUse </p>
<p>Resource </p>
<p>Occupation </p>
<p>- </p>
<p>If set to </p>
<p>TRUE</p>
<p> the occupation of resources can </p>
<p>be taken into consideration by the analysis tool. </p>
<p>UseResource </p>
<p>Occupation=TRUE/</p>
<p>OsTaskUse </p>
<p>Resource </p>
<p>- </p>
<p>Reference to the resource that is occupied. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>111 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Resource </p>
<p>Occupation </p>
<p>=TRUE/OsTask </p>
<p>Resource </p>
<p>UseResource </p>
<p>Occupation=TRUE/</p>
<p>OccupationTime </p>
<p>OsTaskUse </p>
<p>Resource </p>
<p>Occupation </p>
<p>=TRUE/OsTask </p>
<p>OccupationTime </p>
<p>-</p>
<p> </p>
<p>Maximum </p>
<p>resource </p>
<p>occupation </p>
<p>time </p>
<p>(in </p>
<p>nanoseconds) </p>
<p>Table 7-8  </p>
<p>Task attributes concerning the timing analyzer </p>
<p><b>7.3.3 </b></p>
<p><b>Counter </b></p>
<p>The Counter container provides the following configuration attributes. </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is written </p>
<p>in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Name </p>
<p>Short-Name </p>
<p>- </p>
<p>Name of the counter. This name is used </p>
<p>for the Alarm configuration. </p>
<p>Comment  </p>
<p>n.a. </p>
<p><b> </b></p>
<p>Any comment. </p>
<p>MINCYCLE </p>
<p>OsCounterMinCycle </p>
<p><b>- </b></p>
<p>This attribute specifies the minimum </p>
<p>allowed number of ticks for a cyclic </p>
<p>alarm linked to the counter. </p>
<p>MAXALLOWED </p>
<p>VALUE </p>
<p>OsCounterMaxAllowedValue </p>
<p><b>- </b></p>
<p>Maximum value, which is reachable by </p>
<p>the counter in counter ticks. </p>
<p>TICKSPERBASE </p>
<p>OsCounterTicksPerBase </p>
<p><b>- </b></p>
<p>This attribute specifies the number of </p>
<p>hardware timer ticks required to reach a </p>
<p>counterspecific unit. E.g. if you have a </p>
<p>periodic tick timer, which is running with </p>
<p>16MHz and it is configured to trigger a </p>
<p>timer interrupt with 1kHz. You have </p>
<p>16000 ticks per base. </p>
<p>TYPE </p>
<p>OsCounterType </p>
<p>SOFTWARE, </p>
<p>HARDWARE </p>
<p>Defines the type of the counter. </p>
<p>Possible settings are </p>
<p>SOFTWARE</p>
<p> or </p>
<p>HARDWARE</p>
<p>. </p>
<p>SOFTWARE</p>
<p> means the </p>
<p>counter is incremented by means of the </p>
<p>system service IncrementCounter, </p>
<p>which has to be called by the </p>
<p>application. </p>
<p>HARDWARE</p>
<p> means the </p>
<p>counter is incremented by MICROSAR </p>
<p>OS internally. </p>
<p>DRIVER </p>
<p>OsDriver </p>
<p>- </p>
<p>This Container contains the information </p>
<p>who will drive the counter. This </p>
<p>configuration is only valid if the counter </p>
<p>has </p>
<p>OsCounterType</p>
<p> set to </p>
<p>HARDWARE</p>
<p>. </p>
<p>Sub-Attributes are hardware dependent </p>
<p>(see [5]). </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>112 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is written </p>
<p>in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>TIMECONSTANT </p>
<p>OsTimeConstant </p>
<p>- </p>
<p>This Container allows the user to define </p>
<p>constants, to be used e.g. to compare </p>
<p>physical time values with timer tick </p>
<p>values. </p>
<p>TIMECONSTANT/ </p>
<p>CONSTNAME </p>
<p>OsConstName </p>
<p>- </p>
<p>The name, to be used by the application </p>
<p>to get </p>
<p>OsTimeValue</p>
<p> in counter units. </p>
<p>TIMECONSTANT/ </p>
<p>VALUE </p>
<p>OsTimeValue </p>
<p>- </p>
<p>This attribute contains the value of the </p>
<p>constant in seconds. </p>
<p>SECONDSPERTICK </p>
<p>OsSecondsPerTick </p>
<p>- </p>
<p>This attribute contains the time of one </p>
<p>counter tick in seconds. </p>
<p>ACCESSING_ </p>
<p>APPLICATION </p>
<p>OsCounter Accessing </p>
<p>Application </p>
<p>- </p>
<p>Defines access rights of an application </p>
<p>for this counter. This attribute can be </p>
<p>used multiply, so different applications </p>
<p>might have access rights to this counter. </p>
<p>This attribute can only be used in </p>
<p>scalability classes SC3 and SC4. </p>
<p>Table 7-9  </p>
<p>Attributes of COUNTER </p>
<p> </p>
<p>Figure 7-2 </p>
<p>Relation between Physical Units, Counter Units and Driver Units </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>If the OS supports High-Resolution, there is no periodic counter tick. The OS programs </p>
<p>the driver to interrupt on demand (e.g. next Alarm, next Expiry Point, etc.). Therefore, </p>
<p>the counter has the same resolution as the driver (</p>
<p>OsCounterTicksPerBase</p>
<p> is 1). </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>7.3.4 </b></p>
<p><b>Alarm </b></p>
<p>The action of an alarm has to be defined statically. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>113 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Name </p>
<p>Short-Name </p>
<p>- </p>
<p>Name of the alarm. This name is used as an </p>
<p>argument to all alarm related OSEK API </p>
<p>functions (e.g. </p>
<p>SetRelAlarm</p>
<p>). </p>
<p>Comment </p>
<p>n.a. </p>
<p>-- </p>
<p>Any comment </p>
<p>COUNTER </p>
<p>OsAlarmCounter </p>
<p>Ref </p>
<p> </p>
<p>Reference to the counter that drives the </p>
<p>alarm.  </p>
<p>ACTION </p>
<p>OsAlarmAction </p>
<p><b>&gt; </b></p>
<p>OIL:</p>
<p> </p>
<p>SETEVENT, </p>
<p>ACTIVATETASK, </p>
<p>INCREMENTCOU</p>
<p>NTER </p>
<p> </p>
<p><b>&gt; </b></p>
<p>XML: </p>
<p>Choice container: </p>
<p>OsAlarmActivateT</p>
<p>ask, </p>
<p>OsAlarmIncrement</p>
<p>Counter, </p>
<p>OsAlarmSetEvent </p>
<p>See chapter 7.3.4.1 for more information.   </p>
<p>AUTOSTART  </p>
<p>OsAlarmAutostart </p>
<p>TRUE </p>
<p><b>FALSE </b></p>
<p><b>&gt; </b></p>
<p>OIL: If set to </p>
<p>TRUE</p>
<p>, the alarm will be </p>
<p>activated at startup of the system. </p>
<p><b>&gt; </b></p>
<p>XML: If attribute is present, the alarm will </p>
<p>be activated at startup of the system. </p>
<p>See chapter 7.3.4.2 for more information </p>
<p>about the sub-attributes and chapter 3.2.1.3 </p>
<p>for more information about static alarms.  </p>
<p>ACCESSING_ </p>
<p>APPLICATION </p>
<p>OsAlarmAccessin</p>
<p>gApplication </p>
<p> </p>
<p>Defines access rights of an application for </p>
<p>this alarm. This attribute can be used </p>
<p>multiply, so different applications might have </p>
<p>access rights to this alarm. This attribute can </p>
<p>be used in scalability classes SC3 and SC4 </p>
<p>only. </p>
<p>Table 7-10  </p>
<p>Attributes of ALARM </p>
<p><b>7.3.4.1 ACTION / OsAlarmAction </b></p>
<p><b>&gt; </b> Attribute / ChoiceContainer is set to </p>
<p>ACTIVATETASK</p>
<p> / </p>
<p>OsAlarmActivateTask</p>
<p>: </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>114 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>TASK </p>
<p>OsAlarmActivate </p>
<p>TaskRef </p>
<p><b>- </b></p>
<p>Task to be activated </p>
<p>Table 7-11  </p>
<p>Sub-attributes of ACTION = ACTIVATETASK </p>
<p><b>&gt; </b> Attribute / ChoiceContainer is set to </p>
<p>SETEVENT</p>
<p> / </p>
<p>OsAlarmSetEvent</p>
<p>: </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>TASK </p>
<p>OsAlarmSetEvent </p>
<p>TaskRef </p>
<p><b>- </b></p>
<p>Task to which the event should be sent </p>
<p>EVENT </p>
<p>OsAlarmSetEvent</p>
<p>Ref </p>
<p><b> </b></p>
<p>Event to be sent to the specified task </p>
<p>Table 7-12  </p>
<p>Sub-attributes of ACTION = SETEVENT </p>
<p> </p>
<p><b>&gt; </b> Attribute / ChoiceContainer is set to </p>
<p>INCREMENTCOUNTER</p>
<p> / </p>
<p>OsAlarmIncrementCounter</p>
<p>: </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>COUNTER </p>
<p>OsAlarmIncrement</p>
<p>CounterRef </p>
<p><b>- </b></p>
<p>Name of the counter to be incremented </p>
<p>Table 7-13  </p>
<p>Sub-attributes of ACTION = ALARMCALLBACK </p>
<p> </p>
<p><b>7.3.4.2 AUTOSTART / OsAlarmAutostart </b></p>
<p><b>&gt; </b> OIL: This attribute can be either </p>
<p>TRUE</p>
<p> or </p>
<p>FALSE</p>
<p>. Depending on the value, there may be </p>
<p>different sub-attributes. </p>
<p><b>&gt; </b> XML: This attribute can be present in the configuration or it can be omitted. In case this </p>
<p>container is present, it has sub-attributes, which are described below. </p>
<p><b>&gt; </b> If </p>
<p>AUTOSTART</p>
<p> is set to </p>
<p>TRUE</p>
<p> (OIL) or if the container is present (XML): </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>ALARMTIME </p>
<p>OsAlarmAlarmTim</p>
<p>e </p>
<p>- </p>
<p>The relative or absolute tick value when the </p>
<p>alarm expires for the first time. Note that for an </p>
<p>alarm which is RELATIVE the value should be </p>
<p>bigger than 0. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>115 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>TYPE </p>
<p>OsAlarmAutostar </p>
<p>tType </p>
<p>ABSOLUTE </p>
<p>RELATIVE </p>
<p>The value corresponds to a call of the API-</p>
<p>Functions SetRelAlarm or SetAbsAlarm </p>
<p>CYCLETIME </p>
<p>OsAlarmCycleTim</p>
<p>e </p>
<p> </p>
<p>This atttibute defines the cycle time of a cyclic </p>
<p>alarm in counter units.  A zero value indicates </p>
<p>that the alarm is not cyclic. </p>
<p>APPMODE </p>
<p>OsAlarmAppMode</p>
<p>Ref </p>
<p> </p>
<p>Reference to the application modes for which </p>
<p>the AUTOSTART shall be performed. </p>
<p>Table 7-14  </p>
<p>Sub-attributes of AUTOSTART = </p>
<p>TRUE</p>
<p> </p>
<p> </p>
<p><b>7.3.5 </b></p>
<p><b>Resource </b></p>
<p>Resources have to be defined with the following attributes: </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Name </p>
<p>Short-Name </p>
<p>- </p>
<p>Name of the resource. This name is used as an </p>
<p>argument to all resource related OSEK API </p>
<p>functions (e.g. </p>
<p>GetResource</p>
<p>). </p>
<p>Comment </p>
<p>n.a. </p>
<p>-- </p>
<p>Any comment </p>
<p>RESOURCE </p>
<p>PROPERTY </p>
<p>OsResource </p>
<p>Property </p>
<p>STANDARD, </p>
<p>LINKED </p>
<p>This attribute can take the following values:  </p>
<p><b>&gt; </b></p>
<p>STANDARD</p>
<p>: A normal resource that is not </p>
<p>linked to another resource and is not an </p>
<p>internal resource. </p>
<p><b>&gt; </b></p>
<p>LINKED</p>
<p>: A resource that is linked to another </p>
<p>resource with the property </p>
<p>STANDARD</p>
<p> or </p>
<p>LINKED</p>
<p>. </p>
<p>Internal resources are not supported by </p>
<p>MICROSAR OS SafeContext. </p>
<p>ACCESSING_ </p>
<p>APPLICATION </p>
<p>OsResource </p>
<p>Accessing </p>
<p>Application </p>
<p> </p>
<p>Defines access rights of an application for this </p>
<p>resource. This attribute can be used multiply, so </p>
<p>different applications might have access rights </p>
<p>to this resource. This attribute can only be used </p>
<p>in scalability classes SC3 and SC4. </p>
<p>RESOURCE </p>
<p>PROPERTY </p>
<p>=LINKED / LINKED </p>
<p>RESOURCE </p>
<p>OsResourceLinked</p>
<p>ResourceRef </p>
<p> </p>
<p><b>&gt; </b></p>
<p>OIL: If the resource property is set to </p>
<p>LINKED</p>
<p>, the </p>
<p>LINKEDRESOURCE</p>
<p> attribute </p>
<p>holds a reference to a resource. </p>
<p><b>&gt; </b></p>
<p>XML: This attribute holds a reference to a </p>
<p>resource. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>116 / 136 </p>
<p>Table 7-15  </p>
<p>Attributes of RESOURCE </p>
<p><b>7.3.6 </b></p>
<p><b>Event </b></p>
<p>Events  in  the  OSEK  operating  system  are  always  implemented  as  bits  in  bit-fields. The </p>
<p>user could use bit-masks like ‘0x0001’, but to achieve portability between different OSEK </p>
<p>implementations, the user should use event names, which are mapped to defined bits by </p>
<p>the code generator. </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Name </p>
<p>Short-Name </p>
<p>- </p>
<p>Name of the event. This name is used as an </p>
<p>argument to all event related OSEK-API-</p>
<p>functions (e.g. </p>
<p>SetEvent</p>
<p>). </p>
<p>Comment </p>
<p>n.a. </p>
<p>-- </p>
<p>Any comment </p>
<p>MASK </p>
<p>OsEventMask </p>
<p>- </p>
<p><b>&gt; </b></p>
<p>OIL: </p>
<p>Eventmask</p>
<p> or </p>
<p>AUTO</p>
<p> </p>
<p><b>&gt; </b></p>
<p>XML: If </p>
<p>EventMasks</p>
<p> shall be defined </p>
<p>automatically this attribute shall be omitted </p>
<p>Table 7-16  </p>
<p>Sub-attributes of EVENT </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>If the user selects </p>
<p>AUTO</p>
<p> for the mask, the code generator will search for free bits in the </p>
<p>bit mask of the receiving task. It is important to specify each task that receives an </p>
<p>event, otherwise the code generator will generate wrong bit-masks. </p>
<p><b> </b></p>
<p> </p>
<p><b>7.3.7 </b></p>
<p><b>ISR </b></p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Name </p>
<p>Short-Name </p>
<p>- </p>
<p>Name of the interrupt service routine. </p>
<p>Comment </p>
<p>n.a. </p>
<p>-- </p>
<p>Any comment </p>
<p>CATEGORY </p>
<p>OsIsrCategory </p>
<p>- </p>
<p><b>&gt; </b></p>
<p>OIL: Number of category for the interrupt </p>
<p>service routine (1-2) </p>
<p><b>&gt; </b></p>
<p>XML: this attribute can be </p>
<p>CATEGORY_1</p>
<p> or </p>
<p>CATEGORY_2</p>
<p> </p>
<p>RESOURCE </p>
<p>OsIsrResourceRef </p>
<p>- </p>
<p>Resource management for ISRs is not </p>
<p>supported by MICROSAR OS SafeContext. </p>
<p>TIMING_ </p>
<p>PROTECTION </p>
<p>OsIsrTiming </p>
<p>Protection </p>
<p>- </p>
<p>Selects timing protection for the ISR. See </p>
<p>chapter 7.3.7.2 for information about the sub-</p>
<p>attributes. </p>
<p>EnableNesting </p>
<p>OsIsrEnable </p>
<p>Nesting </p>
<p>- </p>
<p>If set to </p>
<p>TRUE</p>
<p> the OS will call the user ISR in a </p>
<p>way that interrupts will be enabled again during </p>
<p>user ISR. Thus, it is possible that the user ISR </p>
<p>can be interrupted by other ISRs. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>117 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>UseSpecialFunction</p>
<p>Name </p>
<p>OsIsrUseSpecial </p>
<p>FunctionName </p>
<p>- </p>
<p>Normally the attribute </p>
<p>Name/Short-Name</p>
<p> </p>
<p>defines the C-Name of the ISR. Since this </p>
<p>name must be unique, it would not be possible </p>
<p>to map different interrupt Sources to a single </p>
<p>ISR. This can be done by this attribute. </p>
<p>If this attribute is set to </p>
<p>TRUE</p>
<p>, it is possible to </p>
<p>define the function name of the ISR in a </p>
<p>separate sub-attribute. These names do not </p>
<p>have to be unique. </p>
<p>ACCESSING_ </p>
<p>APPLICATION </p>
<p>OsIsrAccessing </p>
<p>Application </p>
<p>- </p>
<p>Defines access rights of an application for this </p>
<p>ISR. This attribute can be used multiply, so </p>
<p>different applications might have access rights </p>
<p>to this alarm. </p>
<p>Table 7-17  </p>
<p>Attributes of ISR </p>
<p><b>7.3.7.1 UseSpecialFunctionName / OsIsrUseSpecialFunctionName </b></p>
<p>If  this  attribute  is  set  to </p>
<p>TRUE</p>
<p>  a  function  name  can  be  specified  which  is  taken  as  ISR </p>
<p>name instead of the </p>
<p>Name</p>
<p> (OIL) / </p>
<p>Short-Name</p>
<p> (XML) attribute. </p>
<p>This can be used to map several interrupt sources to one ISR routine. </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is written </p>
<p>in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>FunctionName </p>
<p>OsIsrFunctionName </p>
<p>- </p>
<p>Name of the ISR routine. </p>
<p>Table 7-18  </p>
<p>Sub-attributes of UseSpecialFunctionname / OsIsrUseSpecialFunctionName </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Example </b></p>
<p>Given  two  Interrupts  MyISR1  and  MyISR2.  Both  shall  trigger  the  same  ISR  routine. </p>
<p>Activate  SpecialFuntionName for  MyISR2,  and set  FunctionName  to  “MyISR1”.  Now, </p>
<p>MyISR2 is mapped onto the MyISR1 routine, which is implemented as usual:</p>
<p>  </p>
<p>ISR(MyISR1)  </p>
<p>{ </p>
<p> </p>
<p>… </p>
<p>} </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>118 / 136 </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>The </p>
<p>ISR()</p>
<p> macro <i>MUST </i>be used for the definition of category 2 ISR handlers. If this </p>
<p>is not possible, a wrapper using this macro can be used to call the respective ISR </p>
<p>handler: </p>
<p> </p>
<p>ISR(MyISR1) /* “MyISR1” is the configured */ </p>
<p>{           /* FunctionName in OIL or XML */ </p>
<p>  MyISRHandlerFunction(); /* “MyISRHandlerFunction” is  */ </p>
<p>}                         /* the name of the actual ISR */        </p>
<p>/* handler provided by the    */ </p>
<p>/* application                */ </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p><b>7.3.7.2 TIMING_PROTECTION / OsIsrTimingProtection </b></p>
<p><b>&gt; </b> OIL: This attribute has to be set to </p>
<p>TRUE</p>
<p> to switch on timing protection. The sub-</p>
<p>attributes are only visible if </p>
<p>TIMING_PROTECTION</p>
<p> is </p>
<p>TRUE</p>
<p>. </p>
<p><b>&gt; </b> XML: This attribute has to be present to switch on timing protection. </p>
<p>Please  note  that </p>
<p>timing  protection  can  only  be  switched  on </p>
<p>for  a </p>
<p>MICROSAR  OS </p>
<p>SafeContext that has been delivered in Scalability class SC4. </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>EXECUTIONTIME </p>
<p>OsIsrExecution </p>
<p>Budget </p>
<p>- </p>
<p>The parameter contains the maximum allowed </p>
<p>execution time of the interrupt. </p>
<p><b>&gt; </b></p>
<p>OIL: the times are given in nanoseconds. </p>
<p><b>&gt; </b></p>
<p>XML: the times are given in seconds. </p>
<p>TIMEFRAME </p>
<p>OsIsrTimeFrame </p>
<p>- </p>
<p>This parameter contains the minimum inter-</p>
<p>arrival time between successive interrupts  </p>
<p><b>&gt; </b></p>
<p>OIL: the times are given in nanoseconds. </p>
<p><b>&gt; </b></p>
<p>XML: the times are given in seconds. </p>
<p>MAXOSINTERRUP</p>
<p>TLOCKTIME </p>
<p>OsIsrOsInterrupt </p>
<p>LockBudget </p>
<p>- </p>
<p>This parameter contains the maximum time for </p>
<p>which the ISR is allowed to lock all Category 2 </p>
<p>interrupts (via </p>
<p>SuspendOSInterrupts</p>
<p>()).  </p>
<p><b>&gt; </b></p>
<p>OIL: the times are given in nanoseconds. </p>
<p><b>&gt; </b></p>
<p>XML: the times are given in seconds. </p>
<p>MAXALLINTERRUP</p>
<p>TLOCKTIME </p>
<p>OsIsrAllInterrupt </p>
<p>LockBudget </p>
<p>- </p>
<p>This parameter contains the maximum time for </p>
<p>which the ISR is allowed to lock all interrupts </p>
<p>(via </p>
<p>SuspendAllInterrupts</p>
<p>() or </p>
<p>DisableAllInterrupts</p>
<p>()) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>119 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p><b>&gt; </b></p>
<p>OIL: the times are given in nanoseconds. </p>
<p><b>&gt; </b></p>
<p>XML: the times are given in seconds. </p>
<p>LOCKINGTIME </p>
<p>OsIsrResource </p>
<p>Lock </p>
<p>- </p>
<p><b>&gt; </b></p>
<p>OIL: This is a (empty) list of all lock times, in </p>
<p>nanoseconds </p>
<p><b>&gt; </b></p>
<p>XML: This container holds resource lock </p>
<p>times, in seconds. </p>
<p>Resource lock times are the maximum times an </p>
<p>ISR is allowed to hold a resource. </p>
<p>OnlyMeasure </p>
<p>OsOnlyMeasure </p>
<p>TRUE </p>
<p><b>FALSE </b></p>
<p>If set to </p>
<p>FALSE</p>
<p>, timing values of this ISR are </p>
<p>measured and violations against the configured </p>
<p>values lead to a call of the ProtectionHook. If </p>
<p>set to </p>
<p>TRUE</p>
<p>, the timing values are still </p>
<p>measured but no call of the ProtectionHook </p>
<p>occurs. The value of this attribute might be </p>
<p>overridden by the OS attribute </p>
<p>TimingMeasurement</p>
<p>, as described in </p>
<p>chapters 7.3.1.4 and 3.2.4.2. </p>
<p>Table 7-19  </p>
<p>Sub-attributes of </p>
<p>TIMING_PROTECTION</p>
<p> / OsIsrTimingProtection </p>
<p><b>7.3.7.2.1 </b></p>
<p><b>LOCKINGTIME / OsIsrResourceLock </b></p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>LOCKINGTIME= </p>
<p>RESOURCELOCK/</p>
<p>RESOURCELOCK </p>
<p>TIME </p>
<p>OsIsrResource </p>
<p>LockBudget </p>
<p>- </p>
<p>The parameter contains the maximum allowed </p>
<p>time an ISR is allowed to hold a resource </p>
<p><b>&gt; </b></p>
<p>OIL: the times are given in nanoseconds. </p>
<p><b>&gt; </b></p>
<p>XML: the times are given in seconds. </p>
<p>LOCKINGTIME= </p>
<p>RESOURCELOCK/</p>
<p>RESOURCE </p>
<p>OsIsrResource </p>
<p>LockResourceRef </p>
<p> </p>
<p>Holds the reference to this resource </p>
<p>Table 7-20  </p>
<p>Sub-attributes of LOCKINGTIME / OsIsrResourceLock </p>
<p> </p>
<p><b>7.3.7.3 </b></p>
<p><b>ISR Attributes concerning the Timing Analyzer </b></p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>ComputationTime </p>
<p>OsIsrComputation</p>
<p>Time </p>
<p>- </p>
<p>The worst case execution time (in </p>
<p>nanoseconds) </p>
<p>Period </p>
<p>OsIsrPeriod </p>
<p> </p>
<p>The minimum activation period of the ISR (in </p>
<p>nanoseconds) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>120 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Deadline </p>
<p>OsIsrDeadline </p>
<p> </p>
<p>The deadline of the ISR (in nanoseconds) </p>
<p>AnalysisPriority </p>
<p>OsIsrAnalysis </p>
<p>Priority </p>
<p> </p>
<p>The </p>
<p>AnalysisPriority</p>
<p> corresponds to the </p>
<p>Task attribute </p>
<p>PRIORITY</p>
<p> / </p>
<p>osTaskPriority</p>
<p>.  </p>
<p> </p>
<p>The </p>
<p>AnalysisPriority</p>
<p> is an extension of </p>
<p>the priority values from tasks to ISRs, so all ISR </p>
<p>priorities must have higher values as all task </p>
<p>priorities to get correct analysis results. (Some </p>
<p>OS Implementations use an attribute similar to </p>
<p>priority</p>
<p> for the hardware interrupt level. </p>
<p>Therefore to the timing analysis an own </p>
<p>attribute was introduced). </p>
<p>UseResource </p>
<p>Occupation </p>
<p>OsIsrUseResource</p>
<p>Occupation </p>
<p> </p>
<p>If set to </p>
<p>TRUE</p>
<p> the occupation of resources can </p>
<p>be taken into consideration by the analysis tool. </p>
<p>UseResource </p>
<p>Occupation= </p>
<p>TRUE/Resource </p>
<p>OsIsrUseResource</p>
<p>Occupation=TRUE</p>
<p>/OsIsrResource </p>
<p> </p>
<p>Reference to the resource that is occupied. </p>
<p>UseResource </p>
<p>Occupation= TRUE/ </p>
<p>OccupationTime </p>
<p>OsIsrUseResource</p>
<p>Occupation=TRUE</p>
<p>/OsIsrOccupation </p>
<p>Time </p>
<p> </p>
<p>Maximum resource occupation time (in </p>
<p>nanoseconds) </p>
<p>Table 7-21  </p>
<p>ISR attributes concerning the timing analyzer </p>
<p> </p>
<p><b>7.3.8 </b></p>
<p><b>COM </b></p>
<p>The section COM is not used by MICROSAR OS. </p>
<p> </p>
<p><b>7.3.9 </b></p>
<p><b>NM </b></p>
<p>The section NM is not used with the current MICROSAR OS implementation. </p>
<p> </p>
<p><b>7.3.10 </b></p>
<p><b>APPMODE / OsAppMode </b></p>
<p>Application modes have to be defined with the following attributes: </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Name </p>
<p>Short-Name </p>
<p>- </p>
<p>Name of the application mode. This name is </p>
<p>used as an argument to all related OSEK-API-</p>
<p>functions and for the definition of the </p>
<p>AUTOSTART</p>
<p> functionality of tasks and alarms. </p>
<p>Comment </p>
<p>n.a. </p>
<p>-- </p>
<p>Any comment </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>121 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>n.a. </p>
<p>OsAppModeId </p>
<p> </p>
<p>Internal ID of an </p>
<p>Appmode</p>
<p>. The value of this </p>
<p>attribute is ignored by MICROSAR OS. </p>
<p>Table 7-22  </p>
<p>Attributes of Appmode / OsAppMode </p>
<p> </p>
<p><b>7.3.11 </b></p>
<p><b>Application / OsApplication </b></p>
<p>The object APPLICATION is meant for the usage with scalability classes SC3 and SC4.  </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Name </p>
<p>Short-Name </p>
<p>-- </p>
<p>Freely selectable name, not used by the code </p>
<p>generator. </p>
<p>Comment </p>
<p>n.a. </p>
<p>-- </p>
<p>Any comment. </p>
<p>n.a. </p>
<p>OsApplication </p>
<p>Hooks </p>
<p>FALSE </p>
<p>MICROSAR OS SafeContext does not support </p>
<p>any application specific Hook routines. </p>
<p>STARTUPHOOK </p>
<p>OsAppStartup </p>
<p>Hook </p>
<p>FALSE </p>
<p>MICROSAR OS SafeContext does not support </p>
<p>any application specific Hook routines. </p>
<p>(XML: is contained in </p>
<p>OsApplicationHooks</p>
<p>) </p>
<p>ERRORHOOK </p>
<p>OsAppErrorHook </p>
<p>FALSE </p>
<p>MICROSAR OS SafeContext does not support </p>
<p>any application specific Hook routines. </p>
<p>(XML: is contained in </p>
<p>OsApplicationHooks</p>
<p>) </p>
<p>SHUTDOWNHOOK </p>
<p>OsAppShutdown </p>
<p>Hook </p>
<p>FALSE </p>
<p>MICROSAR OS SafeContext does not support </p>
<p>any application specific Hook routines. </p>
<p>(XML: is contained in </p>
<p>OsApplicationHooks</p>
<p>) </p>
<p>TRUSTED </p>
<p>OsTrusted </p>
<p>TRUE, </p>
<p>FALSE </p>
<p><b>&gt; </b></p>
<p>OIL: Defines whether the application is </p>
<p>trusted or not. See chapter 7.3.11.1 for </p>
<p>information about the sub-attributes. </p>
<p><b>&gt; </b></p>
<p>XML: This is only a boolean which marks the </p>
<p>Application as trusted application </p>
<p>HAS_RESTART </p>
<p>TASK </p>
<p>n.a. </p>
<p>FALSE </p>
<p><b>&gt; </b></p>
<p>OIL: MICROSAR OS SafeContext does not </p>
<p>support terminating or restarting an </p>
<p>application. </p>
<p>TASK </p>
<p>OsAppTaskRef </p>
<p>- </p>
<p>Reference to all tasks belonging to this </p>
<p>application. </p>
<p>ISR </p>
<p>OsAppIsrRef </p>
<p>- </p>
<p>Reference to all ISRs belonging to this </p>
<p>application. </p>
<p>ALARM </p>
<p>OsAppAlarmRef </p>
<p>- </p>
<p>Reference to all alarms belonging to this </p>
<p>application. </p>
<p>SCHEDULETABLE </p>
<p>OsAppSchedule </p>
<p>TableRef </p>
<p>- </p>
<p>Reference to all schedule tables belonging to </p>
<p>this application. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>122 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>COUNTER </p>
<p>OsAppCounterRef </p>
<p>- </p>
<p>Reference to all counters belonging to this </p>
<p>application. </p>
<p>n.a. </p>
<p>OsApplication </p>
<p>TrustedFunction </p>
<p>- </p>
<p>Container that is used to define trusted </p>
<p>functions. </p>
<p>NonTrusted_Functio</p>
<p>n </p>
<p>OsApplicationNon</p>
<p>Trusted_Function </p>
<p>- </p>
<p>List of non-trusted functions provided by this </p>
<p>application (only for non-trusted applications). </p>
<p>Table 7-23  </p>
<p>Attributes of Application / OsApplication </p>
<p><b>7.3.11.1 </b></p>
<p><b>Trusted Functions </b></p>
<p><b>&gt; </b> OIL: trusted functions are defined as sub-attributes of </p>
<p>'TRUSTED</p>
<p>=</p>
<p>TRUE'</p>
<p>. </p>
<p><b>&gt; </b> XML: there are containers for trusted functions. </p>
<p>The </p>
<p>preconditions </p>
<p>for </p>
<p>editing </p>
<p>the </p>
<p>sub-attributes </p>
<p>in </p>
<p>the </p>
<p>next </p>
<p>table </p>
<p>are </p>
<p>TRUSTED</p>
<p>=</p>
<p>TRUE</p>
<p>/</p>
<p>TRUSTED_FUNCTION</p>
<p>=</p>
<p>TRUE</p>
<p>  for  OIL  and  the  existence  of  (at  least  one) </p>
<p>OsApplicationTrustedFunction</p>
<p> container. </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>TRUSTED_ </p>
<p>FUNCTION </p>
<p>=TRUE/TRUSTED </p>
<p>FUNCTION </p>
<p>=TRUE/NAME </p>
<p>OsTrustedFunction</p>
<p>Name </p>
<p>- </p>
<p>List of trusted functions provided by this </p>
<p>application. </p>
<p>TRUSTED_ </p>
<p>FUNCTION </p>
<p>=TRUE/TRUSTED </p>
<p>FUNCTION </p>
<p>=TRUE/Params </p>
<p>OsApplication </p>
<p>Params </p>
<p>- </p>
<p>Parameter (arguments) of trusted function. </p>
<p>Empty string means void. Used for stub </p>
<p>generation only. See attribute </p>
<p>GenerateStub</p>
<p>. </p>
<p>TRUSTED_ </p>
<p>FUNCTION </p>
<p>=TRUE/TRUSTED </p>
<p>FUNCTION </p>
<p>=TRUE/ReturnType </p>
<p>OsApplication </p>
<p>ReturnType </p>
<p>- </p>
<p>Return value data type of trusted function. </p>
<p>Empty string means void. Used for stub </p>
<p>generation only. See attribute </p>
<p>GenerateStub</p>
<p>. </p>
<p>TRUSTED_ </p>
<p>FUNCTION </p>
<p>=TRUE/Generate </p>
<p>Stub </p>
<p>OsApplication </p>
<p>GenerateStub </p>
<p>- </p>
<p>If set to </p>
<p>TRUE</p>
<p>, stub functions are generated for </p>
<p>all trusted functions of this application. </p>
<p>Table 7-24  </p>
<p>Sub-attributes for trusted functions </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>123 / 136 </p>
<p><b>7.3.12 </b></p>
<p><b>Scheduletable </b></p>
<p>Schedule tables have to be defined with the following attributes. </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>Name </p>
<p>Short-Name </p>
<p>- </p>
<p>Name of the </p>
<p>SCHEDULETABLE</p>
<p>. This name is </p>
<p>used as an argument to all related OSEK API </p>
<p>functions. </p>
<p>Comment </p>
<p>n.a. </p>
<p>-- </p>
<p>Any comment </p>
<p>COUNTER </p>
<p>OsScheduleTable</p>
<p>CounterRef </p>
<p>- </p>
<p>Defines the counter used as time basis for this </p>
<p>schedule table. </p>
<p>REPEATING </p>
<p>OsScheduleTable</p>
<p>Repeating </p>
<p>- </p>
<p>If selected, the schedule table is performed </p>
<p>periodically after it is started. If deselected, the </p>
<p>schedule table is performed once per activation. </p>
<p>DURATION </p>
<p>OsScheduleTable</p>
<p>Duration </p>
<p>- </p>
<p>Defines the length of the schedule table in ticks, </p>
<p>based on the underlying counter. This is the </p>
<p>time from the first expiry point to the end of the </p>
<p>schedule table or in the case of a periodic </p>
<p>schedule table, between two subsequent first </p>
<p>expiry points. The length is defined in units of </p>
<p>ticks of the underlaying counter. </p>
<p>AUTOSTART  </p>
<p>OsScheduleTable </p>
<p>Autostart </p>
<p>- </p>
<p><b>&gt; </b></p>
<p>OIL: If set to </p>
<p>TRUE</p>
<p>, the schedule table is </p>
<p>activated at startup of the operating system. </p>
<p><b>&gt; </b></p>
<p>XML: If attribute is present, the schedule </p>
<p>table is activated at startup of the operating </p>
<p>system. </p>
<p>See chapter 7.3.13.1 for more information </p>
<p>about the sub-attributes. </p>
<p>LOCAL_TO_ </p>
<p>GLOBAL_TIME_SY</p>
<p>NCHRONIZATION </p>
<p>OsScheduleTable </p>
<p>Sync </p>
<p>- </p>
<p>Defines, whether the schedule table shall be </p>
<p>synchronized to a global time source. This </p>
<p>attribute is only supported in scalability class </p>
<p>SC4. Sub-attributes are described in chapter </p>
<p>7.3.13.6. </p>
<p>EXPIRY_POINT </p>
<p>OsScheduleTable </p>
<p>ExpiryPoint </p>
<p>- </p>
<p>Defines an expiry point for this schedule table </p>
<p>ACCESSING_ </p>
<p>APPLICATION </p>
<p>OsSchTbl </p>
<p>Accessing </p>
<p>Application </p>
<p>- </p>
<p>Defines access rights of an application for this </p>
<p>schedule table. This attribute can be used </p>
<p>multiply, so different applications might have </p>
<p>access rights to this schedule table.  </p>
<p>Table 7-25  </p>
<p>Attributes of SCHEDULETABLE </p>
<p><b>7.3.12.1 </b></p>
<p><b>AUTOSTART / OsScheduleTableAutostart </b></p>
<p><b>&gt; </b> OIL: If this attribute is set to </p>
<p>TRUE</p>
<p> sub-attributes are visible and the schedule table is </p>
<p>auto started. </p>
<p><b>&gt; </b> XML: If this container is present in the configuration the schedule table is auto started </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>124 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>APPMODE </p>
<p>OsScheduleTable </p>
<p>AppModeRef </p>
<p>- </p>
<p>Defines an application mode in which the </p>
<p>schedule table is started automatically. This </p>
<p>attribute might be defined several times to start </p>
<p>the schedule table in several application </p>
<p>modes. </p>
<p>TYPE </p>
<p>OsScheduleTable </p>
<p>AutostartType </p>
<p>ABSOLUTE </p>
<p>RELATIVE </p>
<p>SYNCHRON </p>
<p>Defines the method how the schedule table is </p>
<p>autostarted. </p>
<p> </p>
<p>TYPE=ABSOLUT/ </p>
<p>ABSVALUE </p>
<p>OsScheduleTable </p>
<p>StartValue </p>
<p>- </p>
<p>Absolute autostart tick value when the schedule </p>
<p>table starts. Only used if the </p>
<p>OsScheduleTableAutostartType</p>
<p> is </p>
<p>ABSOLUTE</p>
<p>. </p>
<p>TYPE=RELATIVE/ </p>
<p>RELOFFSET </p>
<p>OsScheduleTableS</p>
<p>tartValue </p>
<p>- </p>
<p>Relative offset in ticks when the schedule table </p>
<p>starts. Only used if the </p>
<p>OsScheduleTableAutostartType</p>
<p> is </p>
<p>RELATIVE</p>
<p>. </p>
<p>Table 7-26  </p>
<p>Sub-attributes for auto start of a schedule table </p>
<p> </p>
<p><b>7.3.12.2  EXPIRY_POINT / OsScheduleTableExpiryPoint </b></p>
<p>An expiry point consists of a sequence of actions which are performed on a given tick time </p>
<p>of the schedule table. There are the following sub-attributes. Some of them also have sub-</p>
<p>attributes. </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>ACTION </p>
<p>n.a. </p>
<p><b>&gt; </b></p>
<p>OIL : </p>
<p>ACTIVATETA</p>
<p>SK </p>
<p>SETEVENT </p>
<p>ADJUST  </p>
<p><b>&gt; </b></p>
<p>OIL: a list of actions </p>
<p> </p>
<p>OFFSET </p>
<p>OsScheduleTbl </p>
<p>ExpPointOffset </p>
<p>- </p>
<p>Defines the time at which the defined actions </p>
<p>occur in ticks based on the underlying counter. </p>
<p>The time is absolute to the start of the schedule </p>
<p>table and is given in ticks of the underlying </p>
<p>counter. </p>
<p>ACTION=ADJUST </p>
<p>OsScheduleTbl </p>
<p>AdjustableExp </p>
<p>Point </p>
<p>- </p>
<p><b>&gt; </b></p>
<p>XML: containers for holding the sub-</p>
<p>attributes in case of expiry point action </p>
<p>ADJUST</p>
<p> </p>
<p>ACTION </p>
<p>=ACTIVATETASK </p>
<p>OsScheduleTable </p>
<p>TaskActivation </p>
<p>- </p>
<p><b>&gt; </b></p>
<p>XML: containers for holding the sub-</p>
<p>attributes in case of expiry point action </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>125 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>ACTIVATESTASK</p>
<p> </p>
<p>ACTION </p>
<p>=SETEVENT </p>
<p>OsScheduleTable </p>
<p>EventSetting </p>
<p>- </p>
<p><b>&gt; </b></p>
<p>XML: containers for holding the sub-</p>
<p>attributes in case of expiry point action </p>
<p>SETEVENT</p>
<p> </p>
<p>Table 7-27  </p>
<p>Sub-attributes of expiry points </p>
<p><b>7.3.12.3  Expiry point action ADJUST </b></p>
<p><b>&gt; </b> OIL: the following attributes are visible if the expiry point action is </p>
<p>ADJUST</p>
<p> </p>
<p><b>&gt; </b> XML: the following attributes are located in the container </p>
<p>OsScheduleTblAdjustableExpPoint</p>
<p> </p>
<p>Those attributes are only relevant in SC2 or SC4 if synchronization mechanisms are used. </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>MAXLENGTHEN </p>
<p>OsScheduleTable</p>
<p>MaxLengthen </p>
<p>  </p>
<p>The maximum positive adjustment that can be </p>
<p>made to the expiry point offset to achieve </p>
<p>synchronizationin ticks based on the underlying </p>
<p>counter. </p>
<p>MAXSHORTEN </p>
<p>OsScheduleTable</p>
<p>MaxShorten </p>
<p>- </p>
<p>The maximum negative adjustment that can be </p>
<p>made to the expiry point offset to achieve </p>
<p>synchronization in ticks based on the underlying </p>
<p>counter. </p>
<p>Table 7-28  </p>
<p>Sub-attributes of expiry point action ADJUST </p>
<p><b>7.3.12.4  Expiry point action ACTIVATETASK </b></p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>TASK </p>
<p>OsScheduleTable </p>
<p>ActivateTaskRef </p>
<p> </p>
<p>Reference to the task to be activated.  </p>
<p>Cyclic </p>
<p>OsScheduleTable</p>
<p>Cyclic </p>
<p>TRUE, </p>
<p>FALSE </p>
<p><b>&gt; </b></p>
<p>OIL: If set to </p>
<p>TRUE</p>
<p>, this action is repeatedly </p>
<p>added to the schedule table. </p>
<p><b>&gt; </b></p>
<p>XML: This is a choice container. If set to </p>
<p>TRUE</p>
<p> the action will be repeatedly added to </p>
<p>the schedule table. </p>
<p>The cycle time is located in a sub-attribute. See </p>
<p>chapter 3.2.6.3 for more details. </p>
<p>Cyclic=TRUE/Cycle</p>
<p>Time </p>
<p>OsScheduleTable</p>
<p>CycleTime </p>
<p> </p>
<p>If the action is declared as cyclic, this attribute </p>
<p>holds the cycle time in counter ticks. </p>
<p>Table 7-29  </p>
<p>Sub-attributes of expiry point action ACTIVATETASK </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>126 / 136 </p>
<p><b>7.3.12.5  Expiry point action SETEVENT </b></p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>TASK </p>
<p>OsScheduleTable </p>
<p>SetEventTaskRef </p>
<p>- </p>
<p>Task to which the event should be sent </p>
<p>EVENT </p>
<p>OsScheduleTable </p>
<p>SetEventRef </p>
<p>- </p>
<p>Event to be sent to the specified task </p>
<p>Cyclic </p>
<p>OsScheduleTable</p>
<p>Cyclic </p>
<p>TRUE, </p>
<p>FALSE </p>
<p><b>&gt; </b></p>
<p>OIL: If set to </p>
<p>TRUE</p>
<p>, this action is repeatedly </p>
<p>added to the schedule table. </p>
<p><b>&gt; </b></p>
<p>XML: This is a choice container. If set to </p>
<p>TRUE</p>
<p> the action will be repeatedly added to </p>
<p>the schedule table. </p>
<p>The cycle time is located in a sub-attribute. See </p>
<p>chapter 3.2.6.3 for more details. </p>
<p>Cyclic=TRUE/Cycle</p>
<p>Time </p>
<p>OsScheduleTable</p>
<p>CycleTime </p>
<p>- </p>
<p>If the action is declared as cyclic, this attribute </p>
<p>holds the cycle time in counter ticks. </p>
<p>Table 7-30  </p>
<p>Sub-attributes of expiry point action SETEVENT </p>
<p> </p>
<p><b>7.3.12.6  LOCAL_TO_GLOBAL_TIME_SYNCHRONIZATION / OsScheduleTableSync </b></p>
<p><b>&gt; </b> OIL: If set to </p>
<p>TRUE</p>
<p>, the synchronization of this schedule table is switched on and the </p>
<p>sub-attributes will be visible. </p>
<p><b>&gt; </b> XML: If this attribute is present in the configuration the synchronization is used for this </p>
<p>schedule table. </p>
<p>This is only relevant in SC4. </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>SYNC_STRATEGY </p>
<p>OsScheduleTbl </p>
<p>SyncStrategy </p>
<p>EXPLICIT </p>
<p>IMPLICIT </p>
<p>NONE </p>
<p>Defines the synchronization strategy of this </p>
<p>schedule table. </p>
<p><b>&gt; </b></p>
<p>EXPLICIT</p>
<p>: The schedule table is driven by </p>
<p>an OS counter, but processing needs to be </p>
<p>synchronized with a different counter, which </p>
<p>is not an OS counter object. </p>
<p><b>&gt; </b></p>
<p>IMPLICIT</p>
<p>: The counter driving the schedule </p>
<p>table is the counter with which </p>
<p>synchronisation is required </p>
<p><b>&gt; </b></p>
<p>NONE</p>
<p>: no synchronization is applied at all </p>
<p>SYNC_STRATEGY</p>
<p>=EXPLICIT/PRECIS</p>
<p>ION </p>
<p>OsScheduleTbl </p>
<p>ExplicitPrecision </p>
<p>- </p>
<p>Defines the synchronization tolerance (in ticks) </p>
<p>for this schedule table. </p>
<p>If the absolute value of the deviation between </p>
<p>the schedule table counter and the </p>
<p>synchronization counter is smaller than this </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>127 / 136 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p>The default value </p>
<p>is written in bold </p>
<p><b>Description </b></p>
<p><b>OIL </b></p>
<p><b>XML </b></p>
<p>value schedule table state is set to </p>
<p>SCHEDULETABLE_RUN-</p>
<p>NING_AND_SYNCHRONOUS</p>
<p> </p>
<p>Table 7-31  </p>
<p>Sub-attributes SCHEDULETABLE-&gt; LOCAL_TO_GLOBAL_TIME_SYNCHRONIZATION = </p>
<p>TRUE</p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>128 / 136 </p>
<p><b>8 </b></p>
<p><b>System Generation </b></p>
<p>This chapter describes the generation of the executable program. The definition of the OIL </p>
<p>/ XML file was described in the chapter 7 Configuration. The general steps programming </p>
<p>an </p>
<p>application </p>
<p>using </p>
<p>the </p>
<p>OSEK </p>
<p>operating </p>
<p>systems </p>
<p>are </p>
<p>illustrated </p>
<p>in </p>
<p>chapter </p>
<p>7.1 </p>
<p>Configuration and generation process. </p>
<p>The dependencies on include files are described in chapter 5.2 Include Structure. </p>
<p><b>8.1 </b></p>
<p><b>Code Generator </b></p>
<p>The code generator </p>
<p>GENxxxx.EXE</p>
<p> is delivered with the MICROSAR OS package (xxxx is </p>
<p>replaced by the hardware platform name). The code generator is implemented as a 32-bit </p>
<p>Windows console application and can be started from the OIL Configurator or directly from </p>
<p>the command line. </p>
<p>The </p>
<p>code </p>
<p>generator </p>
<p>has </p>
<p>different </p>
<p>command-line </p>
<p>options.  When </p>
<p>started </p>
<p>without </p>
<p>any </p>
<p>parameters, a list of all parameters is printed: </p>
<p>GENxxxx.EXE, Version: 6.00, Vector Informatik GmbH, 2012 </p>
<p>Usage: GENxxxx.EXE [options] &lt;Filename&gt; </p>
<p>-s : print symboltable </p>
<p>-r &lt;Filename&gt; : write errors into file </p>
<p>-g : generate code </p>
<p>-d &lt;Pathname&gt; : path to write generated code </p>
<p>-m : prints list of known implementations </p>
<p>-i &lt;Pathname&gt;: include path for implementation files </p>
<p>-x : include path equals to generator exe path </p>
<p>-f &lt;Filename&gt;: read options and filename from command file </p>
<p>-y : perform a syntax check on OIL file </p>
<p> </p>
<p><b>8.1.1 </b></p>
<p><b>Generated Files </b></p>
<p>The code generator generates several files as described in chapter 5.1.2 Dynamic Files. </p>
<p>The files always have the same name. They are written to the generation path specified in </p>
<p>the OIL Configurator or with the command line option -d. </p>
<p>The '.c' modules have to be compiled and linked to the application. </p>
<p><b>8.1.2 </b></p>
<p><b>Automatic Documentation </b></p>
<p>Automatic documentation of the generation process is provided by two list files, which are </p>
<p>generated  by  the  code  generator. A  basic  list  file  is  generated  in  text  format. The  more </p>
<p>detailed list file is generated in HTML format and can be used to publish a system design </p>
<p>in the internet or an intranet. Both files have the same name as the OIL file, i.e.: </p>
<p><b>&gt; </b></p>
<p>&lt;OILFileName&gt;.lst </p>
<p> </p>
<p>(basic list file in text format) </p>
<p><b>&gt; </b></p>
<p>&lt;OILFileName&gt;.htm</p>
<p>  </p>
<p>(extended list file in HTML format) </p>
<p>The files are located in the directory of the OIL file. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>129 / 136 </p>
<p><b>8.1.3 </b></p>
<p><b>Conditional Generation </b></p>
<p>If  MICROSAR  OS  is  configured  using  an  OIL  file,  the  OS  object  provides  the  attribute </p>
<p>ConditionalGenerating. If AUTOSAR ECUC files are used for configuration, the parameter </p>
<p>for conditional generation is not located in the OS configuration but in the BSWMD file of </p>
<p>the Board, as other modules also use this parameter. </p>
<p>If  conditional  generation  is  selected,  the  generated  files  are  overridden  only  if  the  OS </p>
<p>configuration </p>
<p>has </p>
<p>changed </p>
<p>since </p>
<p>the </p>
<p>last </p>
<p>generator </p>
<p>run. </p>
<p>This </p>
<p>allows </p>
<p>using </p>
<p>the </p>
<p>file </p>
<p>modification date of the generated files to decide which modules need recompilation after </p>
<p>configuration changes. Compile times of a complete AUTOSAR stack may be dramatically </p>
<p>reduced with this setting in the development cycle. </p>
<p>Setting  ConditionalGenerating  =  FALSE  forces  the  MICROSAR  OS  code  generator  to </p>
<p>generate  the  files  newly  on  each  run.  This  is  the  recommended  setting  for  the  final, </p>
<p>productive build. </p>
<p><b>8.1.4 </b></p>
<p><b>Generated files backup </b></p>
<p>To avoid a mixed set of generated files from various runs of the generator, already existing </p>
<p>files are either deleted or renamed before the new generation starts.  </p>
<p>Before previously generated files are overwritten in a new run of a generator, the complete </p>
<p>file set is renamed to files with the original name plus a “.bak” suffix (backup file set). This </p>
<p>file set contains the last valid generated file set even if a consecutive generator run fails for </p>
<p>any reason. </p>
<p><b>8.2 </b></p>
<p><b>Application Template Generator </b></p>
<p>The application template generator is not available in current versions of MICROSAR OS. </p>
<p><b>8.3 </b></p>
<p><b>Compiler </b></p>
<p>The supported compiler package has to be installed, and the search path of the compiler, </p>
<p>assembler and linker has to be set. If special options are required, they are described in </p>
<p>the hardware specific manual. </p>
<p><b>8.3.1 </b></p>
<p><b>Include Paths </b></p>
<p>The </p>
<p>operating </p>
<p>system </p>
<p>is </p>
<p>delivered </p>
<p>with </p>
<p>include </p>
<p>files </p>
<p>in </p>
<p>the </p>
<p>subdirectory </p>
<p>root\HwPlatform\include </p>
<p>(osCAN style) or</p>
<p> root\BSW\Os </p>
<p>(MICROSAR style). </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>130 / 136 </p>
<p><b>9 </b></p>
<p><b>AUTOSAR Standard Compliance </b></p>
<p><b>9.1 </b></p>
<p><b>Deviations </b></p>
<p>Currently no known deviations </p>
<p><b>9.2 </b></p>
<p><b>Limitations </b></p>
<p><b>9.2.1 </b></p>
<p><b>API Function OS_GetVersionInfo </b></p>
<p>The function </p>
<p>void OS_GetVersionInfo(Std_VersionInfoType *version info) </p>
<p>is  not  supported  by  MICROSAR  OS.  The  version  information  can  be  collected  by  the </p>
<p>following #defines: </p>
<p>Vendor ID </p>
<p>OS_VENDOR_ID </p>
<p>Module ID </p>
<p>OS_MODULE_ID </p>
<p>Major version number </p>
<p>OS_SW_MAJOR_VERSION </p>
<p>Minor version number </p>
<p>OS_SW_MINOR_VERSION </p>
<p>Patch version number </p>
<p>OS_SW_PATCH_VERSION </p>
<p><b>9.2.2 </b></p>
<p><b>Forcible Termination </b></p>
<p>MICROSAR OS does currently not support forcible termination. The only possible reaction </p>
<p>on a protection error is to shutdown the system. </p>
<p><b>9.2.3 </b></p>
<p><b>AUTOSAR Debug support </b></p>
<p>MICROSAR  OS  does  not  provide  any  variables  and  type  definitions  for  AUTOSAR </p>
<p>Debugging (See requirements OS549-551 in [1]). The suggested way to gather information </p>
<p>about the internals of the OS is to use the ORTI feature supported by MICROSAR OS. </p>
<p><b>9.2.4 </b></p>
<p><b>Port Interface </b></p>
<p>The  Port  interface  described  by  requirements  OS560,  OS561  in  [1]  is  not  supported  by </p>
<p>MICROSAR OS. </p>
<p><b>9.2.5 </b></p>
<p><b>NULL Pointer Checks </b></p>
<p>Null  pointer  checks  described  by  requirements  OS566  is  [1]  are  not  implemented  in </p>
<p>MICROSAR OS. </p>
<p><b>9.2.6 </b></p>
<p><b>SafeContext specific limitations </b></p>
<p>In order to achieve a safe execution environment and fulfill the requirement for reduced </p>
<p>complexity of ISO26262, the following OSEK/AUTOSAR OS features are not implemented </p>
<p>in MICROSAR OS SafeContext. </p>
<p><b>&gt; </b> Pre- and PostTaskHook as well as ISRHooks are only supported as a debug feature </p>
<p>and not released for use in safety environments. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>131 / 136 </p>
<p><b>&gt; </b> Application specific hook routines are not supported. </p>
<p><b>&gt; </b> Forcible termination of Tasks, ISRs or OS-Applications is neither supported through the </p>
<p>service TerminateApplication, nor as a reaction to a protection violation. </p>
<p><b>&gt; </b> All checks of the OS must be turned on any time (StackMonitoring, OSInternalChecks). </p>
<p><b>&gt; </b> ORTI Debug information is always recorded and cannot be turned off. </p>
<p><b>&gt; </b> Internal resources are not supported. </p>
<p><b>&gt; </b> StartupHook, ErrorHook, ShutdownHook and ProtectionHook cannot be turned off in the </p>
<p>configuration. </p>
<p>Further restrictions may be found in [5] and/or [9]. </p>
<p>On </p>
<p>the </p>
<p>other </p>
<p>hand, </p>
<p>there </p>
<p>are </p>
<p>additional </p>
<p>features </p>
<p>and </p>
<p>measures </p>
<p>implemented </p>
<p>in </p>
<p>MICROSAR OS SafeContext to increase safety: </p>
<p><b>&gt; </b> StartOS is protected against calls from non-trusted code to avoid unintended reboot. </p>
<p><b>&gt; </b> An API is provided to allow protected access to peripherals (either by peripheral </p>
<p>protection subsystem if provided by the hardware, or by memory protection, see [5] for </p>
<p>details). However, trusted applications are always granted full access to all peripherals. </p>
<p><b>&gt; </b> A global Shared Memory Area allows quick exchange of non-critical data between OS-</p>
<p>Applications. </p>
<p><b>&gt; </b> Non-trusted functions allow a safe execution of non-trusted code triggered by trusted </p>
<p>code. </p>
<p><b>&gt; </b> A user configuration version can be freely assigned and read via an API </p>
<p>(osGetConfigBlockVersion), allowing verification that the correct configuration is used </p>
<p>during runtime. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>132 / 136 </p>
<p><b>10  Debugging Support </b></p>
<p><b>10.1 </b></p>
<p><b>Kernel aware Debugging </b></p>
<p>All implementations of MICROSAR OS support kernel-aware debugging according to the </p>
<p>ORTI specification. On some platforms, proprietary solutions are available. </p>
<p>Refer to the hardware specific documentation [4] for details. </p>
<p><b>10.2 </b></p>
<p><b>Version and Variant Coding </b></p>
<p>The version and the variant are coded into the generated binary or HEX file. The user has </p>
<p>the possibility to read version and variant using an emulator, or if the electronic control unit </p>
<p>is accessible via the CCP protocol via the CAN bus.  </p>
<p>The generator writes version and variant information into a structure, defined in </p>
<p>osek.h</p>
<p>. </p>
<p>typedef struct </p>
<p>{ </p>
<p>   osuint8 ucMagicNumber1;     /* magic number:                        */ </p>
<p>   osuint8 ucMagicNumber2;     /* defined as uint8 for independency of */ </p>
<p>   osuint8 ucMagicNumber3;     /* byte order                           */ </p>
<p>   osuint8 ucMagicNumber4; </p>
<p>    </p>
<p>   osuint8 ucSysVersionMaj;    /* version of operating system, Major   */ </p>
<p>   osuint8 ucSysVersionMin;    /* version of operating system, Minor   */ </p>
<p>   osuint8 ucGenVersionMaj;    /* version of code generator            */ </p>
<p>   osuint8 ucGenVersionMin;    /* version of code generator            */ </p>
<p>   osuint8 ucSysVariant1;      /* general variant coding 1             */ </p>
<p>   osuint8 ucSysVariant2;      /* general variant coding 2             */ </p>
<p>   osuint8 ucOrtiVariant;      /* ORTI version and variant             */ </p>
<p>    </p>
<p>   …                       /* implementation specific variant coding */ </p>
<p> </p>
<p>} osVersionVariantCodingType; </p>
<p> </p>
<p>The  structure  contains  the  version  of  the  operating  system  (major  and  minor  version </p>
<p>number),  the  version  of  the  code  generator  used  (major  and  minor  version  number), </p>
<p>information  about  the  OS  configuration  bit-encoded  into  8-bit  values  (</p>
<p>ucSysVariantX</p>
<p>) </p>
<p>and information about usage of the OSEK runtime interface (ORTI): </p>
<p>The magic number is defined as 0xAFFEDEAD and may be used for an identification of </p>
<p>the version in hex or binary files. </p>
<p><b>Bits </b></p>
<p><b>Meaning </b></p>
<p><b>Possible Values </b></p>
<p>0..1 </p>
<p>Conformance Class </p>
<p>3: ECC2 </p>
<p>2 </p>
<p>Status Level </p>
<p>1: EXTENDED STATUS </p>
<p>3..4 </p>
<p>Scheduling policy </p>
<p>2: mixed preemptive </p>
<p>5 </p>
<p>Stack Check </p>
<p>1: enabled </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>133 / 136 </p>
<p><b>Bits </b></p>
<p><b>Meaning </b></p>
<p><b>Possible Values </b></p>
<p>6 </p>
<p>Error information level </p>
<p>0 STANDARD </p>
<p>7 </p>
<p>OS internal checks </p>
<p>1 Additional </p>
<p>Table 10-1  </p>
<p>Bit-definitions of the variant coding, ucSysVariant1 </p>
<p><b>Bits </b></p>
<p><b>Meaning </b></p>
<p><b>Possible Values </b></p>
<p>0..1 </p>
<p>Scalability Class </p>
<p>2: SC3   3: SC4 </p>
<p>2 </p>
<p>Usage of Schedule tables </p>
<p>0: no schedule tables in system </p>
<p>1: schedule tables are used </p>
<p>3 </p>
<p>Usage of high resolution </p>
<p>schedule tables </p>
<p>0: no high resolution tables in system </p>
<p>1: high resolution schedule tables are used </p>
<p>4 </p>
<p>Schedule table </p>
<p>synchronization </p>
<p>0: synchronization is not used </p>
<p>1: synchronization is used </p>
<p>5 </p>
<p>Timing protection </p>
<p>0: timing protection is used </p>
<p>1: timing protection is switched off </p>
<p>Table 10-2  </p>
<p>Bit-definitions of the variant coding, osSysVariant2 </p>
<p> </p>
<p><b>Bits </b></p>
<p><b>Meaning </b></p>
<p><b>Possible Values </b></p>
<p>0..6 </p>
<p>ORTI version </p>
<p>0x22: ORTI 2.2 used </p>
<p>7 </p>
<p>ORTI additional information </p>
<p>1: The full set of ORTI information is provided by the </p>
<p>OS </p>
<p>Table 10-3  </p>
<p>Bit definitions of the variant coding, osOrtiVariant </p>
<p>The data for the structure is located in the constant oskVersionVariant and specified in the </p>
<p>OS module osek.c. </p>
<p>The  structure  also  contains  implementation  specific  variant  coding  which  is described  in </p>
<p>the separate documentation [4]. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>134 / 136 </p>
<p><b>11  Glossary and Abbreviations </b></p>
<p><b>11.1 </b></p>
<p><b>Abbreviations </b></p>
<p><b>Abbreviation </b></p>
<p><b>Description </b></p>
<p>API </p>
<p>Application Programming Interface </p>
<p> </p>
<p>AUTOSAR </p>
<p>Automotive Open System Architecture </p>
<p>BSW </p>
<p>Basis Software </p>
<p>CCP </p>
<p>CAN Calibration Protocol </p>
<p>COM </p>
<p>Communication (= module COM in AUTOSAR/MICROSAR)  </p>
<p>CPU </p>
<p>Central Processing Unit </p>
<p>ECU </p>
<p>Electronic Control Unit </p>
<p>EPROM </p>
<p>Erasable Programmable Read Only Memory </p>
<p>EEPROM </p>
<p>Electrically Erasable Programmable Read Only Memory </p>
<p>HIS </p>
<p>Hersteller Initiative Software </p>
<p>IRQ </p>
<p>Interrupt ReQuest </p>
<p>ISR </p>
<p>Interrupt Service Routine </p>
<p>MICROSAR </p>
<p>Microcontroller Open System Architecture (the Vector AUTOSAR </p>
<p>solution) </p>
<p>NM </p>
<p>Network Management (= module NM in AUTOSAR/MICROSAR) </p>
<p>NMI </p>
<p>Non Maskable Interrupt </p>
<p>OIL </p>
<p>OSEK Implementation Language </p>
<p>ORTI </p>
<p>OSEK RunTime  Debugging Interface </p>
<p>OS </p>
<p>Operating System </p>
<p>OSEK </p>
<p>Abbreviation of the German term &quot;Offene Systeme und deren </p>
<p>Schnittstellen für die Elektronik im Kraftfahrzeug&quot; - Open Systems and </p>
<p>the Corresponding Interfaces for Automotive Electronics </p>
<p>RAM </p>
<p>Random Access Memory </p>
<p>ROM </p>
<p>Read-Only Memory </p>
<p>SC1, SC2, SC3, SC4 </p>
<p>Scalability Class 1, -2, -3, -4 </p>
<p>SEooC </p>
<p>Safety Element out of Context; a safety related element, which is not </p>
<p>developed for a specific item </p>
<p>SRS </p>
<p>Software Requirement Specification </p>
<p>SWC </p>
<p>Software Component </p>
<p>SWS </p>
<p>Software Specification </p>
<p>WCET </p>
<p>Worst Case Execution Time </p>
<p>XML </p>
<p>Extensible Markup Language </p>
<p>Table 11-1  </p>
<p>Abbreviations </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>135 / 136 </p>
<p><b>11.2 </b></p>
<p><b>Terms </b></p>
<p> </p>
<p><b>Terms </b></p>
<p><b>Description </b></p>
<p>Forcible Termination </p>
<p>Forcible termination means that a task, an ISR or even a whole OS </p>
<p>application is terminated before it has reached its end. This may be </p>
<p>caused by a call of the API function TerminateApplication or by returning </p>
<p>certain values in the protection hook. </p>
<p>Killing </p>
<p>The term ‘killing’ is used as a synonym for forcible termination within this </p>
<p>document. </p>
<p>Process </p>
<p>The term ‘process’ is used within this document as a short form of ‘task or </p>
<p>ISR’. </p>
<p>Thread </p>
<p>The term ‘thread’ is used as a synonym of the term ‘process’ within this </p>
<p>document. </p>
<p>Table 11-2  </p>
<p>Terms </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR OS SafeContext  </p>
<p> </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 9.01 </p>
<p>based on template version 4.3 </p>
<p>136 / 136 </p>
<p><b>12  Contact </b></p>
<p>Visit our website for more information on </p>
<p> </p>
<p>&gt;   News </p>
<p>&gt;   Products </p>
<p>&gt;   Demo software </p>
<p>&gt;   Support </p>
<p>&gt;   Training data </p>
<p>&gt;   Addresses </p>
<p> </p>
<p><b>www.vector.com </b></p>
<p> </p>
<p>For support requests you may write to <b>osek-support@vector.com </b></p>
<p> </p>
<p> </p>
<p> </p>
</body>
</html>
{% endraw %}