---
layout: default
title: TechnicalReference_GENy_InteractionLayer
nav_order: 1
parent: Interaction Layer
---
{% raw %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title></title>
  <meta name="generator" content="LibreOffice 24.2.7.2 (Linux)"/>
  <meta name="created" content="00:00:00"/>
  <meta name="changed" content="00:00:00"/>
</head>
<body>
<h1></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Vector Interaction Layer </b></p>
<p>Technical Reference </p>
<p> </p>
<p>Il_Vector </p>
<p>Version 2.10.03 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Authors </p>
<p>Klaus Emmert, Gunnar Meiss, Heiko Hübler </p>
<p>Status </p>
<p>Released </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>2 / 115 </p>
<p><b>1 </b></p>
<p><b>Document Information </b></p>
<p><b>1.1 </b></p>
<p><b>History </b></p>
<p><b>Author </b></p>
<p><b>Date </b></p>
<p><b>Version </b></p>
<p><b>Remarks </b></p>
<p>P. Jost </p>
<p>2000-05-05 </p>
<p>1.0 </p>
<p>creation </p>
<p>P. Jost </p>
<p>2000-06-29 </p>
<p>1.1 </p>
<p>some corrections </p>
<p>P. Jost </p>
<p>2000-07-13 </p>
<p>1.2 </p>
<p>changes in Figure 4 and some further corrections </p>
<p>P. Jost </p>
<p>2000-08-06 </p>
<p>1.3 </p>
<p>correction of the First-Value Class </p>
<p>P. Jost </p>
<p>2000-09-13 </p>
<p>1.4 </p>
<p>little corrections in the description of the TxTask and IlInit </p>
<p>P. Jost </p>
<p>2001-03-01 </p>
<p>1.5 </p>
<p>message related transmission modes </p>
<p>example for timeout monitoring </p>
<p>multi channel support </p>
<p>known problems </p>
<p>integration example </p>
<p>P. Jost </p>
<p>2001-06-22 </p>
<p>1.6 </p>
<p>some names of attributes changed </p>
<p>DataChanged flag </p>
<p>Tx timeout monitoring </p>
<p>Rx and Tx default values </p>
<p>new screen shots of the current Gentool </p>
<p>changes in the state machine </p>
<p>and further little corrections </p>
<p>S. Hoffmann </p>
<p>2001-07-05 </p>
<p>1.61 </p>
<p>some corrections and branch for an OEM </p>
<p>P. Jost </p>
<p>2001-07-13 </p>
<p>1.62 </p>
<p>adapted the corrections of version 1.61 for general IL </p>
<p>P. Jost </p>
<p>2002-04-05 </p>
<p>1.63 </p>
<p>Signal groups </p>
<p>Multiple physical and virtual ECU support </p>
<p>Multiplex Signals </p>
<p>Rx timeout monitoring: reload of timer and message </p>
<p>related notification </p>
<p>Notification in interrupt and task context (IL Polling) </p>
<p>IL&lt;Tx/Rx&gt;StateTask </p>
<p>Attributes for Rx timeout monitoring updated </p>
<p>Configuration Tool pictures updated </p>
<p>P. Jost </p>
<p>2002-08-16 </p>
<p>1.7 </p>
<p>Name of this document changed from User Manual to </p>
<p>Technical Reference </p>
<p>Multiple Indication Flags per Signal </p>
<p>Macro to Get and Clear at once </p>
<p>Chapter for Configuration Tool updated </p>
<p>”New Style” API  </p>
<p>Data Type Prefix for Signal Access </p>
<p>Further Callbacks for State Machine </p>
<p>Initialization – IlInitPowerOn </p>
<p>ECU Timeout </p>
<p>H. Hörner </p>
<p>2003-06-16 </p>
<p>1.8 </p>
<p>Several wording and spelling issues corrected </p>
<p>List of abbreviations and glossary removed, replaced by </p>
<p>an own document </p>
<p>Implementation details moved to an Annex </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>3 / 115 </p>
<p>K. Emmert </p>
<p>2003-09-02 </p>
<p>1.9 </p>
<p>Some design and link modifications. </p>
<p>H. Hörner </p>
<p>2004-05-14 </p>
<p>2.0 </p>
<p>Add usage of VStdLib </p>
<p>Documented return value of flag get macros </p>
<p>Difference between GenMsgDelayTime and </p>
<p>GenMsgStartDelayTime clarified </p>
<p>Some clarifications about signal groups </p>
<p>Wording enhanced for multiplexed signals </p>
<p>Klaus Emmert </p>
<p>Gunnar Meiss </p>
<p>2005-06-10 </p>
<p>2.01 </p>
<p>Added support for GENy </p>
<p>Added new feature dynamic timeout handling </p>
<p>Added raw API for multiplex signals </p>
<p>Reworked dbc attributes chapter </p>
<p>Added matrix with transmission modes </p>
<p>Gunnar Meiss </p>
<p> </p>
<p>2005-08-02 </p>
<p>2.02 </p>
<p>Adapted GenMsgFastOnStart </p>
<p>Added GENy Multiplex Support </p>
<p>Klaus Emmert </p>
<p>Gunnar Meiss </p>
<p>2005-11-04 </p>
<p>2.03 </p>
<p>Added AUTOSAR API for GENy, configuration and signal </p>
<p>access. </p>
<p>Added GenMsgFastOnStart for multiplex messages in </p>
<p>GENy </p>
<p>Added ESCAN00014120 CANGen </p>
<p>Added ESCAN00008602 CANGen </p>
<p>Added ESCAN00008604 CANGen </p>
<p>Reworked ESCAN00010718 </p>
<p>Gunnar Meiss </p>
<p>2006-02-16 </p>
<p>2.04 </p>
<p>Added GENy Multiple ECU Reference </p>
<p>Added ESCAN00013633 </p>
<p>DynRxTimeout API postfix and data types have changed. </p>
<p>Klaus Emmert </p>
<p>2006-03-13 </p>
<p>2.05 </p>
<p>Signal Groups for GENy </p>
<p>Gunnar Meiss </p>
<p>2006-04-06 </p>
<p>2.06 </p>
<p>Added Indexed API discontinuation for GENy. </p>
<p>Corrected ApplIlFatalError Prototype </p>
<p>Improved GenSigTimeoutMsg_&lt;ECU&gt; </p>
<p>Corrected GenSigSendType description </p>
<p>Removed GenSigTimeoutMsg_&lt;ECU&gt; for GENy </p>
<p>Gunnar Meiss </p>
<p>2007-05-16 </p>
<p>2.07 </p>
<p>Opaque Data Types ESCAN00016935 GENy </p>
<p>Improved documentation of call contexts of API functions </p>
<p>ESCAN00017472, ESCAN00018014, ESCAN00014156, </p>
<p>ESCAN00013962, ESCAN00013423, ESCAN00008047, </p>
<p>ESCAN00008755 </p>
<p>Gunnar Meiss </p>
<p>2007-12-17 </p>
<p>2.08 </p>
<p>Added GenSigSuprvResp, GenSigSuprvRespSubValue </p>
<p>and GenSigTimeoutMsg_&lt;ECU&gt; for GENy </p>
<p>Updated API descriptions </p>
<p>Updated GenMsgStartDelayTime </p>
<p>Updated GenMsgIlSupport </p>
<p>ESCAN00024092 </p>
<p>Gunnar Meiss </p>
<p>2008-04-21 </p>
<p>2.08.01 </p>
<p>ESCAN00024091 </p>
<p>Gunnar Meiss </p>
<p>2008-07-17 </p>
<p>2.09.00 </p>
<p>Reworked Document Structure </p>
<p>ESCAN00024902 Added Node Mapped dbc Attributes </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>4 / 115 </p>
<p>Updated Abbreviations and Glossary with CIWI </p>
<p>ESCAN00028781 Added IlTxRepetitionsAreActive and </p>
<p>IlTxSignalsAreActive </p>
<p>ESCAN00028787 Reset Timeout Flags On Release </p>
<p>Added Geny attribute descriptions </p>
<p>ESCAN00023799 Added Limitation </p>
<p>ESCAN00025371 Updated Dynamic Timeout Monitoring </p>
<p>ESCAN00029109 Added Documentation of Generated </p>
<p>APIs </p>
<p>Gunnar Meiss </p>
<p>2008-10-17 </p>
<p>2.09.01 </p>
<p>ESCAN00030172 The description of IlRxWait() </p>
<p>is </p>
<p>‎</p>
<p>incorrect </p>
<p>Gunnar Meiss </p>
<p>2011-05-19 </p>
<p>2.09.02 </p>
<p>ESCAN00049272 OnChangeAndIfActive and </p>
<p>OnChangeAndIfActiveWithRepetition is described </p>
<p>incorrect in Table  3-6 &quot;Send Type Matrix&quot; </p>
<p>ESCAN00049615 Incorrect Enumeration Values of the </p>
<p>dbc attribute &quot;ILUsed&quot; </p>
<p>ESCAN00048272 Incorrect Timing Diagram of the </p>
<p>Transmit Fast if Signal Active Transmission Mode </p>
<p>Heiko Hübler </p>
<p>2012-03-13 </p>
<p>2.10.00 </p>
<p>Added Signal status information (UpdateBits) </p>
<p>Heiko Hübler </p>
<p>2012-05-14 </p>
<p>2.10.00 </p>
<p>Added description for the GENy GUI attribute “timeout </p>
<p>time” </p>
<p>Heiko Hübler </p>
<p>2012-09-13 </p>
<p>2.10.01 </p>
<p>Added description for PreConfig Switch “Enable  </p>
<p>UpdateBit Support” </p>
<p>Changed “Send on Init” description  </p>
<p>Heiko Hübler </p>
<p>2012-11-07 </p>
<p>2.10.02 </p>
<p>ESCAN00041782: One 'e' too much in Technical </p>
<p>Reference </p>
<p>ESCAN00062898: Adapted description of Delimitation of </p>
<p>the Bus Load </p>
<p>Heiko Hübler </p>
<p>2013-05-13 </p>
<p>2.10.03 </p>
<p>ESCAN00052197: The OnChange Event is triggered if </p>
<p>the value for IlPut changes out of the range </p>
<p>Table 1-1  </p>
<p>History of the Document </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>5 / 115 </p>
<p><b>1.2 </b></p>
<p><b>Reference Documents </b></p>
<p><b>No. </b></p>
<p><b>Source </b></p>
<p><b>Title </b></p>
<p><b>Version </b></p>
<p>[1] </p>
<p> </p>
<p>Vector </p>
<p>Vector CAN driver. Technical Reference </p>
<p> </p>
<p>[2] </p>
<p> </p>
<p>Vector </p>
<p>Vector Multiple ECUs. Technical Reference </p>
<p>1.00.00 </p>
<p>[3] </p>
<p> </p>
<p>Vector </p>
<p>Vector Configuration Tool. Online Documentation. </p>
<p>(no printed manual available) </p>
<p> </p>
<p>[4] </p>
<p> </p>
<p>OSEK </p>
<p>OSEK/COM, Version 3.0.3 </p>
<p>3.00.03 </p>
<p>[5] </p>
<p> </p>
<p> </p>
<p>Z.120 (1996). Message Sequence Chart (MSC). </p>
<p>ITU-T, Geneva </p>
<p>April.1996 </p>
<p>[6] </p>
<p> </p>
<p>Vector </p>
<p>Interaction Layer User Manual </p>
<p> </p>
<p>[7] </p>
<p> </p>
<p>AUTOSAR </p>
<p>AUTOSAR Specification of Module COM 2.0.0 </p>
<p>2.00.00 </p>
<p>[8] </p>
<p> </p>
<p>AUTOSAR </p>
<p>AUTOSAR Specification of Module COM 3.1.0 </p>
<p>3.1.0 </p>
<p>Table 1-2  </p>
<p>Reference Documents </p>
<p> </p>
<p><b>Please note </b></p>
<p>We have configured the programs in accordance with your specifications in the </p>
<p>questionnaire. Whereas the programs do support other configurations than the one </p>
<p>specified in your questionnaire, Vector´s release of the programs delivered to your </p>
<p>company is expressly restricted to the configuration you have specified in the </p>
<p>questionnaire. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>6 / 115 </p>
<p><b>Contents </b></p>
<p><b>1</b></p>
<p> </p>
<p><b>Document Information ................................................................................................. 2</b></p>
<p> </p>
<p>1.1</p>
<p> </p>
<p>History ............................................................................................................... 2</p>
<p> </p>
<p>1.2</p>
<p> </p>
<p>Reference Documents ....................................................................................... 5</p>
<p> </p>
<p><b>2</b></p>
<p> </p>
<p><b>Introduction................................................................................................................. 11</b></p>
<p> </p>
<p>2.1</p>
<p> </p>
<p>Architecture Overview ...................................................................................... 12</p>
<p> </p>
<p>2.2</p>
<p> </p>
<p>Data Access Concept ....................................................................................... 13</p>
<p> </p>
<p>2.3</p>
<p> </p>
<p>Adapt the Vector Interaction Layer ................................................................... 15</p>
<p> </p>
<p><b>3</b></p>
<p> </p>
<p><b>Functional Description ............................................................................................... 17</b></p>
<p> </p>
<p>3.1</p>
<p> </p>
<p>Features .......................................................................................................... 17</p>
<p> </p>
<p>3.2</p>
<p> </p>
<p>Initialization ...................................................................................................... 17</p>
<p> </p>
<p>3.3</p>
<p> </p>
<p>Interaction Layer State Machine ....................................................................... 18</p>
<p> </p>
<p>3.3.1</p>
<p> </p>
<p>States .............................................................................................. 19</p>
<p> </p>
<p>3.3.1.1</p>
<p> </p>
<p>Uninit ............................................................................. 19</p>
<p> </p>
<p>3.3.1.2</p>
<p> </p>
<p>Running ......................................................................... 19</p>
<p> </p>
<p>3.3.1.3</p>
<p> </p>
<p>Waiting ........................................................................... 19</p>
<p> </p>
<p>3.3.2</p>
<p> </p>
<p>State Transitions .............................................................................. 19</p>
<p> </p>
<p>3.3.2.1</p>
<p> </p>
<p>Init .................................................................................. 19</p>
<p> </p>
<p>3.3.2.2</p>
<p> </p>
<p>Start ............................................................................... 19</p>
<p> </p>
<p>3.3.2.3</p>
<p> </p>
<p>Stop ............................................................................... 20</p>
<p> </p>
<p>3.3.2.4</p>
<p> </p>
<p>Wait ............................................................................... 20</p>
<p> </p>
<p>3.3.2.5</p>
<p> </p>
<p>Release ......................................................................... 21</p>
<p> </p>
<p>3.4</p>
<p> </p>
<p>Main Functions ................................................................................................ 21</p>
<p> </p>
<p>3.5</p>
<p> </p>
<p>Interaction Layer Communication Concept....................................................... 23</p>
<p> </p>
<p>3.5.1</p>
<p> </p>
<p>Interface Concept ............................................................................. 23</p>
<p> </p>
<p>3.5.2</p>
<p> </p>
<p>Notification Mechanisms .................................................................. 23</p>
<p> </p>
<p>3.6</p>
<p> </p>
<p>Data Access ..................................................................................................... 23</p>
<p> </p>
<p>3.6.1</p>
<p> </p>
<p>Data Consistency ............................................................................. 23</p>
<p> </p>
<p>3.6.2</p>
<p> </p>
<p>Signal Interface ................................................................................ 24</p>
<p> </p>
<p>3.6.3</p>
<p> </p>
<p>AUTOSAR Signal Interface .............................................................. 25</p>
<p> </p>
<p>3.6.4</p>
<p> </p>
<p>Example: Writing and reading a signal value .................................... 26</p>
<p> </p>
<p>3.6.5</p>
<p> </p>
<p>Signal Groups .................................................................................. 27</p>
<p> </p>
<p>3.6.5.1</p>
<p> </p>
<p>Il API .............................................................................. 27</p>
<p> </p>
<p>3.6.5.2</p>
<p> </p>
<p>AUTOSAR API ............................................................... 28</p>
<p> </p>
<p>3.6.5.3</p>
<p> </p>
<p>GENy configuration ........................................................ 29</p>
<p> </p>
<p>3.6.6</p>
<p> </p>
<p>Default Values .................................................................................. 29</p>
<p> </p>
<p>3.7</p>
<p> </p>
<p>Data Transmission ........................................................................................... 30</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>7 / 115 </p>
<p>3.7.1</p>
<p> </p>
<p>Transmission Concept...................................................................... 30</p>
<p> </p>
<p>3.7.2</p>
<p> </p>
<p>Signal Related Transmission Modes ................................................ 33</p>
<p> </p>
<p>3.7.2.1</p>
<p> </p>
<p>Cyclic Transmission ....................................................... 34</p>
<p> </p>
<p>3.7.2.2</p>
<p> </p>
<p>OnEvent (OnWrite, OnChange) ..................................... 34</p>
<p> </p>
<p>3.7.2.3</p>
<p> </p>
<p>OnEvent with Repetition (OnWrite, OnChange) ............. 35</p>
<p> </p>
<p>3.7.2.4</p>
<p> </p>
<p>Transmit Fast if Signal is Active ..................................... 36</p>
<p> </p>
<p>3.7.2.5</p>
<p> </p>
<p>Transmit Fast if Signal is Active with Repetition ............. 38</p>
<p> </p>
<p>3.7.3</p>
<p> </p>
<p>Mixed Transmission Mode................................................................ 39</p>
<p> </p>
<p>3.7.3.1</p>
<p> </p>
<p>Cyclic (Message) Transmission OR Cyclic (Signal) </p>
<p>Transmission ................................................................. 39</p>
<p> </p>
<p>3.7.3.2</p>
<p> </p>
<p>Cyclic (Message) Transmission OR OnEvent [Write] ..... 39</p>
<p> </p>
<p>3.7.3.3</p>
<p> </p>
<p>Cyclic (Message) Transmission OR OnEvent [Write] </p>
<p>with Repetition ............................................................... 39</p>
<p> </p>
<p>3.7.3.4</p>
<p> </p>
<p>Cyclic (Message) Transmission OR OnEvent [Change] . 40</p>
<p> </p>
<p>3.7.3.5</p>
<p> </p>
<p>Cyclic (Message) Transmission OR OnEvent [Change] </p>
<p>with Repetition ............................................................... 40</p>
<p> </p>
<p>3.7.3.6</p>
<p> </p>
<p>Cyclic (Message) Transmission OR Transmit Fast If </p>
<p>Signal is Active ............................................................... 40</p>
<p> </p>
<p>3.7.3.7</p>
<p> </p>
<p>Cyclic (Message) Transmission OR Transmit Fast If </p>
<p>Signal is Active with Repetition ...................................... 41</p>
<p> </p>
<p>3.7.3.8</p>
<p> </p>
<p>Cyclic (Message) Transmission OR NoSigSendType ..... 42</p>
<p> </p>
<p>3.7.4</p>
<p> </p>
<p>Advanced Transmission Modes ....................................................... 42</p>
<p> </p>
<p>3.7.5</p>
<p> </p>
<p>Notification Classes.......................................................................... 42</p>
<p> </p>
<p>3.7.6</p>
<p> </p>
<p>Reduction of Transmission Bursts .................................................... 43</p>
<p> </p>
<p>3.7.7</p>
<p> </p>
<p>Delimitation of the Bus Load ............................................................ 43</p>
<p> </p>
<p>3.7.8</p>
<p> </p>
<p>Transmission Timeout Monitoring ..................................................... 44</p>
<p> </p>
<p>3.7.9</p>
<p> </p>
<p>Transmission of Initialization Messages ........................................... 44</p>
<p> </p>
<p>3.8</p>
<p> </p>
<p>Data Reception ................................................................................................ 45</p>
<p> </p>
<p>3.8.1</p>
<p> </p>
<p>Reception Concept .......................................................................... 45</p>
<p> </p>
<p>3.8.2</p>
<p> </p>
<p>Notification Classes.......................................................................... 45</p>
<p> </p>
<p>3.8.3</p>
<p> </p>
<p>Timeout Monitoring .......................................................................... 46</p>
<p> </p>
<p>3.8.4</p>
<p> </p>
<p>Dynamic Timeout Monitoring ............................................................ 47</p>
<p> </p>
<p>3.9</p>
<p> </p>
<p>Signal status information (UpdateBits) ............................................................. 48</p>
<p> </p>
<p>3.9.1</p>
<p> </p>
<p>Configuration.................................................................................... 48</p>
<p> </p>
<p>3.9.1.1</p>
<p> </p>
<p>DBC File ........................................................................ 49</p>
<p> </p>
<p>3.9.2</p>
<p> </p>
<p>UpdateBit Transmission ................................................................... 49</p>
<p> </p>
<p>3.9.3</p>
<p> </p>
<p>UpdateBit Reception ........................................................................ 49</p>
<p> </p>
<p>3.9.3.1</p>
<p> </p>
<p>Timeout .......................................................................... 49</p>
<p> </p>
<p>3.10</p>
<p> </p>
<p>Multiple Channel Support ................................................................................. 50</p>
<p> </p>
<p>3.10.1</p>
<p> </p>
<p>Overview .......................................................................................... 50</p>
<p> </p>
<p>3.10.2</p>
<p> </p>
<p>Idx (Indexed) Interaction Layer ......................................................... 50</p>
<p> </p>
<p>3.11</p>
<p> </p>
<p>Advanced Communication Features ................................................................ 50</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>8 / 115 </p>
<p>3.11.1</p>
<p> </p>
<p>Physical Multiple and Multiple Configuration ECU ............................ 50</p>
<p> </p>
<p>3.11.2</p>
<p> </p>
<p>Multiplexed Signals .......................................................................... 50</p>
<p> </p>
<p>3.11.2.1</p>
<p> </p>
<p>Standard API.................................................................. 50</p>
<p> </p>
<p>3.11.2.2</p>
<p> </p>
<p>Raw API ......................................................................... 51</p>
<p> </p>
<p>3.11.3</p>
<p> </p>
<p>Manipulation of the Notification Frequency ....................................... 53</p>
<p> </p>
<p><b>4</b></p>
<p> </p>
<p><b>Integration ................................................................................................................... 54</b></p>
<p> </p>
<p>4.1</p>
<p> </p>
<p>Include structure .............................................................................................. 54</p>
<p> </p>
<p>4.2</p>
<p> </p>
<p>Scope of Delivery ............................................................................................. 54</p>
<p> </p>
<p>4.2.1</p>
<p> </p>
<p>Static Files ....................................................................................... 54</p>
<p> </p>
<p>4.2.2</p>
<p> </p>
<p>Dynamic Files .................................................................................. 54</p>
<p> </p>
<p>4.3</p>
<p> </p>
<p>Operating Systems Requirements ................................................................... 55</p>
<p> </p>
<p><b>5</b></p>
<p> </p>
<p><b>Configuration .............................................................................................................. 56</b></p>
<p> </p>
<p>5.1</p>
<p> </p>
<p>Configuration in Data Base .............................................................................. 56</p>
<p> </p>
<p>5.1.1</p>
<p> </p>
<p>Send Type ........................................................................................ 57</p>
<p> </p>
<p>5.1.2</p>
<p> </p>
<p>Send Type Dependent ..................................................................... 58</p>
<p> </p>
<p>5.1.3</p>
<p> </p>
<p>Advanced Attributes ......................................................................... 60</p>
<p> </p>
<p>5.1.4</p>
<p> </p>
<p>Timeout Supervision Attributes ......................................................... 61</p>
<p> </p>
<p>5.1.5</p>
<p> </p>
<p>Former Attributes ............................................................................. 63</p>
<p> </p>
<p>5.1.6</p>
<p> </p>
<p>Example ........................................................................................... 63</p>
<p> </p>
<p>5.2</p>
<p> </p>
<p>Configuration with GENy .................................................................................. 65</p>
<p> </p>
<p><b>6</b></p>
<p> </p>
<p><b>API Description ........................................................................................................... 81</b></p>
<p> </p>
<p>6.1.1</p>
<p> </p>
<p>TypeDefinitions ................................................................................ 81</p>
<p> </p>
<p>6.1.2</p>
<p> </p>
<p>Services provided by Interaction Layer............................................. 82</p>
<p> </p>
<p>6.1.2.1</p>
<p> </p>
<p>IlInitPowerOn ................................................................. 82</p>
<p> </p>
<p>6.1.2.2</p>
<p> </p>
<p>IlInit ................................................................................ 82</p>
<p> </p>
<p>6.1.2.3</p>
<p> </p>
<p>IlRxStart ......................................................................... 83</p>
<p> </p>
<p>6.1.2.4</p>
<p> </p>
<p>IlTxStart ......................................................................... 83</p>
<p> </p>
<p>6.1.2.5</p>
<p> </p>
<p>IlRxStop ......................................................................... 84</p>
<p> </p>
<p>6.1.2.6</p>
<p> </p>
<p>IlTxStop ......................................................................... 84</p>
<p> </p>
<p>6.1.2.7</p>
<p> </p>
<p>IlRxWait ......................................................................... 85</p>
<p> </p>
<p>6.1.2.8</p>
<p> </p>
<p>IlTxWait .......................................................................... 86</p>
<p> </p>
<p>6.1.2.9</p>
<p> </p>
<p>IlRxRelease ................................................................... 86</p>
<p> </p>
<p>6.1.2.10</p>
<p> </p>
<p>IlTxRelease .................................................................... 87</p>
<p> </p>
<p>6.1.2.11</p>
<p> </p>
<p>IlRxTask ......................................................................... 87</p>
<p> </p>
<p>6.1.2.12</p>
<p> </p>
<p>IlTxTask ......................................................................... 88</p>
<p> </p>
<p>6.1.2.13</p>
<p> </p>
<p>IlRxStateTask ................................................................. 88</p>
<p> </p>
<p>6.1.2.14</p>
<p> </p>
<p>IlTxStateTask ................................................................. 89</p>
<p> </p>
<p>6.1.2.15</p>
<p> </p>
<p>IlSendOnInitMsg ............................................................ 89</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>9 / 115 </p>
<p>6.1.2.16</p>
<p> </p>
<p>IlGetStatus ..................................................................... 90</p>
<p> </p>
<p>6.1.2.17</p>
<p> </p>
<p>IlTxRepetitionsAreActive ................................................ 90</p>
<p> </p>
<p>6.1.2.18</p>
<p> </p>
<p>IlTxSignalsAreActive ...................................................... 91</p>
<p> </p>
<p>6.1.3</p>
<p> </p>
<p>Generated Services provided by the Interaction Layer ..................... 92</p>
<p> </p>
<p>6.1.3.1</p>
<p> </p>
<p>Read and Write Signals and Signal Groups ................... 92</p>
<p> </p>
<p>6.1.3.2</p>
<p> </p>
<p>Read and Write Signals and SignalGroups in the RDS </p>
<p>Buffer. ............................................................................ 98</p>
<p> </p>
<p>6.1.3.3</p>
<p> </p>
<p>Notification Flags of Signals, Signal Groups and </p>
<p>Grouped Signals .......................................................... 100</p>
<p> </p>
<p>6.1.3.4</p>
<p> </p>
<p>Dynamic Rx Timeout .................................................... 102</p>
<p> </p>
<p>6.1.4</p>
<p> </p>
<p>Callback Functions ......................................................................... 104</p>
<p> </p>
<p>6.1.4.1</p>
<p> </p>
<p>ApplIlInit ....................................................................... 104</p>
<p> </p>
<p>6.1.4.2</p>
<p> </p>
<p>ApplIlRxStart ................................................................ 105</p>
<p> </p>
<p>6.1.4.3</p>
<p> </p>
<p>ApplIlTxStart ................................................................ 105</p>
<p> </p>
<p>6.1.4.4</p>
<p> </p>
<p>ApplIlRxStop ................................................................ 106</p>
<p> </p>
<p>6.1.4.5</p>
<p> </p>
<p>ApplIlTxStop ................................................................ 106</p>
<p> </p>
<p>6.1.4.6</p>
<p> </p>
<p>ApplIlFatalError ............................................................ 107</p>
<p> </p>
<p>6.1.5</p>
<p> </p>
<p>Generated Callback Functions ....................................................... 107</p>
<p> </p>
<p><b>7</b></p>
<p> </p>
<p><b>Limitations ................................................................................................................ 110</b></p>
<p> </p>
<p>7.1</p>
<p> </p>
<p>CANgen Compatibility .................................................................................... 110</p>
<p> </p>
<p>7.1.1</p>
<p> </p>
<p>Database attributes ........................................................................ 110</p>
<p> </p>
<p>7.1.2</p>
<p> </p>
<p>Application Code ............................................................................ 110</p>
<p> </p>
<p>7.1.3</p>
<p> </p>
<p>Generator ....................................................................................... 110</p>
<p> </p>
<p><b>8</b></p>
<p> </p>
<p><b>Glossary and Abbreviations .................................................................................... 112</b></p>
<p> </p>
<p>8.1</p>
<p> </p>
<p>Glossary ........................................................................................................ 112</p>
<p> </p>
<p>8.2</p>
<p> </p>
<p>Abbreviations ................................................................................................. 114</p>
<p> </p>
<p><b>9</b></p>
<p> </p>
<p><b>Contact ...................................................................................................................... 115</b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>10 / 115 </p>
<p><b>Illustrations </b></p>
<p>Figure 2-1</p>
<p> </p>
<p>Example for Some ECU’s in a Modern Vehicle ......................................... 11</p>
<p> </p>
<p>Figure 2-2</p>
<p> </p>
<p>Layer model of the Vector CAN communication components </p>
<p>CANbedded .............................................................................................. 13</p>
<p> </p>
<p>Figure 2-3</p>
<p> </p>
<p>Signal-oriented Access to Data provided by the Interaction Layer ............. 14</p>
<p> </p>
<p>Figure 2-4</p>
<p> </p>
<p>Usage of the network database to generate parts of the Interaction Layer 15</p>
<p> </p>
<p>Figure 3-1</p>
<p> </p>
<p>Rx and Tx State Machines ........................................................................ 18</p>
<p> </p>
<p>Figure 3-2</p>
<p> </p>
<p>State Machine of the Interaction Layer...................................................... 18</p>
<p> </p>
<p>Figure 3-3</p>
<p> </p>
<p>Call of the Interaction Layer cyclic function ............................................... 22</p>
<p> </p>
<p>Figure 3-4</p>
<p> </p>
<p>Synchronization Problem of Data Access ................................................. 24</p>
<p> </p>
<p>Figure 3-5</p>
<p> </p>
<p>Timing Diagram of the Periodic Transmission Mode ................................. 34</p>
<p> </p>
<p>Figure 3-6</p>
<p> </p>
<p>Timing Diagram of the Transmission Mode OnEvent – OnWrite................ 35</p>
<p> </p>
<p>Figure 3-7</p>
<p> </p>
<p>Timing Diagram of OnEvent with Repetition - <b>OnWrite </b>............................. 36</p>
<p> </p>
<p>Figure 3-8</p>
<p> </p>
<p>Timing Diagram of the Transmit Fast if Signal Active Transmission Mode . 37</p>
<p> </p>
<p>Figure 3-9</p>
<p> </p>
<p>Example for Combining Signals Related of the Send Fast if Signal Active </p>
<p>Mode to the Same Message ..................................................................... 38</p>
<p> </p>
<p>Figure 3-10</p>
<p> </p>
<p>Timing Diagram of the Transmit Fast if Signal Active Transmission Mode . 38</p>
<p> </p>
<p>Figure 3-11</p>
<p> </p>
<p>Mixed Transmission Mode – Cyclic OR OnEvent [Write] ........................... 39</p>
<p> </p>
<p>Figure 3-12</p>
<p> </p>
<p>Mixed Transmission Mode – Cyclic OR OnEvent [Change] ....................... 40</p>
<p> </p>
<p>Figure 3-13</p>
<p> </p>
<p>Mixed Transmission Mode – Cyclic OR Fast If Signal is Active ................. 41</p>
<p> </p>
<p>Figure 3-14</p>
<p> </p>
<p>Mixed Transmission Mode – Cyclic OR Fast If Signal is Active with </p>
<p>Repetition ................................................................................................. 42</p>
<p> </p>
<p>Figure 3-15</p>
<p> </p>
<p> Delay Time to Delimit Bus Load ............................................................... 44</p>
<p> </p>
<p>Figure 4-1</p>
<p> </p>
<p>Including Interaction Layer ........................................................................ 54</p>
<p> </p>
<p>Figure 5-1</p>
<p> </p>
<p>A Signal with the Periodic Transmission Mode and one with the Direct </p>
<p>Transmission Mode Combined to a message. .......................................... 65</p>
<p> </p>
<p>Figure 5-2</p>
<p> </p>
<p>OnScreen Help View for fast information .................................................. 65</p>
<p> </p>
<p>Figure 5-3</p>
<p> </p>
<p>Overview of Vector Interaction Layer Configuration in GENy .................... 66</p>
<p> </p>
<p><b> </b></p>
<p><b>Tables </b></p>
<p>Table 1-1 </p>
<p> </p>
<p>History of the Document ............................................................................. 4</p>
<p> </p>
<p>Table 1-2 </p>
<p> </p>
<p>Reference Documents ................................................................................ 5</p>
<p> </p>
<p>Table 3-1 </p>
<p> </p>
<p>Supported features ................................................................................... 17</p>
<p> </p>
<p>Table 3-2 </p>
<p> </p>
<p>Start transition events ............................................................................... 20</p>
<p> </p>
<p>Table 3-3 </p>
<p> </p>
<p>Stop transition events ............................................................................... 20</p>
<p> </p>
<p>Table 3-4 </p>
<p> </p>
<p>Wait transition events................................................................................ 21</p>
<p> </p>
<p>Table 3-5 </p>
<p> </p>
<p>Release transition events ......................................................................... 21</p>
<p> </p>
<p>Table 3-6 </p>
<p> </p>
<p>Send Type Matrix ...................................................................................... 33</p>
<p> </p>
<p>Table 4-1 </p>
<p> </p>
<p>Static files ................................................................................................. 54</p>
<p> </p>
<p>Table 4-2 </p>
<p> </p>
<p>Generated files ......................................................................................... 55</p>
<p> </p>
<p>Table 5-1 </p>
<p> </p>
<p>GENy attributes ........................................................................................ 80</p>
<p> </p>
<p>Table 6-1 </p>
<p> </p>
<p>Type definitions ......................................................................................... 81</p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>11 / 115 </p>
<p><b>2 </b></p>
<p><b>Introduction </b></p>
<p>Nowadays cars are growing to become more and more complex systems. The functionality </p>
<p>of a modern car is not dominated by mechanical components anymore. Electrical Control </p>
<p>Units (ECU), sensors and actors became irreplaceable parts of a car. They are responsible </p>
<p>for  the  reasonable  functions  of  the  power  train,  the  chassis  and  the  body  of  a  car.  An </p>
<p>example for some ECUs is shown in Figure 2-1  Example  for  Some  ECU’s  in  a  Modern </p>
<p>Vehicle. </p>
<p>In  many  ways  the  functionality  of  an  ECU  in  a  car  depends  on  information  provided  by </p>
<p>other ECUs. For example the ECU of the dashboard needs the number of revolutions per </p>
<p>time  of  the  wheels  to  display  the  car’s  speed. As  a  result  communication  between  the </p>
<p>ECUs is a significant component of a modern vehicle. </p>
<p>The </p>
<p>communication </p>
<p>between </p>
<p>ECUs </p>
<p>should </p>
<p>essentially </p>
<p>remain </p>
<p>encapsulated. </p>
<p>The </p>
<p>application working on an ECU should not need to know how to transmit or receive data </p>
<p>from other ECUs. Therefore Vector Informatik GmbH provides a set of components for the </p>
<p>communication of ECUs by the CAN bus. </p>
<p> </p>
<p>Figure 2-1 </p>
<p>Example for Some ECU’s in a Modern Vehicle </p>
<p>These communication components are called CANbedded. They relieve the application of </p>
<p>its  communication  assignment  including  the  exchange  of  simple  data,  diagnostic  data, </p>
<p><b>uc Ecu Use Cases</b></p>
<p><b>dashboard</b></p>
<p><b>seat</b></p>
<p><b>engine control</b></p>
<p><b>light c ontrol</b></p>
<p><b>door</b></p>
<p><b>air conditioning</b></p>
<p><b>central locking</b></p>
<p><b>wheel pressure </b></p>
<p><b>control</b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>12 / 115 </p>
<p>network management data, calibration data and more. This document is concerned with </p>
<p>the data exchange via an Interaction Layer.  </p>
<p>The Vector Interaction Layer hides all the communication related parameters and physical </p>
<p>values from the application to ease the workload of the application. In case of transmission </p>
<p>the  application  just  needs  to  pass  data  to  be  transmitted  to  the  Interaction  Layer.  The </p>
<p>Interaction Layer decides when to transmit the data. Because the transmission depends of </p>
<p>the chosen Transmission Mode which defines for example a periodic or an event triggered </p>
<p>transmission  of  data.  The  other  way  round,  in  case  of  reception  of  data  the  Interaction </p>
<p>Layer will notify the application about the arrival of data. Then the application could decide </p>
<p>whether to read the updated data. </p>
<p>In any case the application does not need to know how the data is transmitted or received </p>
<p>by the lower communication layers. It follows that the data structures of the application will </p>
<p>be  independent  of  the  communication  data  structures  (e.g.  bus  frames). The  result  is  a </p>
<p>higher reusability of the application software. </p>
<p>To  control  the  Interaction  Layer  by  the  means  of  starting,  suspending  or  deactivating  a </p>
<p>further API is provided. It is intended to be used for example by the Network Management. </p>
<p>By  this API  it  is  possible  to  realize  some  CAN  related  modes  like  Sleep  Mode,  Bus-off </p>
<p>Mode or Low-Voltage-Mode. </p>
<p> </p>
<p>This manual is divided into three main chapters. The Overview introduces the features and </p>
<p>concepts  of  the  Interaction  Layer.  Next,  the  Functional  Description  explains  the  state </p>
<p>machine, the communication flow, the data access and the transmission and reception of </p>
<p>data. Technical  Description,  the  last  of  the  main  chapters  concerns  with  details  of  code </p>
<p>generation, the API of the Interaction Layer and the usage or the Interaction Layer with or </p>
<p>without an operating system. </p>
<p><b>2.1 </b></p>
<p><b>Architecture Overview </b></p>
<p>The  implementation  of  the  Interaction  Layer  is  intended  to  relieve  the  application  of </p>
<p>communication tasks. The Interaction Layer</p>
<p> </p>
<p>is one of</p>
<p> </p>
<p>the communications components of </p>
<p>CANbedded offered by Vector Informatik GmbH. In Figure 2-2 </p>
<p>Layer  model  of  the  Vector </p>
<p>CAN  communication  components  CANbedded  it  is  shown  how  the  Interaction  Layer  is </p>
<p>embedded in the CANbedded protocol stack. </p>
<p>The communication software user has to be supplied with suitable access mechanisms to </p>
<p>permit the adaptation of the ECU's behaviour to the network. Furthermore, the application </p>
<p>needs  mechanisms  which  permit  a  structured  access  to  the  data  of  the  network.  Such </p>
<p>mechanisms are provided by the Interaction Layer of Vector Informatik GmbH and will be </p>
<p>described in this manual. The Interaction Layer is responsible for separation of the Data </p>
<p>Link  Layer  dependent  low-level  driver  (CAN  driver)  and  the  application  task  which  is </p>
<p>independent of the underlying bus system.  </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>13 / 115 </p>
<p> </p>
<p>Figure 2-2 </p>
<p>Layer model of the Vector CAN communication components CANbedded </p>
<p>The </p>
<p>CAN </p>
<p>Driver </p>
<p>provides </p>
<p>a </p>
<p>mostly </p>
<p>hardware </p>
<p>independent </p>
<p>interface </p>
<p>to </p>
<p>the </p>
<p>higher </p>
<p>communication layers. This enables the hardware independent implementation of the latter </p>
<p>components and the target platform independent reuse of them. </p>
<p><b>2.2 </b></p>
<p><b>Data Access Concept </b></p>
<p>The CAN bus uses messages to transmit user data. A message is 0 to 8 bytes long. The </p>
<p>user information often does not match exactly 1, 2, 3 ... or 8 bytes. For example to transmit </p>
<p>the state of a switch only 1 bit will be needed. This single bit has to be send in a 1 byte </p>
<p>CAN  frame.  The  7  remaining  bits  will  be  left  blank.  To  prevent  such  an  overhead  the </p>
<p>remaining bits could be used to transmit other short user information. The user information </p>
<p>combined to a message is called signals. Figure 2-3 Signal-oriented </p>
<p>Access </p>
<p>to </p>
<p>Data </p>
<p>provided by the Interaction Layer shows the combination of signals in the transmit section </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>14 / 115 </p>
<p>and  the  splitting  of  messages  in </p>
<p>the  receive  section  of  the  Interaction  Layer.  This </p>
<p>mechanism, of cause, also lowers the bus load and raises the efficiency of data exchange.  </p>
<p>The  key  aspect  of  the  Interaction  Layer  is  the  transmission  and  the  reception  of  data. </p>
<p>Therefore  the  Interaction  Layer  provides  a  signal  oriented  data  interface  called  Signal </p>
<p>Interface. The Signal Interface offers an API to write and read data. If data was written by </p>
<p>the application, the Signal Interface decides depending on the Transmission Mode whether </p>
<p>to transmit the data. The Signal Interface is located on the top of the Message Manager </p>
<p>which is responsible for the transmission and reception of messages. By these options the </p>
<p>application will be relieved of this area of responsibility. </p>
<p> </p>
<p>Figure 2-3 </p>
<p>Signal-oriented Access to Data provided by the Interaction Layer </p>
<p>To transmit a signal the application just needs to write it to the Interaction Layer by calling </p>
<p>ILPut</p>
<p>. The Interaction Layer will decide what to do with the updated data. The decision </p>
<p>depends on the chosen Transmission Mode and the delay timer. More information about </p>
<p>Transmission  Modes  and  delay  timer  could  be  found  in  chapter  3.7  Data Transmission. </p>
<p>However,  the  application  does  not  need  to  care  about  any  further  steps.  The  Vector </p>
<p>Interaction Layer results in a supplementary support for the application.  </p>
<p>For data exchange the Interaction Layer and the Data Link Layer need to copy the data </p>
<p>several times. For example in case of reading a signal by the application the data has to </p>
<p>be copied to the application’s memory. But the reception of messages is handled by an </p>
<p>interrupt which could intermit the copying of data. In case of reception, for example, the </p>
<p>data has to be copied from the receive buffer of the CAN interface to the memory of the </p>
<p>ECU by the interrupt handler. However, the Interaction Layer guarantees the consistency </p>
<p>of </p>
<p>any </p>
<p>transmitted </p>
<p>or </p>
<p>received </p>
<p>data </p>
<p>and </p>
<p>relieves </p>
<p>the </p>
<p>application </p>
<p>of </p>
<p>this </p>
<p>area </p>
<p>of </p>
<p>responsibility,  too. A  further  description  of  this  problem  will  follow  in  chapter  3.6.1  Data </p>
<p>Consistency. </p>
<p>Application</p>
<p>CAN Driver</p>
<p>Interaction Layer</p>
<p>Transmit Message</p>
<p>Receive Message</p>
<p>Write data</p>
<p>Read data</p>
<p>Signal Interface</p>
<p>Signal Interface</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>15 / 115 </p>
<p><b>2.3 </b></p>
<p><b>Adapt the Vector Interaction Layer </b></p>
<p>To allow the application to access data in a  signal-oriented manner, the Signal Interface </p>
<p>provides macros and functions. The macro and function names are derived directly from </p>
<p>the  signal  short  names  in  the  network  database  (also  known  as  data  dictionary  or </p>
<p>communication  database).  The  signal  names  have  prefixes  and  suffixes  which  can  be </p>
<p>defined by the user. </p>
<p> </p>
<p>Figure 2-4 </p>
<p>Usage of the network database to generate parts of the Interaction Layer </p>
<p>These functions and macros will be generated by the Configuration Tool using the network </p>
<p>database  related  to  a  project.  For  this  purpose,  the  car  manufacturer  makes  the  latest </p>
<p>version of the network database available to all suppliers. Each ECU producer receives - </p>
<p>in </p>
<p>addition </p>
<p>to </p>
<p>the </p>
<p>network </p>
<p>component </p>
<p>implementation </p>
<p>for </p>
<p>&quot;her/his&quot; </p>
<p>processor </p>
<p>- </p>
<p>the </p>
<p>Configuration  Tool  by  which  the  supplier  generates  the  parts  of  the </p>
<p>communication </p>
<p>components that are relevant to the particular ECU.  </p>
<p>All application specific data which are made available by the supplier is saved in a </p>
<p>separate file to preserve this information in the case of a network database update. The </p>
<p>Configuration Tool checks for consistency of application specific data and the network </p>
<p>database.  </p>
<p>Figure 2-4 </p>
<p>Usage  of  the  network  database  to  generate  parts  of  the  Interaction  Layer </p>
<p>shows the usage of the Configuration Tool. </p>
<p>Application</p>
<p>Specific</p>
<p>Data</p>
<p>Configuration</p>
<p>Signal</p>
<p>Interface</p>
<p>CANbedded</p>
<p>Software</p>
<p>Components</p>
<p>Application</p>
<p>Parameters</p>
<p>Configuration Tool</p>
<p>Executable</p>
<p>Generation</p>
<p>Includes</p>
<p>Compiler, Linker</p>
<p>Header</p>
<p>Source</p>
<p>CANdesc</p>
<p>Network</p>
<p>Database</p>
<p>CANdela </p>
<p>Database</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>16 / 115 </p>
<p>If  the  communication  components  use  more  than  one  CAN-channel,  the  macros  and </p>
<p>functions  have  to  be  generated  for  each  CAN-channel  with  the  corresponding  network </p>
<p>database.  In  the  Configuration  Tool,  a  channel-index  must  be  chosen  that  indicates  on </p>
<p>which CAN-channel the data dictionary is used. </p>
<p>Syntactically,  data  is  always  accessed  by  a  function.  Nevertheless,  this  might  actually </p>
<p>involve a macro. Whether there is a function call or a macro for direct access to the data </p>
<p>buffer  underlying  the  command  will  depend  on  the  signal's  data  type.  This  will  make  it </p>
<p>possible to change the implementation between functions and macros without having to </p>
<p>change the syntax in the source code of the application. The use of macros is preferable </p>
<p>with  regard  to  run  time.  However,  if  two  or  more  bytes  have  to  be  read  for  the  signal </p>
<p>access a function has to be used. This would allow including synchronization mechanisms </p>
<p>(see section 3.6.1) for the data access within these functions. For reasons of efficiency, </p>
<p>values with more than 32 bits are passed by data pointers, i.e. if the function is called the </p>
<p>application  passes  a  pointer  to  a  memory  location  where  the  function  stores  the  signal </p>
<p>value. The application is responsible for providing sufficient memory space. If a signal is </p>
<p>entered  in  the  network  database,  e.g.  as  a  34  bit  signal,  the  application  must  pass  a </p>
<p>pointer  to  a  memory  area  with  5  bytes.  When  signals  are  transmitted  compressed  in  a </p>
<p>message,  i.e.  they  only  use  a  few  bits  within  a  byte,  the  Signal  Interface  expands </p>
<p>appropriately  for  reading  by  the  application  and  compresses  appropriately  for  writing  by </p>
<p>the  application.  For  example,  reading  of  compressed  signals  take  up  1  to  7  bits,  the </p>
<p>signals  are  mapped  to  one  byte  each  for  the  application.  Internally  the  Signal  Interface </p>
<p>continues to store these data in its memory in compressed form. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>17 / 115 </p>
<p><b>3 </b></p>
<p><b>Functional Description </b></p>
<p><b>3.1 </b></p>
<p><b>Features </b></p>
<p>The </p>
<p>interface </p>
<p>is </p>
<p>divided </p>
<p>into </p>
<p>different </p>
<p>communication </p>
<p>layers. </p>
<p>The </p>
<p>Interaction </p>
<p>Layer </p>
<p>including  the  Signal  Interface  and  the  Message  Manager  put  on  the  Data  Link  Layer </p>
<p>represented </p>
<p>by </p>
<p>the </p>
<p>Vector </p>
<p>CAN </p>
<p>driver. </p>
<p>These </p>
<p>layers, </p>
<p>as </p>
<p>described </p>
<p>in </p>
<p>chapter </p>
<p>2.1 </p>
<p>Architecture Overview, are responsible for a number of tasks listed below. </p>
<p> </p>
<p>The following features are supported: </p>
<p><b>Supported Feature </b></p>
<p><b>Receive Messages: </b></p>
<p>Provide signal-oriented access to data which arrived over the CAN bus. </p>
<p>Notify the application on signal level, if a message has arrived (indication). </p>
<p>Monitors receive messages to determine whether they arrive periodically (timeout monitoring). </p>
<p>Use default values in case of timeout or when the reception was stopped. </p>
<p><b>Transmit Messages: </b></p>
<p>Provide signal-oriented access to data to be sent over the CAN bus. </p>
<p>Provide different Transmission Modes to offer the application various mechanisms to transmit </p>
<p>data. </p>
<p>Notify the application on signal level, if a message was transmitted (confirmation). </p>
<p>Monitor transmit messages to determine whether they had been actually transmitted (timeout </p>
<p>monitoring). </p>
<p>Always keep a delay time between send requests of a message. This should delimit the bus </p>
<p>load. </p>
<p>Use default values in case of timeout or when the transmission was stopped. </p>
<p>Table 3-1  </p>
<p>Supported features </p>
<p><b>3.2 </b></p>
<p><b>Initialization </b></p>
<p>If </p>
<p>the </p>
<p>CCL </p>
<p>is </p>
<p>not </p>
<p>used </p>
<p>in </p>
<p>the </p>
<p>software </p>
<p>stack, </p>
<p>the </p>
<p>application </p>
<p>has </p>
<p>to </p>
<p>initialize </p>
<p>the </p>
<p>components. </p>
<p> </p>
<p><b>Example</b> </p>
<p>Here is an example, if the initialization has to be implemented by the application. </p>
<p> </p>
<p>/* Disable interrupts during the initialization of the </p>
<p>Components */ </p>
<p>DisableInterrupts(); </p>
<p> </p>
<p>/* Initialize all components */ </p>
<p>CanInitPowerOn(); </p>
<p>IlInitPowerOn(); </p>
<p>TpInitPowerOn(); </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>18 / 115 </p>
<p>DiagInit(); </p>
<p> </p>
<p>/* Enable interrupts */ </p>
<p>EnableInterrupts();</p>
<p> </p>
<p><b>3.3 </b></p>
<p><b>Interaction Layer State Machine </b></p>
<p>An ECU can be in several states. These are normal-operation, sleep mode, bus-off mode </p>
<p>and  others.  In  different  states  the  communication  components  have  to  meet  different </p>
<p>requirements.  Therefore  a  state  machine  is  defined  for  the  Interaction  Layer  which </p>
<p>consists of the states uninit, running, waiting and suspended (See in Figure 3-2  State </p>
<p>Machine of the Interaction Layer). The state machine is instantiated per channel and for </p>
<p>each communication direction (See in Figure 3-1 </p>
<p>Rx and Tx State Machines). </p>
<p> </p>
<p>Figure 3-1 </p>
<p>Rx and Tx State Machines </p>
<p> </p>
<p>Figure 3-2 </p>
<p>State Machine of the Interaction Layer </p>
<p><b>stm State Machine</b></p>
<p><b>Running</b></p>
<p><b>Suspe nded</b></p>
<p>Il In i t,</p>
<p>IlInitP owerOn</p>
<p><b>Waiting</b></p>
<p>St op</p>
<p>Start</p>
<p>Rele ase</p>
<p>Wait</p>
<p>St op</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>19 / 115 </p>
<p><b>3.3.1 </b></p>
<p><b>States </b></p>
<p><b>3.3.1.1 </b></p>
<p><b>Uninit </b></p>
<p>After power-on  the  Interaction Layer will  be  in  the uninit-state. Initializing  the  Interaction </p>
<p>Layer will lead to a state transition to the state suspended. </p>
<p><b>3.3.1.2 </b></p>
<p><b>Running </b></p>
<p>The running state is used for normal operation. </p>
<p></p>
<p> </p>
<p>Receive Section </p>
<p> </p>
<p>Reception of data is enabled as well as timeout monitoring and notification. </p>
<p></p>
<p> </p>
<p>Transmit Section   </p>
<p>Transmission of data is enabled. Signal Interface and Message Manager are working. </p>
<p>The notification and the timeout monitoring are activated. </p>
<p><b>3.3.1.3 </b></p>
<p><b>Waiting </b></p>
<p>This state was designed for example to support bus-off mode or low-voltage mode. </p>
<p></p>
<p> </p>
<p>Receive Section </p>
<p> </p>
<p>Reception of data is enabled as well as the notification for indication. The timeout </p>
<p>monitoring will be turned off to prevent timeout detection of messages from an ECU </p>
<p>which is in bus-off mode and does not transmit data.  </p>
<p></p>
<p> </p>
<p>Transmit Section   </p>
<p>Transmission of data and the timeout monitoring will be disabled and the API will keep </p>
<p>on working. So the application could request the transmission of data, but the </p>
<p>Interaction Layer won’t follow immediately. The transmit requests will be stored and </p>
<p>executed, when the state transits to Running. Transmission bursts are avoided if </p>
<p>GenMsgStartDelay timings are defined, if this state is used in the bus-off mode. </p>
<p><b>3.3.2 </b></p>
<p><b>State Transitions </b></p>
<p>The transitions of the state machine are divided into transmit and receive sections of the </p>
<p>Interaction Layer and will usually be initiated by the Network Management. The application </p>
<p>does not need to get involved here. </p>
<p><b>3.3.2.1 </b></p>
<p><b>Init </b></p>
<p>The  component  variables  are  initialized.  There  is  an  option  for  initializing  the  transmit </p>
<p>buffer and/or the receive buffer with default values. If no default value was configured, the </p>
<p>buffers will be initialized with 0. The content of the default values is defined at compile time </p>
<p>within the Configuration Tool. The flags will all be reset. If configured in the Configuration </p>
<p>Tool, the application will be notified by invoking signal related callback functions. </p>
<p><b>3.3.2.2 </b></p>
<p><b>Start </b></p>
<p>The receive section and the transmit section respectively are started within this transition. </p>
<p><b>Communication </b></p>
<p><b>Section </b></p>
<p><b>Description </b></p>
<p>Receive Section </p>
<p><b>&gt; </b></p>
<p>The flags used for notification will be reset. These are in particular: the </p>
<p>first value flag, the data changed flag, the indication flag and the Rx </p>
<p>timeout flag.  </p>
<p><b>&gt; </b></p>
<p>Timeout monitoring will be started by a reload of the timers.  </p>
<p><b>&gt; </b></p>
<p>The values of the messages will be set to their default values, if defined at </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>20 / 115 </p>
<p><b>Communication </b></p>
<p><b>Section </b></p>
<p><b>Description </b></p>
<p>compile time. </p>
<p><b>&gt; </b></p>
<p>If configured in the Configuration Tool, the application will be notified by </p>
<p>invoking ApplIlRxStart() and/or signal related callback functions. </p>
<p>Transmit Section </p>
<p> </p>
<p><b>&gt; </b></p>
<p>The flags used for notification will be reset. These are in particular: the </p>
<p>confirmation flag and the Tx timeout flag.  </p>
<p><b>&gt; </b></p>
<p>The timers used for cycle times (e.g. for Send Periodic) will be initialized </p>
<p>and started after the start delay time. </p>
<p><b>&gt; </b></p>
<p>Timeout monitoring will be enabled by a reset of the timers. </p>
<p><b>&gt; </b></p>
<p>The values of the signals will be set to their default values, if defined at </p>
<p>compile time. </p>
<p><b>&gt; </b></p>
<p>If configured in the Configuration Tool, the application will be notified by </p>
<p>invoking ApplIlTxStart() and/or signal related callback functions. </p>
<p>Table 3-2  </p>
<p>Start transition events </p>
<p><b>3.3.2.3 </b></p>
<p><b>Stop </b></p>
<p>The  reception  and  the  transmission  of  messages  respectively  are  stopped  within  this </p>
<p>transition. </p>
<p><b>Communication </b></p>
<p><b>Section </b></p>
<p><b>Description </b></p>
<p>Receive Section </p>
<p><b>&gt; </b></p>
<p>The flags used for notification won’t be changed.  </p>
<p><b>&gt; </b></p>
<p>The timer used for timeout monitoring will be stopped. </p>
<p><b>&gt; </b></p>
<p>If configured, the values of the signals will be set to their default values. </p>
<p>Otherwise they won’t be changed. </p>
<p><b>&gt; </b></p>
<p>If configured in the Configuration Tool, the application will be notified by </p>
<p>invoking ApplIlRxStop() and/or signal related callback functions. </p>
<p>Transmit Section </p>
<p> </p>
<p><b>&gt; </b></p>
<p>The flags used for notification won’t be changed.  </p>
<p><b>&gt; </b></p>
<p>If configured, the values of the messages will be set to their default </p>
<p>values. Otherwise they won’t be changed. </p>
<p><b>&gt; </b></p>
<p>Transmission and timeout monitoring will be stopped. </p>
<p><b>&gt; </b></p>
<p>If configured in the Configuration Tool, the application will be notified by </p>
<p>invoking ApplIlTxStop() and/or signal related callback functions. </p>
<p>Table 3-3  </p>
<p>Stop transition events </p>
<p><b>3.3.2.4 </b></p>
<p><b>Wait </b></p>
<p>The  receive  section  and  the  transmit  section  respectively  are  deactivated  within  this </p>
<p>transition. </p>
<p><b>Communication </b></p>
<p><b>Section </b></p>
<p><b>Description </b></p>
<p>Receive Section </p>
<p><b>&gt; </b></p>
<p>Timeout monitoring will be stopped. </p>
<p>Transmit Section </p>
<p> </p>
<p><b>&gt; </b></p>
<p>The flags used for notification won’t be changed.  </p>
<p><b>&gt; </b></p>
<p>The values of the messages won’t be changed but could be updated by </p>
<p>the application. </p>
<p><b>&gt; </b></p>
<p>Transmission and timeout monitoring will be stopped. </p>
<p><b>&gt; </b></p>
<p>Requests for direct transmissions are stored in the waiting state. The </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>21 / 115 </p>
<p><b>Communication </b></p>
<p><b>Section </b></p>
<p><b>Description </b></p>
<p>related messages are transmitted after leaving the waiting state (release). </p>
<p>Table 3-4  </p>
<p>Wait transition events </p>
<p><b>3.3.2.5 </b></p>
<p><b>Release </b></p>
<p>The  receive  section  respectively  the  transmit  section  are  activated  again  within  this </p>
<p>transition. </p>
<p><b>Communication </b></p>
<p><b>Section </b></p>
<p><b>Description </b></p>
<p>Receive Section </p>
<p><b>&gt; </b></p>
<p>The timeout monitoring will be restarted by reloading the timers. </p>
<p><b>&gt; </b></p>
<p>The timeout flags are cleared, if configured (only GENy). </p>
<p>Transmit Section </p>
<p> </p>
<p><b>&gt; </b></p>
<p>The timers used for cycle times and timeout monitoring will be continued. </p>
<p>The values won’t be changed to avoid interference between periodic </p>
<p>transmitted messages on the bus (bursts). Pending requests for direct </p>
<p>transmissions are performed. This can lead to a burst of messages after </p>
<p>leaving the waiting state. </p>
<p>Table 3-5  </p>
<p>Release transition events </p>
<p><b>3.4 </b></p>
<p><b>Main Functions </b></p>
<p>The Interaction Layer provides two functions (IlRxTask and IlTxTask) that have to be called </p>
<p>cyclically as configured in GENy by the Application, OS or CCL. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>22 / 115 </p>
<p> </p>
<p>Figure 3-3 </p>
<p>Call of the Interaction Layer cyclic function </p>
<p> </p>
<p><b>Example</b> </p>
<p>Here is an example, if the task calls have to be implemented by the application. </p>
<p> </p>
<p>for(;;) </p>
<p>{ </p>
<p>  /* periodic call of IlRxTask() and IlTxTask() */ </p>
<p>  if (flag_10ms) </p>
<p>  { </p>
<p>    IlRxTask(); </p>
<p>    IlTxTask(); </p>
<p>    flag_10ms = 0; /* clear flag which was set by a timer </p>
<p>*/ </p>
<p>  } </p>
<p>}</p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>23 / 115 </p>
<p><b>3.5 </b></p>
<p><b>Interaction Layer Communication Concept </b></p>
<p><b>3.5.1 </b></p>
<p><b>Interface Concept </b></p>
<p>The  Interaction  Layer  as  placed  in  the  layer  model  has  got  two  interfaces  -  one  to  the </p>
<p>upper layer represented by the application and one to the layer below, the Data Link Layer. </p>
<p>The receipt and the transmission of data is the main task of the Interaction Layer. To fulfil </p>
<p>both of these tasks the Interaction Layer represented by its interfaces need to interact in </p>
<p>different </p>
<p>ways </p>
<p>with </p>
<p>its </p>
<p>communication </p>
<p>partners. </p>
<p>Therefore </p>
<p>different </p>
<p>techniques </p>
<p>like </p>
<p>functions, interrupts and periodic tasks are used. </p>
<p>To enable the transmission of data for the application, functions and macros are provided </p>
<p>by the Interaction Layer. The application could call these functions and macros whenever it </p>
<p>needs  to.  The  Interaction  Layer  usually  copies  the  data  to  be  transmitted  to  its  local </p>
<p>memory,  sets  a  transmit  request  and  leaves  the  processor  to  the  application.  The  data </p>
<p>actually will be transmitted later by a periodic task. This task checks at a defined period of </p>
<p>time for transmit requests and executes them by calling the Data Link Layer.  However, the </p>
<p>application  does  not  need  to  know  anything  about  the  process  of  transmission.  It  just </p>
<p>needs to call the function respectively macro related to a signal to start the transmission </p>
<p>process. </p>
<p>A </p>
<p>detailed </p>
<p>description </p>
<p>of </p>
<p>this </p>
<p>proceeding </p>
<p>is </p>
<p>given </p>
<p>in </p>
<p>chapter </p>
<p>3.7 </p>
<p>Data </p>
<p>Transmission. </p>
<p>The  received  data  has  to  be  treated  immediately  when  arrived.  This  will  be  done  by  a </p>
<p>receive  interrupt.  Inside  the  interrupt  handler  only  the  time  critical  work  is  done.  The </p>
<p>remaining  not  time  critical  work  will  be  done  by  a  periodic  task  which  for  example  is </p>
<p>responsible for the notification of the application. To get the signal values the application </p>
<p>has to poll these values by calling functions respectively macros related to the signals. To </p>
<p>decide  whether  to  get  new  data  the  application  will  be  notified  about  the  arrival  of  new </p>
<p>data. The reception is described more detailed in chapter 3.8 Data Reception. </p>
<p><b>3.5.2 </b></p>
<p><b>Notification Mechanisms </b></p>
<p>Two  mechanisms  are  provided  for  the  notification  of  the  application.  These  are:  flag-</p>
<p>interface and function-interface.  </p>
<p>If  the  flag  interface  is  used,  the  application  has  to  poll  the  flags  which  were  set  by  the </p>
<p>Interaction Layer. To maintain as much  separation  as possible  between  a message  and </p>
<p>the signals of a message each signal can have its own flags or functions. Parameterization </p>
<p>for  this  is  performed  in  the  Configuration  Tool.  Flag  access  is  done  by  C  macros.  The </p>
<p>macro name is comprised of the signal name and a postfix.  </p>
<p>If the function interface is used, the application has to provide callback functions which are </p>
<p>called  by  the  Interaction  Layer.  The  function  name  comprises  the  signal  name  and  its </p>
<p>indication-function’s pre- and postfixes.  </p>
<p><b>3.6 </b></p>
<p><b>Data Access </b></p>
<p><b>3.6.1 </b></p>
<p><b>Data Consistency </b></p>
<p>Since the Data Link Layer operates interrupt-driven, the read and write access to CAN </p>
<p>data can be interrupted by a write or read request of the Data Link Layer. Under some </p>
<p>circumstances this can lead to incorrect data if the data access in the Interaction Layer </p>
<p>involves multiple bytes.  </p>
<p>Figure 3-4 Synchronization Problem of Data Access describes a write operation of two </p>
<p>bytes performed by the application. After the first byte is read (r 0x01) from the memory the </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>24 / 115 </p>
<p>read operation was interrupted by the write operation (w 0xAB and w 0xFF) of the IRQ of a </p>
<p>receive message. However, the application continues reading the second byte (r 0xAB) </p>
<p>after the interrupt routine finished. This causes an inconsistency of data read by the </p>
<p>application. The same problem could occur during any access to shared memory. </p>
<p> </p>
<p>Figure 3-4 </p>
<p>Synchronization Problem of Data Access </p>
<p>To </p>
<p>prevent </p>
<p>this, </p>
<p>synchronization </p>
<p>mechanisms </p>
<p>were </p>
<p>inserted </p>
<p>for </p>
<p>read/write </p>
<p>into </p>
<p>the </p>
<p>Interaction  Layer. Accesses  on  signals  which  do  not  need  any  synchronization  (e.g.  bit </p>
<p>signals) could be executed as macros. The access to other signals must be routed through </p>
<p>functions, because suitable synchronization mechanisms can be inserted there. The signal </p>
<p>functions </p>
<p>are </p>
<p>generated </p>
<p>by </p>
<p>the </p>
<p>Configuration </p>
<p>Tool, </p>
<p>where </p>
<p>suitable </p>
<p>synchronization </p>
<p>mechanisms are included. </p>
<p>The choice of the synchronization method depends on the particular processor type and </p>
<p>will be made by the Configuration Tool. One possibility for example is to disable interrupts </p>
<p>while reading or writing data. So the interrupts can’t disturb the access mechanism. </p>
<p><b>3.6.2 </b></p>
<p><b>Signal Interface </b></p>
<p>The Signal Interface provides functions/macros for read access and writes access to the </p>
<p>shared CAN data memory. Each signal has its own function/macro whose argument is the </p>
<p>signal  value  or  a  data  pointer.  The  function  name  comprises  the  signal  name  from  the </p>
<p>network database and suitable application-specific prefixes and suffixes. The data access </p>
<p>functions can be implemented as macros or as actual functions as receive functions can </p>
<p>be. The two variants do not differ syntactically. The implementation reserves the option of </p>
<p>implementing signal access as a macro or as a function. </p>
<p>For read access to the transmit buffer and write access to the receive buffer, respectively, </p>
<p>macros  are  provided.  E.g.  the  usual  operation  on  a  receive  signal  is  reading  new  data. </p>
<p>Interrupted Read Operation</p>
<p><b>Application</b></p>
<p><b>Interaction Layer</b></p>
<p><b>Data Link Layer</b></p>
<p>message</p>
<p>R 0x01</p>
<p><b>Signal memory</b></p>
<p><b>read operation interrupted</b></p>
<p>R 0xAB</p>
<p>W 0xFF</p>
<p>W 0xAB</p>
<p>0x02 0x01</p>
<p>0xAB 0xFF</p>
<p>0x02 0xFF</p>
<p>0xAB 0xFF</p>
<p>0xAB 0x01</p>
<p>Interrupt</p>
<p>RTI</p>
<p>2 byte value</p>
<p>low byte</p>
<p>high byte</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>25 / 115 </p>
<p>Therefore, a function or a macro will be provided. Additionally a macro for write access to </p>
<p>this receive signal can be configured. By default these macros are switched off, but can be </p>
<p>configured by the Configuration Tool. If not needed, we recommend not switch the macros </p>
<p>on, because of the resources functions need. </p>
<p>Depending on the size of the signal, the type of argument for data access can differ. If the </p>
<p>signal length is lower than or equal to 8 bit, the signal argument is treated as a vuint8 (8-bit </p>
<p>unsigned char). Signals, which are between 9 bit and 16 bit are treated as vuint16 (16-bit </p>
<p>unsigned short) values. If the signal size is between 17 bit and 32 bit a vuint32 (unsigned </p>
<p>long) will be used as signal argument. For signals greater than 32 bit, the function requests </p>
<p>a  pointer  to  the  source  data  buffer.  I.e.  the Application  has  to  pass  a  data  pointer  to  a </p>
<p>memory area of sufficient size. </p>
<p><b>3.6.3 </b></p>
<p><b>AUTOSAR Signal Interface </b></p>
<p>The Vector Interaction Layer can be configured to support the signal access as defined in </p>
<p>the AUTOSAR COM specification Version 2.0 [8].  </p>
<p>The signal access is realized by using one function for write access and one function for </p>
<p>read access. The signal that has to be written or read is given as parameter, as well as the </p>
<p>value for a write access.  The signal that is read is stored to the location given with the </p>
<p>second  parameter.  See  in  the  API  below  and  the  examples  in  chapter  3.6.4  Example: </p>
<p>Writing and reading a signal value. </p>
<p> </p>
<p><b>Example</b> </p>
<p>A signal is written using </p>
<p>Com_ReturnType Com_SendSignal (Com_SignalIdType SignalId, </p>
<p>Com_ApplicationDataRefType SignalDataPtr); </p>
<p>A signal is read using </p>
<p>Com_ReturnType Com_ReceiveSignal(Com_SignalIdType SignalId, </p>
<p>Com_ApplicationDataRefType SignalDataPtr);</p>
<p> </p>
<p> </p>
<p>The  AUTOSAR  signal  access  is  implementation  via  efficient  macros.  Due  to  this,  the </p>
<p><b>SignalId </b>is the unique name of the signal as displayed by GENy and not an own data type </p>
<p>as  specified  by  [8].  The <b> SignalDataPtr </b> is  a  vuint8  pointer  to  the  location  where  the </p>
<p>received signal should be written to. </p>
<p> </p>
<p><b>Please note </b></p>
<p> </p>
<p></p>
<p> </p>
<p>Signals defined in the dbc file can be accessed. </p>
<p></p>
<p> </p>
<p>No local communication is supported. </p>
<p></p>
<p> </p>
<p>The return value is always E_OK. </p>
<p></p>
<p> </p>
<p>Restrictions of the standard API are inherited. </p>
<p></p>
<p> </p>
<p>Opaque Data types are mapped to unit data types according to the following list: </p>
<p>Bit length 1..8 </p>
<p> </p>
<p> </p>
<p>-&gt; vuint8 </p>
<p>Bit length 9..16  </p>
<p>-&gt; vuint16 </p>
<p>Bit length 17..32  -&gt; vuint32</p>
<p> </p>
<p>. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>26 / 115 </p>
<p><b>3.6.4 </b></p>
<p><b>Example: Writing and reading a signal value </b></p>
<p>The  database  contains  the  signals  &quot;EngineSpeed&quot;  (36  bit),  &quot;InteriorLight&quot;  (1  bit  signal), </p>
<p>&quot;NewTemperature&quot; (36 bit), “NewWindowPos” (16bit) and “EngineRPM” (30bit). The user </p>
<p>configures the prefixes &quot;ILPut&quot; and “ILGet” and the suffix &quot;_Sig”. By this configuration the </p>
<p>Configuration Tool derives the functions shown below. </p>
<p> </p>
<p>/* Application makes memory space available           */ </p>
<p>/* -------------------------------------------------- */ </p>
<p>unsigned char EngineSpeed [5]; </p>
<p>unsigned char InteriorLight; </p>
<p>unsigned char NewTemperature [5]; </p>
<p>unsigned short NewWindowPos; </p>
<p>unsigned long EngineRPM; </p>
<p> </p>
<p>/* Receive and transmit signals                        */ </p>
<p>/* --------------------------------------------------- */ </p>
<p>ILGetRxEngineSpeed_Sig( &amp;EngineSpeed );  /* Signal value &gt;  32 Bit </p>
<p>*/ </p>
<p>InteriorLight = ILGetRxInteriorLight_Sig();  /* Signal value &lt;= 8 </p>
<p>Bit */ </p>
<p>ILPutTxTemperature_Sig( &amp;NewTemperature);  /* Signal value &gt;  32 </p>
<p>Bit */ </p>
<p>ILPutTxWindowPos_Sig( NewWindowPos );   /* Signal value &lt;= 16 Bit </p>
<p>*/ </p>
<p>EngineRPB = ILGetRxEngineRPM_Sig();   /* Signal value &lt;= 32 Bit */ </p>
<p> </p>
<p> </p>
<p> </p>
<p>/* Receive and transmit signals using <b>AUTOSAR API      </b>*/ </p>
<p>/* --------------------------------------------------- */ </p>
<p>Com_<b>Receive</b>Signal(EngineSpeed_Sig, EngineSpeed );  /* Signal value </p>
<p>&gt;  32 Bit */ </p>
<p>Com_<b>Receive</b>Signal(InteriorLight_Sig, &amp;InteriorLight) /* Signal </p>
<p>value &lt;= 8 Bit */ </p>
<p>Com_<b>Send</b>Signal(Temperature_Sig, NewTemperature);   /* Signal value </p>
<p>&gt;  32 Bit */ </p>
<p>Com_<b>Send</b>Signal(WindowPos_Sig, &amp;NewWindowPos);      /* Signal value </p>
<p>&lt;= 16 Bit  */ </p>
<p>Com_<b>Receive</b>Signal(EngineRPM_Sig, &amp;EngineRPB);    /* Signal value </p>
<p>&lt;= 32 Bit */ </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Caution </b></p>
<p>All generated signal access only provides <b>unsigned integer </b>values. Signed, float and </p>
<p>the scaling factors (as adjustable in CANdb++) are not supported and have to be </p>
<p>interpreted by the application. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>27 / 115 </p>
<p><b>3.6.5 </b></p>
<p><b>Signal Groups </b></p>
<p>Physically </p>
<p>dependent </p>
<p>signals </p>
<p>often </p>
<p>need </p>
<p>to </p>
<p>be </p>
<p>transmitted </p>
<p>together. </p>
<p>Therefore, </p>
<p>the </p>
<p>Interaction  Layer  provides  the  possibility  to  combine  signals  to  a  signal  group.  With  a </p>
<p>signal  group  the  application  can  collect  the  data  of  dependent  signals  and  invoke  the </p>
<p>transmission when the group is complete. The definition of the groups is done in the data </p>
<p>base file (DBC), the data collection in a reserved buffer.  </p>
<p>With the configuration tool GENy settings for a whole group can be done, e.g. the way of </p>
<p>how  to  react  in  case  of  a  group  reception  or  the  usage  of  a  buffer  provided  by  the </p>
<p>application.  </p>
<p>The strategy for transmitting a signal group is to update all group signals and then sending </p>
<p>the group. </p>
<p>And vice versa is the strategy for receiving a signal group. The group is updated and then </p>
<p>every signal can be read. </p>
<p>There must be distinguished between two different APIs: </p>
<p></p>
<p> </p>
<p>IL API (with data buffer provided by the application or data buffer provided by the IL) </p>
<p></p>
<p> </p>
<p>AUTOSAR API </p>
<p><b>3.6.5.1 </b></p>
<p><b>Il API </b></p>
<p>The IL API can be used with a buffer provided by the application or the buffer provided by </p>
<p>the IL. This can be selected on the configuration view of each signal group in GENy. </p>
<p><b>IL Buffer used </b></p>
<p>If  the  GENy  checkbox <b> Use  Appl  SignalGroupBuffer </b> on  the  configuration  view  of  the </p>
<p>single groups is <b>not </b>checked the standard buffer defined by the IL is used. The Interaction </p>
<p>Layer provides a structure in which the related signals are combined. </p>
<p> </p>
<p> </p>
<p><b>Example</b> </p>
<p>Transmission of a signal group with IL API. </p>
<p>IlGetTx&lt;groupname&gt;(); </p>
<p>IlPutTx&lt;signalname&gt;(data) </p>
<p>… </p>
<p>IlPutTx&lt;groupname&gt;();</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Example</b> </p>
<p>Reception of a signal group with IL API. </p>
<p>IlGetRx&lt;groupname&gt;() </p>
<p>value = IlGetRx&lt;signalname&gt;(dataPtr); </p>
<p>… </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>28 / 115 </p>
<p><b>Appl SignalGroupBuffer used </b></p>
<p>With the GENy checkbox <b>Use Appl SignalGroupBuffer </b>on the configuration view of the </p>
<p>single groups the usage of the buffer provided by the application is activated. You have to </p>
<p>provide this buffer.  </p>
<p> </p>
<p> </p>
<p><b>Example</b> </p>
<p>Transmission of a signal group with IL API and buffer provided by the application. </p>
<p> </p>
<p>/* declare the buffer */ </p>
<p>V_MEMRAM0 V_MEMRAM1 _c_&lt;groupname&gt;_buf V_MEMRAM2 </p>
<p>&lt;groupname&gt;;  </p>
<p>/* initialize the buffer */ </p>
<p>IlGetTx&lt;groupname&gt;ShadowBuffer(&amp;&lt;groupname&gt;); </p>
<p> </p>
<p> </p>
<p>IlPutTx&lt;signalname&gt;SigShadowBuffer(&amp;&lt;groupname&gt;, data); </p>
<p>… </p>
<p>IlPutTx&lt;groupname&gt;ShadowBuffer(&amp;&lt;groupname&gt;);</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Example</b> </p>
<p>Reception of a signal group with AUTOSAR API and buffer provided by the application. </p>
<p> </p>
<p>/* declare the buffer */ </p>
<p>V_MEMRAM0 V_MEMRAM1 _c_IlRxGroup00_buf V_MEMRAM2 </p>
<p>&lt;groupname&gt;; </p>
<p>/* initialize the buffer */ </p>
<p>IlGetRx&lt;groupname&gt;ShadowBuffer(&amp;&lt;groupname&gt;); </p>
<p>value = IlGetRx&lt;groupname&gt;SigShadowBuffer(&amp;&lt;groupname&gt;, </p>
<p>dataPtr); </p>
<p> </p>
<p><b>3.6.5.2 </b></p>
<p><b>AUTOSAR API </b></p>
<p>Using the AUTOSAR API there is no way to define an own shadow buffer for the storage of </p>
<p>the signal groups. The predefined shadow buffer is used. </p>
<p>Updating the buffer for transmission: </p>
<p> </p>
<p><b>Example</b> </p>
<p>Transmission of a signal group with AUTOSAR API. </p>
<p><b> </b></p>
<p>Com_UpdateShadowSignal(&lt;signalname&gt;, &amp;data); </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>29 / 115 </p>
<p>… </p>
<p>Com_SendSignalGroup(&lt;groupname&gt;);</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Example</b> </p>
<p>Reception of a signal group with AUTOSAR API. </p>
<p> </p>
<p>Com_ReceiveSignalGroup(&lt;groupname&gt;); </p>
<p>Com_ReceiveShadowSignal(&lt;signalname&gt;, &amp;ret); </p>
<p>… </p>
<p> </p>
<p><b>3.6.5.3 </b></p>
<p><b>GENy configuration </b></p>
<p>Almost any setting that is available for a single signal also is available for a signal group </p>
<p>and can be selected on the configuration view of the signal group in GENy. In detail this is: </p>
<p></p>
<p> </p>
<p>Put and get macros </p>
<p></p>
<p> </p>
<p>Indication flag and function </p>
<p></p>
<p> </p>
<p>Confirmation flag and function </p>
<p></p>
<p> </p>
<p>Timeout flag and function </p>
<p></p>
<p> </p>
<p>Notification in case of state machine transition: init, start, stop </p>
<p></p>
<p> </p>
<p>Default values </p>
<p> </p>
<p> </p>
<p><b>Caution </b></p>
<p>Signal groups and multiplex messages cannot</p>
<p> be combined in one message!. </p>
<p> </p>
<p><b>3.6.6 </b></p>
<p><b>Default Values </b></p>
<p>Each signal may have a default value which is defined in the Configuration Tool at compile </p>
<p>time. These default values are used for  </p>
<p></p>
<p> </p>
<p>Initializing the Interaction Layer (</p>
<p>IlInitPowerOn</p>
<p>) </p>
<p></p>
<p> </p>
<p>Starting the receive section (</p>
<p>IlRxStart</p>
<p>) </p>
<p></p>
<p> </p>
<p>Suspending the receive section (</p>
<p>IlRxStop</p>
<p>) </p>
<p></p>
<p> </p>
<p>Starting the transmit section (</p>
<p>IlTxStart</p>
<p>) </p>
<p></p>
<p> </p>
<p>Suspending the transmit section (</p>
<p>IlTxStop</p>
<p>) </p>
<p></p>
<p> </p>
<p>Replacing signal values in the case of receive errors (time out) </p>
<p>By initializing the Interaction the signal values will be set to 0 (zero), if no default values </p>
<p>were defined. The user can define a single default value for each signal and configure, if it </p>
<p>should be used when the Interaction Layer is initialized or when the receive section or the </p>
<p>transmit section were started or stopped. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>30 / 115 </p>
<p>At compile time the user could define what the Interaction Layer should do, if a receive </p>
<p>error occurred. It is possible to keep the old signal values or to replace them by a default </p>
<p>value (only if defined). </p>
<p> </p>
<p>The largest default value which can be set in the configuration tool is 0xffffffff (32 Bit). If </p>
<p>signals  greater  than  32  Bits  are  used,  they  have  to  be  set  by  the  application  e.g.  in </p>
<p>ApplIlTxStart(). </p>
<p><b>3.7 </b></p>
<p><b>Data Transmission </b></p>
<p>There are many ways data could be sent e.g. cyclic or triggered by a change of an initial </p>
<p>value,  etc.  The  concept  behind  transmitting  data  with  the  Vector  Interaction  Layer  is </p>
<p>explained in the following. </p>
<p><b>3.7.1 </b></p>
<p><b>Transmission Concept </b></p>
<p>The  Vector  Interaction  Layer  offers  a  set  of  so-called  transmission  modes. According  to </p>
<p>these modes the signals and messages are being sent. The setting of the modes has to be </p>
<p>done in the DBC file using the CANdb++ editor for any signal.  </p>
<p>The following <b>signal </b>transmission modes are selectable:  </p>
<p></p>
<p> </p>
<p>Cyclic </p>
<p></p>
<p> </p>
<p>OnWrite </p>
<p></p>
<p> </p>
<p>OnWriteWithRepetition </p>
<p></p>
<p> </p>
<p>OnChange </p>
<p></p>
<p> </p>
<p>OnChangeWithRepetition </p>
<p></p>
<p> </p>
<p>IfActive </p>
<p></p>
<p> </p>
<p>IfActiveWithRepetition </p>
<p></p>
<p> </p>
<p>NoSigSendType </p>
<p></p>
<p> </p>
<p>OnChangeAndIfActive </p>
<p></p>
<p> </p>
<p>OnChangeAndIfActiveWithRepetition </p>
<p> </p>
<p>Additionally there are also transmission modes for <b>messages</b>:  </p>
<p></p>
<p> </p>
<p>Cyclic </p>
<p></p>
<p> </p>
<p>IfActive </p>
<p></p>
<p> </p>
<p>NoMsgSendType </p>
<p>The </p>
<p>resulting </p>
<p>transmission </p>
<p>mode </p>
<p>is </p>
<p>an </p>
<p>OR </p>
<p>between </p>
<p>the </p>
<p>message </p>
<p>and </p>
<p>the </p>
<p>signal </p>
<p>transmission mode. The greyed fields describe the attribute to be set to for this specific </p>
<p>transmission mode. </p>
<p><b> </b></p>
<p><b>Signal Related </b></p>
<p><b>Transmission </b></p>
<p><b>Mixed </b></p>
<p><b>Transmission </b></p>
<p><b>Advanced </b></p>
<p><b>Transmission </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>31 / 115 </p>
<p><b>                        Message </b></p>
<p><b>Signal </b></p>
<p><b>NoMsgSendType </b></p>
<p><b>Cyclic </b></p>
<p><b>IfActive </b></p>
<p><b>Cyclic </b></p>
<p><b>Cyclic Transmission </b></p>
<p><b>Transmit fast if signal is </b></p>
<p><b>active </b></p>
<p>(automatically set for all </p>
<p>signals in this message) </p>
<p><b>or </b></p>
<p><b>Cyclic Transmission </b></p>
<p>GenMsgCycleTime </p>
<p>GenMsgCycleTime </p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue</p>
<p><b> </b></p>
<p><b>OnWrite </b></p>
<p><b>OnEvent </b>[Write] </p>
<p>Will be sent immediately </p>
<p>after a write access. </p>
<p><b>Cyclic </b></p>
<p><b>Transmission  </b></p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Write] </p>
<p>(immediately) </p>
<p><b>Transmit fast if signal is </b></p>
<p><b>active </b></p>
<p>(automatically set for all </p>
<p>signals in this message) </p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Write] </p>
<p>Will be sent immediately after </p>
<p>a write access.</p>
<p> </p>
<p>GenMsgCycleTime</p>
<p><b> </b></p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue</p>
<p><b> </b></p>
<p><b>OnWriteWithRepetition </b></p>
<p><b>OnEvent </b>[Write] <b>with </b></p>
<p><b>Repetition </b></p>
<p><b>Cyclic </b></p>
<p><b>Transmission  </b></p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Write] </p>
<p><b>with Repetition </b></p>
<p><b>Transmit fast if signal is </b></p>
<p><b>active </b></p>
<p>(automatically set for all </p>
<p>signals in this message</p>
<p>)</p>
<p> </p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Write] <b>with </b></p>
<p><b>Repetition </b></p>
<p>GenMsgCycleTimeFast </p>
<p>GenMsgNrOfRepetition</p>
<p><b> </b></p>
<p>GenMsgCycleTime </p>
<p>GenMsgCycleTimeFast </p>
<p>GenMsgNrOfRepetition</p>
<p><b> </b></p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue </p>
<p>GenMsgNrOfRepetition</p>
<p><b> </b></p>
<p><b>OnChange </b></p>
<p><b>OnEvent </b>[Change] </p>
<p>Will be sent immediately </p>
<p>after value changed. </p>
<p><b>Cyclic </b></p>
<p><b>Transmission</b></p>
<p> </p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Change] </p>
<p>Will be sent </p>
<p>immediately after value </p>
<p>changed.</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Transmit fast if signal is </b></p>
<p><b>active </b></p>
<p>(automatically set for all </p>
<p>signals in this message</p>
<p>)</p>
<p> </p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Change] </p>
<p>Will be sent immediately after </p>
<p>value changed. </p>
<p> </p>
<p>GenMsgCycleTime </p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue</p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>32 / 115 </p>
<p><b>OnChangeWithRepetition </b></p>
<p><b>OnEvent </b>[Change] </p>
<p><b>with Repetition </b></p>
<p><b>Cyclic </b></p>
<p><b>Transmission </b></p>
<p> </p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Change] </p>
<p><b>with Repetition </b></p>
<p><b>Transmit fast if signal is </b></p>
<p><b>active </b></p>
<p>(automatically set for all </p>
<p>signals in this message</p>
<p>)</p>
<p> </p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Change] <b>with </b></p>
<p><b>Repetition </b></p>
<p>GenMsgCycleTimeFast </p>
<p>GenMsgNrOfRepetition</p>
<p><b> </b></p>
<p>GenMsgCycleTime </p>
<p>GenMsgCycleTimeFast </p>
<p>GenMsgNrOfRepetition</p>
<p><b> </b></p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue </p>
<p>GenMsgNrOfRepetition</p>
<p><b> </b></p>
<p><b>IfActive </b></p>
<p><b>Transmit fast if signal </b></p>
<p><b>is active</b>. </p>
<p><b>Cyclic </b></p>
<p><b>Transmission</b></p>
<p> </p>
<p><b>or </b></p>
<p><b>Transmit fast if </b></p>
<p><b>signal is active</b>. </p>
<p><b>Transmit fast if signal is </b></p>
<p><b>active </b></p>
<p>(automatically set for all </p>
<p>signals in this message</p>
<p>)</p>
<p> </p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue</p>
<p><b> </b></p>
<p>GenMsgCycleTime </p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue</p>
<p><b> </b></p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue</p>
<p><b> </b></p>
<p><b>IfActiveWithRepetition </b></p>
<p><b>Transmit fast if signal </b></p>
<p><b>is active with </b></p>
<p><b>Repetition </b></p>
<p><b>Cyclic </b></p>
<p><b>Transmission</b></p>
<p> </p>
<p><b>or </b></p>
<p><b>Transmit fast if </b></p>
<p><b>signal is active with </b></p>
<p><b>Repetition </b></p>
<p><b>Transmit fast if signal is </b></p>
<p><b>active with Repetition </b></p>
<p>(automatically set for all </p>
<p>signals in this message</p>
<p>)</p>
<p> </p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue </p>
<p>GenMsgNrOfRepetition</p>
<p><b> </b></p>
<p>GenMsgCycleTime </p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue </p>
<p>GenMsgNrOfRepetition</p>
<p><b> </b></p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue </p>
<p>GenMsgNrOfRepetition</p>
<p><b> </b></p>
<p><b>NoSigSendType </b></p>
<p><b>No Transmission </b></p>
<p><b>Cyclic </b></p>
<p><b>Transmission </b></p>
<p>(GenMsgCycleTime </p>
<p>must be set) </p>
<p><b>Transmit fast if signal is </b></p>
<p><b>active </b></p>
<p>(automatically set for all </p>
<p>signals in this message, </p>
<p>GenMsgCycleTimeFast must </p>
<p>be set) </p>
<p>GenMsgCycleTime</p>
<p><b> </b></p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue</p>
<p><b> </b></p>
<p><b>OnChangeAndIfActive </b></p>
<p><b>Transmit fast if signal </b></p>
<p><b>is active </b></p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Change] </p>
<p>Will be sent immediately </p>
<p>after value changed.</p>
<p> </p>
<p><b>Cyclic </b></p>
<p><b>Transmission</b></p>
<p> </p>
<p><b>or </b></p>
<p><b>Transmit fast if </b></p>
<p><b>signal is active with </b></p>
<p><b>Repetition </b></p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Change] </p>
<p>Will be sent </p>
<p>immediately </p>
<p>after value changed.</p>
<p> </p>
<p><b>Transmit fast if signal is </b></p>
<p><b>active </b></p>
<p>(automatically set for all </p>
<p>signals in this message</p>
<p>)</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>33 / 115 </p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue </p>
<p>GenMsgCycleTime </p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue </p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue </p>
<p><b>OnChangeAndIfActiveWi</b></p>
<p><b>thRepetition </b></p>
<p><b>Transmit fast if signal </b></p>
<p><b>is active with </b></p>
<p><b>Repetition </b></p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Change] </p>
<p>Will be sent immediately </p>
<p>after value changed.</p>
<p> </p>
<p><b>Cyclic </b></p>
<p><b>Transmission</b></p>
<p> </p>
<p><b>or </b></p>
<p><b>Transmit fast if </b></p>
<p><b>signal is active with </b></p>
<p><b>Repetition </b></p>
<p><b>or </b></p>
<p><b>OnEvent </b>[Change] </p>
<p>Will be sent </p>
<p>immediately </p>
<p>after value changed.</p>
<p> </p>
<p><b>Transmit fast if signal is </b></p>
<p><b>active with Repetition </b></p>
<p>(automatically set for all </p>
<p>signals in this message</p>
<p>)</p>
<p> </p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue </p>
<p>GenMsgNrOfRepetition</p>
<p><b> </b></p>
<p>GenMsgCycleTime </p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue </p>
<p>GenMsgNrOfRepetition</p>
<p><b> </b></p>
<p>GenMsgCycleTimeFast </p>
<p>GenSigInactiveValue </p>
<p>GenMsgNrOfRepetition </p>
<p>Table 3-6  </p>
<p>Send Type Matrix </p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p> </p>
<p><b>Caution </b></p>
<p>OnChange parameters will always trigger a send event if an overlapping bit of the value </p>
<p>written is equals one.  </p>
<p>For the correct OnChange behaviour the application must cast the value of a signal to </p>
<p>the signal bit length on the bus, before the IlPut macro is called.   </p>
<p> </p>
<p>It is the job of the data base engineer (or a suitable program) to assign the signals to the </p>
<p>messages to get the desired transmission modes for any message and signal.  </p>
<p>The application does not need to know the transmission mode of the signals. It just calls </p>
<p>the </p>
<p>function </p>
<p>to </p>
<p>write </p>
<p>or </p>
<p>read </p>
<p>the </p>
<p>signal </p>
<p>value </p>
<p>(</p>
<p>ILPutTx<b>signalname</b></p>
<p> </p>
<p>or </p>
<p>ILGetRx<b>signalname</b></p>
<p>). Everything else will be done by the Signal Interface.  </p>
<p>In case of periodic transmission modes only two different cycle times could be chosen for </p>
<p>signals  combined  in  the  same  message.  Therefore,  the  cycle  time  of  a  periodically </p>
<p>transmitted </p>
<p>signal </p>
<p>depends </p>
<p>on </p>
<p>the </p>
<p>cycle </p>
<p>time </p>
<p>of </p>
<p>other </p>
<p>signals </p>
<p>defined </p>
<p>for </p>
<p>periodic </p>
<p>transmission  related  to  the  same message. The  application  developer is  responsible for </p>
<p>choosing sensible combinations of signals for a message. She/He will be supported by the </p>
<p>Configuration Tool. </p>
<p>The transmission modes resulted from the combinations as shown in the table above are </p>
<p>explained in detail in chapter 3.7.2 Signal Related Transmission Modes.  </p>
<p><b>3.7.2 </b></p>
<p><b>Signal Related Transmission Modes </b></p>
<p>This  summarizes  the  first  column  of  the  table  above.  The  message  send  type  is  set  to </p>
<p>NoMsgSendType</p>
<p>.  </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>34 / 115 </p>
<p><b>3.7.2.1 </b></p>
<p><b>Cyclic Transmission </b></p>
<p>A static period is used to transmit the signals cyclically using this transmission mode. This </p>
<p>mode could be used to transmit signals which are frequently changing their values like the </p>
<p>rpm of an engine for example. The period should be adapted to the speed the signals are </p>
<p>changing their values. Short periods causes high bus load. </p>
<p>As shown in Figure 3-5  Timing Diagram of the Periodic Transmission Mode signals could </p>
<p>be  updated  asynchronously  to  the  period  of  transmission.  Each  time  the  transmission </p>
<p>takes  place  the  Interaction  Layer  checks  for  the  current  value  of  the  message. This,  of </p>
<p>cause, could lead into the loss of data, if a signal was updated two or more times within a </p>
<p>period. </p>
<p>This Cyclic Transmission Mode actually just copies the signal data. The cyclic transmission </p>
<p>of the messages is done using the </p>
<p><b>GenMsgSendType</b></p>
<p>. </p>
<p> </p>
<p>Figure 3-5 </p>
<p>Timing Diagram of the Periodic Transmission Mode </p>
<p><b>3.7.2.2 </b></p>
<p><b>OnEvent (OnWrite, OnChange) </b></p>
<p>Signals  using  this  transmission  mode  will  be  transmitted  once  each  time  the</p>
<p> IlPut-</p>
<p>function was called. The transmission of the signals may be delayed by the delay timer </p>
<p>(see  chapter  3.7.6  Reduction  of  Transmission  Bursts  and  3.7.7  Delimitation  of  the  Bus </p>
<p>Load)  to  delimit  the  bus  load.  This  transmission  mode,  for  example,  could  be  used  for </p>
<p>event triggered signals as the state of a switch. </p>
<p>Figure 3-6 </p>
<p>Timing  Diagram  of  the Transmission  Mode  OnEvent  –  OnWrite  shows  the </p>
<p>timing diagram of the event triggered transmission mode.  </p>
<p></p>
<p> </p>
<p>Writing a signal which is related to the <b>OnWrite transmission mode </b>causes the </p>
<p>transmission of the message which contains this signal.  </p>
<p>Cyclic Transmission Mode</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>message</p>
<p>GenMsgCycleTime</p>
<p>message <b>(5)</b></p>
<p>IlPut <b>(5)</b></p>
<p>asynchronous</p>
<p>writing</p>
<p>Signal memory</p>
<p>periodical</p>
<p>polling</p>
<p>t</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>35 / 115 </p>
<p></p>
<p> </p>
<p>Changing a signal which is related to the <b>OnChange transmission mode </b>causes the </p>
<p>transmission of the message which contains this signal. </p>
<p>The TxTask checks if the delay time elapsed and decides whether to transmit the message </p>
<p>immediately or to delay the transmission until the delay time elapsed. This could cause the </p>
<p>loss of data, if the signal was updated two or more times while delay time.   </p>
<p> </p>
<p> </p>
<p>Figure 3-6 </p>
<p>Timing Diagram of the Transmission Mode OnEvent – OnWrite </p>
<p>The  Diagram  for <b> OnEvent  –  OnChange </b> looks  like  the  same  way  but  the  decision  on </p>
<p>whether to send or not is met by a comparison between the old and the new signal value. </p>
<p>It will only be sent if the value changes.  </p>
<p><b>3.7.2.3 </b></p>
<p><b>OnEvent with Repetition (OnWrite, OnChange) </b></p>
<p>The transmission of the signals using this transmission mode will be repeated n-times after </p>
<p>the </p>
<p>ILPut-</p>
<p>function was called once. For example, this mode could be used to transmit </p>
<p>important signals which have not to be missed like safety critical information.  </p>
<p>Each </p>
<p>call </p>
<p>of </p>
<p>the </p>
<p>ILPut-</p>
<p>function </p>
<p>sets </p>
<p>the </p>
<p>repeat </p>
<p>counter </p>
<p>(<b>repeat_counter </b></p>
<p><b>[GenMsgNrOfRepetitions] </b></p>
<p><b>= </b></p>
<p><b>n</b>). </p>
<p>The </p>
<p>repeat </p>
<p>counter </p>
<p>is </p>
<p>decremented </p>
<p>with </p>
<p>each </p>
<p>transmission of the signal. The transmission takes place each time the delay timer elapses </p>
<p>and the repeat counter is still greater than 0. After the </p>
<p>ILPut-</p>
<p>function the message will be </p>
<p>sent <b>n </b>times. </p>
<p>Send OnEvent - OnWrite</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>ILPut_<b>(a)</b></p>
<p>message <b>(a)</b></p>
<p>GenMsgDelayTime</p>
<p>ILPut_<b>(b)</b></p>
<p>message <b>(a)</b></p>
<p>ILPut_<b>(a)</b></p>
<p><b>lost signal</b></p>
<p>t</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>36 / 115 </p>
<p> </p>
<p>Figure 3-7 </p>
<p>Timing Diagram of OnEvent with Repetition - <b>OnWrite </b></p>
<p>The  Diagram  for <b> OnEvent  –  OnChange </b> looks  like  the  same  way  but  the  decision  on </p>
<p>whether to send or not is met by a comparison between the old and the new signal value. </p>
<p>It will only be sent if the value changes. </p>
<p><b>3.7.2.4 </b></p>
<p><b>Transmit Fast if Signal is Active  </b></p>
<p>This  transmission  mode  is  a  Cyclic  Transmission  Mode  with  a  trigger  condition.  If  the </p>
<p>decision is met that the signal is active, the message will be send cyclically with the period </p>
<p>GenMsgCycleTimeFast. </p>
<p>  </p>
<p>In the Example in Figure 3-8 </p>
<p>Timing </p>
<p>Diagram </p>
<p>of </p>
<p>the </p>
<p>Transmit </p>
<p>Fast </p>
<p>if </p>
<p>Signal </p>
<p>Active </p>
<p>Transmission  Mode  the  condition  is  defined  as </p>
<p>x!=10</p>
<p>. This  will  cause  the  transmission </p>
<p>mode to transmit the signal with the period </p>
<p>GenMsgCycleTimeFast</p>
<p>. If the signal value is </p>
<p>equal to 10 the signal is not sent. </p>
<p>OnEvent with Repetition - OnWrite</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>message <b>(5)</b></p>
<p>IlPut <b>(5)</b></p>
<p><b> </b></p>
<p>message <b>(5)</b></p>
<p>Signal memory</p>
<p>message <b>(5)</b></p>
<p>GenMsgNrOfRepetitions = 3</p>
<p> </p>
<p>t</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>GenMsgCycleTimeFast</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>37 / 115 </p>
<p> </p>
<p>Figure 3-8 </p>
<p>Timing Diagram of the Transmit Fast if Signal Active Transmission Mode </p>
<p>If two or more signals using this transmission mode are combined to the same message, a </p>
<p>rule is needed to regulate switching between the periods.  </p>
<p>Figure 3-9 </p>
<p>Example  for  Combining  Signals  Related  of  the  Send  Fast  if  Signal Active </p>
<p>Mode  to  the  Same  Message  shows  an  example  where  three  signals  (A,  B  and  C)  are </p>
<p>combined to the same message. If signal A was written and meet the defined condition, </p>
<p>the transmission starts with the fast period. This state is stored in a flag presented by the </p>
<p>three squares (grey = set, white = not set). The switch will cause the fast transmission of </p>
<p>all signals combined to this message. A second write command for signal A won’t cause </p>
<p>anything,  if  the  value of A  still  meets  the  condition.  If  signal B  was  written  and  meet  its </p>
<p>condition  the  flag  for  signal  B  will  be  set.  This  should  cause  the  transmission  mode  to </p>
<p>switch  to  the  fast  period.  But  this  was  already  done  so  nothing  will  happen. The  signal </p>
<p>value for B which is written next does not meet the condition so the transmission should </p>
<p>stop. This won’t happen, because the flag for signal A is still set. To switch the transmission </p>
<p>off all flags need to be reset. This is shown by setting the flag for signal C, reset the flag for </p>
<p>signal A and reset the flag for signal C. After no set flag remains, the transmission stops.  </p>
<p>Short: If signals using the Transmit Fast if Signal Active Mode are combined to the same </p>
<p>message, the message will be transmitted fast if one ore more of them meets its condition. </p>
<p>It will not be transmitted if none of them meet its condition.  </p>
<p>Transmission Fast if Signal Active</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>IlPut <b>(5)</b></p>
<p>message <b>(5)</b></p>
<p>message <b>(20)</b></p>
<p>IlPut <b>(20)</b></p>
<p><b> </b></p>
<p><b>Decision</b></p>
<p>message <b>(20)</b></p>
<p>If(x!=10)</p>
<p>IlPut <b>(10)</b></p>
<p> </p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>t</p>
<p>the signal is active if its value is not 10.</p>
<p>GenMsgCycleTime<b>Fast</b></p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>38 / 115 </p>
<p> </p>
<p>Figure 3-9 </p>
<p>Example for Combining Signals Related of the Send Fast if Signal Active Mode to the Same Message </p>
<p><b>3.7.2.5 </b></p>
<p><b>Transmit Fast if Signal is Active with Repetition </b></p>
<p>This  is  the  same  mode  as  above  with  the  exception  that  the  last  transmission  after  the </p>
<p>signal became inactive will be sent n times. </p>
<p>Transmission Fast if Signal Active with Repetition</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>IlPut <b>(5)</b></p>
<p>message <b>(5)</b></p>
<p>message <b>(20)</b></p>
<p>IlPut <b>(20)</b></p>
<p><b> </b></p>
<p>message <b>(10)</b></p>
<p><b>Decision</b></p>
<p>  </p>
<p>message <b>(20)</b></p>
<p>If(x!=10)</p>
<p>  </p>
<p>IlPut <b>(10)</b></p>
<p> </p>
<p>message <b>(10)</b></p>
<p>  </p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>t</p>
<p>the signal is active if its value is not 10.</p>
<p>GenMsgCycleTime<b>Fast</b></p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>GenMsgNrOfRepetitions = 2</p>
<p>  </p>
<p>GenMsgCycleTime<b>Fast</b></p>
<p> </p>
<p>Figure 3-10 </p>
<p>Timing Diagram of the Transmit Fast if Signal Active Transmission Mode </p>
<p>Multiple Signals in Transmit Fast if Signal Active Mode</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>A</p>
<p>message</p>
<p>Signal Interface</p>
<p>A</p>
<p>B</p>
<p>B</p>
<p>C</p>
<p>A</p>
<p>C</p>
<p>Set</p>
<p>Set</p>
<p>Set</p>
<p>Set</p>
<p>Stop</p>
<p>Stop</p>
<p>Stop</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>GenMsgCycleTimeFast</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>39 / 115 </p>
<p><b>3.7.3 </b></p>
<p><b>Mixed Transmission Mode  </b></p>
<p>The mixed transmission modes are represented of the second column in the table above. </p>
<p>This is a combination of the already shown signal oriented transmission modes and the </p>
<p>cyclic transmission mode for the message the signals are assigned to.  </p>
<p><b>3.7.3.1 </b></p>
<p><b>Cyclic (Message) Transmission OR Cyclic (Signal) Transmission </b></p>
<p>This </p>
<p>is </p>
<p>absolutely </p>
<p>the </p>
<p>same </p>
<p>as </p>
<p>already </p>
<p>described </p>
<p>in </p>
<p>3.7.2.1, </p>
<p>see </p>
<p>there </p>
<p>for </p>
<p>more </p>
<p>information.  </p>
<p><b>3.7.3.2 </b></p>
<p><b>Cyclic (Message) Transmission OR OnEvent [Write] </b></p>
<p>The signal is sent cyclically with the period </p>
<p>GenMsgCycleTime</p>
<p> and additionally after an </p>
<p>IlPut-</p>
<p>function call.  </p>
<p> </p>
<p>Figure 3-11 </p>
<p>Mixed Transmission Mode – Cyclic OR OnEvent [Write] </p>
<p>The  cyclic  transmission  is  delayed  because  of  the </p>
<p>GenMsgDelayTime</p>
<p>  that  has  to  be </p>
<p>waited until the next transmission is possible.  As a result two cyclic messages can have a </p>
<p>distance that is smaller than </p>
<p>GenMsgCycleTime</p>
<p>.  </p>
<p><b>3.7.3.3 </b></p>
<p><b>Cyclic (Message) Transmission OR OnEvent [Write] with Repetition </b></p>
<p>The  same  behaviour  as  above  but  the  event  triggered  message  transmission  will  be </p>
<p>performed </p>
<p>GenMsgNrOfRepetitions</p>
<p> times with the period of </p>
<p>GenMsgCycleTimeFast</p>
<p>. </p>
<p>The delay times are taken into account.  </p>
<p>Mixed Transmission Mode - Cyclic OR OnEvent [Write]</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>message (cycle)</p>
<p>GenMsgCycleTime</p>
<p>message (cycle)</p>
<p><b>20</b></p>
<p>message (cycle)</p>
<p>message <b>(20)</b></p>
<p>GenMsgCycleTime</p>
<p>GenMsgCycleTime</p>
<p>message (cycle)</p>
<p>GenMsgDelayTime</p>
<p>GenMsgDelayTime</p>
<p>GenMsgDelayTime GenMsgDelayTime</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>40 / 115 </p>
<p><b>3.7.3.4 </b></p>
<p><b>Cyclic (Message) Transmission OR OnEvent [Change] </b></p>
<p>This is the same transmission mode as shown in 3.7.3.2 with the exception that the trigger </p>
<p>for sending the event message is a change of the signal value. In the example below the </p>
<p>message value changes from 5 to 20. This change is the trigger for the transmission.  </p>
<p> </p>
<p>Figure 3-12 </p>
<p>Mixed Transmission Mode – Cyclic OR OnEvent [Change] </p>
<p><b>3.7.3.5 </b></p>
<p><b>Cyclic (Message) Transmission OR OnEvent [Change] with Repetition </b></p>
<p>The  same  behaviour  as  above  but  the  event  triggered  message  transmission  will  be </p>
<p>performed </p>
<p>GenMsgNrOfRepetitions</p>
<p> times with the period of </p>
<p>GenMsgCycleTimeFast</p>
<p>. </p>
<p>The delay times are taken into account. </p>
<p><b>3.7.3.6 </b></p>
<p><b>Cyclic (Message) Transmission OR Transmit Fast If Signal is Active  </b></p>
<p>Choosing this combination, the signal is transmitted cyclically with the </p>
<p>GenMsgCycleTime</p>
<p> </p>
<p>until </p>
<p>the </p>
<p>signal </p>
<p>becomes </p>
<p>active. </p>
<p>Then </p>
<p>the </p>
<p>signal </p>
<p>is </p>
<p>transmitted </p>
<p>with </p>
<p>the </p>
<p>GenMsgCycleTimeFast</p>
<p> until the signal becomes inactive. The period changes then back </p>
<p>to G</p>
<p>enMsgCycleTime</p>
<p>. </p>
<p>Mixed Transmission Mode - Cyclic OR OnEvent [Change]</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>5</p>
<p>message (5)</p>
<p>GenMsgCycleTime</p>
<p>message (5)</p>
<p><b>20</b></p>
<p>message (20)</p>
<p>Decision</p>
<p>message <b>(20)</b></p>
<p>GenMsgCycleTime</p>
<p>GenMsgCycleTime</p>
<p>message (20)</p>
<p>If(x&gt;10)</p>
<p>GenMsgDelayTime</p>
<p>GenMsgDelayTime</p>
<p>GenMsgDelayTime GenMsgDelayTime</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>41 / 115 </p>
<p> </p>
<p>Figure 3-13 </p>
<p>Mixed Transmission Mode – Cyclic OR Fast If Signal is Active </p>
<p><b>3.7.3.7 </b></p>
<p><b>Cyclic (Message) Transmission OR Transmit Fast If Signal is Active with </b></p>
<p><b>Repetition </b></p>
<p>The same behaviour as above but the last message of the fast transmission phase is sent </p>
<p>GenMsgNrOfRepetions</p>
<p> </p>
<p>times </p>
<p>before </p>
<p>switching </p>
<p>to </p>
<p>the </p>
<p>GenMsgCycleTime</p>
<p> </p>
<p>sending </p>
<p>period. </p>
<p>Transmission Fast if Signal Active Mode</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>IlPut <b>(5)</b></p>
<p>message <b>(5)</b></p>
<p>message <b>(20)</b></p>
<p>IlPut <b>(20)</b></p>
<p><b> </b></p>
<p>message <b>(20)</b></p>
<p><b>Decision</b></p>
<p>message <b>(20)</b></p>
<p>If(x!=10)</p>
<p>IlPut <b>(10)</b></p>
<p> </p>
<p>GenMsgCycleTime</p>
<p>GenMsgCycleTime</p>
<p>message <b>(10)</b></p>
<p>message (10)</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>t</p>
<p>the signal is active if its value is not 10.</p>
<p>GenMsgCycleTime<b>Fast</b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>42 / 115 </p>
<p> </p>
<p>Figure 3-14 </p>
<p>Mixed Transmission Mode – Cyclic OR Fast If Signal is Active with Repetition </p>
<p><b>3.7.3.8 </b></p>
<p><b>Cyclic (Message) Transmission OR NoSigSendType </b></p>
<p>The message is sent cyclically with GenMsgCycleTime and with it all signals.  </p>
<p><b>3.7.4 </b></p>
<p><b>Advanced Transmission Modes </b></p>
<p>These  combinations  are  only  used  by  a  few  OEMs  and  described  in  the  OEM-specific </p>
<p>Interaction Layer documentation.  </p>
<p><b>3.7.5 </b></p>
<p><b>Notification Classes </b></p>
<p>Two </p>
<p>types </p>
<p>of </p>
<p>notification </p>
<p>classes </p>
<p>are </p>
<p>available </p>
<p>which </p>
<p>cause </p>
<p>the </p>
<p>notification </p>
<p>of </p>
<p>the </p>
<p>application  by  flag  or  function.  The  flags  are  all  set  to  0  at  the  start  of  transmission </p>
<p>(Function </p>
<p>IlTxStart()</p>
<p> ). </p>
<p></p>
<p> </p>
<p>The Configuration Tool can be used to assign a separate <b>Confirmation Class </b>for each </p>
<p>signal. This event will be set by the Data Link Layer if the particular message was sent </p>
<p>on the bus.   </p>
<p>If a flag is used for notification, the application is responsible for clearing this flag.  </p>
<p> </p>
<p><b>Caution </b></p>
<p>This callback function is called in interrupt context! Reduce the runtime of this function to </p>
<p>a minimum<b> </b></p>
<p> </p>
<p> The time between a transmit request and the actual transmission of a signal can be </p>
<p>supervised by timeout monitoring. A <b>Timeout Class </b>will be set, if the signals were not </p>
<p>transmitted within a defined period of time. </p>
<p> </p>
<p>Mixed Transmission Mode - Cyclic OR</p>
<p>                                             Transmission Fast if Signal Active with Repetition</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>IlPut <b>(5)</b></p>
<p>message <b>(5)</b></p>
<p>message <b>(20)</b></p>
<p>IlPut <b>(20)</b></p>
<p><b> </b></p>
<p>message <b>(10)</b></p>
<p><b>Decision</b></p>
<p>message <b>(20)</b></p>
<p>If(x!=10)</p>
<p>IlPut <b>(10)</b></p>
<p> </p>
<p>GenMsgCycleTime</p>
<p>message <b>(10)</b></p>
<p>message (10)</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>t</p>
<p>the signal is active if its value is not 10.</p>
<p>GenMsgCycleTime<b>Fast</b></p>
<p>IlTask</p>
<p>IlTask</p>
<p>IlTask</p>
<p>GenMsgNrOfRepetitions = 2</p>
<p>GenMsgCycleTime<b>Fast</b></p>
<p>message <b>(10)</b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>43 / 115 </p>
<p><b>3.7.6 </b></p>
<p><b>Reduction of Transmission Bursts </b></p>
<p>To  prevent transmission  bursts  caused  by  interference the  start of periodic  transmission </p>
<p>could be delayed. Therefore, a start delay time related to a message could be defined at </p>
<p>compile time. Take e.g. three periodically transmitted messages. If the transmission of the </p>
<p>three messages would be started at the same time, the simultaneous transmission of two </p>
<p>or three messages will take place at same points in time. To delay the beginning of the </p>
<p>periodic </p>
<p>transmission </p>
<p>of </p>
<p>some </p>
<p>messages </p>
<p>is </p>
<p>an </p>
<p>appropriate </p>
<p>way </p>
<p>to </p>
<p>reduce </p>
<p>these </p>
<p>simultaneous transmissions.  </p>
<p><b>3.7.7 </b></p>
<p><b>Delimitation of the Bus Load </b></p>
<p>To  delimit  the  bus  load  a  delay  time  will  be  inserted  after  each  transmission  of  data. A </p>
<p>defined delay time is related to a message. This means that delay time will be inserted no </p>
<p>matter  what  transmission  mode  was  used  or  by  which  signal  the  transmission  of  the </p>
<p>message was caused.  </p>
<p>The  usage  of  a  delay  time  may  cause  the  delay  of  the  transmission.  For  example  the </p>
<p>combination  of  a  periodically  transmitted  message  and  a  directly  transmitted  message </p>
<p>could cause a delay as shown in Figure 3-15  Delay Time to Delimit Bus Load. The dashed </p>
<p>arrows stand for periodically transmitted messages. If the direct transmission of a signal </p>
<p>was requested by calling ILPut while the timer GenMsgDelayTime was not elapsed yet, the </p>
<p>transmission of the signal will be delayed till the timer GenMsgDelayTime is elapsed. </p>
<p>To ensure that the message is minimum delayed the GenMsgDelayTime, one tx task cycle </p>
<p>is added to the delay counter, so a message is delayed for GenMsgDelayTime + a time &lt; </p>
<p>tx task cycle. </p>
<p>This </p>
<p>ensures </p>
<p>that </p>
<p>the </p>
<p>message </p>
<p>is </p>
<p>never </p>
<p>transmitted </p>
<p>before </p>
<p>the </p>
<p>expiration </p>
<p>of </p>
<p>GenMsgDelayTime. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>44 / 115 </p>
<p> </p>
<p>Figure 3-15 </p>
<p> Delay Time to Delimit Bus Load </p>
<p><b>3.7.8 </b></p>
<p><b>Transmission Timeout Monitoring </b></p>
<p>The  Interaction  Layer  provides  a  feature  to  monitor  the  transmission  of  signals.  The </p>
<p>timeout monitoring for transmitted signals was intended to supervise the time between a </p>
<p>transmit  request  and  the  actual  transmission  of  the  signal.  Therefore,  a  timer  will  be </p>
<p>activated, after a transmission was requested. If the successful transmission was notified </p>
<p>(confirmation), the timer will be deactivated. If the timer elapsed before the confirmation, </p>
<p>the application will be notified about the timeout. </p>
<p>To configure timeout monitoring for a signal the flag or function for the notification needs to </p>
<p>be chosen in the Configuration Tool. If no notification was chosen, the timeout monitoring </p>
<p>will be deactivated for this signal. </p>
<p><b>3.7.9 </b></p>
<p><b>Transmission of Initialization Messages </b></p>
<p>The </p>
<p>Interaction </p>
<p>Layer </p>
<p>provides </p>
<p>a </p>
<p>function </p>
<p>to </p>
<p>transmit </p>
<p>a </p>
<p>set </p>
<p>of </p>
<p>messages, </p>
<p>called </p>
<p>IlSendOnInitMsg()</p>
<p>.  This  function  is  intended  to  be  used  at  initialization  time.  It  will </p>
<p>transmit each of the messages in the set only once. The transmission modes of the signals </p>
<p>and messages will be ignored. The messages belonging to the set can be configured at </p>
<p>compile time by using the Configuration Tool.  </p>
<p>Delay Time</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>ILPut</p>
<p>message</p>
<p>GenMsgCycleTime</p>
<p>T_cycle elapsed</p>
<p>GenMsgCycleTime</p>
<p>ILPut</p>
<p>GenMsgDelayTime</p>
<p>GenMsgDelayTime</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>45 / 115 </p>
<p><b>3.8 </b></p>
<p><b>Data Reception </b></p>
<p><b>3.8.1 </b></p>
<p><b>Reception Concept </b></p>
<p>To  receive  new  data  the  Interaction  Layer  has  to  process  the  messages  immediately. </p>
<p>Therefore all tasks will be interrupted to copy the new data to the RAM. On the other hand </p>
<p>the time of interrupt should be as short as possible. By that reason all the jobs which are </p>
<p>not time critical like for example the notification of the application are done by a periodic </p>
<p>task. Therefore the Interaction Layer provides several functions and an interrupt handler. </p>
<p>Further, the Interaction Layer provides several notification classes for example to notify the </p>
<p>application  about  updated  values.  The  usual  response  of  the  application  is  to  read  the </p>
<p>updated  signal  values  by  calling  functions  or  macros  provided  by  the  Signal  Interface </p>
<p>(</p>
<p>ILGetRx<b>signalname</b></p>
<p>).  Everything  else  will  be  done  by  the  Signal  Interface  and  the </p>
<p>underlying Message Manager.  </p>
<p><b>3.8.2 </b></p>
<p><b>Notification Classes </b></p>
<p>Four </p>
<p>types </p>
<p>of </p>
<p>notification </p>
<p>classes  are </p>
<p>available </p>
<p>which </p>
<p>cause  the  notification </p>
<p>of </p>
<p>the </p>
<p>application by flag or function. The flags are all set to 0 at the start of receiving ( Function </p>
<p>IlRxStart()</p>
<p> ). All classes are optional and in order to save code and run time they can </p>
<p>be removed by a configuration switch at compile time, set in the Configuration Tool. </p>
<p> </p>
<p>1)  If a message was received an <b>Indication Class </b>will be set by the Interaction Layer. By </p>
<p>this event the application can determine whether a new message has arrived.   </p>
<p>If a flag is used for notification, the application can always check the message contents </p>
<p>for  changes  and  perform  tasks  accordingly,  if  the  flag  is  set.  The  application  is </p>
<p>responsible to clear the flag which was set by the Interaction Layer.  </p>
<p>If needed, multiple indication flags for a single signal can be configured. By this feature </p>
<p>several parts of the application can be notified independently. </p>
<p>2)  For periodic receive messages the Interaction Layer takes care of timeout monitoring. A </p>
<p><b>Timeout Class </b>is set, if a message which should be received periodically arrives too </p>
<p>late.  Too  late  means  that  a  new  message  with  the  same  ID  was  not  received  after </p>
<p>timeout time (Example: timeout time = 2.5x cycle time) elapsed. The timeout time of a </p>
<p>CAN-message is defined at compile time. All timeout functions are running in the same </p>
<p>context as the </p>
<p>IlRxTask()</p>
<p> does.   </p>
<p>If a flag is used for notification, the flag will be set and cleared by the Interaction Layer. </p>
<p>The application is also allowed to clear the flag, but the Interaction Layer will always </p>
<p>overwrite it, if an event occurred. </p>
<p>3)  The <b>First-Value Class </b>notifies the application about the first reception of a signal. This </p>
<p>is done by setting an event each time a signal has been received. Actually, the First-</p>
<p>Value Class and the Indication Class are working the same way.    </p>
<p>Only a flag could be used as notification mechanism for this class. The flag will be set </p>
<p>by the Interaction Layer. The application is responsible to clear the flag. The flag will be </p>
<p>reset by </p>
<p>IlRxStart</p>
<p> to recognize for example the first received message after power-</p>
<p>on or bus-off. </p>
<p>4)  A <b>Data-Changed Class </b>is provided for ECUs with processors of a higher performance </p>
<p>class. This event is set if the message contents of an incoming CAN message differs </p>
<p>from the contents of the memory in the controller's CAN buffer. For Full-CAN objects </p>
<p>this  requires  a  copy  of  the  message  in  RAM  (increased  RAM  requirement  in  the </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>46 / 115 </p>
<p>controller).  Using  a  mask,  portions  of  the  message  can  be  masked  out  for  the </p>
<p>comparison.  Since  the  mask  is  applied  to  the  message  bit  wise,  changes  involving </p>
<p>partial  information  of  a  signal  can  be  used  (e.g.  only  the  upper  12  bits  of  a  16  bit </p>
<p>signal).  </p>
<p>Only a flag can be used as notification mechanism for this class. The flag will be set by </p>
<p>the Interaction Layer. The application is responsible to clear the flag. </p>
<p><b>3.8.3 </b></p>
<p><b>Timeout Monitoring </b></p>
<p>The  periodic receipt  of messages  which  are  periodically  transmitted  by  another network </p>
<p>node  could  be  overseen  by  timeout  monitoring.  For  this  purpose  a  time-out  timer  is </p>
<p>provided  by  the  Interaction  Layer.  This  timer  will  be  restarted  each  time  the  related </p>
<p>message was received. If the timeout timer elapses before the next related message was </p>
<p>received, the application will be notified (see chapter 3.8.2 Notification Classes). When a </p>
<p>timeout  occurs  the  current  value  of  the  message  is  not  valid  anymore.  In  this  case  the </p>
<p>message's memory area in the controller can be pre-filled with 0 (zero) or with a default </p>
<p>value (if defined) in order to preserve emergency operation of the application. </p>
<p>The attribute </p>
<p>GenSigTimeoutTime_&lt;ECU&gt;</p>
<p> in the network database needs to be set to </p>
<p>activate the timeout monitoring. The attribute GenSigTimeoutMsg_&lt;ECU&gt; may  be set to </p>
<p>the default value. Then the message, which contains the current signal, will be monitored. </p>
<p>In the following example the configuration of the attributes in the network database will be </p>
<p>shown.  A </p>
<p>network </p>
<p>node  A </p>
<p>transmits </p>
<p>a </p>
<p>signal </p>
<p>to </p>
<p>network </p>
<p>node </p>
<p>B </p>
<p>by </p>
<p>the </p>
<p>Periodic </p>
<p>Transmission  Mode. Network node  B  as  the  receiver of  the  signal  wants  to  monitor the </p>
<p>periodic </p>
<p>reception. </p>
<p>Therefore, </p>
<p>the </p>
<p>attributes </p>
<p>GenSigTimeoutMsg_&lt;ECU&gt; </p>
<p>and </p>
<p>GenSigTimeoutTime_&lt;ECU&gt; </p>
<p>needs </p>
<p>to </p>
<p>be </p>
<p>adapted </p>
<p>for </p>
<p>this </p>
<p>signal. </p>
<p>For </p>
<p>the </p>
<p>timeout </p>
<p>monitoring  by  the  network  node  B  the  name  of  the  two  attributes  must  be  changed  to </p>
<p>GenSigTimeoutMsg_<b>B </b>and GenSigTimeoutTime_<b>B</b>. If another network node, for example </p>
<p>network  node  XY, </p>
<p>wants  to  monitor  the  reception  of  this  signal,  too,  the  attributes </p>
<p>GenSigTimeoutMsg_<b>XY </b> and  GenSigTimeoutTime_<b>XY </b> have  to  be  added.  Further  the </p>
<p>values  need  to  be  defined for the  attributes.  For  the  attribute  GenSigTimeoutMsg_B  we </p>
<p>need to fill in the message ID of the message which includes the signal to be monitored. </p>
<p>The  attribute  GenSigTimeoutTime_B  contains  the  timeout  time.  If  the  signal  was  not </p>
<p>received within this time, the application will be notified.  </p>
<p>The value of the dbc attribute GenSigTimeoutTime_&lt;ECU&gt; is displayed on each rx signal </p>
<p>in the GENy GUI. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>47 / 115 </p>
<p> </p>
<p> </p>
<p><b>Caution </b></p>
<p>If the Timeout Time is editable the value is <b>not </b>derived from the dbc attribute  </p>
<p>GenSigTimeoutTime_&lt;ECU&gt;, in this case the timeout time can only be edited in the </p>
<p>GENy GUI. </p>
<p> </p>
<p>For diagnosis efforts the Interaction Layer provides an advanced timeout monitoring for </p>
<p>messages. This includes the possibility to reload the timeout timer and the message </p>
<p>related notification of the application when this timer elapsed again. I.e. after the first </p>
<p>timeout occurred the Interaction Layer will notify the application about the timeout of each </p>
<p>signal included in the message. Then the application can reload the timeout timer. After </p>
<p>this timer elapsed again, the Interaction Layer will notify the application about the timeout </p>
<p>of the whole message. After the reload of the timer the application won’t be notified about </p>
<p>the signal’s timeout again. </p>
<p><b>3.8.4 </b></p>
<p><b>Dynamic Timeout Monitoring </b></p>
<p>If it is required to assign different timeout values to a timer or to start and stop at timer at </p>
<p>run-time, a special API can be activated for each signal. The change of one signal of a </p>
<p>message  influences  all  signal  timers  of  a  message.  The  dynamic  timeout  counters  are </p>
<p>treated  by  the  state  machine  in  the  same  way  as  normal  timeout  events.  The  timeout </p>
<p>defined in the database is the initial timer, which is set on IlInitPowerOn. </p>
<p> </p>
<p><b>Example</b> </p>
<p>You have to supervise a signal, which is received every 200 ms. If a first timeout after </p>
<p>500 ms is detected, another timeout is started. After the following timeout of 4 s, a fault </p>
<p>memory entry has to be logged. </p>
<p> </p>
<p>/* check timeout flag */ </p>
<p>if (IlGetRxGwDataTimeout()) </p>
<p>{ </p>
<p>  /* clear timeout flag */ </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>48 / 115 </p>
<p>  IlClrRxGwDataTimeout(); </p>
<p>  /* read current timeout value */ </p>
<p>  if (<b>IlGetRxGwDataDynRxTimeout() </b>== 500) </p>
<p>  { </p>
<p>    /* First Timeout Level */ </p>
<p>    <b>IlSetRxGwDataDynRxTimeout(4000); </b>/* assign new timeout value */ </p>
<p>    <b>IlStartRxGwDataDynRxTimeout();</b>/* start timer */ </p>
<p>    ToggleEcuState(); </p>
<p>  }else </p>
<p>  { </p>
<p>    /* Second Timeout Level */ </p>
<p>    <b>IlStopRxGwDataDynRxTimeout();</b>/* stop timer */ </p>
<p>    SetErrorMemoryEvent(); </p>
<p>    /* Reset the timeout start, </p>
<p>    if the signal is received the next time */ </p>
<p>    <b>IlSetRxGwDataDynRxTimeout(500); </b></p>
<p>  } </p>
<p>}</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Caution </b></p>
<p>The timeout value access is implemented as macro. The parameter </p>
<p>IlSetRx&lt;SignalName&gt;DynRxTimeout and the return value of </p>
<p>IlGetRx&lt;SignalName&gt;DynRxTimeout is always IltRxTimeoutCounter which is defined to </p>
<p>vuint16. Due to this, the maximum timeout counter is 65535. </p>
<p> </p>
<p><b>3.9 </b></p>
<p><b>Signal status information (UpdateBits) </b></p>
<p>The UpdateBit Support is used to indicate whether the application has updated the Signal </p>
<p>value.[8]  Only  Signals  and  Signal  Groups  can  have  UpdateBits. A  partial  signal  cannot </p>
<p>have </p>
<p>an </p>
<p>UpdateBit. </p>
<p>Multiplexed </p>
<p>Signals </p>
<p>can </p>
<p>have </p>
<p>UpdateBits </p>
<p>if </p>
<p>the </p>
<p>UpdateBit </p>
<p>is </p>
<p>multiplexed with the same multiplexor value. </p>
<p> </p>
<p><b>Info </b></p>
<p>For detailed information see AUTOSAR Specification of Module COM [8]<b> </b></p>
<p> </p>
<p><b>3.9.1 </b></p>
<p><b>Configuration </b></p>
<p>An UpdateBit has no configurable attributes in GENy. There is <b>no </b>special switch in GENy </p>
<p>to enable UpdateBit support.  </p>
<p> </p>
<p><b>Caution </b></p>
<p></p>
<p> </p>
<p>UpdateBits cannot be used in combination with Multiplex API Raw. </p>
<p></p>
<p> </p>
<p>UpdateBit Support needs the CanCopyToCan Driver API.[1] </p>
<p></p>
<p> </p>
<p>UpdateBit cannot be used in combination with dynamic DLC. </p>
<p></p>
<p> </p>
<p>GroupSignals (partial signals) cannot have UpdateBits. </p>
<p></p>
<p> </p>
<p>UpdateBit cannot be used if common buffer is used without identity manager.  </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>49 / 115 </p>
<p><b>3.9.1.1 </b></p>
<p><b>DBC File </b></p>
<p>In the DBC file an UpdateBit has the size of one Bit and the postfix “_UB”. The UpdateBit </p>
<p>name is a combination between the UpdateBit Signal name and the postfix “_UB” e.g. the </p>
<p>Signal &lt;SignalName&gt; has the UpdateBit &lt;SignalName&gt;_UB. </p>
<p>UpdateBit dbc file attributes: </p>
<p>GenSigSendType </p>
<p>Fix: NoSigSendType </p>
<p>GenSigTimeoutTime_&lt;ECU&gt; </p>
<p>Message specific timeout time </p>
<p> </p>
<p>Signal with UpdateBit attributes: </p>
<p>GenSigTimeoutTime_&lt;ECU&gt; </p>
<p>UpdateBit specific timeout time </p>
<p> </p>
<p><b>3.9.2 </b></p>
<p><b>UpdateBit Transmission </b></p>
<p>If the application writes via a Put Macro a Signal with an UpdateBit, the UpdateBit will be </p>
<p>set to one. The UpdateBit is reset to zero after the message is transmitted once. </p>
<p> </p>
<p><b>Info </b></p>
<p></p>
<p> </p>
<p>If a message has signals with UpdateBits the PreTransmitt function is used </p>
<p>by the Il_Vector.  </p>
<p></p>
<p> </p>
<p>RDS macros can’t be used in combination with UpdateBits. </p>
<p></p>
<p> </p>
<p>It is possible to use the AUTOSAR Signal Interface in combination with </p>
<p>UpdateBits. </p>
<p> </p>
<p><b>3.9.3 </b></p>
<p><b>UpdateBit Reception </b></p>
<p>The  Indication  Flag/Function  of  a  Signal  with  UpdateBit  will  only  be  set/called  if  the </p>
<p>UpdateBit of the Signal is set. </p>
<p><b>3.9.3.1 </b></p>
<p><b>Timeout </b></p>
<p>A Signal with an UpdateBit can have a Signal specific timeout. The Signal specific timeout </p>
<p>monitors  the  time  between  two  UpdateBits  equal  1.  The  value  of  the  DBC  Attribute </p>
<p>“GenSigTimeoutTime” on the Signal with the UpdateBit is the  UpdateBit specific timeout </p>
<p>time.  </p>
<p>The value of the DBC Attribute “GenSigTimeoutTime” is displayed as timeout time on each </p>
<p>RxSignal in the GENy GUI. If the timeout time is editable in the GENy GUI the value is <b>not </b></p>
<p>derived from the DBC Attribute “GenSigTimeoutTime” and must be configured in the GUI. </p>
<p> </p>
<p><b>Info </b></p>
<p>The  UpdateBit  specific  timeout  can  be  used  in  combination  with  Dynamic </p>
<p>Timeout Monitoring.  </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>50 / 115 </p>
<p><b>3.10 </b></p>
<p><b>Multiple Channel Support </b></p>
<p><b>3.10.1 </b></p>
<p><b>Overview </b></p>
<p>Sometimes two or more CAN Controllers are used on the same CAN bus. Therefore, the </p>
<p>CAN Driver and the Interaction Layer have to be adapted to multi channel support. This </p>
<p>could be done in two ways. First, the whole source code could be doubled. We will refer to </p>
<p>this as Crx (Code replicated) Interaction Layer. Second, a single source code could work </p>
<p>with doubled data buffers. We will refer to this as Idx (Indexed) Interaction Layer because </p>
<p>the access to the data buffers will be controlled by an index. The following two sections will </p>
<p>describe these two possibilities.  </p>
<p>Note that only API services which relate to one specific channel, i.e. one physical medium </p>
<p>have  to  distinguish  between  different  channels.  Signal  access  services  are  not  channel </p>
<p>related. </p>
<p> </p>
<p><b>3.10.2 </b></p>
<p><b>Idx (Indexed) Interaction Layer </b></p>
<p>An Idx Interaction Layer will work on two or more CAN busses without doubling of code. It </p>
<p>will work with multiple data buffers which can be accessed by an index. This results in a </p>
<p>kind of array. And even the access by the application will be similar to an array. Function </p>
<p>names  won’t  get  a  suffix  as  for  the  Crx  Interaction  Layer.  The  access  to  the  different </p>
<p>buffers will be done by a parameter. We will refer to this parameter as index.  </p>
<p>For example the function call </p>
<p>IlTxTask()</p>
<p> of a single channel Interaction Layer will result </p>
<p>in </p>
<p>IlTxTask( <b>0 </b>) </p>
<p>for channel number 0 and </p>
<p>IlTxTask( <b>1 </b>)</p>
<p> for channel number 1 of </p>
<p>an Idx Interaction Layer. However, the initialization of all the channels will be handled by </p>
<p>the single function </p>
<p>IlInitPowerOn()</p>
<p>. </p>
<p><b>3.11 </b></p>
<p><b>Advanced Communication Features </b></p>
<p><b>3.11.1 </b></p>
<p><b>Physical Multiple and Multiple Configuration ECU </b></p>
<p>Please see in [2]. </p>
<p> </p>
<p><b>3.11.2 </b></p>
<p><b>Multiplexed Signals </b></p>
<p>To save message IDs the Interaction Layer supports the use of several message layouts </p>
<p>for a single message. The signals combined in this several layouts are called multiplexed </p>
<p>signals.  The  current  message  layout  will  be  indicated  by  a  multiplexor  signal  (mode </p>
<p>signal).  </p>
<p><b>3.11.2.1 </b></p>
<p><b>Standard API </b></p>
<p>The </p>
<p>Interaction </p>
<p>Layer </p>
<p>will </p>
<p>provide </p>
<p>data </p>
<p>access </p>
<p>and </p>
<p>notification </p>
<p>mechanisms </p>
<p>for </p>
<p>all </p>
<p>multiplexed signals. I.e. multiplexed signals will be encapsulated by the Interaction Layer. </p>
<p>However, </p>
<p>here </p>
<p>are </p>
<p>some </p>
<p>restrictions </p>
<p>and </p>
<p>some </p>
<p>helpful </p>
<p>information </p>
<p>for </p>
<p>the </p>
<p>use </p>
<p>of </p>
<p>multiplexed signals: </p>
<p>The several layouts are defined in the network database </p>
<p>The current layout will be chosen by the use of a multiplexor signal (mode signal) </p>
<p>With multiplexed signals only the Cyclic transmission modes can be used  </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>51 / 115 </p>
<p>The actual cycle time of a multiplexed signal can be calculated by the following formula: </p>
<p>Message Cycle Time * Number of Message Layouts = Multiplexed Signal Cycle Time   </p>
<p>A delay time has to be specified for messages with multiplexed signals by means of the </p>
<p>attribute GenMsgDelayTime. </p>
<p>Data changed flags are not supported for multiplexed signals </p>
<p>Note  that  multiplexed  signals  are  provided  by  the  Interaction  Layer  in  version  3.27  and </p>
<p>higher.  </p>
<p><b>3.11.2.2 </b></p>
<p><b>Raw API </b></p>
<p>The  Interaction  Layer  provides  a  raw  interface  for  multiplex  signals.  The  advantage  is </p>
<p>runtime improvement, reduction of Ram and Rom requirements.  </p>
<p> </p>
<p><b>Example</b> </p>
<p>The following code example demonstrates the implementation of a reception of a </p>
<p>multiplexed signal. </p>
<p></p>
<p> </p>
<p>Configure a PreCopy function for the multiplex message in the CAN Driver. </p>
<p></p>
<p> </p>
<p>Configure RDS access to the signals multiplexor signal and multiplexed signals, of </p>
<p>the message MultiplexMessage. MultiplexedSignal is for example valid, if the </p>
<p>MultiplexorSignal is 0x10 </p>
<p>vuint16 MyMultiplexedSignal; </p>
<p>/* Implementation of the reserved indication function */ </p>
<p>void ApplRawApiMultiplexMessagePrecopy(CanReceiveHandle </p>
<p>rxObject) </p>
<p>{ </p>
<p>/* Get the multiplexor value */ </p>
<p>vuint8 MyMultiplexorSignal; </p>
<p>MyMultiplexorSignal = IlGetRxCANMultiplexorSignal(); </p>
<p> </p>
<p>/* Check for the correct multiplexor */ </p>
<p>if ( MyMultiplexorSignal == 0x10 ) </p>
<p>{ </p>
<p>/* Get the multiplexed signal */ </p>
<p>MyMultiplexedSignal = IlGetRxCANMultiplexedSignal(); </p>
<p>} </p>
<p>if ( MyMultiplexorSignal == 0xA3 ) </p>
<p>{ </p>
<p>/* </p>
<p>Implement the reception of other Multiplexed Signals </p>
<p>for the Multiplexorvalue 0xA3 here </p>
<p>*/ </p>
<p>} </p>
<p>………… </p>
<p>/* The returnvalue kCanNoCopyData is mandatory */ </p>
<p>return kCanNoCopyData; </p>
<p>}</p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>52 / 115 </p>
<p> </p>
<p><b>Example</b> </p>
<p>The following code example shows the implementation of a transmission of a </p>
<p>multiplexed signal. </p>
<p></p>
<p> </p>
<p>Configure a Pretransmit function for the multiplex message in the Can Driver. </p>
<p></p>
<p> </p>
<p>Configure Rds access to write the Multiplexor signal and multiplexed signals, of the </p>
<p>message multiplex message. MultiplexedSignal for example is valid, if the </p>
<p>MultiplexorSignal is 0x10 </p>
<p> </p>
<p>vuint16 MyMultiplexedSignal; </p>
<p>vuint16 MyMultiplexorValue; </p>
<p> </p>
<p>void </p>
<p>ApplRawApiMultiplexMessagePretransmit(CanTransmitHandle </p>
<p>txObject) </p>
<p>{ </p>
<p>  /* Implementation of the Multiplexor toggle mechanism */ </p>
<p>if ( MyMultiplexorValue == 0x43 ) </p>
<p>{ </p>
<p> IlPutTxCANMultiplexorSignal(0x10); </p>
<p> IlPutTxCANMultiplexedSignal(MyMultiplexedSignal); </p>
<p>/*  </p>
<p>Implement here the transmission of other signals for the </p>
<p>multiplexor 0x10 </p>
<p>*/ </p>
<p>MyMultiplexorValue = 0x10; </p>
<p>} </p>
<p>else if ( MyMultiplexorValue == 0x10 ) </p>
<p>{ </p>
<p>  IlPutTxCANMultiplexorSignal(0x43); </p>
<p>  /*  </p>
<p>Implement here the transmission of other signals for the </p>
<p>multiplexor 0x43 </p>
<p>*/ </p>
<p>MyMultiplexorValue = 0x43; </p>
<p>} </p>
<p>………… </p>
<p>/* The returnvalue kCanNoCopyData is mandatory */ </p>
<p>return kCanNoCopyData; </p>
<p>}</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>53 / 115 </p>
<p><b>3.11.3 </b></p>
<p><b>Manipulation of the Notification Frequency </b></p>
<p>The </p>
<p>periodic </p>
<p>tasks </p>
<p>for </p>
<p>transmission </p>
<p>and </p>
<p>reception </p>
<p>(See </p>
<p>3.4 </p>
<p>Main </p>
<p>Functions) </p>
<p>are </p>
<p>responsible for all the cyclic tasks the Interaction Layer has to do. Both need runtime and </p>
<p>for this reason the application developer wants to set the cycle time to invoke the tasks as </p>
<p>high  as  possible. A  high  cycle  time  has  the  major  drawback  that  the  notification  about </p>
<p>urgent events will slow down, too. This is because the events will be checked within these </p>
<p>tasks. I.e. they are checked in the same cycle time. </p>
<p>To </p>
<p>solve </p>
<p>this </p>
<p>problem </p>
<p>the </p>
<p>Interaction </p>
<p>Layer </p>
<p>provides </p>
<p>a </p>
<p>function </p>
<p>called </p>
<p>IL&lt;Tx/Rx&gt;StateTask</p>
<p>. This function is responsible for the notification of the application. </p>
<p>It will check, if there was any event the application wants to be notified about and notifies </p>
<p>the  application. The  function  will  be  invoked  by  the  IL&lt;Tx/Rx&gt;Task  in  the  defined  cycle </p>
<p>time. Further this function can be invoked by the application any time it is necessary. So </p>
<p>the developer can shorten the time between checking for new events and for notification. </p>
<p>To reduce the time between an event and the notification even more, the application can </p>
<p>be notified in interrupt context. This feature can be configured by the Configuration Tool for </p>
<p>each  message  and  will  have  effect  on  each  signal  the  message  contains.  Checking  for </p>
<p>events </p>
<p>in </p>
<p>interrupt </p>
<p>context </p>
<p>means </p>
<p>checking </p>
<p>for </p>
<p>events </p>
<p>each </p>
<p>time </p>
<p>a </p>
<p>message </p>
<p>was </p>
<p>transmitted  or </p>
<p>received, </p>
<p>respectively.  This </p>
<p>is </p>
<p>the  fastest </p>
<p>way </p>
<p>to </p>
<p>be  notified </p>
<p>by </p>
<p>the </p>
<p>Interaction Layer. </p>
<p>It’s </p>
<p>recommended </p>
<p>to </p>
<p>think </p>
<p>about </p>
<p>the </p>
<p>consequences </p>
<p>of </p>
<p>using </p>
<p>the </p>
<p>StateTask </p>
<p>or </p>
<p>the </p>
<p>notification  in  interrupt  context,  respectively.  Both  ways  to  speed  up  the  notification  has </p>
<p>pros and cons. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>54 / 115 </p>
<p><b>4 </b></p>
<p><b>Integration </b></p>
<p>This chapter gives necessary information for the integration of the Interaction Layer into an </p>
<p>application environment of an ECU. </p>
<p><b>4.1 </b></p>
<p><b>Include structure </b></p>
<p>To use the Vector Interaction Layer, only the file il_inc.h must be included in all application </p>
<p>components  that  want  to  use  Interaction  Layer  functionality.  The  file  can_inc.h  (which </p>
<p>provides the CAN Driver interface and data buffers) must not be included separately, it is </p>
<p>automatically included by il_inc.h. </p>
<p> </p>
<p>Figure 4-1 </p>
<p>Including Interaction Layer </p>
<p><b>4.2 </b></p>
<p><b>Scope of Delivery </b></p>
<p>The delivery of the Interaction Layer contains the files which are described in the chapters </p>
<p>4.2.1 and 4.2.2: </p>
<p><b>4.2.1 </b></p>
<p><b>Static Files </b></p>
<p><b>File Name </b></p>
<p><b>Description </b></p>
<p>il_inc.h </p>
<p>This is the header file to be included by other components to use the Interaction </p>
<p>Layer. </p>
<p>il_def.h </p>
<p>This is the header file of the Interaction Layer. </p>
<p>il.c </p>
<p>This is the source file of the Interaction Layer. </p>
<p>Table 4-1  </p>
<p>Static files </p>
<p><b>4.2.2 </b></p>
<p><b>Dynamic Files </b></p>
<p>The dynamic files are generated by the configuration tool GENy. </p>
<p><b>File Name </b></p>
<p><b>Description </b></p>
<p>il_cfg.h </p>
<p>This is the generated header file containing pre-compile switches. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>55 / 115 </p>
<p><b>File Name </b></p>
<p><b>Description </b></p>
<p>il_par.h </p>
<p>This is the generated header file providing symbolic defines, macros and </p>
<p>prototypes. </p>
<p>il_par.c </p>
<p>This is the generated source file containing generated parameters and functions. </p>
<p>Table 4-2  </p>
<p>Generated files </p>
<p><b>4.3 </b></p>
<p><b>Operating Systems Requirements </b></p>
<p>The  CAN  communication  components  are  designed  and  programmed  to  work  with  or </p>
<p>without  operating  systems.  Since  the  components  have  to  work  without  an  operating </p>
<p>system, </p>
<p>resource </p>
<p>locking </p>
<p>mechanisms </p>
<p>are </p>
<p>not </p>
<p>handled. </p>
<p>To </p>
<p>lock </p>
<p>critical </p>
<p>resources, </p>
<p>interrupts  will  be  disabled  and  restored.  The  CAN  driver  (Data  Link  Layer)  provides </p>
<p>functions to fulfil this task. </p>
<p>Each component has one or two functions (tasks) which have to be called periodically. For </p>
<p>operating  systems  it  is  advisable  to  create  one  task  and  call  all  the  Interaction  Layer</p>
<p> </p>
<p>component  functions  subsequently.  To  implement  different  periods  of  time,  the  OS  task </p>
<p>could have a counter to implement this. </p>
<p><b>Data consistency issues: </b></p>
<p>Cyclic  IL  tasks  are  not  allowed  to  interrupt  signal  accesses.  This  has  the  following </p>
<p>consequences: </p>
<p><b>&gt; </b> No cyclic IL task shall be called on Interrupt level e.g. directly in a timer ISR. </p>
<p><b>&gt; </b> In a priority driven multitasking operating system with preemptive scheduling such as </p>
<p>OSEK-OS cyclic IL tasks should have a lower priority than the tasks performing signal </p>
<p>accesses. </p>
<p>To ensure data consistency on pre-emptive multi-tasking operating systems or when using </p>
<p>IL signal access services on interrupt level, there are two things to keep in mind. </p>
<p><b>&gt; </b> The Interaction Layer provides mechanisms to keep data consistency on multi-byte </p>
<p>signals. That means, reading multi-byte data is always done while interrupts are locked. </p>
<p>In that case, no task switch can occur. The disadvantage to that mechanism is a longer </p>
<p>interrupt latency time. If your system is critical to long latency times, ensure that your </p>
<p>system works properly in all cases. </p>
<p><b>&gt; </b> Bit field manipulation is done by macros. Some compilers and processors realize bit </p>
<p>field manipulation by read-modify-write accesses. If data access to bit fields in the same </p>
<p>byte is used in pre-emptive tasks or on interrupt level, a problem could be caused. Try </p>
<p>to avoid this or make resource locking to such accesses.  </p>
<p>These  issues  can  be  circumvented  by  using  the  Interaction  Layer  API  only  in  non-</p>
<p>preemptive tasks. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>56 / 115 </p>
<p><b>5 </b></p>
<p><b>Configuration </b></p>
<p>In the Interaction Layer the attributes can be configured with the following methods: </p>
<p><b>&gt; </b> Configuration in GENy for a detailed description see 5.2 Configuration with GENy </p>
<p><b>&gt; </b> Configuration in Database, for a detailed description see chapter 5.1 Configuration in </p>
<p>Data Base </p>
<p><b>5.1 </b></p>
<p><b>Configuration in Data Base </b></p>
<p>The following attributes can be used to configure the Interaction Layer in the DBC file. </p>
<p> </p>
<p> </p>
<p><b>Info</b> </p>
<p>Bold Value Types should be Used as default. Value Types marked with * are available </p>
<p>for CANgen compatibility reasons. </p>
<p> </p>
<p><b> </b></p>
<p> </p>
<p><b>Caution </b></p>
<p>Don’t mix up the order of enumeration values. Not the value of the attribute is </p>
<p>interpreted, the position of the selected value. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Caution </b></p>
<p>The “Type of Object” can be configured in the dbc file for some attributes as “Signal” or </p>
<p>“Node – Mapped Rx Signal”. Use only one “Type of Object” in a single dbc file. If the </p>
<p>“Type of Object” is “Signal”, the attribute must be defined in the dbc file for each Ecu. </p>
<p>Due to this, replace &lt;ECU&gt; in the attribute name by the Node name. </p>
<p><b> </b></p>
<p> </p>
<p><b>Name </b></p>
<p><b>ILUsed </b></p>
<p><b>Description </b></p>
<p>This attribute must be defined, to use the Vector Interaction Layer with this </p>
<p>node. </p>
<p>0 : The node is cannot be used with the Interaction Layer </p>
<p>1 : The node is can be used with the Interaction Layer </p>
<p><b>Type Of Object </b></p>
<p>Node </p>
<p><b>Value Type </b></p>
<p>Enumeration </p>
<p><b>Default </b></p>
<p>No </p>
<p><b>Values </b></p>
<p>No, Yes </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>57 / 115 </p>
<p><b>Name </b></p>
<p><b>GenMsgILSupport </b></p>
<p><b>Description </b></p>
<p>Configurate the usage of the Interaction Layer for this message </p>
<p>0 : The message is not used by the Interaction Layer </p>
<p>1 : The message is used by the Interaction Layer </p>
<p><b>Type Of Object </b></p>
<p>Message </p>
<p><b>Value Type </b></p>
<p>Enumeration </p>
<p><b>Default </b></p>
<p>Yes </p>
<p><b>Values </b></p>
<p>No, Yes </p>
<p> </p>
<p><b>5.1.1 </b></p>
<p><b>Send Type </b></p>
<p> </p>
<p> </p>
<p><b>Info</b> </p>
<p>The strings used for the GenMsgSendType is often OEM-specific and can differ from </p>
<p>here. </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenMsgSendType </b></p>
<p><b>Description </b></p>
<p>Message related transmission mode. </p>
<p>Use only Cyclic for messages with multiplexed signals. </p>
<p><b>Type Of Object </b></p>
<p>Message </p>
<p><b>Value Type </b></p>
<p>Enumeration </p>
<p><b>Default </b></p>
<p>NoMsgSendType (Use only signal related transmission modes.) </p>
<p><b>Values </b></p>
<p>Cyclic, NotUsed, NotUsed, NotUsed, NotUsed, NotUsed, NotUsed, IfActive, </p>
<p>NoMsgSendType </p>
<p> </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenSigSendType </b></p>
<p><b>Description </b></p>
<p>Signal related transmission mode. </p>
<p>Use only NoSigSendType for messages with multiplexed signals. </p>
<p><b>Type Of Object </b></p>
<p>Signal </p>
<p><b>Value Type </b></p>
<p>Enumeration </p>
<p><b>Default </b></p>
<p>NoSigSendType </p>
<p><b>Values </b></p>
<p>Cyclic, OnWrite, OnWriteWithRepetition, OnChange, </p>
<p>OnChangeWithRepetition, IfActive, IfActiveWithRepetition, NoSigSendType, </p>
<p>OnChangeAndIfActive, OnChangeAndIfActiveWithRepetition </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>58 / 115 </p>
<p><b>5.1.2 </b></p>
<p><b>Send Type Dependent </b></p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenMsgCycleTime </b></p>
<p><b>Description </b></p>
<p>Time in ms between each cyclic transmission of a message. </p>
<p><b>Type Of Object </b></p>
<p>Message </p>
<p><b>Value Type </b></p>
<p>Integer </p>
<p><b>Default </b></p>
<p>0 </p>
<p><b>Minimum </b></p>
<p>0 </p>
<p><b>Maximum </b></p>
<p>65535 </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenMsgCycleTimeFast </b></p>
<p><b>Description </b></p>
<p>Value of the second cycle time, if the GenMsgSendType/GenMsgSendType  </p>
<p>IfActive or GenMsgFastOnStart is configured. </p>
<p><b>Type Of Object </b></p>
<p>Message </p>
<p><b>Value Type </b></p>
<p>Integer </p>
<p><b>Default </b></p>
<p>0 </p>
<p><b>Minimum </b></p>
<p>0 </p>
<p><b>Maximum </b></p>
<p>65535 </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenMsgNrOfRepetition </b></p>
<p><b>Description </b></p>
<p>Number of repetitions used if the GenSigSendType is </p>
<p>OnChangeWithRepetition, OnWriteWithRepetition, IfActiveWithRepetition or </p>
<p>OnChangeAndIfActiveWithRepetition is defined. </p>
<p>The number of repetitions can be configured separately for each message. To </p>
<p>reduce Rom and Ram requirements configure the same number for each </p>
<p>message. </p>
<p>This value defines how often a message is sent before its transmission is </p>
<p>stopped. See e.g. Figure 3-7 </p>
<p>Timing Diagram of OnEvent with Repetition - </p>
<p><b>OnWrite</b>. </p>
<p><b>Type Of Object </b></p>
<p>Message </p>
<p><b>Value Type </b></p>
<p>Integer </p>
<p><b>Default </b></p>
<p>0 </p>
<p><b>Minimum </b></p>
<p>0 </p>
<p><b>Maximum </b></p>
<p>65535 </p>
<p> </p>
<p> </p>
<p><b>Caution </b></p>
<p>Please note, the attribute GenSigStartValue sets the Default value at initialization time, </p>
<p>not if IlRxStart or IlTxStart is called. Due to historical and compatibility reasons, this </p>
<p>confusing definition cannot be changed any more.<b> </b></p>
<p>     </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>59 / 115 </p>
<p><b>Name </b></p>
<p><b>GenSigStartValue </b></p>
<p><b>Description </b></p>
<p>This Value is the default value for the signal, if IlInitPowerOn is called. </p>
<p>The string value type can represent hexadecimal and integer values. </p>
<p><b>Type Of Object </b></p>
<p>Signal </p>
<p><b>Value Type </b></p>
<p><b>String</b>, Integer*, Float* </p>
<p><b>Default </b></p>
<p>0x0 </p>
<p><b>Minimum </b></p>
<p>0x0 </p>
<p><b>Maximum </b></p>
<p>0xffffffffffffffff </p>
<p>    </p>
<p><b>Name </b></p>
<p><b>GenSigInactiveValue </b></p>
<p><b>Description </b></p>
<p>Value for which Transmit Fast If Active will be set inactive. It is not </p>
<p>recommended to use Hex values, due to the range restriction. </p>
<p>The string value type can represent hexadecimal and integer values. The </p>
<p>usage of the hex value is not recommended, because it cannot represent </p>
<p>values greater than 0x7fffffff. </p>
<p><b>Type Of Object </b></p>
<p>Signal </p>
<p><b>Value Type </b></p>
<p><b>String</b>, Hex* </p>
<p><b>Default </b></p>
<p>0x0 </p>
<p><b>Minimum </b></p>
<p>0x0 </p>
<p><b>Maximum </b></p>
<p>0xffffffffffffffff  Hex : 0x7fffffff </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenSigTimeoutValue </b></p>
<p><b>Description </b></p>
<p>This Value is the timeout default value for the signal, if a timeout occurs. </p>
<p>The integer value allows the definition of timeout values for signals with a </p>
<p>maximum Length of 4 Bytes. </p>
<p><b>Type Of Object </b></p>
<p>Signal </p>
<p><b>Value Type </b></p>
<p>Integer </p>
<p><b>Default </b></p>
<p>0x0 </p>
<p><b>Minimum </b></p>
<p>0x0 </p>
<p><b>Maximum </b></p>
<p>4294967296 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>60 / 115 </p>
<p><b>5.1.3 </b></p>
<p><b>Advanced Attributes </b></p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenMsgDelayTime </b></p>
<p><b>Description </b></p>
<p>This is the minimum time in ms between the transmissions of messages with </p>
<p>the same identifier. </p>
<p><b>Type Of Object </b></p>
<p>Message </p>
<p><b>Value Type </b></p>
<p>Integer </p>
<p><b>Default </b></p>
<p>0 </p>
<p><b>Minimum </b></p>
<p>0 </p>
<p><b>Maximum </b></p>
<p>65535 </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenMsgStartDelayTime </b></p>
<p><b>Description </b></p>
<p>This is the time in ms after IlTxStart has been called, when the cyclic </p>
<p>transmission event starts. </p>
<p>If a transmission is triggered by OnEvent, OnEventWithRepetition, IfActive, </p>
<p>IfActiveWithRepetition within the MsgStartDelayTime, the transmission is not </p>
<p>performed within the GenMsgStartDelayTime. </p>
<p><b>Type Of Object </b></p>
<p>Message </p>
<p><b>Value Type </b></p>
<p>Integer </p>
<p><b>Default </b></p>
<p>0 </p>
<p><b>Minimum </b></p>
<p>0 </p>
<p><b>Maximum </b></p>
<p>65535 </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenMsgFastOnStart </b></p>
<p><b>Description </b></p>
<p>This is the time in ms after IlTxStart has been called, where the message is </p>
<p>transmitted cyclic with GenMsgCycleTimeFast. </p>
<p>The value has to be an integer multiple of GenMsgCycleTimeFast. </p>
<p><b>Type Of Object </b></p>
<p>Message </p>
<p><b>Value Type </b></p>
<p>Integer </p>
<p><b>Default </b></p>
<p>0 </p>
<p><b>Minimum </b></p>
<p>0 </p>
<p><b>Maximum </b></p>
<p>65535 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>61 / 115 </p>
<p><b>5.1.4 </b></p>
<p><b>Timeout Supervision Attributes </b></p>
<p>    </p>
<p><b>Name </b></p>
<p><b>ILTxTimeout </b></p>
<p><b>Description </b></p>
<p>Value of the timeout time in ms for Tx used for all messages within the </p>
<p>channel. To use the timeout monitoring it must be activated for each signal in </p>
<p>the Configuration Tool. </p>
<p><b>Type Of Object </b></p>
<p>Network </p>
<p><b>Value Type </b></p>
<p>Integer </p>
<p><b>Default </b></p>
<p>0 </p>
<p><b>Minimum </b></p>
<p>0 </p>
<p><b>Maximum </b></p>
<p>65535 </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenSigTimeoutMsg_&lt;ECU&gt; </b></p>
<p><b>Description </b></p>
<p>Message ID to enable the timeout monitoring for signals which are not </p>
<p>transmitted periodically by the receiver &lt;ECU&gt;. If this attribute is set to default </p>
<p>the message will chosen, which contains the current signal. </p>
<p>If you must reference extended IDs, use the following representation format, </p>
<p>where the CAN identifier is combined with 0x80000000 by a logical or.  </p>
<p>Example: ID 0x208 is used for the standard ID and ID 0x80000208 for the </p>
<p>extended ID. </p>
<p><b>Type Of Object </b></p>
<p>Signal </p>
<p><b>Value Type </b></p>
<p>Hex </p>
<p><b>Default </b></p>
<p>0 </p>
<p><b>Minimum </b></p>
<p>0x80000000 </p>
<p><b>Maximum </b></p>
<p>0xfffffff </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenSigTimeoutMsg </b></p>
<p><b>Description </b></p>
<p>Message ID to enable the timeout monitoring for signals which are not </p>
<p>transmitted periodically by the receiver Ecu. If this attribute is set to default the </p>
<p>message will chosen, which contains the current signal. </p>
<p>If you must reference extended IDs, use the following representation format, </p>
<p>where the CAN identifier is combined with 0x80000000 by a logical or.  </p>
<p>Example: ID 0x208 is used for the standard ID and ID 0x80000208 for the </p>
<p>extended ID. </p>
<p><b>Type Of Object </b></p>
<p>Node – Mapped Rx Signal </p>
<p><b>Value Type </b></p>
<p>Hex </p>
<p><b>Default </b></p>
<p>0 </p>
<p><b>Minimum </b></p>
<p>0x80000000 </p>
<p><b>Maximum </b></p>
<p>0xfffffff </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>62 / 115 </p>
<p> </p>
<p><b>Please note </b></p>
<p>The database attribute GenSigTimeoutMsg has the following limitations: </p>
<p>Relations to messages containing multiplexed signals are not supported. </p>
<p>Relations from messages containing multiplexed signals are not supported. </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenSigTimeoutTime_&lt;ECU&gt; </b></p>
<p><b>Description </b></p>
<p>Timeout time in ms used for this signal received by &lt;ECU&gt;. </p>
<p>If different GenSigTimeoutTime_&lt;ECU&gt; values are configured for a message, </p>
<p>the lowest timeout time (strongest definition) is used for timeout monitoring. </p>
<p>The value of the attribute is displayed as Timeout Time on each RxSignal in </p>
<p>the GENy GUI. </p>
<p><b>Type Of Object </b></p>
<p>Signal </p>
<p><b>Value Type </b></p>
<p>Integer </p>
<p><b>Default </b></p>
<p>0 </p>
<p><b>Minimum </b></p>
<p>0 </p>
<p><b>Maximum </b></p>
<p>65535 </p>
<p><b> </b></p>
<p>Please note </p>
<p>If the timeout time on a RxSignal is editable, the value is not derived from the </p>
<p>database attribute GenSigTimeoutTime_&lt;ECU&gt;. </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenSigTimeoutTime </b></p>
<p><b>Description </b></p>
<p>Timeout time in ms used for this signal received by Ecu. </p>
<p>If different GenSigTimeoutTime values are configured for a message, the </p>
<p>lowest timeout time (strongest definition) is used for timeout monitoring. </p>
<p><b>Type Of Object </b></p>
<p>Node – Mapped Rx Signal </p>
<p><b>Value Type </b></p>
<p>Integer </p>
<p><b>Default </b></p>
<p>0 </p>
<p><b>Minimum </b></p>
<p>0 </p>
<p><b>Maximum </b></p>
<p>65535 </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>63 / 115 </p>
<p><b>Name </b></p>
<p><b>GenSigSuprvResp </b></p>
<p><b>Description </b></p>
<p>This value preconfigurates the timeout flag and timeout default value. </p>
<p>0 : Preconfigurate nothing </p>
<p>1 : A timeout flag is configured for the signal </p>
<p>2 : A timeout default value is configured for the signal </p>
<p>3 : A timeout flag and timeout default value is configured for the signal </p>
<p><b>Type Of Object </b></p>
<p>Node – Mapped Rx Signal </p>
<p><b>Value Type </b></p>
<p>Enumeration </p>
<p><b>Default </b></p>
<p>None </p>
<p><b>Values </b></p>
<p>None, TimeoutFlag, TimeoutDefaultValue, TimeoutFlag and </p>
<p>TimeoutDefaultValue </p>
<p> </p>
<p><b>Name </b></p>
<p><b>GenSigSuprvRespSubValue </b></p>
<p><b>Description </b></p>
<p>This Value is the timeout default value for the signal, if a timeout occurs. </p>
<p>The integer value allows the definition of timeout values for signals with a </p>
<p>maximum Length of 4 Bytes. </p>
<p><b>Type Of Object </b></p>
<p>Node – Mapped Rx Signal </p>
<p><b>Value Type </b></p>
<p>Integer </p>
<p><b>Default </b></p>
<p>0x0 </p>
<p><b>Minimum </b></p>
<p>0x0 </p>
<p><b>Maximum </b></p>
<p>4294967296 </p>
<p> </p>
<p><b>5.1.5 </b></p>
<p><b>Former Attributes </b></p>
<p>The following attributes are not supported any more. </p>
<p><b>Name </b></p>
<p><b>GenMsgNoIalSupport </b></p>
<p><b>Replaced by </b></p>
<p>GenMsgILSupport </p>
<p><b>Description </b></p>
<p>GenMsgILSupport is the inverted view of the attribute GenMsgNoIalSupport. </p>
<p> </p>
<p><b>5.1.6 </b></p>
<p><b>Example </b></p>
<p>A signal A and a signal B are included in the message XY. Signal A should be transmitted </p>
<p>periodically by the cycle time of 50ms. Signal B should be transmitted each time an event </p>
<p>occurs.  </p>
<p>For signal A we chose the Periodic Transmission Mode (Transmission Modes see chapter </p>
<p>3.7.2). For the event driven transmission of signal B, the Direct Transmission Mode will fit </p>
<p>best. </p>
<p>Next </p>
<p>step </p>
<p>is </p>
<p>to </p>
<p>choose </p>
<p>the </p>
<p>attributes </p>
<p>for </p>
<p>this </p>
<p>constellation. </p>
<p>To </p>
<p>chose </p>
<p>the </p>
<p>Periodic </p>
<p>Transmission  Mode  for  signal A  we  need  to  set  the  GenSigSendType  to  Cyclic  and  the </p>
<p>GenMsgCycleTime to 200 [ms]. To choose the Direct Transmission Mode for signal B we </p>
<p>need to set the GenSigSendType to OnWrite. This will result to the attributes listed in the </p>
<p>table below. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>64 / 115 </p>
<p> </p>
<p><b>Node Attribute </b></p>
<p><b>Value </b></p>
<p><b>Comment </b></p>
<p><b>ILUsed </b></p>
<p>Yes </p>
<p>Yes, use the Interaction Layer within </p>
<p>this network node. </p>
<p> </p>
<p><b>Attribute for Message XY </b></p>
<p><b>Value </b></p>
<p><b>Comment </b></p>
<p><b>GenMsgDelayTime </b></p>
<p>Yes </p>
<p>not necessary for this example </p>
<p><b>GenMsgCycleTime </b></p>
<p>50 [ms] </p>
<p>Value of the cycle time of the </p>
<p>message. There can’t be signals with </p>
<p>different cycle times combined in one </p>
<p>message. Therefore this is the cycle </p>
<p>time of signal A. </p>
<p><b>GenMsgCycleTimeFast </b></p>
<p> </p>
<p>not necessary for this example </p>
<p><b>GenMsgStartDelayTime </b></p>
<p> </p>
<p>not necessary for this example </p>
<p><b>GenMsgILSupport </b></p>
<p>Yes </p>
<p>Enable the usage of the Interaction </p>
<p>Layer for this message (for messages </p>
<p>used by diagnosis, network </p>
<p>management ...). </p>
<p><b>GenMsgNrOfRepetition </b></p>
<p> </p>
<p>not necessary for this example </p>
<p><b>GenMsgSendType </b></p>
<p>NoMsgSendType </p>
<p>We use only signal related </p>
<p>transmission modes within this </p>
<p>example. Therefore, see </p>
<p>GenSigSendType. </p>
<p> </p>
<p><b>Attribute for Signal A </b></p>
<p><b>Value </b></p>
<p><b>Comment </b></p>
<p><b>GenSigSendType </b></p>
<p>Cyclic </p>
<p>Use the Periodic Transmission Mode </p>
<p>for signal A. </p>
<p><b>GenSigInactiveValue  </b></p>
<p> </p>
<p>not necessary for this example </p>
<p><b>GenSigTimeoutMsg_&lt;ECU&gt; </b></p>
<p> </p>
<p>not necessary for this example </p>
<p><b>GenSigTimeoutTime_&lt;ECU&gt; </b></p>
<p> </p>
<p>not necessary for this example </p>
<p><b>Attribute for Signal B </b></p>
<p><b>Value </b></p>
<p><b>Comment </b></p>
<p><b>GenSigSendType </b></p>
<p>OnWrite </p>
<p>Use the Direct Transmission Mode for </p>
<p>signal B. </p>
<p><b>GenSigInactiveValue  </b></p>
<p> </p>
<p>not necessary for this example </p>
<p><b>GenSigTimeoutMsg_&lt;ECU&gt; </b></p>
<p> </p>
<p>not necessary for this example </p>
<p><b>GenSigTimeoutTime_&lt;ECU&gt; </b></p>
<p> </p>
<p>not necessary for this example </p>
<p> </p>
<p>The result of combining signal A and signal B with different Transmission Modes to one </p>
<p>message  XY  will  be  shown  in  the  timing  diagram  below.  The  dashed  lines  are  used  in </p>
<p>consideration of signal A. The solid lines are used in consideration of signal B. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>65 / 115 </p>
<p> </p>
<p>Figure 5-1 </p>
<p>A Signal with the Periodic Transmission Mode and one with the Direct Transmission Mode Combined to a message. </p>
<p><b>5.2 </b></p>
<p><b>Configuration with GENy </b></p>
<p> </p>
<p><b>Info</b> </p>
<p>The detailed information for all checkboxes and settings is given in the so-called </p>
<p>OnScreen Help view of GENy just by clicking the checkbox or the name of the switch. </p>
<p>This is activated via <b>View | OnScreen Help</b>. </p>
<p>Information about how to work with GENy can be found in the OnlineHelp of GENy </p>
<p>opened via <b>Help | Help topics</b>. </p>
<p> </p>
<p> </p>
<p>Figure 5-2 </p>
<p>OnScreen Help View for fast information </p>
<p>In the Configuration Tool GENy all settings for the Vector Interaction Layer are done via </p>
<p>the marked tree items. </p>
<p>Message XY</p>
<p>Application</p>
<p>Interaction Layer</p>
<p>Data Link Layer</p>
<p>ILPutA</p>
<p>Message XY</p>
<p>50ms</p>
<p>ILPutB</p>
<p>GenMsgCycleTime</p>
<p>signal A</p>
<p>50ms</p>
<p>50ms</p>
<p>ILPutA</p>
<p>ILPutB</p>
<p>ILPutA</p>
<p>ILPutA</p>
<p>50ms</p>
<p>ILPutB</p>
<p>ILPutB</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>66 / 115 </p>
<p> </p>
<p>Figure 5-3 </p>
<p>Overview of Vector Interaction Layer Configuration in GENy </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>67 / 115 </p>
<p><b>IL Vector </b></p>
<p>Configure the basic settings for the Vector Interaction Layer. Use the OnScreen Help View </p>
<p>of GENy to get more information about each option. </p>
<p> </p>
<p><b>Support for AUTOSAR</b> </p>
<p>The Vector Interaction Layer can be configured to support a signal API according to the </p>
<p>AUTOSAR Specification of Module COM [8]. This has effects on the signal API, see </p>
<p>more there… </p>
<p> </p>
<p><b>Channels </b></p>
<p>Define the task call cycle times. </p>
<p><b>Tx/Rx Messages </b></p>
<p>Most  of  those  entries  are  fixed  and  already  set  in  the  DBC  file  and  explained  for </p>
<p>information only. </p>
<p><b>Tx/Rx Signals </b></p>
<p>This  is  where  to  configure  the  settings  for  the  signals,  its  access  macros,  the  way  of </p>
<p>notification, etc. </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>ModuleInstance &gt; Il_Vector </p>
<p>User Config File </p>
<p>String </p>
<p>N.a. </p>
<p>The Interaction Layer configuration file (il_cfg.h) is </p>
<p>generated by GENy. If you want to overwrite settings in the </p>
<p>generated Il_Vector configuration file (il_cfg.h), you can </p>
<p>specify a path to a user defined configuration file. </p>
<p> </p>
<p>The user defined configuration file will be included at the </p>
<p>end of the generated file il_cfg.h. Therefore definitions in </p>
<p>the user defined configuration file can overwrite definitions </p>
<p>in the generated configuration file. </p>
<p>Start/Stop API </p>
<p>Boolean </p>
<p>false </p>
<p>The two API functions 'IlStartCycle' and 'IlStopCycle' are </p>
<p>enabled which enable or disable the transmission of one </p>
<p>single cyclic message. This option is necessary for </p>
<p>software tests or special use cases. It is recommended not </p>
<p>to use this option. </p>
<p>Timeout Monitoring on </p>
<p>first Reception </p>
<p>Boolean </p>
<p>false </p>
<p>If this option is enabled timeout monitoring of a message is </p>
<p>started when this message is received for the first time. </p>
<p>Normally timeout monitoring starts after the Rx part of the </p>
<p>Interaction Layer is started or resumed. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Classes &gt; State Machine Transition </p>
<p>Init </p>
<p>Boolean </p>
<p>false </p>
<p>This callback function is called after the Interaction Layer </p>
<p>has been initialized. The callback function itself </p>
<p>(ApplIlInit()) must be provided by the application. </p>
<p>Rx Start </p>
<p>Boolean </p>
<p>false </p>
<p>This callback function is called if the Rx branch of the </p>
<p>Interaction layer is started. The callback function </p>
<p>(ApplIlRxStart()) itself must be provided by the application. </p>
<p>Tx Start </p>
<p>Boolean </p>
<p>false </p>
<p>This callback function is called if the Tx branch of the </p>
<p>Interaction layer is started. The callback function itself </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>68 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>(ApplIlTxStart()) must be provided by the application. </p>
<p>Rx Stop </p>
<p>Boolean </p>
<p>false </p>
<p>This callback function is called if the Rx branch of the </p>
<p>Interaction layer is stopped. The callback function itself </p>
<p>(ApplIlRxStop()) must be provided by the application. </p>
<p>Tx Stop </p>
<p>Boolean </p>
<p>false </p>
<p>This callback function is called if the Tx branch of the </p>
<p>Interaction layer is stopped. The callback function itself </p>
<p>(ApplIlTxStop()) must be provided by the application. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Debug Support </p>
<p>Argument Check </p>
<p>Boolean </p>
<p>false </p>
<p>Used to enable extended checks of the arguments passed </p>
<p>to functions of the Interaction Layer. If an error was </p>
<p>detected, the return value of the functions will contain an </p>
<p>error code. This option should be used for debugging </p>
<p>purposes only and not in production code. </p>
<p>Assertion Handling </p>
<p>Boolean </p>
<p>false </p>
<p>The SW component provides built-in debug support </p>
<p>(assertion) to ease up the integration and test into the </p>
<p>user's project.  </p>
<p>Please see the technical reference for detailed information </p>
<p>on the available options and how to use them. </p>
<p> </p>
<p>In general, the usage of assertions is recommended during </p>
<p>the integration and pre-test phases. It is not recommended </p>
<p>to enable the assertions in production code due to </p>
<p>increased runtime and ROM needs. </p>
<p> </p>
<p>The assertion checks the correctness of the assigned </p>
<p>condition and calls an error handler in case this fails. The </p>
<p>error handler is called with an error number. Information </p>
<p>about the defined error numbers is given in the technical </p>
<p>reference. </p>
<p>ModuleInstance &gt; Il_Vector </p>
<p>AUTOSAR Signal API </p>
<p>Boolean </p>
<p>false </p>
<p>Configure the Vector Interaction Layer to support the signal </p>
<p>access as defined in the AUTOSAR Specification of </p>
<p>Module COM Version 1.0.0. </p>
<p>Efficient macros are additionally generated if Put/Get </p>
<p>signal access is configured. </p>
<p> </p>
<p>A signal is written using: </p>
<p>Com_ReturnType Com_SendSignal(&lt;SigName&gt;, </p>
<p>&amp;&lt;data&gt;); </p>
<p> </p>
<p>A signal is read using </p>
<p>Com_ReturnType Com_ReceiveSignal(&lt;SigName&gt;, </p>
<p>&amp;&lt;data&gt;); </p>
<p> </p>
<p>Please see the documentation chapter 'AUTOSAR Signal </p>
<p>Interface'. </p>
<p>AUTOSAR </p>
<p>Specification Version </p>
<p>Enum </p>
<p>N.a. </p>
<p>Select the AUTOSAR COM interface that shall be provided </p>
<p>by the Il_Vector. </p>
<p>Detect Active </p>
<p>Repetitions API </p>
<p>Boolean </p>
<p>false </p>
<p>If this option is enabled an API is activated, to detect, if </p>
<p>messages are transmitted with repetitions and the </p>
<p>repetitions are active. </p>
<p> </p>
<p>API: </p>
<p>1 Channel :Il_Boolean IlTxRepetitionsAreActive() </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>69 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>2..N Channels  :Il_Boolean </p>
<p>IlTxRepetitionsAreActive(&lt;channel&gt;) </p>
<p>Detect Active Signals </p>
<p>API </p>
<p>Boolean </p>
<p>false </p>
<p>If this option is enabled an API is activated, to detect, if </p>
<p>signals are active and transmitted with the fast cycle time. </p>
<p> </p>
<p>API: </p>
<p>1 Channel :Il_Boolean IlTxSignalsAreActive() </p>
<p>2..N Channels  :Il_Boolean </p>
<p>IlTxSignalsAreActive(&lt;channel&gt;) </p>
<p>Reset Rx Timeout </p>
<p>Flags On IlRxRelease </p>
<p>Boolean </p>
<p>false </p>
<p>If this option is enabled and the transition IlRxRelease is </p>
<p>performed all rx timeout flags on the channel are cleared. </p>
<p> </p>
<p>Enable  </p>
<p>UpdateBit Support </p>
<p>Boolean </p>
<p>false </p>
<p>This option enables UpdateBit Support </p>
<p>Channel &gt; Il_Vector &gt; Task Call Cycle Time </p>
<p>IlRxTask [ms] </p>
<p>Integer </p>
<p>10 </p>
<p>This is the time base of the receive branch of the </p>
<p>Interaction Layer. </p>
<p> </p>
<p>Make sure that the value you enter here in the Generation </p>
<p>Tool is the same as the cycle time for calling the function </p>
<p>'IlRxTask'. If it is not, the timing of the receive branch in the </p>
<p>IL will not work properly (e.g. for timeout monitoring). All </p>
<p>timings of the Rx branch (e.g. timeouts) must be a multiple </p>
<p>of this cycle time. </p>
<p> </p>
<p>If you enter e.g. 10 [ms] in the Generation Tool the function </p>
<p>'IlRxTask' must be called every 10ms. </p>
<p>IlTxTask [ms] </p>
<p>Integer </p>
<p>10 </p>
<p>This is the time base of the transmit branch of the </p>
<p>Interaction Layer. </p>
<p> </p>
<p>Make sure that the value you enter here in the Generation </p>
<p>Tool is the same as the cycle time for calling the function </p>
<p>'IlTxTask'. If it is not, the timing of the transmit branch in </p>
<p>the IL will not work properly (e.g. wrong timing of cylic send </p>
<p>messages). All timings of the Tx branch (e.g. cycle times of </p>
<p>transmit messages) must be a multiple of this cycle time. </p>
<p> </p>
<p>If you enter e.g. 10 [ms] in the Generation Tool the function </p>
<p>'IlTxTask' must be called every 10ms. </p>
<p>Message &gt; Il_Vector &gt; Database Attributes </p>
<p>CycleTime [ms] </p>
<p>Integer </p>
<p>0 </p>
<p>The CANdb attribute 'GenMsgCycleTime' is displayed as </p>
<p>defined in the dbc file. This value is only relevant for </p>
<p>messages with a cyclic transmission mode. For other </p>
<p>messages '0' is displayed. </p>
<p>CycleTimeFast [ms] </p>
<p>Integer </p>
<p>0 </p>
<p>The CANdb attribute 'GenMsgCycleTimeFast' is displayed </p>
<p>as defined in the dbc file. This value is only relevant for </p>
<p>messages with a transmission mode including a fast cyclic </p>
<p>rate. For other messages '0' is displayed. </p>
<p>DelayTime [ms] </p>
<p>Integer </p>
<p>0 </p>
<p>The CANdb attribute 'GenMsgDelayTime' is displayed as </p>
<p>defined in the dbc file. This attribute defines the minimum </p>
<p>transmit delay between two subsequent messages of the </p>
<p>same ID. </p>
<p>FastOnStart [ms] </p>
<p>Integer </p>
<p>0 </p>
<p>The CANdb attribute 'GenMsgFastOnStart' is displayed as </p>
<p>defined in the dbc file. 'GenMsgFastOnStart' is the duration </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>70 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>in ms of a startup phase in which the message is </p>
<p>transmitted with a higher rate (GenMsgCycleTimeFast). </p>
<p>NrOfRepetition </p>
<p>Integer </p>
<p>0 </p>
<p>The CANdb attribute 'GenMsgNrOfRepetition' is displayed </p>
<p>as defined in the dbc file. This attribute defines the number </p>
<p>of repetitions of a message caused by signal updates of </p>
<p>signals which have transmission modes with repetition. </p>
<p>TxMessage &gt; Il_Vector </p>
<p>Polling </p>
<p>Boolean </p>
<p>true </p>
<p>The Interaction Layer confirmation of the sent message is </p>
<p>handled in the CAN driver confirmation context. This </p>
<p>context depends on the CAN driver Tx polling </p>
<p>configuration. For details please see the CAN driver </p>
<p>documentation. </p>
<p> </p>
<p>CAN driver Tx polling is activated </p>
<p>=========================== </p>
<p>If IL polling is activated, the message confirmation is </p>
<p>handled via the CAN driver confirmation flag that is polled </p>
<p>in the 'IlTxTask'. The Interaction Layer notification is </p>
<p>separated from the initial event. </p>
<p> </p>
<p>If IL polling is deactivated, the message confirmation is </p>
<p>handled via the CAN driver confirmation function that is </p>
<p>called directly by the CAN driver in its own polling context. </p>
<p> </p>
<p>CAN driver Tx polling is deactivated </p>
<p>============================= </p>
<p>If IL polling is activated, the message confirmation is </p>
<p>handled via the CAN driver confirmation flag that is polled </p>
<p>in the 'IlTxTask'. This is to minimize the interrupt load. </p>
<p> </p>
<p>If IL polling is deactivated, the message confirmation is </p>
<p>handled via the CAN driver confirmation function that is </p>
<p>called directly by the CAN driver in the interrupt context. </p>
<p>Disabling the polling results in longer ISR run times. </p>
<p> </p>
<p>PLEASE NOTE: </p>
<p>The implemented application code in this context must be </p>
<p>programmed interrupt context secure. </p>
<p> </p>
<p> </p>
<p>It's recommended to use the default. </p>
<p>Send on Init </p>
<p>Boolean </p>
<p>false </p>
<p>If you enable the attribute 'Send on Init' the selected Tx </p>
<p>message is added to the set of messages which will be </p>
<p>transmitted when 'IlSendOnInitMsg()' is called. </p>
<p>If the DBC attribute &quot;NetworkInitialization” is available at a </p>
<p>message, the value of  “Send on Init” is derived of this dbc </p>
<p>attribute. </p>
<p>TxMessage &gt; Il_Vector &gt; Database Attributes </p>
<p>StartDelayTime [ms] </p>
<p>Integer </p>
<p>0 </p>
<p>The CANdb attribute 'GenMsgStartDelayTime' is displayed </p>
<p>as defined in the dbc file. This attribute defines the time </p>
<p>between 'IlTxStart()' and the begin of the cyclic </p>
<p>transmission of a message. </p>
<p>RxMessage &gt; Il_Vector </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>71 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>Polling </p>
<p>Boolean </p>
<p>false </p>
<p>The Interaction Layer indication of the receive message is </p>
<p>handled in the CAN driver indication context. This context </p>
<p>depends on the CAN driver Rx polling configuration. For </p>
<p>details please see the CAN driver documentation. </p>
<p> </p>
<p>CAN driver Rx polling is activated </p>
<p>=========================== </p>
<p>If IL polling is activated, the message indication is handled </p>
<p>via the CAN driver indication flag that is polled in the </p>
<p>'IlRxTask'. The Interaction Layer notification is separated </p>
<p>from the initial event. </p>
<p> </p>
<p>If IL polling is deactivated, the message indication is </p>
<p>handled via the CAN driver indication function that is called </p>
<p>directly by the CAN driver in its own polling context. </p>
<p> </p>
<p>CAN driver Rx polling is deactivated </p>
<p>============================= </p>
<p>If IL polling is activated, the message indication is handled </p>
<p>via the CAN driver indication flag that is polled in the </p>
<p>'IlRxTask'. This is to minimize the interrupt load. </p>
<p> </p>
<p>If IL polling is deactivated, the message indication is </p>
<p>handled via the CAN driver indication function that is called </p>
<p>directly by the CAN driver in the interrupt context. </p>
<p>PLEASE NOTE: </p>
<p>The implemented application code in this context must be </p>
<p>programmed interrupt context secure. </p>
<p> </p>
<p> </p>
<p>It's recommended to use the default. </p>
<p>RxMessage &gt; Il_Vector &gt; Notification Classes </p>
<p>Timeout Function </p>
<p>String </p>
<p> </p>
<p>If a valid function name is defined in the IL 'Timeout </p>
<p>Function' field, this function is called by the Interaction </p>
<p>Layer when a timeout of this receive message occurs. The </p>
<p>timeout time for this message is defined in the data base </p>
<p>file (dbc). </p>
<p> </p>
<p>API: void Appl&lt;MsgName&gt;MsgTimeout(void) </p>
<p>MsgSignal &gt; Il_Vector &gt; Database Attributes </p>
<p>InactiveValue </p>
<p>String </p>
<p>0 </p>
<p>The CANdb attribute 'GenSigInactiveValue' is displayed as </p>
<p>defined in the dbc file. This attribute is relevant for signals </p>
<p>with the transmission mode 'IfActive'. </p>
<p>RxSignal &gt; Il_Vector &gt; Signal Access </p>
<p>Put </p>
<p>Boolean </p>
<p>false </p>
<p>The generation of signal value write access macros and - </p>
<p>functions for receive signals can be enabled or disabled. If </p>
<p>enabled, the Generation Tool will generate macros and </p>
<p>functions for signal access using the signal names in the </p>
<p>network data base (macros or functions, depending on the </p>
<p>type of the signal). </p>
<p> </p>
<p>API: </p>
<p> </p>
<p>Length </p>
<p>&lt;=1Byte void IlPutRx&lt;SigName&gt;(vuint8 data) </p>
<p>1Byte&lt; </p>
<p>Length </p>
<p>&lt;=2Byte void IlPutRx&lt;SigName&gt;(vuint16 </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>72 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>data) </p>
<p>2Byte&lt; </p>
<p>Length </p>
<p>&lt;=4Byte void IlPutRx&lt;SigName&gt;(vuint32 </p>
<p>data) </p>
<p>4Byte&lt; </p>
<p>Length </p>
<p> </p>
<p>void IlPutRx&lt;SigName&gt;(vuint8* </p>
<p>pData) </p>
<p> </p>
<p>If the AUTOSAR signal API is enabled, set the signal value </p>
<p>via </p>
<p>Com_ReturnType Com_SendSignal(&lt;SigName&gt;, </p>
<p>&amp;&lt;data&gt;); </p>
<p> </p>
<p>Please see the documentation of Il_Vector, chapter </p>
<p>'AUTOSAR Signal Interface'. </p>
<p>Get </p>
<p>Boolean </p>
<p>true </p>
<p>The generation of signal value read access macros and - </p>
<p>functions for receive signals can be enabled or disabled. If </p>
<p>enabled, the Generation Tool will generate macros and </p>
<p>functions for signal access using the signal names in the </p>
<p>network data base (macros or functions, depending on the </p>
<p>type of the signal). </p>
<p> </p>
<p>API: </p>
<p> </p>
<p>Length </p>
<p>&lt;=1Byte vuint8 IlGetRx&lt;SigName&gt;(void) </p>
<p>1Byte&lt; </p>
<p>Length </p>
<p>&lt;=2Byte vuint16</p>
<p> </p>
<p>IlGetRx&lt;SigName&gt;(void) </p>
<p>2Byte&lt; </p>
<p>Length </p>
<p>&lt;=4Byte vuint32</p>
<p> </p>
<p>IlGetRx&lt;SigName&gt;(void) </p>
<p>4Byte&lt; </p>
<p>Length </p>
<p> </p>
<p>void IlGetRx&lt;SigName&gt;(vuint8* </p>
<p>pData) </p>
<p> </p>
<p>If the AUTOSAR signal API is enabled, read the signal </p>
<p>value via </p>
<p>Com_ReturnType Com_ReceiveSignal(&lt;SigName&gt;, </p>
<p>&amp;&lt;data&gt;) </p>
<p> </p>
<p>Please see the documentation of Il_Vector, chapter </p>
<p>'AUTOSAR Signal Interface'. </p>
<p>RDS </p>
<p>Boolean </p>
<p>false </p>
<p>Enable macros to read from the Rx register of the CAN </p>
<p>controller. This switch will be used for example by the </p>
<p>'DataChanged' flag. </p>
<p> </p>
<p>CAUTION: </p>
<p>Use these macros in a PreCopy function only! </p>
<p> </p>
<p>API: </p>
<p> </p>
<p>Length </p>
<p>&lt;=1Byte vuint8 IlGetRxCAN&lt;SigName&gt;(void) </p>
<p>1Byte&lt; </p>
<p>Length </p>
<p>&lt;=2Byte vuint16</p>
<p> </p>
<p>IlGetRxCAN&lt;SigName&gt;(void) </p>
<p>2Byte&lt; </p>
<p>Length </p>
<p>&lt;=4Byte vuint32</p>
<p> </p>
<p>IlGetRxCAN&lt;SigName&gt;(void) </p>
<p>4Byte&lt; </p>
<p>Length </p>
<p> </p>
<p>void IlGetRxCAN&lt;SigName&gt;(vuint8* </p>
<p>pData) </p>
<p>RxSignal &gt; Il_Vector &gt; Notification Classes &gt; Indication </p>
<p>Flag </p>
<p>Pool </p>
<p>N.a. </p>
<p>If this signal is received, one or more flags with the same </p>
<p>names plus pre- and postfix from the name decorator </p>
<p>configuration view will be set. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>73 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p> </p>
<p>CAUTION: </p>
<p>The flag(s) must be reset by the application. It is </p>
<p>recommended to use the macros for flag manipulation. </p>
<p> </p>
<p>API: </p>
<p>vuint8 IlGetRx&lt;SigName&gt;SigIndication(void) </p>
<p>void IlSetRx&lt;SigName&gt;SigIndication(void) </p>
<p>void IlClrRx&lt;SigName&gt;SigIndication(void) </p>
<p>vuint8 IlGetClrRx&lt;SigName&gt;SigIndication(void) </p>
<p>Function </p>
<p>Pool </p>
<p>N.a. </p>
<p>If this signal is received, one or more functions with these </p>
<p>names plus pre- and postfix from the name decorator </p>
<p>configuration view will be called. </p>
<p> </p>
<p>CAUTION: </p>
<p>- The function(s) may run in interrupt context (if polling is </p>
<p>not activated), so keep action short within. </p>
<p>- If you use more than one indication function they are </p>
<p>called in the order they are displayed in GENy.  </p>
<p> </p>
<p>API: void ApplIl&lt;SigName&gt;SigIndication(void) </p>
<p>RxSignal &gt; Il_Vector &gt; Notification Classes &gt; Firstvalue </p>
<p>Flag </p>
<p>Pool </p>
<p>N.a. </p>
<p>If this signal is received for the first time after the system </p>
<p>startup the 'FirstValue' flag will be set. This flag can not </p>
<p>and should not be reset. The only reset is a restart of the </p>
<p>Interaction Layer. </p>
<p> </p>
<p>API: </p>
<p>vuint8 IlGetRx&lt;SigName&gt;SigFirstvalue(void) </p>
<p>void IlSetRx&lt;SigName&gt;SigFirstvalue(void) </p>
<p>void IlClrRx&lt;SigName&gt;SigFirstvalue(void) </p>
<p>RxSignal &gt; Il_Vector &gt; Notification Classes &gt; DataChanged </p>
<p>Flag </p>
<p>Pool </p>
<p>N.a. </p>
<p>If this signal is received and the new signal value differs </p>
<p>from the current signal value, the 'DataChanged' flag(s) </p>
<p>are set. The name of the flags are built-up using this name </p>
<p>plus pre- and postfixes from the name decorator </p>
<p>configuration view. </p>
<p> </p>
<p>CAUTION: </p>
<p>The flag(s) must be reset by the application. It is </p>
<p>recommended to use the macros for flag manipulation. </p>
<p> </p>
<p>API: </p>
<p>vuint8 IlGetRx&lt;SigName&gt;SigDataChanged(void) </p>
<p>void IlSetRx&lt;SigName&gt;SigDataChanged(void) </p>
<p>void IlClrRx&lt;SigName&gt;SigDataChanged(void) </p>
<p>RxSignal &gt; Il_Vector &gt; Notification Classes &gt; Timeout </p>
<p>Flag </p>
<p>Pool </p>
<p>N.a. </p>
<p>The interaction layer is able to supervise receive signals. If </p>
<p>the message containing the signal is not received within a </p>
<p>(in data base file dbc) predefined time one ore more </p>
<p>timeout flags are set. The name of the flags are built-up </p>
<p>using this name plus pre- and postfixes from the name </p>
<p>decorator configuration view. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>74 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>CAUTION: </p>
<p>The flag(s) must be reset by the application. It is </p>
<p>recommended to use the macros for flag manipulation. </p>
<p> </p>
<p>API: </p>
<p>vuint8 IlGetRx&lt;SigName&gt;SigTimeout(void) </p>
<p>void IlSetRx&lt;SigName&gt;SigTimeout(void) </p>
<p>void IlClrRx&lt;SigName&gt;SigTimeout(void) </p>
<p>Function </p>
<p>Pool </p>
<p>N.a. </p>
<p>The interaction layer is able to supervise receive signals. If </p>
<p>the message containing the signal is not received within a </p>
<p>(in data base file dbc) predefined time one ore more </p>
<p>timeout functions are called. The name of the functions are </p>
<p>built-up using these names plus pre- and postfixes from </p>
<p>the name decorator configuration view. </p>
<p> </p>
<p>CAUTION: </p>
<p>- The function(s) may run in interrupt context (if polling is </p>
<p>not activated), so keep action short within. </p>
<p>- If you use more than one indication function they are </p>
<p>called in the order they are displayed in GENy. </p>
<p> </p>
<p>API: void ApplIl&lt;SigName&gt;SigTimeout(void) </p>
<p>RxSignal &gt; Il_Vector &gt; Notification Classes &gt; State Machine Transition </p>
<p>Init </p>
<p>String </p>
<p> </p>
<p>If you enter a function name you determine for this receive </p>
<p>signal that an init function shall be called after the </p>
<p>Interaction Layer was initialized. The default is the name of </p>
<p>the signal, but you can change this name. The final name </p>
<p>of the function will be determined out of the defined pre- </p>
<p>and postfixes on the name decorator configuration view </p>
<p>and the specified name. </p>
<p> </p>
<p>API: void ApplIl&lt;SigName&gt;RxInit(void) </p>
<p>Start </p>
<p>String </p>
<p> </p>
<p>If you enter a function name you determine for this receive </p>
<p>signal that this start function shall be called after the </p>
<p>Interaction Layer was switched to the running state. The </p>
<p>default is the name of the signal, but you can change this </p>
<p>name. The final name of the function will be determined </p>
<p>out of the defined pre- and postfixes on the name </p>
<p>decorator configuration view and the specified name. </p>
<p> </p>
<p>API: void ApplIl&lt;SigName&gt;RxStart(void) </p>
<p>Stop </p>
<p>String </p>
<p> </p>
<p>If you enter a function name you determine for this receive </p>
<p>signal that this stop function shall be called after the </p>
<p>Interaction Layer was suspended. The default is the name </p>
<p>of the signal, but you can change this name. The final </p>
<p>name of the function will be determined out of the defined </p>
<p>pre- and postfixes on the name decorator configuration </p>
<p>view and the specified name. </p>
<p> </p>
<p>API: void ApplIl&lt;SigName&gt;RxStop(void) </p>
<p>RxSignal &gt; Il_Vector &gt; Default Value </p>
<p>Init </p>
<p>Boolean </p>
<p>false </p>
<p>Use the default values below at initialization time to </p>
<p>initialize the signal buffer. If you enable this feature, the </p>
<p>fields </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>75 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>- Start default </p>
<p>- Stop default </p>
<p>- Default value </p>
<p>will be activated and can be configured, too. </p>
<p>Start </p>
<p>Boolean </p>
<p>false </p>
<p>Use the default value to initialize the signal buffer within </p>
<p>the callcontext of 'IlRxStart()'. To use this option the default </p>
<p>of 'Init' must be used, too. </p>
<p>Stop </p>
<p>Boolean </p>
<p>false </p>
<p>Use the default value, which is set in the callcontext </p>
<p>'IlRxStop()' to initialize the signal buffer. To use this option </p>
<p>the default at 'IlInit()' must be used, too. </p>
<p>Value </p>
<p>String </p>
<p>0 </p>
<p>Use the default value within 'IlInit()', 'IlRxStart()' and </p>
<p>'IlRxStop()' to initialize the signal buffer. The data type of </p>
<p>the default value depends on the data type of the related </p>
<p>signal. </p>
<p>RxSignal &gt; Il_Vector &gt; Default Value &gt; Timeout </p>
<p>Enable </p>
<p>Boolean </p>
<p>false </p>
<p>Use the default value to replace the signal value in case of </p>
<p>a timeout. </p>
<p>Value </p>
<p>String </p>
<p>0x0 </p>
<p>Default value to replace the signal value in case of timeout. </p>
<p>The data type of the default value depends on the data </p>
<p>type of the related signal. The attribute in the data base file </p>
<p>must be set to be able to set the wanted default value. </p>
<p>RxSignal &gt; Il_Vector &gt; API </p>
<p>Dynamic Timeout </p>
<p>Boolean </p>
<p>false </p>
<p>The timeout of the receive signals can be set dynamically. </p>
<p>If enabled an additional API to access the timer is </p>
<p>provided. This functionality is required for special use </p>
<p>cases and should normally be disabled. </p>
<p> </p>
<p>API: </p>
<p>*  IlGetRx&lt;SigName&gt;DynRxTimeout (void) </p>
<p>void IlSetRx&lt;SigName&gt;DynRxTimeout(*) </p>
<p>void IlStartRx&lt;SigName&gt;DynRxTimeout(void) </p>
<p>void IlStopRx&lt;SigName&gt;DynRxTimeout(void) </p>
<p>* This type depends on the configuration. </p>
<p>TxSignal &gt; Il_Vector &gt; Signal Access </p>
<p>Put </p>
<p>Boolean </p>
<p>true </p>
<p>The generation of signal value write access macros and </p>
<p>functions for send signals can be enabled or disabled. If </p>
<p>enabled, the Generation Tool will generate macros and </p>
<p>functions for signal access using the signal names in the </p>
<p>network data base (macros or functions, depending on the </p>
<p>type of the signal). </p>
<p> </p>
<p>API: </p>
<p> </p>
<p>Length </p>
<p>&lt;=1Byte void IlPutTx&lt;SigName&gt;(vuint8 data) </p>
<p>1Byte&lt; </p>
<p>Length </p>
<p>&lt;=2Byte void IlPutTx&lt;SigName&gt;(vuint16 </p>
<p>data) </p>
<p>2Byte&lt; </p>
<p>Length </p>
<p>&lt;=4Byte void IlPutTx&lt;SigName&gt;(vuint32 </p>
<p>data) </p>
<p>4Byte&lt; </p>
<p>Length </p>
<p> </p>
<p>void IlPutTx&lt;SigName&gt;(vuint8* pData) </p>
<p> </p>
<p>If the AUTOSAR signal API is enabled, set the signal value </p>
<p>via </p>
<p>Com_ReturnType Com_SendSignal(&lt;SigName&gt;, </p>
<p>&amp;&lt;data&gt;); </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>76 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p> </p>
<p>For details please see the documentation of Il_Vector, </p>
<p>chapter 'AUTOSAR Signal Interface'. </p>
<p>Get </p>
<p>Boolean </p>
<p>false </p>
<p>The generation of signal value read access macros and </p>
<p>functions for send signals can be enabled or disabled. If </p>
<p>enabled, the Generation Tool will generate macros and </p>
<p>functions for signal access using the signal names in the </p>
<p>network data base (macros or functions, depending on the </p>
<p>type of the signal). </p>
<p> </p>
<p>API: </p>
<p> </p>
<p>Length </p>
<p>&lt;=1Byte vuint8 IlGetTx&lt;SigName&gt;(void) </p>
<p>1Byte&lt; </p>
<p>Length </p>
<p>&lt;=2Byte vuint16</p>
<p> </p>
<p>IlGetTx&lt;SigName&gt;(void) </p>
<p>2Byte&lt; </p>
<p>Length </p>
<p>&lt;=4Byte vuint32</p>
<p> </p>
<p>IlGetTx&lt;SigName&gt;(void) </p>
<p>4Byte&lt; </p>
<p>Length </p>
<p> </p>
<p>void IlGetTx&lt;SigName&gt;(vuint8* pData) </p>
<p> </p>
<p>If the AUTOSAR signal API is enabled, read the signal </p>
<p>value via </p>
<p>Com_ReturnType Com_ReceiveSignal(&lt;SigName&gt;, </p>
<p>&amp;&lt;data&gt;) </p>
<p> </p>
<p>For details please see the documentation of Il_Vector, </p>
<p>chapter 'AUTOSAR Signal Interface'. </p>
<p>RDS </p>
<p>Boolean </p>
<p>false </p>
<p>Macros to write and read the Tx register of the CAN </p>
<p>controller. These macros can only be used in the context of </p>
<p>the PreTransmit function. </p>
<p> </p>
<p>Set API: </p>
<p> </p>
<p>Length </p>
<p>&lt;=1Byte void IlPutTxCAN&lt;SigName&gt;(vuint8 </p>
<p>data) </p>
<p>1Byte&lt; </p>
<p>Length </p>
<p>&lt;=2Byte void </p>
<p>IlPutTxCAN&lt;SigName&gt;(vuint16 data) </p>
<p>2Byte&lt; </p>
<p>Length </p>
<p>&lt;=4Byte void </p>
<p>IlPutTxCAN&lt;SigName&gt;(vuint32 data) </p>
<p>4Byte&lt; </p>
<p>Length </p>
<p> </p>
<p>void IlPutTxCAN&lt;SigName&gt;(vuint8* </p>
<p>pData) </p>
<p>TxSignal &gt; Il_Vector &gt; Notification Classes &gt; Confirmation </p>
<p>Flag </p>
<p>Boolean </p>
<p>false </p>
<p>After successful transmission of a signal, the Interaction </p>
<p>Layer sets the confirmation flag. </p>
<p> </p>
<p>API: </p>
<p>vuint8 IlGetIlTx&lt;SigName&gt;SigConfirmation() </p>
<p>void IlSetIlTx&lt;SigName&gt;SigConfirmation() </p>
<p>void IlClrIlTx&lt;SigName&gt;SigConfirmation() </p>
<p>Function </p>
<p>String </p>
<p> </p>
<p>If you enter a function name you determine for this transmit </p>
<p>signal that a confirmation function shall be called after </p>
<p>transmission of this signal. The default is the name of the </p>
<p>signal, but you can change this name. The final name of </p>
<p>the function will be determined out of the defined pre- and </p>
<p>postfixes on the name decorator configuration view and </p>
<p>the specified name.  </p>
<p> </p>
<p>API: void ApplIl&lt;SigName&gt;SigConfirmation(void) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>77 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>TxSignal &gt; Il_Vector &gt; Notification Classes &gt; Timeout </p>
<p>Flag </p>
<p>Boolean </p>
<p>false </p>
<p>To supervise the actual transmission of signals, a timeout </p>
<p>flag can be configured. If a signal is sent and the </p>
<p>confirmation is not received until timeout, the application </p>
<p>will be notified by this timeout flag. </p>
<p> </p>
<p>API: </p>
<p>vuint8 IlGetIlTx&lt;SigName&gt;SigTimeout() </p>
<p>void IlSetIlTx&lt;SigName&gt;SigTimeout() </p>
<p>void IlClrIlTx&lt;SigName&gt;SigTimeout() </p>
<p>Function </p>
<p>String </p>
<p> </p>
<p>If you enter a function name you determine for this transmit </p>
<p>signal that a timeout function shall be called if the </p>
<p>confirmation will not occur in time. The default is the name </p>
<p>of the signal, but you can change this name. The final </p>
<p>name of the function will be determined out of the defined </p>
<p>pre- and postfixes on the name decorator configuration </p>
<p>view and the specified name. </p>
<p> </p>
<p>API: void ApplIl&lt;SigName&gt;SigTimeout(void) </p>
<p>TxSignal &gt; Il_Vector &gt; Notification Classes &gt; State Machine Transition </p>
<p>Init </p>
<p>String </p>
<p> </p>
<p>If you enter a function name you determine for this transmit </p>
<p>signal that an init function shall be called after the </p>
<p>Interaction Layer was initialized. The default is the name of </p>
<p>the signal, but you can change this name. The final name </p>
<p>of the function will be determined out of the defined pre- </p>
<p>and postfixes on the name decorator configuration view </p>
<p>and the specified name. </p>
<p> </p>
<p>API: void ApplIl&lt;SigName&gt;TxInit(void) </p>
<p>Start </p>
<p>String </p>
<p> </p>
<p>If you enter a function name you determine for this transmit </p>
<p>signal that a start function shall be called after the </p>
<p>Interaction Layer was switched to the running state. The </p>
<p>default is the name of the signal, but you can change this </p>
<p>name. The final name of the function will be determined </p>
<p>out of the defined pre- and postfixes on the name </p>
<p>decorator configuration view and the specified name. </p>
<p> </p>
<p>API: void ApplIl&lt;SigName&gt;TxStart(void) </p>
<p>Stop </p>
<p>String </p>
<p> </p>
<p>If you enter a function name you determine for this transmit </p>
<p>signal that a stop function shall be called after the </p>
<p>Interaction Layer was suspended. The default is the name </p>
<p>of the signal, but you can change this name. The final </p>
<p>name of the function will be determined out of the defined </p>
<p>pre- and postfixes on the name decorator configuration </p>
<p>view and the specified name. </p>
<p> </p>
<p>API: void ApplIl&lt;SigName&gt;TxStop(void) </p>
<p>TxSignal &gt; Il_Vector &gt; Default Value </p>
<p>Init </p>
<p>Boolean </p>
<p>false </p>
<p>Use the default value at initialization time to initialize the </p>
<p>signal buffer. If you activate the initialization default value </p>
<p>handling, the following fields (Start, Stop and Value) will be </p>
<p>enabled and can be configured, too. </p>
<p>Start </p>
<p>Boolean </p>
<p>false </p>
<p>Use the default value to initialize the signal buffer within </p>
<p>the callcontext of 'IlTxStart()'. To use this option 'Init' in </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>78 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>'Default Value' must be activated, too. </p>
<p>Stop </p>
<p>Boolean </p>
<p>false </p>
<p>Use the default value with 'IlTxStop' to initialize the signal </p>
<p>buffer. To use this option 'Init' in 'Default Value' must be </p>
<p>activated, too. </p>
<p>Value </p>
<p>String </p>
<p>0 </p>
<p>Use the default value within 'IlInit()', 'IlTxStart()' and </p>
<p>'IlTxStop()' to initialize the signal buffer. The data type of </p>
<p>the default value depends on the data type of the related </p>
<p>signal. To use this option 'Init' in 'Default Value' must be </p>
<p>activated, too. </p>
<p>MsgSignalContainer &gt; Il_Vector &gt; Signal Access </p>
<p>Shadow Buffer </p>
<p>Boolean </p>
<p>false </p>
<p>If this option is enabled, the appplication has to provide the </p>
<p>shadow buffer for signal groups. </p>
<p>Due to this setting, the signal group API changes. For </p>
<p>detailed information please see the technical reference of </p>
<p>IL_Vector. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; Confirmation </p>
<p>Prefix </p>
<p>String </p>
<p>Appl </p>
<p>Specify the prefix for the signal confirmation function. </p>
<p>Postfix </p>
<p>String </p>
<p>SigConfir</p>
<p>mation </p>
<p>Specify the postfix for the signal confirmation function. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; Indication </p>
<p>Prefix </p>
<p>String </p>
<p>Appl </p>
<p>Specify the prefix for the signal indication function. </p>
<p>Postfix </p>
<p>String </p>
<p>SigIndica</p>
<p>tion </p>
<p>Specify the postfix for the signal indication function. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; Tx Timeout </p>
<p>Signal Prefix </p>
<p>String </p>
<p>Appl </p>
<p>Specify the prefix for the signal based timeout function. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; Rx Timeout </p>
<p>Signal Prefix </p>
<p>String </p>
<p>Appl </p>
<p>Specify the prefix for the signal based timeout function. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; Tx Timeout </p>
<p>Signal Postfix </p>
<p>String </p>
<p>TxSigTim</p>
<p>eout </p>
<p>Specify the postfix for the signal based timeout function. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; Rx Timeout </p>
<p>Signal Postfix </p>
<p>String </p>
<p>RxSigTi</p>
<p>meout </p>
<p>Specify the postfix for the signal based timeout function. </p>
<p>Message Prefix </p>
<p>String </p>
<p>Appl </p>
<p>Specify the prefix for the message based timeout function. </p>
<p>Message Postfix </p>
<p>String </p>
<p>MsgTime</p>
<p>out </p>
<p>Specify the postfix for the message based timeout </p>
<p>function. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; State Machine Transition &gt; Rx Init </p>
<p>Prefix </p>
<p>String </p>
<p>Appl </p>
<p>Specify the prefix for the Rx signal init callback function. </p>
<p>Postfix </p>
<p>String </p>
<p>RxInit </p>
<p>Specify the postfix for the Rx signal init callback function. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; State Machine Transition &gt; Tx Init </p>
<p>Prefix </p>
<p>String </p>
<p>Appl </p>
<p>Specify the prefix for the Tx signal init callback function. </p>
<p>Postfix </p>
<p>String </p>
<p>TxInit </p>
<p>Specify the postfix for the Tx signal init callback function. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; State Machine Transition &gt; Rx Start </p>
<p>Prefix </p>
<p>String </p>
<p>Appl </p>
<p>Specify the prefix for the Rx signal start callback function. </p>
<p>Postfix </p>
<p>String </p>
<p>RxStart </p>
<p>Specify the postfix for the Rx signal start callback function. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>79 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; State Machine Transition &gt; Tx Start </p>
<p>Prefix </p>
<p>String </p>
<p>Appl </p>
<p>Specify the prefix for the Tx signal start callback function. </p>
<p>Postfix </p>
<p>String </p>
<p>TxStart </p>
<p>Specify the postfix for the Tx signal start callback function. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; State Machine Transition &gt; Rx Stop </p>
<p>Prefix </p>
<p>String </p>
<p>Appl </p>
<p>Specify the prefix for the Rx signal stop callback function. </p>
<p>Postfix </p>
<p>String </p>
<p>RxStop </p>
<p>Specify the postfix for the Rx signal stop callback function. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Functions &gt; State Machine Transition &gt; Tx Stop </p>
<p>Prefix </p>
<p>String </p>
<p>Appl </p>
<p>Specify the prefix for the Tx signal stop callback function. </p>
<p>Postfix </p>
<p>String </p>
<p>TxStop </p>
<p>Specify the postfix for the Tx signal stop callback function. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Signal Access &gt; Rx </p>
<p>Get Prefix </p>
<p>String </p>
<p>IlGetRx </p>
<p>Specify the prefix for the Rx signal read access functions </p>
<p>and macros. </p>
<p>Put Prefix </p>
<p>String </p>
<p>IlPutRx </p>
<p>Specify the prefix for the Rx signal write access functions </p>
<p>and macros. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Signal Access &gt; Tx </p>
<p>Get Prefix </p>
<p>String </p>
<p>IlGetTx </p>
<p>Specify the prefix for the Tx signal read access functions </p>
<p>and macros. </p>
<p>Put Prefix </p>
<p>String </p>
<p>IlPutTx </p>
<p>Specify the prefix for the Tx signal write access functions </p>
<p>and macros. </p>
<p>ModuleInstance &gt; Il_Vector &gt; RDS Signal Access </p>
<p>Rx Get Prefix </p>
<p>String </p>
<p>IlGetRxC</p>
<p>AN </p>
<p>Specify the prefix for the Rx signal read access functions </p>
<p>and macros. </p>
<p>Tx Put Prefix </p>
<p>String </p>
<p>IlPutTxC</p>
<p>AN </p>
<p>Specify the prefix for the Tx signal write access functions </p>
<p>and macros. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Signal Access &gt; Rx </p>
<p>SignalGroup Get </p>
<p>Prefix </p>
<p>String </p>
<p>IlGetRx </p>
<p>Specify the prefix for the Rx signal group read access </p>
<p>functions and macros. </p>
<p>SignalGroup Put </p>
<p>Prefix </p>
<p>String </p>
<p>IlPutRx </p>
<p>Specify the prefix for the Rx signal group write access </p>
<p>functions and macros. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Signal Access &gt; Tx </p>
<p>SignalGroup Get </p>
<p>Prefix </p>
<p>String </p>
<p>IlGetTx </p>
<p>Specify the prefix for the Tx signal group read access </p>
<p>functions and macros. </p>
<p>SignalGroup Put </p>
<p>Prefix </p>
<p>String </p>
<p>IlPutTx </p>
<p>Specify the prefix for the Tx signal group write access </p>
<p>functions and macros. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Dynamic Rx Timeout API </p>
<p>Get Prefix </p>
<p>String </p>
<p>IlGetRx </p>
<p>Specify a prefix for the user defined </p>
<p>IlGetRxDynamicTimeout function. </p>
<p>Set Prefix </p>
<p>String </p>
<p>IlSetRx </p>
<p>Specify a  prefix for the user defined </p>
<p>IlSetRxDynamicTimeout function. </p>
<p>Start Prefix </p>
<p>String </p>
<p>IlStartRx </p>
<p>Specify a  prefix for the user defined </p>
<p>IlStartRxDynamicTimeout function. </p>
<p>Stop Prefix </p>
<p>String </p>
<p>IlStopRx </p>
<p>Specify a  prefix for the user defined </p>
<p>IlStopRxDynamicTimeout function. </p>
<p>Postfix </p>
<p>String </p>
<p>DynRxTi</p>
<p>meout </p>
<p>Specify a postfix for the generated DynamicApi </p>
<p>macros/functions. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>80 / 115 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Default </b></p>
<p><b>Value </b></p>
<p><b>Description </b></p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Flags &gt; Prefixes </p>
<p>Get </p>
<p>String </p>
<p>IlGet </p>
<p>Specify the prefix for macros to read flags. </p>
<p>Set </p>
<p>String </p>
<p>IlSet </p>
<p>Specify the prefix for macros to write flags. </p>
<p>Clear </p>
<p>String </p>
<p>IlClr </p>
<p>Specify the prefix for macros to clear flags. </p>
<p>Get + Clear </p>
<p>String </p>
<p>IlGetClr </p>
<p>Specify the prefix for macros to read and clear flags. </p>
<p>ModuleInstance &gt; Il_Vector &gt; Notification Mechanism &gt; Flags &gt; Postfixes </p>
<p>Indication </p>
<p>String </p>
<p>Indicatio</p>
<p>n </p>
<p>Specify the postfix for indication flag macros. </p>
<p>Confirmation </p>
<p>String </p>
<p>Confirma</p>
<p>tion </p>
<p>Specify the postfix for confirmation flag macros. </p>
<p>FirstValue </p>
<p>String </p>
<p>Firstvalu</p>
<p>e </p>
<p>Specify the postfix for FirstValue flag macros. </p>
<p>Tx Timeout </p>
<p>String </p>
<p>TxTimeo</p>
<p>ut </p>
<p>Specify the postfix for Tx timeout flag macros. </p>
<p>Rx Timeout </p>
<p>String </p>
<p>RxTimeo</p>
<p>ut </p>
<p>Specify the postfix for Rx timeout flag macros. </p>
<p>DataChanged </p>
<p>String </p>
<p>DataCha</p>
<p>nged </p>
<p>Specify the postfix for DataChanged flag macros. </p>
<p>MsgSignal &gt; Il_Vector &gt; Database Attributes </p>
<p>MsgSendType </p>
<p>Object </p>
<p>N.a. </p>
<p>CANdb attribute 'GenMsgSendType' </p>
<p>SigSendType </p>
<p>Object </p>
<p>N.a. </p>
<p>CANdb attribute 'GenSigSendType' </p>
<p>Message &gt; Il_Vector &gt; Database Attributes </p>
<p>SendType </p>
<p>Object </p>
<p>N.a. </p>
<p>CANdb attribute 'GenMsgSendType' </p>
<p>Table 5-1  </p>
<p>GENy attributes </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>81 / 115 </p>
<p><b>6 </b></p>
<p><b>API Description </b></p>
<p><b>6.1.1 </b></p>
<p><b>TypeDefinitions </b></p>
<p>The types defined by the Interaction Layer are described in this chapter. </p>
<p><b>Type Name </b></p>
<p><b>C-Type </b></p>
<p><b>Description </b></p>
<p><b>Value Range </b></p>
<p>CanChannelHandle </p>
<p>c-type </p>
<p>Can Driver channel object </p>
<p>identifier. </p>
<p>0..&lt;ChannelIdmax&gt; </p>
<p>Zero-based integer number </p>
<p>IlReceiveHandle </p>
<p>c-type </p>
<p>Interaction Layer Rx message </p>
<p>object identifier. </p>
<p>0..&lt;RxMessageIdmax&gt; </p>
<p>Zero-based integer number </p>
<p>IlTransmitHandle </p>
<p>c-type </p>
<p>Interaction Layer Tx message </p>
<p>object identifier. </p>
<p>0..&lt;TxMessageIdmax&gt; </p>
<p>Zero-based integer number </p>
<p>Il_Status </p>
<p>c-type </p>
<p>Il_Status : the value must be </p>
<p>decoded with the following set </p>
<p>of macros. </p>
<p>The macros will return 0 (false) </p>
<p>or 1 (true).  </p>
<p>- IlIsTxRun(state) : Tx is </p>
<p>running  </p>
<p>- IlIsTxWait(state) : Tx is </p>
<p>waiting  </p>
<p>- IlIsTxSuspend(state) : Tx is </p>
<p>suspended  </p>
<p>- IlIsRxRun(state) : Rx is </p>
<p>running  </p>
<p>- IlIsRxWait(state) : Rx is </p>
<p>waiting  </p>
<p>- IlIsRxSuspend(state) : Rx is </p>
<p>suspended </p>
<p> </p>
<p>Il_Boolean </p>
<p>c-type </p>
<p>A boolean result defined by the </p>
<p>Interaction Layer. </p>
<p>IL_FALSE </p>
<p>IL_TRUE </p>
<p>&quot;_c_&quot; and </p>
<p>the network signal group </p>
<p>name </p>
<p>and the postfix &quot;_buf&quot;. </p>
<p>c-type </p>
<p>The SignalGroupBufferType is </p>
<p>a generated data type for each </p>
<p>signal group. </p>
<p> </p>
<p>tIlModuleContextStructPtr </p>
<p>c-type </p>
<p>pointer to a </p>
<p>tIlModuleContextStruct struct </p>
<p> </p>
<p>Table 6-1  </p>
<p>Type definitions </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>82 / 115 </p>
<p><b>6.1.2 </b></p>
<p><b>Services provided by Interaction Layer </b></p>
<p> </p>
<p><b> </b></p>
<p> </p>
<p><b>Caution </b></p>
<p>The APIs of the IL do not support reentrant calls and must not interrupt each other. </p>
<p>Exceptions are described in the API description. See also chapter 4.3 Operating </p>
<p>Systems Requirements. </p>
<p><b> </b></p>
<p> </p>
<p><b>6.1.2.1 </b></p>
<p><b>IlInitPowerOn </b></p>
<p> </p>
<p><b>IlInitPowerOn </b></p>
<p><b>Prototype </b></p>
<p>void <b>IlInitPowerOn </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method initializes the Il_Vector on all channels. </p>
<p>IlInit is called for every channel. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or Ccl (Communication Control Layer). </p>
<p>Call context </p>
<p>The function must be called with disabled interrupts. </p>
<p>The function must not interrupt IlRxTask, IlRxStateTask, IlTxTask, IlTxStateTask, IlInit, IlRxStart, IlTxStart, </p>
<p>IlRxStop, IlTxStop. </p>
<p> </p>
<p><b>6.1.2.2 </b></p>
<p><b>IlInit </b></p>
<p><b>IlInit </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlInit </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlInit </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>83 / 115 </p>
<p><b>Functional Description </b></p>
<p>This method initializes the Il_Vector on a channel. </p>
<p>Rx and Tx data buffers and flags are set to the initial state. If no default value for a message is defined, the </p>
<p>data buffer is set to 0x00. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application, Ccl (Communication Control Layer) or IlInitPowerOn. </p>
<p>Call context </p>
<p>The function must be called with disabled interrupts. </p>
<p>The function must not interrupt IlRxTask, IlRxStateTask, IlTxTask, IlTxStateTask, IlInitPowerOn, IlRxStart, </p>
<p>IlTxStart, IlRxStop, IlTxStop. </p>
<p> </p>
<p><b>6.1.2.3 </b></p>
<p><b>IlRxStart </b></p>
<p><b>IlRxStart </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlRxStart </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlRxStart </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method enables the reception of messages. The transition &quot;start&quot; of the Rx state machine is </p>
<p>performed. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or Nm (Network Management). </p>
<p>Call context </p>
<p>The function must be called on task level. </p>
<p>The function must not interrupt IlRxTask, IlRxStateTask, IlTxTask, IlTxStateTask, IlInitPowerOn, IlInit, </p>
<p>IlTxStart, IlRxStop, IlTxStop. </p>
<p> </p>
<p><b>6.1.2.4 </b></p>
<p><b>IlTxStart </b></p>
<p><b>IlTxStart </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlTxStart </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlTxStart </b>(CanChannelHandle channel) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>84 / 115 </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method enables the transmission of messages and starts the transmission of periodic messages. The </p>
<p>transition &quot;start&quot; of the Tx state machine is performed. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or Nm (Network Management). </p>
<p>Call context </p>
<p>The function must be called on task level. </p>
<p>The function must not interrupt IlRxTask, IlRxStateTask, IlTxTask, IlTxStateTask, IlInitPowerOn, IlInit, </p>
<p>IlTxStart, IlRxStop, IlTxStop. </p>
<p> </p>
<p><b>6.1.2.5 </b></p>
<p><b>IlRxStop </b></p>
<p><b>IlRxStop </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlRxStop </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlRxStop </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method disables the reception of messages. The transition &quot;stop&quot; of the Rx state machine is </p>
<p>performed. The method is used for example to enter the Sleep Mode of an ECU. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or Nm (Network Management). </p>
<p>Call context </p>
<p>The function must be called on task level. </p>
<p>The function must not interrupt IlRxTask, IlRxStateTask, IlTxTask, IlTxStateTask, IlInitPowerOn, IlInit, </p>
<p>IlTxStart, IlRxStop, IlTxStop. </p>
<p> </p>
<p><b>6.1.2.6 </b></p>
<p><b>IlTxStop </b></p>
<p><b>IlTxStop </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlTxStop </b>(void) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>85 / 115 </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlTxStop </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method disables the transmission of messages (Sleep Mode). The transition &quot;stop&quot; of the Tx state </p>
<p>machine is performed. The method is used for example to enter the Sleep Mode of an ECU. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or Nm (Network Management). </p>
<p>Call context </p>
<p>The function must be called on task level. </p>
<p>The function must not interrupt IlInitPowerOn, IlInit, IlRxTask, IlRxStateTask, IlRxTimerTask, IlTxTask, </p>
<p>IlTxStateTask, IlTxTimerTask, IlRxStart, IlTxStart, IlRxStop </p>
<p> </p>
<p><b>6.1.2.7 </b></p>
<p><b>IlRxWait </b></p>
<p><b>IlRxWait </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlRxWait </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlRxWait </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method halts the timeout monitoring of reception messages. The transition &quot;wait&quot; of the Rx state </p>
<p>machine is performed. The method is used for example when the bus-off mode of an ECU was entered.</p>
<p>‎</p>
<p> </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or Nm (Network Management). </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>86 / 115 </p>
<p><b>6.1.2.8 </b></p>
<p><b>IlTxWait </b></p>
<p><b>IlTxWait </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlTxWait </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlTxWait </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method halts the transmission of messages. The transition &quot;wait&quot; of the Tx state machine is </p>
<p>performed. The method is used for example when the bus-off mode of an ECU was entered. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or Nm (Network Management). </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p><b>6.1.2.9 </b></p>
<p><b>IlRxRelease </b></p>
<p><b>IlRxRelease </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlRxRelease </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlRxRelease </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>The transition &quot;release&quot; of the Rx state machine is performed. </p>
<p>-Restart the Rx Timeout Monitoring </p>
<p>-Clear the timeout flags if IL_ENABLE_SYS_RX_RESET_TIMEOUT_FLAGS_ON_ILRXRELEASE is </p>
<p>defined. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or Nm (Network Management). </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>87 / 115 </p>
<p> </p>
<p><b>6.1.2.10 </b></p>
<p><b>IlTxRelease </b></p>
<p><b>IlTxRelease </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlTxRelease </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlTxRelease </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method resumes the transmission of messages from the &quot;Waiting&quot; state. The transition &quot;release&quot; of the </p>
<p>Tx state machine is performed. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or Nm (Network Management). </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p><b>6.1.2.11 </b></p>
<p><b>IlRxTask </b></p>
<p><b>IlRxTask </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlRxTask </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlRxTask </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method must be called periodically in the Rx task cycle time configured in the generation tool. The </p>
<p>IlRxTimerTask and IlRxStateTask are called by this method. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or Ccl (Communication Control Layer). </p>
<p>Call context </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>88 / 115 </p>
<p>The function must be called on task level. </p>
<p>The function must not interrupt IlRxStateTask, IlTxTask, IlTxStateTask, IlInitPowerOn, IlInit, IlRxStart, </p>
<p>IlTxStart, IlRxStop, IlTxStop </p>
<p> </p>
<p><b>6.1.2.12 </b></p>
<p><b>IlTxTask </b></p>
<p><b>IlTxTask </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlTxTask </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlTxTask </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method must be called periodically in the Tx task cycle time configured in the generation tool. The </p>
<p>IlTxTimerTask and IlTxStateTask are called by this method. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or Ccl (Communication Control Layer). </p>
<p>Call context </p>
<p>The function must be called on task level. </p>
<p>The function must not interrupt IlRxStateTask, IlTxTask, IlTxStateTask, IlInitPowerOn, IlInit, IlRxStart, </p>
<p>IlTxStart, IlRxStop, IlTxStop </p>
<p> </p>
<p><b>6.1.2.13 </b></p>
<p><b>IlRxStateTask </b></p>
<p><b>IlRxStateTask </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlRxStateTask </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlRxStateTask </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method is called periodically by the IlRxTask. The function can be called in a faster rate than the </p>
<p>IlRxTask to check additionally for polled indication events. The usage of the IlRxTask shall be preferred. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>89 / 115 </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or IlRxTask. </p>
<p>Call context </p>
<p>The function must be called on task level. </p>
<p>The function must not interrupt IlRxStateTask, IlTxTask, IlTxStateTask, IlInitPowerOn, IlInit, IlRxStart, </p>
<p>IlTxStart, IlRxStop, IlTxStop </p>
<p> </p>
<p><b>6.1.2.14 </b></p>
<p><b>IlTxStateTask </b></p>
<p><b>IlTxStateTask </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlTxStateTask </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlTxStateTask </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method is called periodically by the IlTxTask. The function can be called in a faster rate, than the </p>
<p>IlTxTask, to check additionally for polled confirmation events. The usage of the IlTxTask shall be preferred. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application or IlTxTask. </p>
<p>Call context </p>
<p>The function must be called on task level. </p>
<p>The function must not interrupt IlRxStateTask, IlTxTask, IlTxStateTask, IlInitPowerOn, IlInit, IlRxStart, </p>
<p>IlTxStart, IlRxStop, IlTxStop </p>
<p> </p>
<p><b>6.1.2.15 </b></p>
<p><b>IlSendOnInitMsg </b></p>
<p><b>IlSendOnInitMsg </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>IlSendOnInitMsg </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>IlSendOnInitMsg </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>90 / 115 </p>
<p><b>Functional Description </b></p>
<p>This method serves to set a transmission request flag for all messages configured as SendOnInit </p>
<p>messages. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application. </p>
<p>Call context </p>
<p>The function must be called on task level. </p>
<p> </p>
<p> </p>
<p><b>6.1.2.16 </b></p>
<p><b>IlGetStatus </b></p>
<p><b>IlGetStatus </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>Il_Status <b>IlGetStatus </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>Il_Status <b>IlGetStatus </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>Il_Status </p>
<p>Il_Status : the value must be decoded with the following set of macros. </p>
<p>The macros will return 0 (false) or 1 (true).  </p>
<p>- IlIsTxRun(state) : Tx is running  </p>
<p>- IlIsTxWait(state) : Tx is waiting  </p>
<p>- IlIsTxSuspend(state) : Tx is suspended  </p>
<p>- IlIsRxRun(state) : Rx is running  </p>
<p>- IlIsRxWait(state) : Rx is waiting  </p>
<p>- IlIsRxSuspend(state) : Rx is suspended </p>
<p><b>Functional Description </b></p>
<p>Gets the current state of the Interaction Layer state machine. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p><b>6.1.2.17 </b></p>
<p><b>IlTxRepetitionsAreActive </b></p>
<p><b>IlTxRepetitionsAreActive </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>Il_Boolean <b>IlTxRepetitionsAreActive </b>(void) </p>
<p>Multi Channel </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>91 / 115 </p>
<p>Indexed (MRC) </p>
<p>Il_Boolean <b>IlTxRepetitionsAreActive </b></p>
<p>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>Il_Boolean </p>
<p>IL_TRUE : Messages with repetitions are queued for transmission. </p>
<p>IL_FALSE : No message with repetitions is queued for transmission. </p>
<p><b>Functional Description </b></p>
<p>This method can be used to detect if messages with repetitions are queued for transmission on a channel. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application. </p>
<p> </p>
<p><b>Caution</b> </p>
<p>The function does not support Virtual Networks. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p><b>6.1.2.18 </b></p>
<p><b>IlTxSignalsAreActive </b></p>
<p><b>IlTxSignalsAreActive </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>Il_Boolean <b>IlTxSignalsAreActive </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>Il_Boolean <b>IlTxSignalsAreActive </b>(CanChannelHandle </p>
<p>channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>Il_Boolean </p>
<p>IL_TRUE : Signals are in the active state. </p>
<p>IL_FALSE : No signal is in the active state. </p>
<p><b>Functional Description </b></p>
<p>This method can be used to detect if signals are active on a channel. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application. </p>
<p> </p>
<p><b>Caution</b> </p>
<p>The function does not support Virtual Networks. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>92 / 115 </p>
<p><b>6.1.3 </b></p>
<p><b>Generated Services provided by the Interaction Layer </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info</b> </p>
<p>The generated service declarators in this chapter are depending on the configuration. </p>
<p><b> </b></p>
<p><b>6.1.3.1 </b></p>
<p><b>Read and Write Signals and Signal Groups </b></p>
<p> </p>
<p><b>WriteSignalByValue </b></p>
<p><b>Prototype </b></p>
<p>void <b>WriteSignalByValue </b>(vuintx sigData) </p>
<p><b>Parameter </b></p>
<p>sigData </p>
<p>new value of the signal. </p>
<p> (vuint8) : The length of the network signal is between 1 and 8 bits. </p>
<p> (vuint16) : The length of the network signal is between 9 and 16 bits. </p>
<p> (vuint32) : The length of the network signal is between 17 and 32 bits. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Write a signal value to the message buffer and evaluate the transmission mode for Tx signals. The function </p>
<p>is generated optimized for the configuration and can be a function like macro or generated function. The </p>
<p>generated prototype declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name </p>
<p>e.g. &lt;IlPutTx&gt;&lt;NetworkSignalName&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p><b>WriteSignalByReference </b></p>
<p><b>Prototype </b></p>
<p>void <b>WriteSignalByReference </b>(vuint8 *pData) </p>
<p><b>Parameter </b></p>
<p>pData </p>
<p>pointer to a vuint8 array with the new value of the signal. The length of the </p>
<p>network signal is between 33 and 64 bits. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>93 / 115 </p>
<p><b>Functional Description </b></p>
<p>Write a signal value to the message buffer and evaluate transmission mode for Tx signals. The function is </p>
<p>generated optimized for the configuration and can be a function like macro or generated function. The </p>
<p>generated prototype declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name </p>
<p>e.g. &lt;IlPutTx&gt;&lt;NetworkSignalName&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p><b>ReadSignalByValue </b></p>
<p><b>Prototype </b></p>
<p>vuintx <b>ReadSignalByValue </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>vuintx </p>
<p>(vuint8) : The length of the network signal is between 1 and 8 bits. </p>
<p>(vuint16) : The length of the network signal is between 9 and 16 bits. </p>
<p>(vuint32) : The length of the network signal is between 17 and 32 bits. </p>
<p><b>Functional Description </b></p>
<p>Read a signal value from the message buffer. The function is generated optimized for the configuration and </p>
<p>can be a function like macro or generated function. The generated prototype declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name </p>
<p>e.g. &lt;IlGetRx&gt;&lt;NetworkSignalName&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p><b>ReadSignalByReference </b></p>
<p><b>Prototype </b></p>
<p>void <b>ReadSignalByReference </b>(vuint8 *pData) </p>
<p><b>Parameter </b></p>
<p>pData </p>
<p>pointer to a vuint8 array where the value of the signal shall be stored. The </p>
<p>length of the network signal is between 33 and 64 bits. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>94 / 115 </p>
<p><b>Functional Description </b></p>
<p>Read a signal value from the message buffer. The generated prototype declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name </p>
<p>e.g. &lt;IlGetRx&gt;&lt;NetworkSignalName&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p><b>WriteGroupedSignalByValue </b></p>
<p><b>Prototype </b></p>
<p>void <b>WriteGroupedSignalByValue </b>(SignalGroupBufferType pBuffer, vuintx </p>
<p>sigData) </p>
<p><b>Parameter </b></p>
<p>pBuffer </p>
<p>pointer to the signal group buffer. </p>
<p> (SignalGroupBufferType) : the generated data type for each signal group. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is enabled in the configuration for the signal group: </p>
<p> The application has to provide a shadow buffer with the generated type. </p>
<p> The generated data type name can be identified by the prefix &quot;_c_&quot; and the </p>
<p>network signal group name and the postfix &quot;_buf&quot;. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is disabled in the configuration for the signal group: </p>
<p> The parameter is omitted and the IL provides the shadow buffer. </p>
<p>sigData </p>
<p>new value of the signal. </p>
<p> (vuint8) : The length of the network signal is between 1 and 8 bits. </p>
<p> (vuint16) : The length of the network signal is between 9 and 16 bits. </p>
<p> (vuint32) : The length of the network signal is between 17 and 32 bits. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Write a grouped signal value to the signal group buffer. The function is generated optimized for the </p>
<p>configuration and can be a function like macro or generated function. The generated prototype declarator is </p>
<p>composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name and </p>
<p>- &quot;ShadowBuffer&quot; e.g. &lt;IlPutTx&gt;&lt;NetworkSignalName&gt;ShadowBuffer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p><b>WriteGroupedSignalByReference </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>95 / 115 </p>
<p><b>Prototype </b></p>
<p>void <b>WriteGroupedSignalByReference </b>(SignalGroupBufferType pBuffer, </p>
<p>vuint8 *pData) </p>
<p><b>Parameter </b></p>
<p>pBuffer </p>
<p>pointer to the signal group buffer. </p>
<p> (SignalGroupBufferType) : the generated data type for each signal group. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is enabled in the configuration for the signal group: </p>
<p> The application has to provide a shadow buffer with the generated type. </p>
<p> The generated data type name can be identified by the prefix &quot;_c_&quot; and the </p>
<p>network signal group name and the postfix &quot;_buf&quot;. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is disabled in the configuration for the signal group: </p>
<p> The parameter is omitted and the IL provides the shadow buffer. </p>
<p>pData </p>
<p>pointer to a vuint8 array with the new value of the signal. The length of the </p>
<p>network signal is between 33 and 64 bits. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Write a grouped signal value to the signal group buffer. The function is generated optimized for the </p>
<p>configuration and can be a function like macro or generated function. The generated prototype declarator is </p>
<p>composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name and </p>
<p>- &quot;ShadowBuffer&quot; </p>
<p>e.g. &lt;IlPutTx&gt;&lt;NetworkSignalName&gt;ShadowBuffer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p><b>ReadGroupedSignalByValue </b></p>
<p><b>Prototype </b></p>
<p>vuintx <b>ReadGroupedSignalByValue </b>(SignalGroupBufferType pBuffer) </p>
<p><b>Parameter </b></p>
<p>pBuffer </p>
<p>pointer to the signal group buffer. </p>
<p> (SignalGroupBufferType) : the generated data type for each signal group. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is enabled in the configuration for the signal group: </p>
<p> The application has to provide a shadow buffer with the generated type. </p>
<p> The generated data type name can be identified by the prefix &quot;_c_&quot; and the </p>
<p>network signal group name and the postfix &quot;_buf&quot;. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is disabled in the configuration for the signal group: </p>
<p> The parameter is omitted and the IL provides the shadow buffer. </p>
<p><b>Return code </b></p>
<p>vuintx </p>
<p>(vuint8) : The length of the network signal is between 1 and 8 bits. </p>
<p>(vuint16) : The length of the network signal is between 9 and 16 bits. </p>
<p>(vuint32) : The length of the network signal is between 17 and 32 bits. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>96 / 115 </p>
<p><b>Functional Description </b></p>
<p>Read a signal value from the message buffer. The function is generated optimized for the configuration and </p>
<p>can be a function like macro or generated function. The generated prototype declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name and </p>
<p>- &quot;ShadowBuffer&quot; </p>
<p>e.g. &lt;IlGetRx&gt;&lt;NetworkSignalName&gt;ShadowBuffer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p><b>ReadGroupedSignalByReference </b></p>
<p><b>Prototype </b></p>
<p>void <b>ReadGroupedSignalByReference </b>(SignalGroupBufferType pBuffer, </p>
<p>vuint8 *pData) </p>
<p><b>Parameter </b></p>
<p>pBuffer </p>
<p>pointer to the signal group buffer. </p>
<p> (SignalGroupBufferType) : the generated data type for each signal group. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is enabled in the configuration for the signal group: </p>
<p> The application has to provide a shadow buffer with the generated type. </p>
<p> The generated data type name can be identified by the prefix &quot;_c_&quot; and the </p>
<p>network signal group name and the postfix &quot;_buf&quot;. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is disabled in the configuration for the signal group: </p>
<p> The parameter is omitted and the IL provides the shadow buffer. </p>
<p>pData </p>
<p>pointer to a vuint8 array where the value of the signal shall be stored. The </p>
<p>length of the network signal is between 33 and 64 bits. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Read a signal value from the message buffer. The generated prototype declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name and </p>
<p>- &quot;ShadowBuffer&quot; </p>
<p>e.g. &lt;IlGetRx&gt;&lt;NetworkSignalName&gt;ShadowBuffer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p><b>WriteSignalGroup </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>97 / 115 </p>
<p><b>Prototype </b></p>
<p>void <b>WriteSignalGroup </b>(SignalGroupBufferType pBuffer) </p>
<p><b>Parameter </b></p>
<p>pBuffer </p>
<p>pointer to the signal group buffer. </p>
<p> (SignalGroupBufferType) : the generated data type for each signal group. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is enabled in the configuration for the signal group: </p>
<p> The application has to provide a shadow buffer with the generated type. </p>
<p> The generated data type name can be identified by the prefix &quot;_c_&quot; and the </p>
<p>network signal group name and the postfix &quot;_buf&quot;. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is disabled in the configuration for the signal group: </p>
<p> The parameter is omitted and the IL provides the shadow buffer. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Write a signal group from the signal group buffer to the message buffer and evaluate the transmission </p>
<p>mode for Tx signals. The generated prototype declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal group name and </p>
<p>- &quot;ShadowBuffer&quot; e.g. &lt;IlPutTx&gt;&lt;NetworkSignalGroupName&gt;ShadowBuffer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p><b>ReadSignalGroup </b></p>
<p><b>Prototype </b></p>
<p>void <b>ReadSignalGroup </b>(SignalGroupBufferType pBuffer) </p>
<p><b>Parameter </b></p>
<p>pBuffer </p>
<p>pointer to the signal group buffer. </p>
<p> (SignalGroupBufferType) : the generated data type for each signal group. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is enabled in the configuration for the signal group: </p>
<p> The application has to provide a shadow buffer with the generated type. </p>
<p> The generated data type name can be identified by the prefix &quot;_c_&quot; and the </p>
<p>network signal group name and the postfix &quot;_buf&quot;. </p>
<p> -&gt;&quot;Shadow Buffer&quot; is disabled in the configuration for the signal group: </p>
<p> The parameter is omitted and the IL provides the shadow buffer. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Read a signal group from the message buffer to the signal group buffer. The generated prototype </p>
<p>declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal group name and </p>
<p>- &quot;ShadowBuffer&quot; </p>
<p>e.g. &lt;IlGetRx&gt;&lt;NetworkSignalGroupName&gt;ShadowBuffer. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>98 / 115 </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function can be called on task and interrupt level. </p>
<p> </p>
<p><b>6.1.3.2 </b></p>
<p><b>Read and Write Signals and SignalGroups in the RDS Buffer. </b></p>
<p> </p>
<p><b>WriteSignalByValue2RDS </b></p>
<p><b>Prototype </b></p>
<p>void <b>WriteSignalByValue2RDS </b>(vuintx sigData) </p>
<p><b>Parameter </b></p>
<p>sigData </p>
<p>new value of the signal. </p>
<p> (vuint8) : The length of the network signal is between 1 and 8 bits. </p>
<p> (vuint16) : The length of the network signal is between 9 and 16 bits. </p>
<p> (vuint32) : The length of the network signal is between 17 and 32 bits. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Write a signal or grouped signal value to the register of the CAN controller. The function is generated </p>
<p>optimized for the configuration and can be a function like macro or generated function. The generated </p>
<p>prototype declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name </p>
<p>e.g. &lt;IlPutTx&gt;&lt;NetworkSignalName&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function must be called in the context of the signals message specific CAN Driver PreTransmit </p>
<p>function. </p>
<p> </p>
<p> </p>
<p><b>WriteSignalByReference2RDS </b></p>
<p><b>Prototype </b></p>
<p>void <b>WriteSignalByReference2RDS </b>(vuint8 *pData) </p>
<p><b>Parameter </b></p>
<p>pData </p>
<p>pointer to a vuint8 array with the new value of the signal. The length of the </p>
<p>network signal is between 33 and 64 bits. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>99 / 115 </p>
<p><b>Functional Description </b></p>
<p>Write a signal or grouped signal value to the register of the CAN controller. The function is generated </p>
<p>optimized for the configuration and can be a function like macro or generated function. The generated </p>
<p>prototype declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name </p>
<p>e.g. &lt;IlPutTx&gt;&lt;NetworkSignalName&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function must be called in the context of the signals message specific CAN Driver PreTransmit </p>
<p>function. </p>
<p> </p>
<p> </p>
<p><b>ReadSignalByValueFromRDS </b></p>
<p><b>Prototype </b></p>
<p>vuintx <b>ReadSignalByValueFromRDS </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>vuintx </p>
<p>(vuint8) : The length of the network signal is between 1 and 8 bits. </p>
<p>(vuint16) : The length of the network signal is between 9 and 16 bits. </p>
<p>(vuint32) : The length of the network signal is between 17 and 32 bits. </p>
<p><b>Functional Description </b></p>
<p>Read a signal or grouped signal value from the register of the CAN controller. The function is generated </p>
<p>optimized for the configuration and can be a function like macro or generated function. The generated </p>
<p>prototype declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name </p>
<p>e.g. &lt;IlGetRx&gt;&lt;NetworkSignalName&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function must be called within the context of the signals message specific CAN Driver PreCopy </p>
<p>function. </p>
<p> </p>
<p> </p>
<p><b>ReadSignalByReferenceFromRDS </b></p>
<p><b>Prototype </b></p>
<p>void <b>ReadSignalByReferenceFromRDS </b>(vuint8 *pData) </p>
<p><b>Parameter </b></p>
<p>pData </p>
<p>pointer to a vuint8 array where the value of the signal shall be stored. The </p>
<p>length of the network signal is between 33 and 64 bits. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>100 / 115 </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Read a signal or grouped signal value from the register of the CAN controller. The length of the network </p>
<p>signal is between 33 and 64 bits. The generated prototype declarator is composed of </p>
<p>- a configurable prefix for writing signals and </p>
<p>- the network signal name </p>
<p>e.g. &lt;IlGetRx&gt;&lt;NetworkSignalName&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the application. </p>
<p>Call context </p>
<p>The function must be called within the context of the signals message specific CAN Driver PreCopy </p>
<p>function. </p>
<p> </p>
<p><b>6.1.3.3 </b></p>
<p><b>Notification Flags of Signals, Signal Groups and Grouped Signals </b></p>
<p> </p>
<p><b>GetNotificationFlag </b></p>
<p><b>Prototype </b></p>
<p>vuint8 <b>GetNotificationFlag </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>vuint8 </p>
<p>(vuint8) 0 : The notification is NOT set. </p>
<p>&gt; 0 : The notification is set. </p>
<p><b>Functional Description </b></p>
<p>This macro is used to detect the notification of a signal, signal group or grouped signal. The generated </p>
<p>prototype declarator is composed of </p>
<p>- a configurable prefix for the notification flag to get flags and </p>
<p>- the network signal, signal group or grouped signal name and </p>
<p>- a configurable postfix for the notification flag. </p>
<p>e.g. &lt;IlGet&gt;&lt;NetworkSignalName&gt;&lt;Indication&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The macro is called by the application. </p>
<p>Call context </p>
<p>The macro can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p><b>SetNotificationFlag </b></p>
<p><b>Prototype </b></p>
<p>void <b>SetNotificationFlag </b>(void) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>101 / 115 </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This macro sets the notification flag of a signal, signal group or grouped signal. The generated prototype </p>
<p>declarator is composed of </p>
<p>- a configurable prefix for the notification flag to set flags and </p>
<p>- the network signal, signal group or grouped signal name and </p>
<p>- a configurable postfix for the notification flag. </p>
<p>e.g. &lt;IlSet&gt;&lt;NetworkSignalName&gt;&lt;Indication&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The macro is called by the application. </p>
<p>Call context </p>
<p>The macro must be called with disabled interrupts or in a non-preemptive task. </p>
<p> </p>
<p> </p>
<p><b>ClearNotificationFlag </b></p>
<p><b>Prototype </b></p>
<p>void <b>ClearNotificationFlag </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This macro clears the notification flag of a signal, signal group or grouped signal. The generated prototype </p>
<p>declarator is composed of </p>
<p>- a configurable prefix for the notification flag to clear flags and </p>
<p>- the network signal, signal group or grouped signal name and </p>
<p>- a configurable postfix for the notification flag. </p>
<p>e.g. &lt;IlClr&gt;&lt;NetworkSignalName&gt;&lt;Indication&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The macro is called by the application. </p>
<p>Call context </p>
<p>The macro must be called with disabled interrupts or in a non-preemptive task. </p>
<p> </p>
<p> </p>
<p><b>GetAndClearNotificationFlag </b></p>
<p><b>Prototype </b></p>
<p>vuint8 <b>GetAndClearNotificationFlag </b>(void) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>102 / 115 </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>vuint8 </p>
<p>(vuint8) 0 : The notification is NOT set </p>
<p>&gt; 0 : The notification is set. </p>
<p><b>Functional Description </b></p>
<p>This macro is used to determine and clear the notification of a signal, signal group or grouped signal. The </p>
<p>generated prototype declarator is composed of </p>
<p>- a configurable prefix for the notification flag to get and clear flags </p>
<p>- and the network signal, signal group or grouped signal name and </p>
<p>- a configurable postfix for the notification flag. </p>
<p>e.g. &lt;IlGetClr&gt;&lt;NetworkSignalName&gt;&lt;Indication&gt; The get and clear macro is only provided for the signal, </p>
<p>signal group or grouped signal indication flag. </p>
<p><b>Particularities and Limitations </b></p>
<p>The macro is called by the application. </p>
<p>Call context </p>
<p>The macro can be called on task and interrupt level. </p>
<p> </p>
<p><b>6.1.3.4 </b></p>
<p><b>Dynamic Rx Timeout </b></p>
<p> </p>
<p><b>GetDynamicRxTimeout </b></p>
<p><b>Prototype </b></p>
<p>IltRxTimeoutCounter <b>GetDynamicRxTimeout </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>IltRxTimeoutCounter </p>
<p>(IltRxTimeoutCounter) The current Rx timeout counter in milliseconds with the </p>
<p>maximum value 65535. </p>
<p><b>Functional Description </b></p>
<p>This method is used to receive the timeout counter in milliseconds for a message. The generated prototype </p>
<p>declarator is composed of </p>
<p>- a configurable prefix for the reception of the dynamic timeout counter and </p>
<p>- the network signal, signal group or grouped signal name and </p>
<p>- a configurable postfix for the dynamic timeout. </p>
<p>e.g. &lt;IlGetRx&gt;&lt;NetworkSignalName&gt;&lt;DynRxTimeout&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The macro is called by the application. </p>
<p> </p>
<p><b>Caution</b> </p>
<p>This API is signal oriented, but the effect will take place for all signals in the message. </p>
<p>Call context </p>
<p>The macro can be called on task and interrupt level. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>103 / 115 </p>
<p> </p>
<p><b>SetDynamicRxTimeout </b></p>
<p><b>Prototype </b></p>
<p>void <b>SetDynamicRxTimeout </b>(IltRxTimeoutCounter msTimer) </p>
<p><b>Parameter </b></p>
<p>msTimer </p>
<p>The new Rx timeout counter in milliseconds with the maximum value 65535. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method is used to set the timeout counter in milliseconds for a message. The generated prototype </p>
<p>declarator is composed of </p>
<p>- a configurable prefix for setting the dynamic timeout counter and </p>
<p>- the network signal, signal group or grouped signal name and </p>
<p>- a configurable postfix for setting the dynamic timeout. </p>
<p>e.g. &lt;IlSetRx&gt;&lt;NetworkSignalName&gt;&lt;DynRxTimeout&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The macro is called by the application. </p>
<p> </p>
<p><b>Caution</b> </p>
<p>This API is signal oriented, but the effect will take place for all signals in the message. </p>
<p>Call context </p>
<p>The macro must be called with disabled interrupts or in a non-preemptive task. </p>
<p> </p>
<p> </p>
<p><b>StartDynamicRxTimeout </b></p>
<p><b>Prototype </b></p>
<p>void <b>StartDynamicRxTimeout </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method is used to start a stopped timeout counter for a message. The generated prototype declarator </p>
<p>is composed of </p>
<p>- a configurable prefix for starting the dynamic timeout counter and </p>
<p>- the network signal, signal group or grouped signal name and </p>
<p>- a configurable postfix for starting the dynamic timeout. </p>
<p>e.g. &lt;IlSetRx&gt;&lt;NetworkSignalName&gt;&lt;DynRxTimeout&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The macro is called by the application. </p>
<p> </p>
<p><b>Caution</b> </p>
<p>This API is signal oriented, but the effect will take place for all signals in the message. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>104 / 115 </p>
<p>Call context </p>
<p>The macro can be called on task and interrupt level. </p>
<p> </p>
<p> </p>
<p><b>StopDynamicRxTimeout </b></p>
<p><b>Prototype </b></p>
<p>void <b>StopDynamicRxTimeout </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method is used to stop the timeout counter for a message. The generated prototype declarator is </p>
<p>composed of </p>
<p>- a configurable prefix for stopping the dynamic timeout counter and </p>
<p>- the network signal, signal group or grouped signal name and </p>
<p>- a configurable postfix for stopping the dynamic timeout. </p>
<p>e.g. &lt;IlSetRx&gt;&lt;NetworkSignalName&gt;&lt;DynRxTimeout&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The macro is called by the application. </p>
<p> </p>
<p><b>Caution</b> </p>
<p>This API is signal oriented, but the effect will take place for all signals in the message. </p>
<p>Call context </p>
<p>The macro can be called on task and interrupt level. </p>
<p> </p>
<p><b>6.1.4 </b></p>
<p><b>Callback Functions </b></p>
<p>All callback functions can be activated or deactivated by a switch in the Configuration Tool. </p>
<p>If a callback function is activated by the user, the application has to provide this function.  </p>
<p><b>6.1.4.1 </b></p>
<p><b>ApplIlInit </b></p>
<p><b>ApplIlInit </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>ApplIlInit </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>ApplIlInit </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>105 / 115 </p>
<p><b>Functional Description </b></p>
<p>This method is called to indicate the performed initialization. </p>
<p><b>Particularities and Limitations </b></p>
<p>none </p>
<p>Call context </p>
<p>The function is called by the IL in the context of IlInit. </p>
<p> </p>
<p><b>6.1.4.2 </b></p>
<p><b>ApplIlRxStart </b></p>
<p><b>ApplIlRxStart </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>ApplIlRxStart </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>ApplIlRxStart </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method is called to indicate the performed transition start for the Rx state machine. </p>
<p><b>Particularities and Limitations </b></p>
<p>none </p>
<p>Call context </p>
<p>The function is called by the IL in the context of IlRxStart. </p>
<p> </p>
<p><b>6.1.4.3 </b></p>
<p><b>ApplIlTxStart </b></p>
<p><b>ApplIlTxStart </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>ApplIlTxStart </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>ApplIlTxStart </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>106 / 115 </p>
<p><b>Functional Description </b></p>
<p>This method is called to indicate the performed transition start for the Tx state machine. </p>
<p><b>Particularities and Limitations </b></p>
<p>none </p>
<p>Call context </p>
<p>The function is called by the IL in the context of IlTxStart. </p>
<p> </p>
<p><b>6.1.4.4 </b></p>
<p><b>ApplIlRxStop </b></p>
<p><b>ApplIlRxStop </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>ApplIlRxStop </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>ApplIlRxStop </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method is called to indicate the performed transition stop for the Rx state machine. </p>
<p><b>Particularities and Limitations </b></p>
<p>none </p>
<p>Call context </p>
<p>The function is called by the IL in the context of IlRxStop. </p>
<p> </p>
<p><b>6.1.4.5 </b></p>
<p><b>ApplIlTxStop </b></p>
<p><b>ApplIlTxStop </b></p>
<p><b>Prototype </b></p>
<p>Single Channel </p>
<p>Single Receive Channel </p>
<p>void <b>ApplIlTxStop </b>(void) </p>
<p>Multi Channel </p>
<p>Indexed (MRC) </p>
<p>void <b>ApplIlTxStop </b>(CanChannelHandle channel) </p>
<p><b>Parameter </b></p>
<p>channel (Indexed) </p>
<p>Handle of the logical Can Driver channel. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>107 / 115 </p>
<p><b>Functional Description </b></p>
<p>This method is called to indicate the performed transition stop for the Tx state machine. </p>
<p><b>Particularities and Limitations </b></p>
<p>none </p>
<p>Call context </p>
<p>The function is called by the IL in the context of IlTxStop. </p>
<p> </p>
<p><b>6.1.4.6 </b></p>
<p><b>ApplIlFatalError </b></p>
<p><b>ApplIlFatalError </b></p>
<p><b>Prototype </b></p>
<p>void <b>ApplIlFatalError </b>(vuint8 errorNumber) </p>
<p><b>Parameter </b></p>
<p>errorNumber </p>
<p>numeric error code </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>If assertions are configured, this function is called to indicate invalid user conditions (API, reentrance), </p>
<p>inconsistent generated data, hardware errors and internal errors. </p>
<p><b>Particularities and Limitations </b></p>
<p>none </p>
<p>Call context </p>
<p>The function is be called by the IL on task and interrupt level. </p>
<p> </p>
<p><b>6.1.5 </b></p>
<p><b>Generated Callback Functions </b></p>
<p>All callback functions can be activated or deactivated by a switch in the Configuration Tool. </p>
<p>If a callback function is activated by the user, the application has to provide this function.  </p>
<p><b> </b></p>
<p> </p>
<p><b>Info</b> </p>
<p>The generated callback declarators in this chapter are depending on the configuration. </p>
<p><b> </b></p>
<p> </p>
<p><b>NotificationFunction </b></p>
<p><b>Prototype </b></p>
<p>void <b>NotificationFunction </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>108 / 115 </p>
<p><b>Functional Description </b></p>
<p>This function is used to determine the notification of a signal, signal group or grouped signal. The </p>
<p>generated prototype declarator is composed of </p>
<p>a configurable prefix for the notification and </p>
<p>the network signal, signal group or grouped signal name and </p>
<p>a configurable postfix for the notification. </p>
<p>e.g. &lt;ApplIl&gt;&lt;NetworkSignalName&gt;&lt;SigIndication&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the IL and implemented by the application. </p>
<p>Call context </p>
<p>The function is called notification class and configuration dependent: </p>
<p>- Indication : </p>
<p>-&gt;Il polling is enabled in the configuration for the message: </p>
<p>The function is called in the context of the IlRxTask or IlRxStateTask. </p>
<p>-&gt;Il polling is disabled in the configuration for the message: </p>
<p>The function is called in the context of the CAN Driver message indication function. </p>
<p>- Confirmation : </p>
<p>-&gt;Il polling is enabled in the configuration for the message: </p>
<p>The function is called in the context of the IlTxTask or IlTxStateTask. </p>
<p>-&gt;Il polling is disabled in the configuration for the message: </p>
<p>The function is called in the context of the CAN Driver message confirmation function. </p>
<p>- RxTimeout : </p>
<p>-&gt;The function is called in the context of the IlRxTask or IlRxTimerTask. </p>
<p>- TxTimeout : </p>
<p>-&gt;The function is called in the context of the IlTxTask or IlTxTimerTask. </p>
<p> </p>
<p> </p>
<p><b>TransitionChangeNotificationFunction </b></p>
<p><b>Prototype </b></p>
<p>void <b>TransitionChangeNotificationFunction </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This function is used to determine the transition change of a signal, signal group or grouped signal. The </p>
<p>generated prototype declarator is composed of </p>
<p>- a configurable prefix for the transition notification and </p>
<p>- the network signal, signal group or grouped signal name and </p>
<p>- a configurable postfix for the transition notification. </p>
<p>e.g. &lt;ApplIl&gt;&lt;NetworkSignalName&gt;&lt;TxStart&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the IL and implemented by the application. </p>
<p>Call context </p>
<p>The function is called in the context of IlInitPowerOn, IlInit, IlRxStart, IlTxStart, IlRxStop, IlTxStop. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>109 / 115 </p>
<p> </p>
<p><b>RxMessageTimeoutFunction </b></p>
<p><b>Prototype </b></p>
<p>void <b>RxMessageTimeoutFunction </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This function is used to determine the Rx timeout of a message. The generated prototype declarator is </p>
<p>composed of </p>
<p>- a configurable prefix for the Rx message timeout and </p>
<p>- the network message name and </p>
<p>- a configurable postfix for the Rx message timeout. </p>
<p>e.g. &lt;ApplIl&gt;&lt;NetworkMessageName&gt;&lt;MsgTimeout&gt;. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the IL and implemented by the application. </p>
<p>Call context </p>
<p>The function is called in the context of the IlRxTask or IlRxTimerTask. </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>110 / 115 </p>
<p><b>7 </b></p>
<p><b>Limitations </b></p>
<p> </p>
<p><b>7.1 </b></p>
<p><b>CANgen Compatibility </b></p>
<p><b>7.1.1 </b></p>
<p><b>Database attributes </b></p>
<p>Signal value definitions are defined sometimes as decimal or hexadecimal value. Due to </p>
<p>this </p>
<p>signal </p>
<p>values </p>
<p>can </p>
<p>be </p>
<p>defined </p>
<p>as </p>
<p>string </p>
<p>attribute </p>
<p>in </p>
<p>the </p>
<p>database. </p>
<p>Both </p>
<p>value </p>
<p>representations are interpreted by GENy. GENy is fully compatible to attributes used with </p>
<p>CANGen. Deviations are described in chapter 5.1.5 Former Attributes. </p>
<p><b>7.1.2 </b></p>
<p><b>Application Code </b></p>
<p>If you want to use your existing application with generated GENy code, pay attention to: </p>
<p>Rx Rds Write access and Tx Rds Read access is not supported any more. </p>
<p>The IlOldstyleAPI is not supported any more. </p>
<p>A strict Naming concept is introduced with GENy. The default Pre- and Postfixes have </p>
<p>changed. (The prefix „_a_“ is now „Appl“) It is possible for you, to restore the CANGen </p>
<p>compatible Pre- and Postfixes in the NameDecorator. </p>
<p>Data Type Prefixes are not supported any more. </p>
<p>The Prefixes of Signal Handles have been changed to „IlTxSigHnd“ and „IlRxSigHnd“ </p>
<p>instead of „ILTx“. </p>
<p>The Can Driver Interface is in GENy strictly separated from the Interaction Layer. Due to </p>
<p>this, a used Appl message must be adapted. </p>
<p><b>&gt; </b> The Can Driver message Indication flag postfix is now separately configurable from </p>
<p>the IL Indication Flag. </p>
<p><b>&gt; </b> If Can Driver Signal access macros are used for signals &lt;= 1 Byte, the function style </p>
<p>interface is not supported any more. The signal value is assigned like a value to a </p>
<p>variable </p>
<p>CANGen supported a configuration switch, to activate the multiple channel interfaces in </p>
<p>single channel configurations. This feature is discontinued in GENy. </p>
<p><b>7.1.3 </b></p>
<p><b>Generator </b></p>
<p><b>&gt; </b> ESCAN00024091 </p>
<p>If “Common Buffer” is configured between Rx or Tx messages which are used in </p>
<p>different identities of the ECU, configure both messages in the CAN Driver as Basic </p>
<p>CAN message and use the same Basic CAN object. </p>
<p><b>&gt; </b> ESCAN00017472 </p>
<p>Do not configure Common Buffer for messages containing multiplexed signals.  </p>
<p><b>&gt; </b> ESCAN00023799 </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>111 / 115 </p>
<p>Do not configure Common Buffer for tx messages which are used in the same identitiy </p>
<p>containing signals the GenSigSendType OnChange or OnChangeWithRepetition. </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>112 / 115 </p>
<p><b>8 </b></p>
<p><b>Glossary and Abbreviations </b></p>
<p><b>8.1 </b></p>
<p><b>Glossary </b></p>
<p><b>Term </b></p>
<p><b>Description </b></p>
<p>API </p>
<p>Application Program Interface, for OSEK: The description of the user </p>
<p>interface to the operating system, communications and network </p>
<p>management functions. </p>
<p>AUTOSAR </p>
<p>Automotive Open System Architecture </p>
<p>bus </p>
<p>Defines what we call internal as channel or connection. </p>
<p>CAN </p>
<p>Controller Area Network protocol originally defined for use as a </p>
<p>communication network for control applications in vehicles. </p>
<p>CANGen </p>
<p>Generation tool for CANbedded components </p>
<p>configuration </p>
<p>The communication configuration adapts the communication stack to the </p>
<p>specific component requirements by means of the Generation Tool. </p>
<p>DBC </p>
<p>CAN data base format of the Vector company which is used by Vector </p>
<p>tools </p>
<p>ESCANXXXXXXXX </p>
<p>Vector PES Clearquest Database ID. Replace XXXXXXXX by the </p>
<p>numeric identifier. </p>
<p>generation tool </p>
<p>See CANgen, DBKOMGen and GENy. The generation tool configures the </p>
<p>communication stack, Flash Bootloader, etc. based on database </p>
<p>attributes (vehicle manufacturer), project settings (module supplier) and </p>
<p>license information (Vector). </p>
<p>GENy </p>
<p>Generation tool for CANbedded and MICROSAR components </p>
<p>ID </p>
<p>Identifier (e.g. Identifier of a CAN message) </p>
<p>manufacturer </p>
<p>Vehicle manufacturer </p>
<p>message </p>
<p>A message is responsible for the logical transmission and reception of </p>
<p>information depending on the restrictions of the physical layer. The </p>
<p>definition of the message contents is part of the data base given by the </p>
<p>vehicle manufacturer. </p>
<p>module </p>
<p>A module designates a controller (Identical with ECU). </p>
<p>MRC </p>
<p>Multiple Receive Channel </p>
<p>MSC </p>
<p>Message Sequence Chart </p>
<p>Mutual exclusion </p>
<p>To modify shared data, a task must be able to get exclusive access for a </p>
<p>limited time, i.e. all other tasks must be excluded to access this data. All </p>
<p>tasks modifying shared data must be able to do this exclusion. Therefore </p>
<p>this exclusion is called mutual exclusion. </p>
<p>Node </p>
<p>A network topological entity. Nodes are connected by data links forming </p>
<p>the network. Each node is separately addressable on the network. </p>
<p>Online </p>
<p>(Normal) state of the data link layer. Application and Network </p>
<p>Management communication are possible. </p>
<p>OSEK </p>
<p>Name of the overall project: Abbreviation of the German term &quot;Offene </p>
<p>Systeme und deren Schnittstellen fÃ¼r die Elektronik im Kraftfahrzeug&quot; - </p>
<p>Open Systems and the Corresponding Interfaces for Automotive </p>
<p>Electronics. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>113 / 115 </p>
<p>Protocol </p>
<p>A formal set of conventions or rules governing the exchange of </p>
<p>information between protocol entities. Protocol comprises syntax and </p>
<p>semantics of the protocol messages as well as the instructions on how to </p>
<p>react to them. </p>
<p>Register </p>
<p>A register is a memory area in the controller, e.g. in the CAN controller. </p>
<p>Distinguish register from Buffer. </p>
<p>Release </p>
<p>State transition of a task from waiting to ready. At least one event has </p>
<p>occurred which a task has waited on. </p>
<p>Request </p>
<p>A service primitive in compliance with the ISO/OSI Reference Mode (ISO </p>
<p>7498). With the service primitive 'request' a service user requests a </p>
<p>service from a service provider. </p>
<p>Resource </p>
<p>Generally, resources are hardware or software components which are </p>
<p>managed by the operating system. The OSEK operating system provides </p>
<p>resources to support task coordination by mutual exclusion of critical </p>
<p>sections. As an example, the scheduler is treated like a resource. A task </p>
<p>which holding the scheduler cannot be interrupted by all other tasks. </p>
<p>Resource Management. Access control for inseparable operations to </p>
<p>jointly used (logic) resources or devices, or for control of a program flow. </p>
<p>Response </p>
<p>A service primitive defined in the ISO/OSI Reference Model (ISO 7498). </p>
<p>The service primitive 'response' is used by a service user in order to reply </p>
<p>to a preceding indication from service provider. </p>
<p>Running </p>
<p>A task state. In the running state, the CPU is assigned to the task, so that </p>
<p>its instructions can be executed. Only one task can be in this state at any </p>
<p>point in time. The state is entered by the state transition start and can be </p>
<p>exited via the state transitions Wait, Preempt or Terminate. </p>
<p>Safety </p>
<p>A situation in which the risk is equal or lower than the limit risk. Risk is a </p>
<p>measure which considers both the probability of an accident and the </p>
<p>expected extend of damage in the case of an accident. The limit risk is </p>
<p>the highest risk which is still justifiable. </p>
<p>Software specification </p>
<p>A software specification is a set of requirements that can be of different </p>
<p>types, as behavior, interfaces, timing constraints, needed resources, </p>
<p>safety, etc. </p>
<p>Start </p>
<p>State transition of a task from ready to running. A ready task selected by </p>
<p>the scheduler is executed. </p>
<p>SWC </p>
<p>Software Component, application software entity in AUTOSAR </p>
<p>Task </p>
<p>A task provides the framework for the execution of functions. Therefore a </p>
<p>task has a context of its own, i.e. a stack, a register retrieval range and a </p>
<p>memory of its own. A task can be executed in principle on a processor </p>
<p>concurrently with other tasks. A task is executed under the control of the </p>
<p>scheduler according to the task priority assigned to it, and to the selected </p>
<p>scheduling policy. A distinction is made between basic tasks and </p>
<p>extended task. </p>
<p>Task level </p>
<p>Processing level where the actual application software, is executed. </p>
<p>Tasks are executed according to the priority assigned to them, and to the </p>
<p>selected scheduling policy. Other processing levels are: Interrupt level </p>
<p>and operating system level. </p>
<p>Task priority </p>
<p>The priority of a task is a measure for the precedence with which the task </p>
<p>is to be executed. In principle, priorities are defined statically. However, in </p>
<p>particular cases (see Priority Ceiling Protocol) a task can be processed </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>114 / 115 </p>
<p>by the operating system with a defined higher priority. As a capability of </p>
<p>the CC, tasks of the same priority are admissible within a system. Tasks </p>
<p>of equal priority are started  according to the order in which they are </p>
<p>called. To this effect, extended tasks which change from the waiting state </p>
<p>into the ready state are treated like new tasks. </p>
<p>Validation </p>
<p>Confirmation by examination and provision of objective evidence that the </p>
<p>particular requirements for a specific intended use are fulfilled. Ensuring </p>
<p>the correctness of a specification. </p>
<p>wait </p>
<p>State transition of a task from running to waiting. The running task </p>
<p>requires an event to continue operation. It causes its transition into the </p>
<p>waiting state by using a system service. </p>
<p>Window </p>
<p>Communication object of the data link layer for sending and receiving NM </p>
<p>messages. </p>
<p> </p>
<p><b>8.2 </b></p>
<p><b>Abbreviations </b></p>
<p><b>Abbreviation </b></p>
<p><b>Description </b></p>
<p>API </p>
<p>Application Programming Interface  </p>
<p>AUTOSAR </p>
<p>Automotive Open System Architecture </p>
<p>BSW </p>
<p>Basis Software </p>
<p>CCL </p>
<p>Communication Control Layer </p>
<p>COM </p>
<p>Communication Layer </p>
<p>CPU </p>
<p>Central Processing Unit </p>
<p>DM </p>
<p>Deadline Monitoring </p>
<p>ECU </p>
<p>Electronic Control Unit </p>
<p>IL </p>
<p>Interaction Layer </p>
<p>IRQ </p>
<p>Interrupt Request </p>
<p>ISO </p>
<p>International Standardization Organization </p>
<p>ISR </p>
<p>Interrupt Service Routine </p>
<p>MICROSAR </p>
<p>Microcontroller Open System Architecture (the Vector AUTOSAR </p>
<p>solution) </p>
<p>NM </p>
<p>Network Management </p>
<p>OEM </p>
<p>Original Equipment Manufacturer </p>
<p>OS </p>
<p>Operating System </p>
<p>OSI </p>
<p>Open Systems Interconnection </p>
<p>RAM </p>
<p>Random Access Memory </p>
<p>RDS </p>
<p>Read Data Segment </p>
<p>ROM </p>
<p>Read-Only Memory </p>
<p>SRS </p>
<p>Software Requirement Specification </p>
<p>SWC </p>
<p>Software Component </p>
<p>SWS </p>
<p>Software specification </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference Vector Interaction Layer  </p>
<p> </p>
<p></p>
<p>2013, Vector Informatik GmbH </p>
<p>Version: 2.10.03 </p>
<p>based on template version 3.7 </p>
<p>115 / 115 </p>
<p><b>9 </b></p>
<p><b>Contact </b></p>
<p>Visit our website for more information on </p>
<p> </p>
<p>&gt;   News </p>
<p>&gt;   Products </p>
<p>&gt;   Demo software </p>
<p>&gt;   Support </p>
<p>&gt;   Training data </p>
<p>&gt;   Addresses </p>
<p> </p>
<p><b>www.vector-informatik.com </b></p>
</body>
</html>
{% endraw %}